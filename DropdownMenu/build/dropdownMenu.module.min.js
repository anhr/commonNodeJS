function myRequest(t){if(this.loadXMLDoc=function(){var t;if(window.XMLHttpRequest){if(!(t=new XMLHttpRequest))throw"new XMLHttpRequest() failed!"}else{if(!window.ActiveXObject)throw"myRequest.loadXMLDoc(...) failed!";if(!(t=this.NewActiveXObject()))throw"NewActiveXObject() failed!"}return t},this.NewActiveXObject=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}return n('This browser does not support XMLHttpRequest. Probably, your security settings do not allow Web sites to use ActiveX controls installed on your computer. Refresh your Web page to find out the current status of your Web page or enable the "Initialize and script ActiveX controls not marked as safe" and "Run Active X controls and plug-ins" of the Security settings of the Internet zone of your browser.'),null},this.XMLHttpRequestStart=function(t,e){this.XMLHttpRequestStop(),this.req.onreadystatechange=t,"onerror"in this.req&&(this.req.onerror=function(t){n("XMLHttpRequest error. url: "+this.url)}),this.XMLHttpRequestReStart(e)},this.getUrl=function(){return void 0!==this.url&&null!=this.url||n("XMLHttpRequest: Invalid url: "+this.url),this.url+(this.params?this.params:"")},this.XMLHttpRequestReStart=function(t){try{if(void 0===t&&(t=!0),this.req.open("GET",this.getUrl(),t),t){"timeout"in this.req&&(this.req.timeout=9e4),"ontimeout"in this.req?this.req.ontimeout=function(){n("XMLHttpRequest timeout")}:(clearTimeout(this.timeout_id_SendReq),this.timeout_id_SendReq=setTimeout(function(){n("XMLHttpRequest timeout 2")},9e4))}this.req.send(null)}catch(t){n(t.message+" url: "+this.url)}},this.XMLHttpRequestStop=function(){null!=this.req&&this.req.abort()},this.ProcessReqChange=function(t){var e=this.req;switch("undefined"==typeof isIE||isIE,e.readyState){case 4:if("unknown"==typeof e.status)return consoleError('typeof XMLHttpRequest status == "unknown"'),!0;if(200==e.status)return clearTimeout(this.timeout_id_SendReq),t(this);n("Invalid XMLHttpRequest status : "+e.status+" url: "+this.url);break;case 1:case 2:case 3:break;case 0:default:throw"processReqChange(); req.readyState = "+e.readyState}return!0},this.processStatus200Error=function(){var t=this.GetElementText("error",!0);return!!t&&(n(t),!0)},this.GetElementText=function(t,e){var r=this.req;if(!r.responseXML)return 1!=e&&n("GetXMLElementText(xmlhttp, "+t+"); xmlhttp.responseXML is null.\nxmlhttp.responseText:\n"+r.responseText),null;var o=r.responseXML.getElementsByTagName(t);if(0==o.length)return 1!=e&&n('GetXMLElementText(xmlhttp, "'+t+'"); element.length == '+o.length),"";for(var a="",i=0;i<o.length;i++)if(void 0===o[i].textContent){if(void 0===o[i].text)return n("GetXMLElementText(xmlhttp, "+t+"); element["+i+"].text) == undefined"),"";""!=a&&(a+=" "),a+=o[i].text}else a+=o[i].textContent;return a},t.data)this.req=t.data.req,this.url=t.data.url,this.params=t.data.params;else try{this.req=this.loadXMLDoc()}catch(t){var e;return e=void 0===t.message?t:t.message,void n("Your browser is too old and is not compatible with our site.\n\n"+window.navigator.appName+" "+window.navigator.appVersion+"\n\n"+e)}function n(e){console.error(e),t.onerror(e)}this.req||consoleError("Invalid myRequest.req: "+this.req)}function sync$1(t,e){!0===(e=e||{}).async&&console.warn("Load file asynchronously is deprecated. Please use fetch."),e.onload=e.onload||function(){},e.onerror=e.onerror||function(){};var n,r=new myRequest(e);return r.url=t,r.XMLHttpRequestStart(function(){r.ProcessReqChange(function(r){r.processStatus200Error()||(n=r.req.responseText,e.onload(n,t))})},void 0!==e.async),n}function escapeHtml(t){return t.replace(/[&<>"'\/]/g,function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"}[t]})}function sync(t,e){if((e=e||{}).onload=e.onload||function(){},e.onerror=e.onerror||function(){},e.appendTo=e.appendTo||document.getElementsByTagName("head")[0],isScriptExists(e.appendTo,t))e.onload();else if(t instanceof Array){for(var n,r={appendTo:e.appendTo,tag:e.tag,onload:function(t,e){console.log("loadScript.sync.onload: "+e)},onerror:function(t){e.onerror(t),n=t}},o=0;o<t.length;o++){var a=t[o];if(loadScriptBase(function(t){t.setAttribute("id",a),t.innerHTML=sync$1(a,r)},r),void 0!==n)break}void 0===n&&e.onload()}else loadScriptBase(function(n){n.setAttribute("id",t),n.innerHTML=sync$1(t,e)},e)}function async(t,e){var n;function r(o){function a(){t instanceof Array&&n<t.length-1?r(t[++n]):e.onload()}isScriptExists(e.appendTo,o,e.onload)?a():loadScriptBase(function(t){t.setAttribute("id",o),t.readyState&&!t.onload?t.onreadystatechange=function(){"complete"==t.readyState&&void 0!==e.onload&&e.onload(),"loaded"==t.readyState&&(setTimeout(e.onload,0),this.onreadystatechange=null)}:(t.onload=function(){console.log("loadScript.async.onload() "+o),void 0!==e.onload&&a()},t.onerror=function(t){var n='loadScript: "'+this.src+'" failed';void 0!==e.onerror&&e.onerror(n,t),console.error(n)}),t.src=o},e)}(e=e||{}).appendTo=e.appendTo||document.getElementsByTagName("head")[0],e.onload=e.onload||function(){},t instanceof Array?r(t[n=0]):r(t)}function loadScriptBase(t,e){if(e.tag=e.tag||{},"string"==typeof e.tag)switch(e.tag){case"style":e.tag={name:"style",attribute:{name:"rel",value:"stylesheet"}};break;default:return void console.error("Invalid options.tag: "+e.tag)}e.tag.name=e.tag.name||"script";var n=document.createElement(e.tag.name);e.tag.attribute=e.tag.attribute||{},e.tag.attribute.name=e.tag.attribute.name||"type",e.tag.attribute.value=e.tag.attribute.value||"text/javascript",n.setAttribute(e.tag.attribute.name,e.tag.attribute.value),t(n),e.appendTo.appendChild(n)}function isScriptExists(t,e,n){for(var r=t.querySelectorAll("script"),o=0;o<r.length;o++){if(r[o].id===e)return!0}return!1}var loadScript={sync:sync,async:async,escapeHtml:escapeHtml},optionsStyle={tag:"style"};const getCurrentScript=function(){if(document.currentScript&&""!==document.currentScript.src)return document.currentScript.src;const t=document.getElementsByTagName("script");return""!==t[t.length-1].src?src:(new Error).stack.match(/(https?:[^:]*)/)[0]},getCurrentScriptPath=function(){const t=getCurrentScript();return t.substring(0,t.lastIndexOf("/"))};var currentScriptPath=getCurrentScriptPath(),arrayPath=currentScriptPath.split(/(.*)(\/build)/);function create(t,e){switch((e=e||{}).elParent=e.elParent||document.querySelector("body"),e.decorations){case"Gradient":case"Transparent":case"Custom":case void 0:break;default:console.error("DropdownMenu.create: Invalid options.decorations: "+e.decorations)}var n,r=document.createElement("menu");function o(){r.style.opacity=1,clearTimeout(n),n=setTimeout(function(){r.style.opacity=0},5e3)}return e.elParent.classList.contains("container")&&(r.className="controls"),e.canvas&&(r.style.opacity=0,e.canvas.onmouseout=function(t){r.style.opacity=0},e.canvas.onmousemove=function(t){o()},r.onmousemove=function(t){o()}),e.elParent.appendChild(r),t.forEach(function(t){function n(t){setTimeout(function(){var e=i.style.display;i.style.display="block",t.up?i.style.top="-"+i.offsetHeight+"px":i.style.top=a.offsetHeight-1+"px",t.left&&(i.style.left=a.offsetWidth-i.offsetWidth+"px"),i.style.display=e},0)}var o,a=document.createElement("span");switch(a.className="menuButton"+(void 0===e.decorations?"":" menuButton"+e.decorations),void 0!==t.style&&(a.style.cssText=t.style),void 0!==t.radio&&(a.style.cssText=t.style),void 0!==t.onclick&&(a.onclick=t.onclick),void 0!==t.id&&(a.id=t.id),"string"==typeof t?o=t:(o=t.name,t.id&&(a.id=t.id),t.title&&(a.title=t.title)),typeof o){case"object":a.appendChild(o);break;case"string":case"undefined":a.innerHTML=o;break;default:console.error("Invalid typeof name: "+typeof o)}if(t.items){var i=document.createElement("span");if(i.className="dropdown-child dropdown-child"+(void 0===e.decorations?"Default":e.decorations),i.title="",a.appendChild(i),t.items.forEach(function(e){var n=document.createElement("nobr");function r(t){return"string"==typeof t?t:!0===t.radio?(t.checked?"◉":"◎")+" "+t.name:!0===t.checkbox?(t.checked?"☑":"☐")+" "+t.name:t.name}"string"==typeof e||(e.name,n.onclick=function(n){!0===e.radio?t.items.forEach(function(t){!0===t.radio&&(function(t){return t||(t=window.event),t.target||t.srcElement}(n)===t.elName?(t.checked=!0,t.elName.classList.add("checked")):(t.checked=!1,t.elName.classList.remove("checked")),t.elName.innerHTML=r(t))}):!0===e.checkbox&&(!0===e.checked?e.elName.classList.add("checked"):e.elName.classList.remove("checked"),e.checked=!e.checked,e.elName.innerHTML=r(e)),e.onclick&&e.onclick(n)}),!0===e.radio&&n.classList.add("radio"),!0===e.checkbox&&n.classList.add("checkbox"),e.id&&(n.id=e.id),e.title&&(n.title=e.title),n.innerHTML=r(e),!0===e.checked&&n.classList.add("checked"),i.appendChild(n),"string"!=typeof e&&(e.elName=n)}),"object"==typeof t.drop)n(t.drop);else switch(t.drop){case"up":n({up:!0});break;case"left":n({left:!0});break;case void 0:setTimeout(function(){i.style.left="-"+a.clientWidth+"px",i.style.top=a.offsetHeight-1+"px"},0);break;default:console.error("Invalid menuItem.drop: "+t.drop)}}r.appendChild(a)}),r}"/build"===arrayPath[2]&&(currentScriptPath=arrayPath[1]),"/canvasMenu"===(arrayPath=currentScriptPath.split(/(.*)(\/canvasMenu)/))[2]&&(currentScriptPath=arrayPath[1]+"/DropdownMenu"),loadScript.sync(currentScriptPath+"/styles/menu.css",optionsStyle),loadScript.sync(currentScriptPath+"/styles/gui.css",optionsStyle),loadScript.sync(currentScriptPath+"/styles/Decorations/transparent.css",optionsStyle),loadScript.sync(currentScriptPath+"/styles/Decorations/gradient.css",optionsStyle);var DropdownMenu={create:create};export{DropdownMenu as default};