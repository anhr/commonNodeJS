{"version":3,"file":"player.module.js","sources":["../../dat/dat.gui.module.js","../../UpDownController.js","../../three.js","../../ScaleController.js","../../PositionController.js","../../dat.gui/CustomController/build/dat.gui.module.js","../../getPosition.js","../../WebGL.js","../../loadFileNodeJS/index.js","../../loadScriptNodeJS/index.js","../../loadScriptNodeJS/loadScript.js","../../colorpicker/colorpicker.js","../../OrbitControls/OrbitControls.js","../../cookieNodeJS/index.js","../../cookieNodeJS/cookie.js","../../lang.js","../../Options.js","../player.js"],"sourcesContent":["/**\r\n * dat-gui JavaScript Controller Library\r\n * http://code.google.com/p/dat-gui\r\n *\r\n * Copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\nfunction ___$insertStyle(css) {\r\n  if (!css) {\r\n    return;\r\n  }\r\n  if (typeof window === 'undefined') {\r\n    return;\r\n  }\r\n\r\n  var style = document.createElement('style');\r\n\r\n  style.setAttribute('type', 'text/css');\r\n  style.innerHTML = css;\r\n  document.head.appendChild(style);\r\n\r\n  return css;\r\n}\r\n\r\nfunction colorToString (color, forceCSSHex) {\r\n  var colorFormat = color.__state.conversionName.toString();\r\n  var r = Math.round(color.r);\r\n  var g = Math.round(color.g);\r\n  var b = Math.round(color.b);\r\n  var a = color.a;\r\n  var h = Math.round(color.h);\r\n  var s = color.s.toFixed(1);\r\n  var v = color.v.toFixed(1);\r\n  if (forceCSSHex || colorFormat === 'THREE_CHAR_HEX' || colorFormat === 'SIX_CHAR_HEX') {\r\n    var str = color.hex.toString(16);\r\n    while (str.length < 6) {\r\n      str = '0' + str;\r\n    }\r\n    return '#' + str;\r\n  } else if (colorFormat === 'CSS_RGB') {\r\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\r\n  } else if (colorFormat === 'CSS_RGBA') {\r\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\r\n  } else if (colorFormat === 'HEX') {\r\n    return '0x' + color.hex.toString(16);\r\n  } else if (colorFormat === 'RGB_ARRAY') {\r\n    return '[' + r + ',' + g + ',' + b + ']';\r\n  } else if (colorFormat === 'RGBA_ARRAY') {\r\n    return '[' + r + ',' + g + ',' + b + ',' + a + ']';\r\n  } else if (colorFormat === 'RGB_OBJ') {\r\n    return '{r:' + r + ',g:' + g + ',b:' + b + '}';\r\n  } else if (colorFormat === 'RGBA_OBJ') {\r\n    return '{r:' + r + ',g:' + g + ',b:' + b + ',a:' + a + '}';\r\n  } else if (colorFormat === 'HSV_OBJ') {\r\n    return '{h:' + h + ',s:' + s + ',v:' + v + '}';\r\n  } else if (colorFormat === 'HSVA_OBJ') {\r\n    return '{h:' + h + ',s:' + s + ',v:' + v + ',a:' + a + '}';\r\n  }\r\n  return 'unknown format';\r\n}\r\n\r\nvar ARR_EACH = Array.prototype.forEach;\r\nvar ARR_SLICE = Array.prototype.slice;\r\nvar Common = {\r\n  BREAK: {},\r\n  extend: function extend(target) {\r\n    this.each(ARR_SLICE.call(arguments, 1), function (obj) {\r\n      var keys = this.isObject(obj) ? Object.keys(obj) : [];\r\n      keys.forEach(function (key) {\r\n        if (!this.isUndefined(obj[key])) {\r\n          target[key] = obj[key];\r\n        }\r\n      }.bind(this));\r\n    }, this);\r\n    return target;\r\n  },\r\n  defaults: function defaults(target) {\r\n    this.each(ARR_SLICE.call(arguments, 1), function (obj) {\r\n      var keys = this.isObject(obj) ? Object.keys(obj) : [];\r\n      keys.forEach(function (key) {\r\n        if (this.isUndefined(target[key])) {\r\n          target[key] = obj[key];\r\n        }\r\n      }.bind(this));\r\n    }, this);\r\n    return target;\r\n  },\r\n  compose: function compose() {\r\n    var toCall = ARR_SLICE.call(arguments);\r\n    return function () {\r\n      var args = ARR_SLICE.call(arguments);\r\n      for (var i = toCall.length - 1; i >= 0; i--) {\r\n        args = [toCall[i].apply(this, args)];\r\n      }\r\n      return args[0];\r\n    };\r\n  },\r\n  each: function each(obj, itr, scope) {\r\n    if (!obj) {\r\n      return;\r\n    }\r\n    if (ARR_EACH && obj.forEach && obj.forEach === ARR_EACH) {\r\n      obj.forEach(itr, scope);\r\n    } else if (obj.length === obj.length + 0) {\r\n      var key = void 0;\r\n      var l = void 0;\r\n      for (key = 0, l = obj.length; key < l; key++) {\r\n        if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) {\r\n          return;\r\n        }\r\n      }\r\n    } else {\r\n      for (var _key in obj) {\r\n        if (itr.call(scope, obj[_key], _key) === this.BREAK) {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  defer: function defer(fnc) {\r\n    setTimeout(fnc, 0);\r\n  },\r\n  debounce: function debounce(func, threshold, callImmediately) {\r\n    var timeout = void 0;\r\n    return function () {\r\n      var obj = this;\r\n      var args = arguments;\r\n      function delayed() {\r\n        timeout = null;\r\n        if (!callImmediately) func.apply(obj, args);\r\n      }\r\n      var callNow = callImmediately || !timeout;\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(delayed, threshold);\r\n      if (callNow) {\r\n        func.apply(obj, args);\r\n      }\r\n    };\r\n  },\r\n  toArray: function toArray(obj) {\r\n    if (obj.toArray) return obj.toArray();\r\n    return ARR_SLICE.call(obj);\r\n  },\r\n  isUndefined: function isUndefined(obj) {\r\n    return obj === undefined;\r\n  },\r\n  isNull: function isNull(obj) {\r\n    return obj === null;\r\n  },\r\n  isNaN: function (_isNaN) {\r\n    function isNaN(_x) {\r\n      return _isNaN.apply(this, arguments);\r\n    }\r\n    isNaN.toString = function () {\r\n      return _isNaN.toString();\r\n    };\r\n    return isNaN;\r\n  }(function (obj) {\r\n    return isNaN(obj);\r\n  }),\r\n  isArray: Array.isArray || function (obj) {\r\n    return obj.constructor === Array;\r\n  },\r\n  isObject: function isObject(obj) {\r\n    return obj === Object(obj);\r\n  },\r\n  isNumber: function isNumber(obj) {\r\n    return obj === obj + 0;\r\n  },\r\n  isString: function isString(obj) {\r\n    return obj === obj + '';\r\n  },\r\n  isBoolean: function isBoolean(obj) {\r\n    return obj === false || obj === true;\r\n  },\r\n  isFunction: function isFunction(obj) {\r\n    return Object.prototype.toString.call(obj) === '[object Function]';\r\n  }\r\n};\r\n\r\nvar INTERPRETATIONS = [\r\n{\r\n  litmus: Common.isString,\r\n  conversions: {\r\n    THREE_CHAR_HEX: {\r\n      read: function read(original) {\r\n        var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\r\n        if (test === null) {\r\n          return false;\r\n        }\r\n        return {\r\n          space: 'HEX',\r\n          hex: parseInt('0x' + test[1].toString() + test[1].toString() + test[2].toString() + test[2].toString() + test[3].toString() + test[3].toString(), 0)\r\n        };\r\n      },\r\n      write: colorToString\r\n    },\r\n    SIX_CHAR_HEX: {\r\n      read: function read(original) {\r\n        var test = original.match(/^#([A-F0-9]{6})$/i);\r\n        if (test === null) {\r\n          return false;\r\n        }\r\n        return {\r\n          space: 'HEX',\r\n          hex: parseInt('0x' + test[1].toString(), 0)\r\n        };\r\n      },\r\n      write: colorToString\r\n    },\r\n    CSS_RGB: {\r\n      read: function read(original) {\r\n        var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\r\n        if (test === null) {\r\n          return false;\r\n        }\r\n        return {\r\n          space: 'RGB',\r\n          r: parseFloat(test[1]),\r\n          g: parseFloat(test[2]),\r\n          b: parseFloat(test[3])\r\n        };\r\n      },\r\n      write: colorToString\r\n    },\r\n    CSS_RGBA: {\r\n      read: function read(original) {\r\n        var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\r\n        if (test === null) {\r\n          return false;\r\n        }\r\n        return {\r\n          space: 'RGB',\r\n          r: parseFloat(test[1]),\r\n          g: parseFloat(test[2]),\r\n          b: parseFloat(test[3]),\r\n          a: parseFloat(test[4])\r\n        };\r\n      },\r\n      write: colorToString\r\n    }\r\n  }\r\n},\r\n{\r\n  litmus: Common.isNumber,\r\n  conversions: {\r\n    HEX: {\r\n      read: function read(original) {\r\n        return {\r\n          space: 'HEX',\r\n          hex: original,\r\n          conversionName: 'HEX'\r\n        };\r\n      },\r\n      write: function write(color) {\r\n        return color.hex;\r\n      }\r\n    }\r\n  }\r\n},\r\n{\r\n  litmus: Common.isArray,\r\n  conversions: {\r\n    RGB_ARRAY: {\r\n      read: function read(original) {\r\n        if (original.length !== 3) {\r\n          return false;\r\n        }\r\n        return {\r\n          space: 'RGB',\r\n          r: original[0],\r\n          g: original[1],\r\n          b: original[2]\r\n        };\r\n      },\r\n      write: function write(color) {\r\n        return [color.r, color.g, color.b];\r\n      }\r\n    },\r\n    RGBA_ARRAY: {\r\n      read: function read(original) {\r\n        if (original.length !== 4) return false;\r\n        return {\r\n          space: 'RGB',\r\n          r: original[0],\r\n          g: original[1],\r\n          b: original[2],\r\n          a: original[3]\r\n        };\r\n      },\r\n      write: function write(color) {\r\n        return [color.r, color.g, color.b, color.a];\r\n      }\r\n    }\r\n  }\r\n},\r\n{\r\n  litmus: Common.isObject,\r\n  conversions: {\r\n    RGBA_OBJ: {\r\n      read: function read(original) {\r\n        if (Common.isNumber(original.r) && Common.isNumber(original.g) && Common.isNumber(original.b) && Common.isNumber(original.a)) {\r\n          return {\r\n            space: 'RGB',\r\n            r: original.r,\r\n            g: original.g,\r\n            b: original.b,\r\n            a: original.a\r\n          };\r\n        }\r\n        return false;\r\n      },\r\n      write: function write(color) {\r\n        return {\r\n          r: color.r,\r\n          g: color.g,\r\n          b: color.b,\r\n          a: color.a\r\n        };\r\n      }\r\n    },\r\n    RGB_OBJ: {\r\n      read: function read(original) {\r\n        if (Common.isNumber(original.r) && Common.isNumber(original.g) && Common.isNumber(original.b)) {\r\n          return {\r\n            space: 'RGB',\r\n            r: original.r,\r\n            g: original.g,\r\n            b: original.b\r\n          };\r\n        }\r\n        return false;\r\n      },\r\n      write: function write(color) {\r\n        return {\r\n          r: color.r,\r\n          g: color.g,\r\n          b: color.b\r\n        };\r\n      }\r\n    },\r\n    HSVA_OBJ: {\r\n      read: function read(original) {\r\n        if (Common.isNumber(original.h) && Common.isNumber(original.s) && Common.isNumber(original.v) && Common.isNumber(original.a)) {\r\n          return {\r\n            space: 'HSV',\r\n            h: original.h,\r\n            s: original.s,\r\n            v: original.v,\r\n            a: original.a\r\n          };\r\n        }\r\n        return false;\r\n      },\r\n      write: function write(color) {\r\n        return {\r\n          h: color.h,\r\n          s: color.s,\r\n          v: color.v,\r\n          a: color.a\r\n        };\r\n      }\r\n    },\r\n    HSV_OBJ: {\r\n      read: function read(original) {\r\n        if (Common.isNumber(original.h) && Common.isNumber(original.s) && Common.isNumber(original.v)) {\r\n          return {\r\n            space: 'HSV',\r\n            h: original.h,\r\n            s: original.s,\r\n            v: original.v\r\n          };\r\n        }\r\n        return false;\r\n      },\r\n      write: function write(color) {\r\n        return {\r\n          h: color.h,\r\n          s: color.s,\r\n          v: color.v\r\n        };\r\n      }\r\n    }\r\n  }\r\n}];\r\nvar result = void 0;\r\nvar toReturn = void 0;\r\nvar interpret = function interpret() {\r\n  toReturn = false;\r\n  var original = arguments.length > 1 ? Common.toArray(arguments) : arguments[0];\r\n  Common.each(INTERPRETATIONS, function (family) {\r\n    if (family.litmus(original)) {\r\n      Common.each(family.conversions, function (conversion, conversionName) {\r\n        result = conversion.read(original);\r\n        if (toReturn === false && result !== false) {\r\n          toReturn = result;\r\n          result.conversionName = conversionName;\r\n          result.conversion = conversion;\r\n          return Common.BREAK;\r\n        }\r\n      });\r\n      return Common.BREAK;\r\n    }\r\n  });\r\n  return toReturn;\r\n};\r\n\r\nvar tmpComponent = void 0;\r\nvar ColorMath = {\r\n  hsv_to_rgb: function hsv_to_rgb(h, s, v) {\r\n    var hi = Math.floor(h / 60) % 6;\r\n    var f = h / 60 - Math.floor(h / 60);\r\n    var p = v * (1.0 - s);\r\n    var q = v * (1.0 - f * s);\r\n    var t = v * (1.0 - (1.0 - f) * s);\r\n    var c = [[v, t, p], [q, v, p], [p, v, t], [p, q, v], [t, p, v], [v, p, q]][hi];\r\n    return {\r\n      r: c[0] * 255,\r\n      g: c[1] * 255,\r\n      b: c[2] * 255\r\n    };\r\n  },\r\n  rgb_to_hsv: function rgb_to_hsv(r, g, b) {\r\n    var min = Math.min(r, g, b);\r\n    var max = Math.max(r, g, b);\r\n    var delta = max - min;\r\n    var h = void 0;\r\n    var s = void 0;\r\n    if (max !== 0) {\r\n      s = delta / max;\r\n    } else {\r\n      return {\r\n        h: NaN,\r\n        s: 0,\r\n        v: 0\r\n      };\r\n    }\r\n    if (r === max) {\r\n      h = (g - b) / delta;\r\n    } else if (g === max) {\r\n      h = 2 + (b - r) / delta;\r\n    } else {\r\n      h = 4 + (r - g) / delta;\r\n    }\r\n    h /= 6;\r\n    if (h < 0) {\r\n      h += 1;\r\n    }\r\n    return {\r\n      h: h * 360,\r\n      s: s,\r\n      v: max / 255\r\n    };\r\n  },\r\n  rgb_to_hex: function rgb_to_hex(r, g, b) {\r\n    var hex = this.hex_with_component(0, 2, r);\r\n    hex = this.hex_with_component(hex, 1, g);\r\n    hex = this.hex_with_component(hex, 0, b);\r\n    return hex;\r\n  },\r\n  component_from_hex: function component_from_hex(hex, componentIndex) {\r\n    return hex >> componentIndex * 8 & 0xFF;\r\n  },\r\n  hex_with_component: function hex_with_component(hex, componentIndex, value) {\r\n    return value << (tmpComponent = componentIndex * 8) | hex & ~(0xFF << tmpComponent);\r\n  }\r\n};\r\n\r\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\r\n  return typeof obj;\r\n} : function (obj) {\r\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar classCallCheck = function (instance, Constructor) {\r\n  if (!(instance instanceof Constructor)) {\r\n    throw new TypeError(\"Cannot call a class as a function\");\r\n  }\r\n};\r\n\r\nvar createClass = function () {\r\n  function defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n      var descriptor = props[i];\r\n      descriptor.enumerable = descriptor.enumerable || false;\r\n      descriptor.configurable = true;\r\n      if (\"value\" in descriptor) descriptor.writable = true;\r\n      Object.defineProperty(target, descriptor.key, descriptor);\r\n    }\r\n  }\r\n\r\n  return function (Constructor, protoProps, staticProps) {\r\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\r\n    if (staticProps) defineProperties(Constructor, staticProps);\r\n    return Constructor;\r\n  };\r\n}();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar get = function get(object, property, receiver) {\r\n  if (object === null) object = Function.prototype;\r\n  var desc = Object.getOwnPropertyDescriptor(object, property);\r\n\r\n  if (desc === undefined) {\r\n    var parent = Object.getPrototypeOf(object);\r\n\r\n    if (parent === null) {\r\n      return undefined;\r\n    } else {\r\n      return get(parent, property, receiver);\r\n    }\r\n  } else if (\"value\" in desc) {\r\n    return desc.value;\r\n  } else {\r\n    var getter = desc.get;\r\n\r\n    if (getter === undefined) {\r\n      return undefined;\r\n    }\r\n\r\n    return getter.call(receiver);\r\n  }\r\n};\r\n\r\nvar inherits = function (subClass, superClass) {\r\n  if (typeof superClass !== \"function\" && superClass !== null) {\r\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\r\n  }\r\n\r\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n    constructor: {\r\n      value: subClass,\r\n      enumerable: false,\r\n      writable: true,\r\n      configurable: true\r\n    }\r\n  });\r\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar possibleConstructorReturn = function (self, call) {\r\n  if (!self) {\r\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\r\n  }\r\n\r\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\r\n};\r\n\r\nvar Color = function () {\r\n  function Color() {\r\n    classCallCheck(this, Color);\r\n    this.__state = interpret.apply(this, arguments);\r\n    if (this.__state === false) {\r\n      throw new Error('Failed to interpret color arguments');\r\n    }\r\n    this.__state.a = this.__state.a || 1;\r\n  }\r\n  createClass(Color, [{\r\n    key: 'toString',\r\n    value: function toString() {\r\n      return colorToString(this);\r\n    }\r\n  }, {\r\n    key: 'toHexString',\r\n    value: function toHexString() {\r\n      return colorToString(this, true);\r\n    }\r\n  }, {\r\n    key: 'toOriginal',\r\n    value: function toOriginal() {\r\n      return this.__state.conversion.write(this);\r\n    }\r\n  }]);\r\n  return Color;\r\n}();\r\nfunction defineRGBComponent(target, component, componentHexIndex) {\r\n  Object.defineProperty(target, component, {\r\n    get: function get$$1() {\r\n      if (this.__state.space === 'RGB') {\r\n        return this.__state[component];\r\n      }\r\n      Color.recalculateRGB(this, component, componentHexIndex);\r\n      return this.__state[component];\r\n    },\r\n    set: function set$$1(v) {\r\n      if (this.__state.space !== 'RGB') {\r\n        Color.recalculateRGB(this, component, componentHexIndex);\r\n        this.__state.space = 'RGB';\r\n      }\r\n      this.__state[component] = v;\r\n    }\r\n  });\r\n}\r\nfunction defineHSVComponent(target, component) {\r\n  Object.defineProperty(target, component, {\r\n    get: function get$$1() {\r\n      if (this.__state.space === 'HSV') {\r\n        return this.__state[component];\r\n      }\r\n      Color.recalculateHSV(this);\r\n      return this.__state[component];\r\n    },\r\n    set: function set$$1(v) {\r\n      if (this.__state.space !== 'HSV') {\r\n        Color.recalculateHSV(this);\r\n        this.__state.space = 'HSV';\r\n      }\r\n      this.__state[component] = v;\r\n    }\r\n  });\r\n}\r\nColor.recalculateRGB = function (color, component, componentHexIndex) {\r\n  if (color.__state.space === 'HEX') {\r\n    color.__state[component] = ColorMath.component_from_hex(color.__state.hex, componentHexIndex);\r\n  } else if (color.__state.space === 'HSV') {\r\n    Common.extend(color.__state, ColorMath.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\r\n  } else {\r\n    throw new Error('Corrupted color state');\r\n  }\r\n};\r\nColor.recalculateHSV = function (color) {\r\n  var result = ColorMath.rgb_to_hsv(color.r, color.g, color.b);\r\n  Common.extend(color.__state, {\r\n    s: result.s,\r\n    v: result.v\r\n  });\r\n  if (!Common.isNaN(result.h)) {\r\n    color.__state.h = result.h;\r\n  } else if (Common.isUndefined(color.__state.h)) {\r\n    color.__state.h = 0;\r\n  }\r\n};\r\nColor.COMPONENTS = ['r', 'g', 'b', 'h', 's', 'v', 'hex', 'a'];\r\ndefineRGBComponent(Color.prototype, 'r', 2);\r\ndefineRGBComponent(Color.prototype, 'g', 1);\r\ndefineRGBComponent(Color.prototype, 'b', 0);\r\ndefineHSVComponent(Color.prototype, 'h');\r\ndefineHSVComponent(Color.prototype, 's');\r\ndefineHSVComponent(Color.prototype, 'v');\r\nObject.defineProperty(Color.prototype, 'a', {\r\n  get: function get$$1() {\r\n    return this.__state.a;\r\n  },\r\n  set: function set$$1(v) {\r\n    this.__state.a = v;\r\n  }\r\n});\r\nObject.defineProperty(Color.prototype, 'hex', {\r\n  get: function get$$1() {\r\n    if (!this.__state.space !== 'HEX') {\r\n      this.__state.hex = ColorMath.rgb_to_hex(this.r, this.g, this.b);\r\n    }\r\n    return this.__state.hex;\r\n  },\r\n  set: function set$$1(v) {\r\n    this.__state.space = 'HEX';\r\n    this.__state.hex = v;\r\n  }\r\n});\r\n\r\nvar Controller = function () {\r\n  function Controller(object, property) {\r\n    classCallCheck(this, Controller);\r\n    this.initialValue = object[property];\r\n    this.domElement = document.createElement('div');\r\n    this.object = object;\r\n    this.property = property;\r\n    this.__onChange = undefined;\r\n    this.__onFinishChange = undefined;\r\n  }\r\n  createClass(Controller, [{\r\n    key: 'onChange',\r\n    value: function onChange(fnc) {\r\n      this.__onChange = fnc;\r\n      return this;\r\n    }\r\n  }, {\r\n    key: 'onFinishChange',\r\n    value: function onFinishChange(fnc) {\r\n      this.__onFinishChange = fnc;\r\n      return this;\r\n    }\r\n  }, {\r\n    key: 'setValue',\r\n    value: function setValue(newValue) {\r\n      this.object[this.property] = newValue;\r\n      if (this.__onChange) {\r\n        this.__onChange.call(this, newValue);\r\n      }\r\n      this.updateDisplay();\r\n      return this;\r\n    }\r\n  }, {\r\n    key: 'getValue',\r\n    value: function getValue() {\r\n      return this.object[this.property];\r\n    }\r\n  }, {\r\n    key: 'updateDisplay',\r\n    value: function updateDisplay() {\r\n      return this;\r\n    }\r\n  }, {\r\n    key: 'isModified',\r\n    value: function isModified() {\r\n      return this.initialValue !== this.getValue();\r\n    }\r\n  }]);\r\n  return Controller;\r\n}();\r\n\r\nvar EVENT_MAP = {\r\n  HTMLEvents: ['change'],\r\n  MouseEvents: ['click', 'mousemove', 'mousedown', 'mouseup', 'mouseover'],\r\n  KeyboardEvents: ['keydown']\r\n};\r\nvar EVENT_MAP_INV = {};\r\nCommon.each(EVENT_MAP, function (v, k) {\r\n  Common.each(v, function (e) {\r\n    EVENT_MAP_INV[e] = k;\r\n  });\r\n});\r\nvar CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\r\nfunction cssValueToPixels(val) {\r\n  if (val === '0' || Common.isUndefined(val)) {\r\n    return 0;\r\n  }\r\n  var match = val.match(CSS_VALUE_PIXELS);\r\n  if (!Common.isNull(match)) {\r\n    return parseFloat(match[1]);\r\n  }\r\n  return 0;\r\n}\r\nvar dom = {\r\n  makeSelectable: function makeSelectable(elem, selectable) {\r\n    if (elem === undefined || elem.style === undefined) return;\r\n    elem.onselectstart = selectable ? function () {\r\n      return false;\r\n    } : function () {};\r\n    elem.style.MozUserSelect = selectable ? 'auto' : 'none';\r\n    elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\r\n    elem.unselectable = selectable ? 'on' : 'off';\r\n  },\r\n  makeFullscreen: function makeFullscreen(elem, hor, vert) {\r\n    var vertical = vert;\r\n    var horizontal = hor;\r\n    if (Common.isUndefined(horizontal)) {\r\n      horizontal = true;\r\n    }\r\n    if (Common.isUndefined(vertical)) {\r\n      vertical = true;\r\n    }\r\n    elem.style.position = 'absolute';\r\n    if (horizontal) {\r\n      elem.style.left = 0;\r\n      elem.style.right = 0;\r\n    }\r\n    if (vertical) {\r\n      elem.style.top = 0;\r\n      elem.style.bottom = 0;\r\n    }\r\n  },\r\n  fakeEvent: function fakeEvent(elem, eventType, pars, aux) {\r\n    var params = pars || {};\r\n    var className = EVENT_MAP_INV[eventType];\r\n    if (!className) {\r\n      throw new Error('Event type ' + eventType + ' not supported.');\r\n    }\r\n    var evt = document.createEvent(className);\r\n    switch (className) {\r\n      case 'MouseEvents':\r\n        {\r\n          var clientX = params.x || params.clientX || 0;\r\n          var clientY = params.y || params.clientY || 0;\r\n          evt.initMouseEvent(eventType, params.bubbles || false, params.cancelable || true, window, params.clickCount || 1, 0,\r\n          0,\r\n          clientX,\r\n          clientY,\r\n          false, false, false, false, 0, null);\r\n          break;\r\n        }\r\n      case 'KeyboardEvents':\r\n        {\r\n          var init = evt.initKeyboardEvent || evt.initKeyEvent;\r\n          Common.defaults(params, {\r\n            cancelable: true,\r\n            ctrlKey: false,\r\n            altKey: false,\r\n            shiftKey: false,\r\n            metaKey: false,\r\n            keyCode: undefined,\r\n            charCode: undefined\r\n          });\r\n          init(eventType, params.bubbles || false, params.cancelable, window, params.ctrlKey, params.altKey, params.shiftKey, params.metaKey, params.keyCode, params.charCode);\r\n          break;\r\n        }\r\n      default:\r\n        {\r\n          evt.initEvent(eventType, params.bubbles || false, params.cancelable || true);\r\n          break;\r\n        }\r\n    }\r\n    Common.defaults(evt, aux);\r\n    elem.dispatchEvent(evt);\r\n  },\r\n  bind: function bind(elem, event, func, newBool) {\r\n    var bool = newBool || false;\r\n    if (elem.addEventListener) {\r\n      elem.addEventListener(event, func, bool);\r\n    } else if (elem.attachEvent) {\r\n      elem.attachEvent('on' + event, func);\r\n    }\r\n    return dom;\r\n  },\r\n  unbind: function unbind(elem, event, func, newBool) {\r\n    var bool = newBool || false;\r\n    if (elem.removeEventListener) {\r\n      elem.removeEventListener(event, func, bool);\r\n    } else if (elem.detachEvent) {\r\n      elem.detachEvent('on' + event, func);\r\n    }\r\n    return dom;\r\n  },\r\n  addClass: function addClass(elem, className) {\r\n    if (elem.className === undefined) {\r\n      elem.className = className;\r\n    } else if (elem.className !== className) {\r\n      var classes = elem.className.split(/ +/);\r\n      if (classes.indexOf(className) === -1) {\r\n        classes.push(className);\r\n        elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\r\n      }\r\n    }\r\n    return dom;\r\n  },\r\n  removeClass: function removeClass(elem, className) {\r\n    if (className) {\r\n      if (elem.className === className) {\r\n        elem.removeAttribute('class');\r\n      } else {\r\n        var classes = elem.className.split(/ +/);\r\n        var index = classes.indexOf(className);\r\n        if (index !== -1) {\r\n          classes.splice(index, 1);\r\n          elem.className = classes.join(' ');\r\n        }\r\n      }\r\n    } else {\r\n      elem.className = undefined;\r\n    }\r\n    return dom;\r\n  },\r\n  hasClass: function hasClass(elem, className) {\r\n    return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\r\n  },\r\n  getWidth: function getWidth(elem) {\r\n    var style = getComputedStyle(elem);\r\n    return cssValueToPixels(style['border-left-width']) + cssValueToPixels(style['border-right-width']) + cssValueToPixels(style['padding-left']) + cssValueToPixels(style['padding-right']) + cssValueToPixels(style.width);\r\n  },\r\n  getHeight: function getHeight(elem) {\r\n    var style = getComputedStyle(elem);\r\n    return cssValueToPixels(style['border-top-width']) + cssValueToPixels(style['border-bottom-width']) + cssValueToPixels(style['padding-top']) + cssValueToPixels(style['padding-bottom']) + cssValueToPixels(style.height);\r\n  },\r\n  getOffset: function getOffset(el) {\r\n    var elem = el;\r\n    var offset = { left: 0, top: 0 };\r\n    if (elem.offsetParent) {\r\n      do {\r\n        offset.left += elem.offsetLeft;\r\n        offset.top += elem.offsetTop;\r\n        elem = elem.offsetParent;\r\n      } while (elem);\r\n    }\r\n    return offset;\r\n  },\r\n  isActive: function isActive(elem) {\r\n    return elem === document.activeElement && (elem.type || elem.href);\r\n  }\r\n};\r\n\r\nvar BooleanController = function (_Controller) {\r\n  inherits(BooleanController, _Controller);\r\n  function BooleanController(object, property) {\r\n    classCallCheck(this, BooleanController);\r\n    var _this2 = possibleConstructorReturn(this, (BooleanController.__proto__ || Object.getPrototypeOf(BooleanController)).call(this, object, property));\r\n    var _this = _this2;\r\n    _this2.__prev = _this2.getValue();\r\n    _this2.__checkbox = document.createElement('input');\r\n    _this2.__checkbox.setAttribute('type', 'checkbox');\r\n    function onChange() {\r\n      _this.setValue(!_this.__prev);\r\n    }\r\n    dom.bind(_this2.__checkbox, 'change', onChange, false);\r\n    _this2.domElement.appendChild(_this2.__checkbox);\r\n    _this2.updateDisplay();\r\n    return _this2;\r\n  }\r\n  createClass(BooleanController, [{\r\n    key: 'setValue',\r\n    value: function setValue(v) {\r\n      var toReturn = get(BooleanController.prototype.__proto__ || Object.getPrototypeOf(BooleanController.prototype), 'setValue', this).call(this, v);\r\n      if (this.__onFinishChange) {\r\n        this.__onFinishChange.call(this, this.getValue());\r\n      }\r\n      this.__prev = this.getValue();\r\n      return toReturn;\r\n    }\r\n  }, {\r\n    key: 'updateDisplay',\r\n    value: function updateDisplay() {\r\n      if (this.getValue() === true) {\r\n        this.__checkbox.setAttribute('checked', 'checked');\r\n        this.__checkbox.checked = true;\r\n        this.__prev = true;\r\n      } else {\r\n        this.__checkbox.checked = false;\r\n        this.__prev = false;\r\n      }\r\n      return get(BooleanController.prototype.__proto__ || Object.getPrototypeOf(BooleanController.prototype), 'updateDisplay', this).call(this);\r\n    }\r\n  }]);\r\n  return BooleanController;\r\n}(Controller);\r\n\r\nvar OptionController = function (_Controller) {\r\n  inherits(OptionController, _Controller);\r\n  function OptionController(object, property, opts) {\r\n    classCallCheck(this, OptionController);\r\n    var _this2 = possibleConstructorReturn(this, (OptionController.__proto__ || Object.getPrototypeOf(OptionController)).call(this, object, property));\r\n    var options = opts;\r\n    var _this = _this2;\r\n    _this2.__select = document.createElement('select');\r\n    if (Common.isArray(options)) {\r\n      var map = {};\r\n      Common.each(options, function (element) {\r\n        map[element] = element;\r\n      });\r\n      options = map;\r\n    }\r\n    Common.each(options, function (value, key) {\r\n      var opt = document.createElement('option');\r\n      opt.innerHTML = key;\r\n      opt.setAttribute('value', value);\r\n      _this.__select.appendChild(opt);\r\n    });\r\n    _this2.updateDisplay();\r\n    dom.bind(_this2.__select, 'change', function () {\r\n      var desiredValue = this.options[this.selectedIndex].value;\r\n      _this.setValue(desiredValue);\r\n    });\r\n    _this2.domElement.appendChild(_this2.__select);\r\n    return _this2;\r\n  }\r\n  createClass(OptionController, [{\r\n    key: 'setValue',\r\n    value: function setValue(v) {\r\n      var toReturn = get(OptionController.prototype.__proto__ || Object.getPrototypeOf(OptionController.prototype), 'setValue', this).call(this, v);\r\n      if (this.__onFinishChange) {\r\n        this.__onFinishChange.call(this, this.getValue());\r\n      }\r\n      return toReturn;\r\n    }\r\n  }, {\r\n    key: 'updateDisplay',\r\n    value: function updateDisplay() {\r\n      if (dom.isActive(this.__select)) return this;\r\n      this.__select.value = this.getValue();\r\n      return get(OptionController.prototype.__proto__ || Object.getPrototypeOf(OptionController.prototype), 'updateDisplay', this).call(this);\r\n    }\r\n  }]);\r\n  return OptionController;\r\n}(Controller);\r\n\r\nvar StringController = function (_Controller) {\r\n  inherits(StringController, _Controller);\r\n  function StringController(object, property) {\r\n    classCallCheck(this, StringController);\r\n    var _this2 = possibleConstructorReturn(this, (StringController.__proto__ || Object.getPrototypeOf(StringController)).call(this, object, property));\r\n    var _this = _this2;\r\n    function onChange() {\r\n      _this.setValue(_this.__input.value);\r\n    }\r\n    function onBlur() {\r\n      if (_this.__onFinishChange) {\r\n        _this.__onFinishChange.call(_this, _this.getValue());\r\n      }\r\n    }\r\n    _this2.__input = document.createElement('input');\r\n    _this2.__input.setAttribute('type', 'text');\r\n    dom.bind(_this2.__input, 'keyup', onChange);\r\n    dom.bind(_this2.__input, 'change', onChange);\r\n    dom.bind(_this2.__input, 'blur', onBlur);\r\n    dom.bind(_this2.__input, 'keydown', function (e) {\r\n      if (e.keyCode === 13) {\r\n        this.blur();\r\n      }\r\n    });\r\n    _this2.updateDisplay();\r\n    _this2.domElement.appendChild(_this2.__input);\r\n    return _this2;\r\n  }\r\n  createClass(StringController, [{\r\n    key: 'updateDisplay',\r\n    value: function updateDisplay() {\r\n      if (!dom.isActive(this.__input)) {\r\n        this.__input.value = this.getValue();\r\n      }\r\n      return get(StringController.prototype.__proto__ || Object.getPrototypeOf(StringController.prototype), 'updateDisplay', this).call(this);\r\n    }\r\n  }]);\r\n  return StringController;\r\n}(Controller);\r\n\r\nfunction numDecimals(x) {\r\n  var _x = x.toString();\r\n  if (_x.indexOf('.') > -1) {\r\n    return _x.length - _x.indexOf('.') - 1;\r\n  }\r\n  return 0;\r\n}\r\nvar NumberController = function (_Controller) {\r\n  inherits(NumberController, _Controller);\r\n  function NumberController(object, property, params) {\r\n    classCallCheck(this, NumberController);\r\n    var _this = possibleConstructorReturn(this, (NumberController.__proto__ || Object.getPrototypeOf(NumberController)).call(this, object, property));\r\n    var _params = params || {};\r\n    _this.__min = _params.min;\r\n    _this.__max = _params.max;\r\n    _this.__step = _params.step;\r\n    if (Common.isUndefined(_this.__step)) {\r\n      if (_this.initialValue === 0) {\r\n        _this.__impliedStep = 1;\r\n      } else {\r\n        _this.__impliedStep = Math.pow(10, Math.floor(Math.log(Math.abs(_this.initialValue)) / Math.LN10)) / 10;\r\n      }\r\n    } else {\r\n      _this.__impliedStep = _this.__step;\r\n    }\r\n    _this.__precision = numDecimals(_this.__impliedStep);\r\n    return _this;\r\n  }\r\n  createClass(NumberController, [{\r\n    key: 'setValue',\r\n    value: function setValue(v) {\r\n      var _v = v;\r\n      if (this.__min !== undefined && _v < this.__min) {\r\n        _v = this.__min;\r\n      } else if (this.__max !== undefined && _v > this.__max) {\r\n        _v = this.__max;\r\n      }\r\n      if (this.__step !== undefined && _v % this.__step !== 0) {\r\n        _v = Math.round(_v / this.__step) * this.__step;\r\n      }\r\n      return get(NumberController.prototype.__proto__ || Object.getPrototypeOf(NumberController.prototype), 'setValue', this).call(this, _v);\r\n    }\r\n  }, {\r\n    key: 'min',\r\n    value: function min(minValue) {\r\n      this.__min = minValue;\r\n      return this;\r\n    }\r\n  }, {\r\n    key: 'max',\r\n    value: function max(maxValue) {\r\n      this.__max = maxValue;\r\n      return this;\r\n    }\r\n  }, {\r\n    key: 'step',\r\n    value: function step(stepValue) {\r\n      this.__step = stepValue;\r\n      this.__impliedStep = stepValue;\r\n      this.__precision = numDecimals(stepValue);\r\n      return this;\r\n    }\r\n  }]);\r\n  return NumberController;\r\n}(Controller);\r\n\r\nfunction roundToDecimal(value, decimals) {\r\n  var tenTo = Math.pow(10, decimals);\r\n  return Math.round(value * tenTo) / tenTo;\r\n}\r\nvar NumberControllerBox = function (_NumberController) {\r\n  inherits(NumberControllerBox, _NumberController);\r\n  function NumberControllerBox(object, property, params) {\r\n    classCallCheck(this, NumberControllerBox);\r\n    var _this2 = possibleConstructorReturn(this, (NumberControllerBox.__proto__ || Object.getPrototypeOf(NumberControllerBox)).call(this, object, property, params));\r\n    _this2.__truncationSuspended = false;\r\n    var _this = _this2;\r\n    var prevY = void 0;\r\n    function onChange() {\r\n      var attempted = parseFloat(_this.__input.value);\r\n      if (!Common.isNaN(attempted)) {\r\n        _this.setValue(attempted);\r\n      }\r\n    }\r\n    function onFinish() {\r\n      if (_this.__onFinishChange) {\r\n        _this.__onFinishChange.call(_this, _this.getValue());\r\n      }\r\n    }\r\n    function onBlur() {\r\n      onFinish();\r\n    }\r\n    function onMouseDrag(e) {\r\n      var diff = prevY - e.clientY;\r\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\r\n      prevY = e.clientY;\r\n    }\r\n    function onMouseUp() {\r\n      dom.unbind(window, 'mousemove', onMouseDrag);\r\n      dom.unbind(window, 'mouseup', onMouseUp);\r\n      onFinish();\r\n    }\r\n    function onMouseDown(e) {\r\n      dom.bind(window, 'mousemove', onMouseDrag);\r\n      dom.bind(window, 'mouseup', onMouseUp);\r\n      prevY = e.clientY;\r\n    }\r\n    _this2.__input = document.createElement('input');\r\n    _this2.__input.setAttribute('type', 'text');\r\n    dom.bind(_this2.__input, 'change', onChange);\r\n    dom.bind(_this2.__input, 'blur', onBlur);\r\n    dom.bind(_this2.__input, 'mousedown', onMouseDown);\r\n    dom.bind(_this2.__input, 'keydown', function (e) {\r\n      if (e.keyCode === 13) {\r\n        _this.__truncationSuspended = true;\r\n        this.blur();\r\n        _this.__truncationSuspended = false;\r\n        onFinish();\r\n      }\r\n    });\r\n    _this2.updateDisplay();\r\n    _this2.domElement.appendChild(_this2.__input);\r\n    return _this2;\r\n  }\r\n  createClass(NumberControllerBox, [{\r\n    key: 'updateDisplay',\r\n    value: function updateDisplay() {\r\n      this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\r\n      return get(NumberControllerBox.prototype.__proto__ || Object.getPrototypeOf(NumberControllerBox.prototype), 'updateDisplay', this).call(this);\r\n    }\r\n  }]);\r\n  return NumberControllerBox;\r\n}(NumberController);\r\n\r\nfunction map(v, i1, i2, o1, o2) {\r\n  return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\r\n}\r\nvar NumberControllerSlider = function (_NumberController) {\r\n  inherits(NumberControllerSlider, _NumberController);\r\n  function NumberControllerSlider(object, property, min, max, step) {\r\n    classCallCheck(this, NumberControllerSlider);\r\n    var _this2 = possibleConstructorReturn(this, (NumberControllerSlider.__proto__ || Object.getPrototypeOf(NumberControllerSlider)).call(this, object, property, { min: min, max: max, step: step }));\r\n    var _this = _this2;\r\n    _this2.__background = document.createElement('div');\r\n    _this2.__foreground = document.createElement('div');\r\n    dom.bind(_this2.__background, 'mousedown', onMouseDown);\r\n    dom.bind(_this2.__background, 'touchstart', onTouchStart);\r\n    dom.addClass(_this2.__background, 'slider');\r\n    dom.addClass(_this2.__foreground, 'slider-fg');\r\n    function onMouseDown(e) {\r\n      document.activeElement.blur();\r\n      dom.bind(window, 'mousemove', onMouseDrag);\r\n      dom.bind(window, 'mouseup', onMouseUp);\r\n      onMouseDrag(e);\r\n    }\r\n    function onMouseDrag(e) {\r\n      e.preventDefault();\r\n      var bgRect = _this.__background.getBoundingClientRect();\r\n      _this.setValue(map(e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\r\n      return false;\r\n    }\r\n    function onMouseUp() {\r\n      dom.unbind(window, 'mousemove', onMouseDrag);\r\n      dom.unbind(window, 'mouseup', onMouseUp);\r\n      if (_this.__onFinishChange) {\r\n        _this.__onFinishChange.call(_this, _this.getValue());\r\n      }\r\n    }\r\n    function onTouchStart(e) {\r\n      if (e.touches.length !== 1) {\r\n        return;\r\n      }\r\n      dom.bind(window, 'touchmove', onTouchMove);\r\n      dom.bind(window, 'touchend', onTouchEnd);\r\n      onTouchMove(e);\r\n    }\r\n    function onTouchMove(e) {\r\n      var clientX = e.touches[0].clientX;\r\n      var bgRect = _this.__background.getBoundingClientRect();\r\n      _this.setValue(map(clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\r\n    }\r\n    function onTouchEnd() {\r\n      dom.unbind(window, 'touchmove', onTouchMove);\r\n      dom.unbind(window, 'touchend', onTouchEnd);\r\n      if (_this.__onFinishChange) {\r\n        _this.__onFinishChange.call(_this, _this.getValue());\r\n      }\r\n    }\r\n    _this2.updateDisplay();\r\n    _this2.__background.appendChild(_this2.__foreground);\r\n    _this2.domElement.appendChild(_this2.__background);\r\n    return _this2;\r\n  }\r\n  createClass(NumberControllerSlider, [{\r\n    key: 'updateDisplay',\r\n    value: function updateDisplay() {\r\n      var pct = (this.getValue() - this.__min) / (this.__max - this.__min);\r\n      this.__foreground.style.width = pct * 100 + '%';\r\n      return get(NumberControllerSlider.prototype.__proto__ || Object.getPrototypeOf(NumberControllerSlider.prototype), 'updateDisplay', this).call(this);\r\n    }\r\n  }]);\r\n  return NumberControllerSlider;\r\n}(NumberController);\r\n\r\nvar FunctionController = function (_Controller) {\r\n  inherits(FunctionController, _Controller);\r\n  function FunctionController(object, property, text) {\r\n    classCallCheck(this, FunctionController);\r\n    var _this2 = possibleConstructorReturn(this, (FunctionController.__proto__ || Object.getPrototypeOf(FunctionController)).call(this, object, property));\r\n    var _this = _this2;\r\n    _this2.__button = document.createElement('div');\r\n    _this2.__button.innerHTML = text === undefined ? 'Fire' : text;\r\n    dom.bind(_this2.__button, 'click', function (e) {\r\n      e.preventDefault();\r\n      _this.fire();\r\n      return false;\r\n    });\r\n    dom.addClass(_this2.__button, 'button');\r\n    _this2.domElement.appendChild(_this2.__button);\r\n    return _this2;\r\n  }\r\n  createClass(FunctionController, [{\r\n    key: 'fire',\r\n    value: function fire() {\r\n      if (this.__onChange) {\r\n        this.__onChange.call(this);\r\n      }\r\n      this.getValue().call(this.object);\r\n      if (this.__onFinishChange) {\r\n        this.__onFinishChange.call(this, this.getValue());\r\n      }\r\n    }\r\n  }]);\r\n  return FunctionController;\r\n}(Controller);\r\n\r\nvar ColorController = function (_Controller) {\r\n    inherits(ColorController, _Controller);\r\n    function ColorController(object, property) {\r\n        classCallCheck(this, ColorController);\r\n        var _this2 = possibleConstructorReturn(this, (ColorController.__proto__ || Object.getPrototypeOf(ColorController)).call(this, object, property));\r\n        _this2.__color = new Color(_this2.getValue());\r\n        _this2.__temp = new Color(0);\r\n        var _this = _this2;\r\n        _this2.domElement = document.createElement('div');\r\n        dom.makeSelectable(_this2.domElement, false);\r\n        _this2.__selector = document.createElement('div');\r\n        _this2.__selector.className = 'selector';\r\n        _this2.__saturation_field = document.createElement('div');\r\n        _this2.__saturation_field.className = 'saturation-field';\r\n        _this2.__field_knob = document.createElement('div');\r\n        _this2.__field_knob.className = 'field-knob';\r\n        _this2.__field_knob_border = '2px solid ';\r\n        _this2.__hue_knob = document.createElement('div');\r\n        _this2.__hue_knob.className = 'hue-knob';\r\n        _this2.__hue_field = document.createElement('div');\r\n        _this2.__hue_field.className = 'hue-field';\r\n        _this2.__input = document.createElement('input');\r\n        _this2.__input.type = 'text';\r\n        _this2.__input_textShadow = '0 1px 1px ';\r\n        dom.bind(_this2.__input, 'keydown', function (e) {\r\n            if (e.keyCode === 13) {\r\n                onBlur.call(this);\r\n            }\r\n        });\r\n        dom.bind(_this2.__input, 'blur', onBlur);\r\n        dom.bind(_this2.__selector, 'mousedown', function ()        {\r\n            dom.addClass(this, 'drag').bind(window, 'mouseup', function ()        {\r\n                dom.removeClass(_this.__selector, 'drag');\r\n            });\r\n        });\r\n        dom.bind(_this2.__selector, 'touchstart', function ()        {\r\n            dom.addClass(this, 'drag').bind(window, 'touchend', function ()        {\r\n                dom.removeClass(_this.__selector, 'drag');\r\n            });\r\n        });\r\n        var valueField = document.createElement('div');\r\n        Common.extend(_this2.__selector.style, {\r\n            width: '122px',\r\n            height: '102px',\r\n            padding: '3px',\r\n            backgroundColor: '#222',\r\n            boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\r\n        });\r\n        Common.extend(_this2.__field_knob.style, {\r\n            position: 'absolute',\r\n            width: '12px',\r\n            height: '12px',\r\n            border: _this2.__field_knob_border + (_this2.__color.v < 0.5 ? '#fff' : '#000'),\r\n            boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\r\n            borderRadius: '12px',\r\n            zIndex: 1\r\n        });\r\n        Common.extend(_this2.__hue_knob.style, {\r\n            position: 'absolute',\r\n            width: '15px',\r\n            height: '2px',\r\n            borderRight: '4px solid #fff',\r\n            zIndex: 1\r\n        });\r\n        Common.extend(_this2.__saturation_field.style, {\r\n            width: '100px',\r\n            height: '100px',\r\n            border: '1px solid #555',\r\n            marginRight: '3px',\r\n            display: 'inline-block',\r\n            cursor: 'pointer'\r\n        });\r\n        Common.extend(valueField.style, {\r\n            width: '100%',\r\n            height: '100%',\r\n            background: 'none'\r\n        });\r\n        linearGradient(valueField, 'top', 'rgba(0,0,0,0)', '#000');\r\n        Common.extend(_this2.__hue_field.style, {\r\n            width: '15px',\r\n            height: '100px',\r\n            border: '1px solid #555',\r\n            cursor: 'ns-resize',\r\n            position: 'absolute',\r\n            top: '3px',\r\n            right: '3px'\r\n        });\r\n        hueGradient(_this2.__hue_field);\r\n        Common.extend(_this2.__input.style, {\r\n            outline: 'none',\r\n            textAlign: 'center',\r\n            color: '#fff',\r\n            border: 0,\r\n            fontWeight: 'bold',\r\n            textShadow: _this2.__input_textShadow + 'rgba(0,0,0,0.7)'\r\n        });\r\n        dom.bind(_this2.__saturation_field, 'mousedown', fieldDown);\r\n        dom.bind(_this2.__saturation_field, 'touchstart', fieldDown);\r\n        dom.bind(_this2.__field_knob, 'mousedown', fieldDown);\r\n        dom.bind(_this2.__field_knob, 'touchstart', fieldDown);\r\n        dom.bind(_this2.__hue_field, 'mousedown', fieldDownH);\r\n        dom.bind(_this2.__hue_field, 'touchstart', fieldDownH);\r\n        function fieldDown(e) {\r\n            setSV(e);\r\n            dom.bind(window, 'mousemove', setSV);\r\n            dom.bind(window, 'touchmove', setSV);\r\n            dom.bind(window, 'mouseup', fieldUpSV);\r\n            dom.bind(window, 'touchend', fieldUpSV);\r\n        }\r\n        function fieldDownH(e) {\r\n            setH(e);\r\n            dom.bind(window, 'mousemove', setH);\r\n            dom.bind(window, 'touchmove', setH);\r\n            dom.bind(window, 'mouseup', fieldUpH);\r\n            dom.bind(window, 'touchend', fieldUpH);\r\n        }\r\n        function fieldUpSV() {\r\n            dom.unbind(window, 'mousemove', setSV);\r\n            dom.unbind(window, 'touchmove', setSV);\r\n            dom.unbind(window, 'mouseup', fieldUpSV);\r\n            dom.unbind(window, 'touchend', fieldUpSV);\r\n            onFinish();\r\n        }\r\n        function fieldUpH() {\r\n            dom.unbind(window, 'mousemove', setH);\r\n            dom.unbind(window, 'touchmove', setH);\r\n            dom.unbind(window, 'mouseup', fieldUpH);\r\n            dom.unbind(window, 'touchend', fieldUpH);\r\n            onFinish();\r\n        }\r\n        function onBlur() {\r\n            var i = interpret(this.value);\r\n            if (i !== false) {\r\n                _this.__color.__state = i;\r\n                _this.setValue(_this.__color.toOriginal());\r\n            } else {\r\n                this.value = _this.__color.toString();\r\n            }\r\n        }\r\n        function onFinish() {\r\n            if (_this.__onFinishChange) {\r\n                _this.__onFinishChange.call(_this, _this.__color.toOriginal());\r\n            }\r\n        }\r\n        _this2.__saturation_field.appendChild(valueField);\r\n        _this2.__selector.appendChild(_this2.__field_knob);\r\n        _this2.__selector.appendChild(_this2.__saturation_field);\r\n        _this2.__selector.appendChild(_this2.__hue_field);\r\n        _this2.__hue_field.appendChild(_this2.__hue_knob);\r\n        _this2.domElement.appendChild(_this2.__input);\r\n        _this2.domElement.appendChild(_this2.__selector);\r\n        _this2.updateDisplay();\r\n        function setSV(e) {\r\n            if (e.type.indexOf('touch') === -1) {\r\n                e.preventDefault();\r\n            }\r\n            var fieldRect = _this.__saturation_field.getBoundingClientRect();\r\n            var _ref = e.touches && e.touches[0] || e,\r\n                clientX = _ref.clientX,\r\n                clientY = _ref.clientY;\r\n            var s = (clientX - fieldRect.left) / (fieldRect.right - fieldRect.left);\r\n            var v = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\r\n            if (v > 1) {\r\n                v = 1;\r\n            } else if (v < 0) {\r\n                v = 0;\r\n            }\r\n            if (s > 1) {\r\n                s = 1;\r\n            } else if (s < 0) {\r\n                s = 0;\r\n            }\r\n            _this.__color.v = v;\r\n            _this.__color.s = s;\r\n            _this.setValue(_this.__color.toOriginal());\r\n            return false;\r\n        }\r\n        function setH(e) {\r\n            if (e.type.indexOf('touch') === -1) {\r\n                e.preventDefault();\r\n            }\r\n            var fieldRect = _this.__hue_field.getBoundingClientRect();\r\n            var _ref2 = e.touches && e.touches[0] || e,\r\n                clientY = _ref2.clientY;\r\n            var h = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\r\n            if (h > 1) {\r\n                h = 1;\r\n            } else if (h < 0) {\r\n                h = 0;\r\n            }\r\n            _this.__color.h = h * 360;\r\n            _this.setValue(_this.__color.toOriginal());\r\n            return false;\r\n        }\r\n        return _this2;\r\n    }\r\n    createClass(ColorController, [{\r\n        key: 'updateDisplay',\r\n        value: function updateDisplay() {\r\n            var i = interpret(this.getValue());\r\n            if (i !== false) {\r\n                var mismatch = false;\r\n                Common.each(Color.COMPONENTS, function (component) {\r\n                    if (!Common.isUndefined(i[component]) && !Common.isUndefined(this.__color.__state[component]) && i[component] !== this.__color.__state[component]) {\r\n                        mismatch = true;\r\n                        return {};\r\n                    }\r\n                }, this);\r\n                if (mismatch) {\r\n                    Common.extend(this.__color.__state, i);\r\n                }\r\n            }\r\n            Common.extend(this.__temp.__state, this.__color.__state);\r\n            this.__temp.a = 1;\r\n            var flip = this.__color.v < 0.5 || this.__color.s > 0.5 ? 255 : 0;\r\n            var _flip = 255 - flip;\r\n            Common.extend(this.__field_knob.style, {\r\n                marginLeft: 100 * this.__color.s - 7 + 'px',\r\n                marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\r\n                backgroundColor: this.__temp.toHexString(),\r\n                border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip + ')'\r\n            });\r\n            this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px';\r\n            this.__temp.s = 1;\r\n            this.__temp.v = 1;\r\n            linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toHexString());\r\n            this.__input.value = this.__color.toString();\r\n            Common.extend(this.__input.style, {\r\n                backgroundColor: this.__color.toHexString(),\r\n                color: 'rgb(' + flip + ',' + flip + ',' + flip + ')',\r\n                textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip + ',.7)'\r\n            });\r\n        }\r\n    }]);\r\n    return ColorController;\r\n}(Controller);\r\nvar vendors = ['-moz-', '-o-', '-webkit-', '-ms-', ''];\r\nfunction linearGradient(elem, x, a, b) {\r\n    elem.style.background = '';\r\n    Common.each(vendors, function (vendor) {\r\n        elem.style.cssText += 'background: ' + vendor + 'linear-gradient(' + x + ', ' + a + ' 0%, ' + b + ' 100%); ';\r\n    });\r\n}\r\nfunction hueGradient(elem) {\r\n    elem.style.background = '';\r\n    elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);';\r\n    elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\r\n    elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\r\n    elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\r\n    elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\r\n}\r\n\r\nvar ControllerFactory = function ControllerFactory(object, property) {\r\n  var initialValue = object[property];\r\n  if (Common.isArray(arguments[2]) || Common.isObject(arguments[2])) {\r\n    return new OptionController(object, property, arguments[2]);\r\n  }\r\n  if (Common.isNumber(initialValue)) {\r\n    if (Common.isNumber(arguments[2]) && Common.isNumber(arguments[3])) {\r\n      if (Common.isNumber(arguments[4])) {\r\n        return new NumberControllerSlider(object, property, arguments[2], arguments[3], arguments[4]);\r\n      }\r\n      return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\r\n    }\r\n    if (Common.isNumber(arguments[4])) {\r\n      return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3], step: arguments[4] });\r\n    }\r\n    return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3] });\r\n  }\r\n  if (Common.isString(initialValue)) {\r\n    return new StringController(object, property);\r\n  }\r\n  if (Common.isFunction(initialValue)) {\r\n    return new FunctionController(object, property, '');\r\n  }\r\n  if (Common.isBoolean(initialValue)) {\r\n    return new BooleanController(object, property);\r\n  }\r\n  return null;\r\n};\r\n\r\nvar CustomController = function (_Controller) {\r\n  inherits(CustomController, _Controller);\r\n  function CustomController(object, property) {\r\n    classCallCheck(this, CustomController);\r\n    var _this = possibleConstructorReturn(this, (CustomController.__proto__ || Object.getPrototypeOf(CustomController)).call(this, object, property));\r\n    _this.arguments = {\r\n      object: object, property: property, opts: Array.prototype.slice.call(arguments, 2)\r\n    };\r\n    if (object.property) _this.property = object.property(_this);\r\n    return _this;\r\n  }\r\n  createClass(CustomController, [{\r\n    key: 'controller',\r\n    set: function set$$1(newController) {\r\n      this._controller = newController;\r\n    },\r\n    get: function get$$1() {\r\n      return this._controller;\r\n    }\r\n  }]);\r\n  return CustomController;\r\n}(Controller);\r\n\r\nvar css = {\r\n  load: function load(url, indoc) {\r\n    var doc = indoc || document;\r\n    var link = doc.createElement('link');\r\n    link.type = 'text/css';\r\n    link.rel = 'stylesheet';\r\n    link.href = url;\r\n    doc.getElementsByTagName('head')[0].appendChild(link);\r\n  },\r\n  inject: function inject(cssContent, indoc) {\r\n    var doc = indoc || document;\r\n    var injected = document.createElement('style');\r\n    injected.type = 'text/css';\r\n    injected.innerHTML = cssContent;\r\n    var head = doc.getElementsByTagName('head')[0];\r\n    try {\r\n      head.appendChild(injected);\r\n    } catch (e) {\r\n    }\r\n  }\r\n};\r\n\r\nvar saveDialogContents = \"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n\\n    </div>\\n\\n  </div>\\n\\n</div>\";\r\n\r\nfunction requestAnimationFrame(callback) {\r\n  setTimeout(callback, 1000 / 60);\r\n}\r\nvar requestAnimationFrame$1 = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || requestAnimationFrame;\r\n\r\nvar CenteredDiv = function () {\r\n  function CenteredDiv() {\r\n    classCallCheck(this, CenteredDiv);\r\n    this.backgroundElement = document.createElement('div');\r\n    Common.extend(this.backgroundElement.style, {\r\n      backgroundColor: 'rgba(0,0,0,0.8)',\r\n      top: 0,\r\n      left: 0,\r\n      display: 'none',\r\n      zIndex: '1000',\r\n      opacity: 0,\r\n      WebkitTransition: 'opacity 0.2s linear',\r\n      transition: 'opacity 0.2s linear'\r\n    });\r\n    dom.makeFullscreen(this.backgroundElement);\r\n    this.backgroundElement.style.position = 'fixed';\r\n    this.domElement = document.createElement('div');\r\n    Common.extend(this.domElement.style, {\r\n      position: 'fixed',\r\n      display: 'none',\r\n      zIndex: '1001',\r\n      opacity: 0,\r\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\r\n      transition: 'transform 0.2s ease-out, opacity 0.2s linear'\r\n    });\r\n    document.body.appendChild(this.backgroundElement);\r\n    document.body.appendChild(this.domElement);\r\n    var _this = this;\r\n    dom.bind(this.backgroundElement, 'click', function () {\r\n      _this.hide();\r\n    });\r\n  }\r\n  createClass(CenteredDiv, [{\r\n    key: 'show',\r\n    value: function show() {\r\n      var _this = this;\r\n      this.backgroundElement.style.display = 'block';\r\n      this.domElement.style.display = 'block';\r\n      this.domElement.style.opacity = 0;\r\n      this.domElement.style.webkitTransform = 'scale(1.1)';\r\n      this.layout();\r\n      Common.defer(function () {\r\n        _this.backgroundElement.style.opacity = 1;\r\n        _this.domElement.style.opacity = 1;\r\n        _this.domElement.style.webkitTransform = 'scale(1)';\r\n      });\r\n    }\r\n  }, {\r\n    key: 'hide',\r\n    value: function hide() {\r\n      var _this = this;\r\n      var hide = function hide() {\r\n        _this.domElement.style.display = 'none';\r\n        _this.backgroundElement.style.display = 'none';\r\n        dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\r\n        dom.unbind(_this.domElement, 'transitionend', hide);\r\n        dom.unbind(_this.domElement, 'oTransitionEnd', hide);\r\n      };\r\n      dom.bind(this.domElement, 'webkitTransitionEnd', hide);\r\n      dom.bind(this.domElement, 'transitionend', hide);\r\n      dom.bind(this.domElement, 'oTransitionEnd', hide);\r\n      this.backgroundElement.style.opacity = 0;\r\n      this.domElement.style.opacity = 0;\r\n      this.domElement.style.webkitTransform = 'scale(1.1)';\r\n    }\r\n  }, {\r\n    key: 'layout',\r\n    value: function layout() {\r\n      this.domElement.style.left = window.innerWidth / 2 - dom.getWidth(this.domElement) / 2 + 'px';\r\n      this.domElement.style.top = window.innerHeight / 2 - dom.getHeight(this.domElement) / 2 + 'px';\r\n    }\r\n  }]);\r\n  return CenteredDiv;\r\n}();\r\n\r\nvar styleSheet = ___$insertStyle(\".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\");\r\n\r\ncss.inject(styleSheet);\r\nvar CSS_NAMESPACE = 'dg';\r\nvar HIDE_KEY_CODE = 72;\r\nvar CLOSE_BUTTON_HEIGHT = 20;\r\nvar DEFAULT_DEFAULT_PRESET_NAME = 'Default';\r\nvar SUPPORTS_LOCAL_STORAGE = function () {\r\n  try {\r\n    return !!window.localStorage;\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n}();\r\nvar SAVE_DIALOGUE = void 0;\r\nvar autoPlaceVirgin = true;\r\nvar autoPlaceContainer = void 0;\r\nvar hide = false;\r\nvar hideableGuis = [];\r\nvar GUI = function GUI(pars) {\r\n  var _this = this;\r\n  var params = pars || {};\r\n  this.domElement = document.createElement('div');\r\n  this.__ul = document.createElement('ul');\r\n  this.domElement.appendChild(this.__ul);\r\n  dom.addClass(this.domElement, CSS_NAMESPACE);\r\n  this.__folders = {};\r\n  this.__controllers = [];\r\n  this.__rememberedObjects = [];\r\n  this.__rememberedObjectIndecesToControllers = [];\r\n  this.__listening = [];\r\n  params = Common.defaults(params, {\r\n    closeOnTop: false,\r\n    autoPlace: true,\r\n    width: GUI.DEFAULT_WIDTH\r\n  });\r\n  params = Common.defaults(params, {\r\n    resizable: params.autoPlace,\r\n    hideable: params.autoPlace\r\n  });\r\n  if (!Common.isUndefined(params.load)) {\r\n    if (params.preset) {\r\n      params.load.preset = params.preset;\r\n    }\r\n  } else {\r\n    params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\r\n  }\r\n  if (Common.isUndefined(params.parent) && params.hideable) {\r\n    hideableGuis.push(this);\r\n  }\r\n  params.resizable = Common.isUndefined(params.parent) && params.resizable;\r\n  if (params.autoPlace && Common.isUndefined(params.scrollable)) {\r\n    params.scrollable = true;\r\n  }\r\n  var useLocalStorage = SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\r\n  var saveToLocalStorage = void 0;\r\n  var titleRow = void 0;\r\n  Object.defineProperties(this,\r\n  {\r\n    parent: {\r\n      get: function get$$1() {\r\n        return params.parent;\r\n      }\r\n    },\r\n    scrollable: {\r\n      get: function get$$1() {\r\n        return params.scrollable;\r\n      }\r\n    },\r\n    autoPlace: {\r\n      get: function get$$1() {\r\n        return params.autoPlace;\r\n      }\r\n    },\r\n    closeOnTop: {\r\n      get: function get$$1() {\r\n        return params.closeOnTop;\r\n      }\r\n    },\r\n    preset: {\r\n      get: function get$$1() {\r\n        if (_this.parent) {\r\n          return _this.getRoot().preset;\r\n        }\r\n        return params.load.preset;\r\n      },\r\n      set: function set$$1(v) {\r\n        if (_this.parent) {\r\n          _this.getRoot().preset = v;\r\n        } else {\r\n          params.load.preset = v;\r\n        }\r\n        setPresetSelectIndex(this);\r\n        _this.revert();\r\n      }\r\n    },\r\n    width: {\r\n      get: function get$$1() {\r\n        return params.width;\r\n      },\r\n      set: function set$$1(v) {\r\n        params.width = v;\r\n        setWidth(_this, v);\r\n      }\r\n    },\r\n    name: {\r\n      get: function get$$1() {\r\n        return params.name;\r\n      },\r\n      set: function set$$1(v) {\r\n        params.name = v;\r\n        if (titleRow) {\r\n          titleRow.innerHTML = params.name;\r\n        }\r\n      }\r\n    },\r\n    closed: {\r\n      get: function get$$1() {\r\n        return params.closed;\r\n      },\r\n      set: function set$$1(v) {\r\n        params.closed = v;\r\n        if (params.closed) {\r\n          dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\r\n        } else {\r\n          dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\r\n        }\r\n        this.onResize();\r\n        if (_this.__closeButton) {\r\n          _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\r\n        }\r\n      }\r\n    },\r\n    load: {\r\n      get: function get$$1() {\r\n        return params.load;\r\n      }\r\n    },\r\n    useLocalStorage: {\r\n      get: function get$$1() {\r\n        return useLocalStorage;\r\n      },\r\n      set: function set$$1(bool) {\r\n        if (SUPPORTS_LOCAL_STORAGE) {\r\n          useLocalStorage = bool;\r\n          if (bool) {\r\n            dom.bind(window, 'unload', saveToLocalStorage);\r\n          } else {\r\n            dom.unbind(window, 'unload', saveToLocalStorage);\r\n          }\r\n          localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\r\n        }\r\n      }\r\n    }\r\n  });\r\n  if (Common.isUndefined(params.parent)) {\r\n    this.closed = params.closed || false;\r\n    dom.addClass(this.domElement, GUI.CLASS_MAIN);\r\n    dom.makeSelectable(this.domElement, false);\r\n    if (SUPPORTS_LOCAL_STORAGE) {\r\n      if (useLocalStorage) {\r\n        _this.useLocalStorage = true;\r\n        var savedGui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\r\n        if (savedGui) {\r\n          params.load = JSON.parse(savedGui);\r\n        }\r\n      }\r\n    }\r\n    this.__closeButton = document.createElement('div');\r\n    this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\r\n    dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\r\n    if (params.closeOnTop) {\r\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_TOP);\r\n      this.domElement.insertBefore(this.__closeButton, this.domElement.childNodes[0]);\r\n    } else {\r\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BOTTOM);\r\n      this.domElement.appendChild(this.__closeButton);\r\n    }\r\n    dom.bind(this.__closeButton, 'click', function () {\r\n      _this.closed = !_this.closed;\r\n    });\r\n  } else {\r\n    if (params.closed === undefined) {\r\n      params.closed = true;\r\n    }\r\n    var titleRowName = document.createTextNode(params.name);\r\n    dom.addClass(titleRowName, 'controller-name');\r\n    titleRow = addRow(_this, titleRowName);\r\n    var onClickTitle = function onClickTitle(e) {\r\n      e.preventDefault();\r\n      _this.closed = !_this.closed;\r\n      return false;\r\n    };\r\n    dom.addClass(this.__ul, GUI.CLASS_CLOSED);\r\n    dom.addClass(titleRow, 'title');\r\n    dom.bind(titleRow, 'click', onClickTitle);\r\n    if (!params.closed) {\r\n      this.closed = false;\r\n    }\r\n  }\r\n  if (params.autoPlace) {\r\n    if (Common.isUndefined(params.parent)) {\r\n      if (autoPlaceVirgin) {\r\n        autoPlaceContainer = document.createElement('div');\r\n        dom.addClass(autoPlaceContainer, CSS_NAMESPACE);\r\n        dom.addClass(autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER);\r\n        document.body.appendChild(autoPlaceContainer);\r\n        autoPlaceVirgin = false;\r\n      }\r\n      autoPlaceContainer.appendChild(this.domElement);\r\n      dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\r\n    }\r\n    if (!this.parent) {\r\n      setWidth(_this, params.width);\r\n    }\r\n  }\r\n  this.__resizeHandler = function () {\r\n    _this.onResizeDebounced();\r\n  };\r\n  dom.bind(window, 'resize', this.__resizeHandler);\r\n  dom.bind(this.__ul, 'webkitTransitionEnd', this.__resizeHandler);\r\n  dom.bind(this.__ul, 'transitionend', this.__resizeHandler);\r\n  dom.bind(this.__ul, 'oTransitionEnd', this.__resizeHandler);\r\n  this.onResize();\r\n  if (params.resizable) {\r\n    addResizeHandle(this);\r\n  }\r\n  saveToLocalStorage = function saveToLocalStorage() {\r\n    if (SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(_this, 'isLocal')) === 'true') {\r\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\r\n    }\r\n  };\r\n  this.saveToLocalStorageIfPossible = saveToLocalStorage;\r\n  function resetWidth() {\r\n    var root = _this.getRoot();\r\n    root.width += 1;\r\n    Common.defer(function () {\r\n      root.width -= 1;\r\n    });\r\n  }\r\n  if (!params.parent) {\r\n    resetWidth();\r\n  }\r\n};\r\nGUI.toggleHide = function () {\r\n  hide = !hide;\r\n  Common.each(hideableGuis, function (gui) {\r\n    gui.domElement.style.display = hide ? 'none' : '';\r\n  });\r\n};\r\nGUI.CLASS_AUTO_PLACE = 'a';\r\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\r\nGUI.CLASS_MAIN = 'main';\r\nGUI.CLASS_CONTROLLER_ROW = 'cr';\r\nGUI.CLASS_TOO_TALL = 'taller-than-window';\r\nGUI.CLASS_CLOSED = 'closed';\r\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\r\nGUI.CLASS_CLOSE_TOP = 'close-top';\r\nGUI.CLASS_CLOSE_BOTTOM = 'close-bottom';\r\nGUI.CLASS_DRAG = 'drag';\r\nGUI.DEFAULT_WIDTH = 245;\r\nGUI.TEXT_CLOSED = 'Close Controls';\r\nGUI.TEXT_OPEN = 'Open Controls';\r\nGUI._keydownHandler = function (e) {\r\n  if (document.activeElement.type !== 'text' && (e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE)) {\r\n    GUI.toggleHide();\r\n  }\r\n};\r\ndom.bind(window, 'keydown', GUI._keydownHandler, false);\r\nCommon.extend(GUI.prototype,\r\n{\r\n  add: function add(object, property) {\r\n    return _add(this, object, property, {\r\n      factoryArgs: Array.prototype.slice.call(arguments, 2)\r\n    });\r\n  },\r\n  addColor: function addColor(object, property) {\r\n    return _add(this, object, property, {\r\n      color: true\r\n    });\r\n  },\r\n  remove: function remove(controller) {\r\n    this.__ul.removeChild(controller.__li);\r\n    this.__controllers.splice(this.__controllers.indexOf(controller), 1);\r\n    var _this = this;\r\n    Common.defer(function () {\r\n      _this.onResize();\r\n    });\r\n  },\r\n  destroy: function destroy() {\r\n    if (this.parent) {\r\n      throw new Error('Only the root GUI should be removed with .destroy(). ' + 'For subfolders, use gui.removeFolder(folder) instead.');\r\n    }\r\n    if (this.autoPlace) {\r\n      autoPlaceContainer.removeChild(this.domElement);\r\n    }\r\n    var _this = this;\r\n    Common.each(this.__folders, function (subfolder) {\r\n      _this.removeFolder(subfolder);\r\n    });\r\n    dom.unbind(window, 'keydown', GUI._keydownHandler, false);\r\n    removeListeners(this);\r\n  },\r\n  addFolder: function addFolder(name) {\r\n    if (this.__folders[name] !== undefined) {\r\n      throw new Error('You already have a folder in this GUI by the' + ' name \"' + name + '\"');\r\n    }\r\n    var newGuiParams = { name: name, parent: this };\r\n    newGuiParams.autoPlace = this.autoPlace;\r\n    if (this.load &&\r\n    this.load.folders &&\r\n    this.load.folders[name]) {\r\n      newGuiParams.closed = this.load.folders[name].closed;\r\n      newGuiParams.load = this.load.folders[name];\r\n    }\r\n    var gui = new GUI(newGuiParams);\r\n    this.__folders[name] = gui;\r\n    var li = addRow(this, gui.domElement);\r\n    dom.addClass(li, 'folder');\r\n    return gui;\r\n  },\r\n  removeFolder: function removeFolder(folder) {\r\n    this.__ul.removeChild(folder.domElement.parentElement);\r\n    delete this.__folders[folder.name];\r\n    if (this.load &&\r\n    this.load.folders &&\r\n    this.load.folders[folder.name]) {\r\n      delete this.load.folders[folder.name];\r\n    }\r\n    removeListeners(folder);\r\n    var _this = this;\r\n    Common.each(folder.__folders, function (subfolder) {\r\n      folder.removeFolder(subfolder);\r\n    });\r\n    Common.defer(function () {\r\n      _this.onResize();\r\n    });\r\n  },\r\n  open: function open() {\r\n    this.closed = false;\r\n  },\r\n  close: function close() {\r\n    this.closed = true;\r\n  },\r\n  hide: function hide() {\r\n    this.domElement.style.display = 'none';\r\n  },\r\n  show: function show() {\r\n    this.domElement.style.display = '';\r\n  },\r\n  onResize: function onResize() {\r\n    var root = this.getRoot();\r\n    if (root.scrollable) {\r\n      var top = dom.getOffset(root.__ul).top;\r\n      var h = 0;\r\n      Common.each(root.__ul.childNodes, function (node) {\r\n        if (!(root.autoPlace && node === root.__save_row)) {\r\n          h += dom.getHeight(node);\r\n        }\r\n      });\r\n      if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\r\n        dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\r\n        root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\r\n      } else {\r\n        dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\r\n        root.__ul.style.height = 'auto';\r\n      }\r\n    }\r\n    if (root.__resize_handle) {\r\n      Common.defer(function () {\r\n        root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\r\n      });\r\n    }\r\n    if (root.__closeButton) {\r\n      root.__closeButton.style.width = root.width + 'px';\r\n    }\r\n  },\r\n  onResizeDebounced: Common.debounce(function () {\r\n    this.onResize();\r\n  }, 50),\r\n  remember: function remember() {\r\n    if (Common.isUndefined(SAVE_DIALOGUE)) {\r\n      SAVE_DIALOGUE = new CenteredDiv();\r\n      SAVE_DIALOGUE.domElement.innerHTML = saveDialogContents;\r\n    }\r\n    if (this.parent) {\r\n      throw new Error('You can only call remember on a top level GUI.');\r\n    }\r\n    var _this = this;\r\n    Common.each(Array.prototype.slice.call(arguments), function (object) {\r\n      if (_this.__rememberedObjects.length === 0) {\r\n        addSaveMenu(_this);\r\n      }\r\n      if (_this.__rememberedObjects.indexOf(object) === -1) {\r\n        _this.__rememberedObjects.push(object);\r\n      }\r\n    });\r\n    if (this.autoPlace) {\r\n      setWidth(this, this.width);\r\n    }\r\n  },\r\n  getRoot: function getRoot() {\r\n    var gui = this;\r\n    while (gui.parent) {\r\n      gui = gui.parent;\r\n    }\r\n    return gui;\r\n  },\r\n  getSaveObject: function getSaveObject() {\r\n    var toReturn = this.load;\r\n    toReturn.closed = this.closed;\r\n    if (this.__rememberedObjects.length > 0) {\r\n      toReturn.preset = this.preset;\r\n      if (!toReturn.remembered) {\r\n        toReturn.remembered = {};\r\n      }\r\n      toReturn.remembered[this.preset] = getCurrentPreset(this);\r\n    }\r\n    toReturn.folders = {};\r\n    Common.each(this.__folders, function (element, key) {\r\n      toReturn.folders[key] = element.getSaveObject();\r\n    });\r\n    return toReturn;\r\n  },\r\n  save: function save() {\r\n    if (!this.load.remembered) {\r\n      this.load.remembered = {};\r\n    }\r\n    this.load.remembered[this.preset] = getCurrentPreset(this);\r\n    markPresetModified(this, false);\r\n    this.saveToLocalStorageIfPossible();\r\n  },\r\n  saveAs: function saveAs(presetName) {\r\n    if (!this.load.remembered) {\r\n      this.load.remembered = {};\r\n      this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\r\n    }\r\n    this.load.remembered[presetName] = getCurrentPreset(this);\r\n    this.preset = presetName;\r\n    addPresetOption(this, presetName, true);\r\n    this.saveToLocalStorageIfPossible();\r\n  },\r\n  revert: function revert(gui) {\r\n    Common.each(this.__controllers, function (controller) {\r\n      if (!this.getRoot().load.remembered) {\r\n        controller.setValue(controller.initialValue);\r\n      } else {\r\n        recallSavedValue(gui || this.getRoot(), controller);\r\n      }\r\n      if (controller.__onFinishChange) {\r\n        controller.__onFinishChange.call(controller, controller.getValue());\r\n      }\r\n    }, this);\r\n    Common.each(this.__folders, function (folder) {\r\n      folder.revert(folder);\r\n    });\r\n    if (!gui) {\r\n      markPresetModified(this.getRoot(), false);\r\n    }\r\n  },\r\n  listen: function listen(controller) {\r\n    var init = this.__listening.length === 0;\r\n    this.__listening.push(controller);\r\n    if (init) {\r\n      updateDisplays(this.__listening);\r\n    }\r\n  },\r\n  updateDisplay: function updateDisplay() {\r\n    Common.each(this.__controllers, function (controller) {\r\n      controller.updateDisplay();\r\n    });\r\n    Common.each(this.__folders, function (folder) {\r\n      folder.updateDisplay();\r\n    });\r\n  }\r\n});\r\nfunction addRow(gui, newDom, liBefore) {\r\n  var li = document.createElement('li');\r\n  if (newDom) {\r\n    li.appendChild(newDom);\r\n  }\r\n  if (liBefore) {\r\n    gui.__ul.insertBefore(li, liBefore);\r\n  } else {\r\n    gui.__ul.appendChild(li);\r\n  }\r\n  gui.onResize();\r\n  return li;\r\n}\r\nfunction removeListeners(gui) {\r\n  dom.unbind(window, 'resize', gui.__resizeHandler);\r\n  if (gui.saveToLocalStorageIfPossible) {\r\n    dom.unbind(window, 'unload', gui.saveToLocalStorageIfPossible);\r\n  }\r\n}\r\nfunction markPresetModified(gui, modified) {\r\n  var opt = gui.__preset_select[gui.__preset_select.selectedIndex];\r\n  if (modified) {\r\n    opt.innerHTML = opt.value + '*';\r\n  } else {\r\n    opt.innerHTML = opt.value;\r\n  }\r\n}\r\nfunction augmentController(gui, li, controller) {\r\n  controller.__li = li;\r\n  controller.__gui = gui;\r\n  Common.extend(controller,                                   {\r\n    options: function options(_options) {\r\n      if (arguments.length > 1) {\r\n        var nextSibling = controller.__li.nextElementSibling;\r\n        controller.remove();\r\n        return _add(gui, controller.object, controller.property, {\r\n          before: nextSibling,\r\n          factoryArgs: [Common.toArray(arguments)]\r\n        });\r\n      }\r\n      if (Common.isArray(_options) || Common.isObject(_options)) {\r\n        var _nextSibling = controller.__li.nextElementSibling;\r\n        controller.remove();\r\n        return _add(gui, controller.object, controller.property, {\r\n          before: _nextSibling,\r\n          factoryArgs: [_options]\r\n        });\r\n      }\r\n    },\r\n    name: function name(_name) {\r\n      controller.__li.firstElementChild.firstElementChild.innerHTML = _name;\r\n      return controller;\r\n    },\r\n    listen: function listen() {\r\n      controller.__gui.listen(controller);\r\n      return controller;\r\n    },\r\n    remove: function remove() {\r\n      controller.__gui.remove(controller);\r\n      return controller;\r\n    }\r\n  });\r\n  if (controller instanceof NumberControllerSlider) {\r\n    var box = new NumberControllerBox(controller.object, controller.property, { min: controller.__min, max: controller.__max, step: controller.__step });\r\n    Common.each(['updateDisplay', 'onChange', 'onFinishChange', 'step', 'min', 'max'], function (method) {\r\n      var pc = controller[method];\r\n      var pb = box[method];\r\n      controller[method] = box[method] = function () {\r\n        var args = Array.prototype.slice.call(arguments);\r\n        pb.apply(box, args);\r\n        return pc.apply(controller, args);\r\n      };\r\n    });\r\n    dom.addClass(li, 'has-slider');\r\n    controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\r\n  } else if (controller instanceof NumberControllerBox) {\r\n    var r = function r(returned) {\r\n      if (Common.isNumber(controller.__min) && Common.isNumber(controller.__max)) {\r\n        var oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\r\n        var wasListening = controller.__gui.__listening.indexOf(controller) > -1;\r\n        controller.remove();\r\n        var newController = _add(gui, controller.object, controller.property, {\r\n          before: controller.__li.nextElementSibling,\r\n          factoryArgs: [controller.__min, controller.__max, controller.__step]\r\n        });\r\n        newController.name(oldName);\r\n        if (wasListening) newController.listen();\r\n        return newController;\r\n      }\r\n      return returned;\r\n    };\r\n    controller.min = Common.compose(r, controller.min);\r\n    controller.max = Common.compose(r, controller.max);\r\n  } else if (controller instanceof BooleanController) {\r\n    dom.bind(li, 'click', function () {\r\n      dom.fakeEvent(controller.__checkbox, 'click');\r\n    });\r\n    dom.bind(controller.__checkbox, 'click', function (e) {\r\n      e.stopPropagation();\r\n    });\r\n  } else if (controller instanceof FunctionController) {\r\n    dom.bind(li, 'click', function () {\r\n      dom.fakeEvent(controller.__button, 'click');\r\n    });\r\n    dom.bind(li, 'mouseover', function () {\r\n      dom.addClass(controller.__button, 'hover');\r\n    });\r\n    dom.bind(li, 'mouseout', function () {\r\n      dom.removeClass(controller.__button, 'hover');\r\n    });\r\n  } else if (controller instanceof ColorController) {\r\n    dom.addClass(li, 'color');\r\n    controller.updateDisplay = Common.compose(function (val) {\r\n      li.style.borderLeftColor = controller.__color.toString();\r\n      return val;\r\n    }, controller.updateDisplay);\r\n    controller.updateDisplay();\r\n  }\r\n  controller.setValue = Common.compose(function (val) {\r\n    if (gui.getRoot().__preset_select && controller.isModified()) {\r\n      markPresetModified(gui.getRoot(), true);\r\n    }\r\n    return val;\r\n  }, controller.setValue);\r\n}\r\nfunction recallSavedValue(gui, controller) {\r\n  var root = gui.getRoot();\r\n  var matchedIndex = root.__rememberedObjects.indexOf(controller.object);\r\n  if (matchedIndex !== -1) {\r\n    var controllerMap = root.__rememberedObjectIndecesToControllers[matchedIndex];\r\n    if (controllerMap === undefined) {\r\n      controllerMap = {};\r\n      root.__rememberedObjectIndecesToControllers[matchedIndex] = controllerMap;\r\n    }\r\n    controllerMap[controller.property] = controller;\r\n    if (root.load && root.load.remembered) {\r\n      var presetMap = root.load.remembered;\r\n      var preset = void 0;\r\n      if (presetMap[gui.preset]) {\r\n        preset = presetMap[gui.preset];\r\n      } else if (presetMap[DEFAULT_DEFAULT_PRESET_NAME]) {\r\n        preset = presetMap[DEFAULT_DEFAULT_PRESET_NAME];\r\n      } else {\r\n        return;\r\n      }\r\n      if (preset[matchedIndex] && preset[matchedIndex][controller.property] !== undefined) {\r\n        var value = preset[matchedIndex][controller.property];\r\n        controller.initialValue = value;\r\n        controller.setValue(value);\r\n      }\r\n    }\r\n  }\r\n}\r\nfunction _add(gui, object, property, params) {\r\n  var customObject;\r\n  if (object.arguments) {\r\n    customObject = object;\r\n    object = customObject.arguments.object;\r\n    property = customObject.arguments.property;\r\n    params = {\r\n      factoryArgs: customObject.arguments.opts\r\n    };\r\n  }\r\n  if (customObject === undefined && object[property] === undefined) {\r\n    throw new Error('Object \"' + object + '\" has no property \"' + property + '\"');\r\n  }\r\n  var controller = void 0;\r\n  if (params.color) {\r\n    controller = new ColorController(object, property);\r\n  } else if (customObject !== undefined && typeof customObject.property === \"string\") {\r\n    controller = customObject;\r\n  } else {\r\n    var factoryArgs = [object, property].concat(params.factoryArgs);\r\n    controller = ControllerFactory.apply(gui, factoryArgs);\r\n  }\r\n  if (controller === null) controller = customObject;else if (customObject !== undefined) customObject.controller = controller;\r\n  if (params.before instanceof Controller) {\r\n    params.before = params.before.__li;\r\n  }\r\n  recallSavedValue(gui, controller);\r\n  dom.addClass(controller.domElement, 'c');\r\n  var name = document.createElement('span');\r\n  dom.addClass(name, 'property-name');\r\n  if (customObject !== undefined && _typeof(customObject.property) === \"object\") {\r\n    for (var propertyName in customObject.property) {\r\n      name.appendChild(customObject.property[propertyName]);\r\n    }\r\n  } else name.innerHTML = controller.property;\r\n  var container = document.createElement('div');\r\n  container.appendChild(name);\r\n  container.appendChild(controller.domElement);\r\n  var li = addRow(gui, container, params.before);\r\n  dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\r\n  if (controller instanceof ColorController) {\r\n    dom.addClass(li, 'color');\r\n  } else {\r\n    dom.addClass(li, _typeof(controller.getValue()));\r\n  }\r\n  augmentController(gui, li, controller);\r\n  gui.__controllers.push(controller);\r\n  return controller;\r\n}\r\nfunction getLocalStorageHash(gui, key) {\r\n  return document.location.href + '.' + key;\r\n}\r\nfunction addPresetOption(gui, name, setSelected) {\r\n  var opt = document.createElement('option');\r\n  opt.innerHTML = name;\r\n  opt.value = name;\r\n  gui.__preset_select.appendChild(opt);\r\n  if (setSelected) {\r\n    gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\r\n  }\r\n}\r\nfunction showHideExplain(gui, explain) {\r\n  explain.style.display = gui.useLocalStorage ? 'block' : 'none';\r\n}\r\nfunction addSaveMenu(gui) {\r\n  var div = gui.__save_row = document.createElement('li');\r\n  dom.addClass(gui.domElement, 'has-save');\r\n  gui.__ul.insertBefore(div, gui.__ul.firstChild);\r\n  dom.addClass(div, 'save-row');\r\n  var gears = document.createElement('span');\r\n  gears.innerHTML = '&nbsp;';\r\n  dom.addClass(gears, 'button gears');\r\n  var button = document.createElement('span');\r\n  button.innerHTML = 'Save';\r\n  dom.addClass(button, 'button');\r\n  dom.addClass(button, 'save');\r\n  var button2 = document.createElement('span');\r\n  button2.innerHTML = 'New';\r\n  dom.addClass(button2, 'button');\r\n  dom.addClass(button2, 'save-as');\r\n  var button3 = document.createElement('span');\r\n  button3.innerHTML = 'Revert';\r\n  dom.addClass(button3, 'button');\r\n  dom.addClass(button3, 'revert');\r\n  var select = gui.__preset_select = document.createElement('select');\r\n  if (gui.load && gui.load.remembered) {\r\n    Common.each(gui.load.remembered, function (value, key) {\r\n      addPresetOption(gui, key, key === gui.preset);\r\n    });\r\n  } else {\r\n    addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\r\n  }\r\n  dom.bind(select, 'change', function () {\r\n    for (var index = 0; index < gui.__preset_select.length; index++) {\r\n      gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\r\n    }\r\n    gui.preset = this.value;\r\n  });\r\n  div.appendChild(select);\r\n  div.appendChild(gears);\r\n  div.appendChild(button);\r\n  div.appendChild(button2);\r\n  div.appendChild(button3);\r\n  if (SUPPORTS_LOCAL_STORAGE) {\r\n    var explain = document.getElementById('dg-local-explain');\r\n    var localStorageCheckBox = document.getElementById('dg-local-storage');\r\n    var saveLocally = document.getElementById('dg-save-locally');\r\n    saveLocally.style.display = 'block';\r\n    if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\r\n      localStorageCheckBox.setAttribute('checked', 'checked');\r\n    }\r\n    showHideExplain(gui, explain);\r\n    dom.bind(localStorageCheckBox, 'change', function () {\r\n      gui.useLocalStorage = !gui.useLocalStorage;\r\n      showHideExplain(gui, explain);\r\n    });\r\n  }\r\n  var newConstructorTextArea = document.getElementById('dg-new-constructor');\r\n  dom.bind(newConstructorTextArea, 'keydown', function (e) {\r\n    if (e.metaKey && (e.which === 67 || e.keyCode === 67)) {\r\n      SAVE_DIALOGUE.hide();\r\n    }\r\n  });\r\n  dom.bind(gears, 'click', function () {\r\n    newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\r\n    SAVE_DIALOGUE.show();\r\n    newConstructorTextArea.focus();\r\n    newConstructorTextArea.select();\r\n  });\r\n  dom.bind(button, 'click', function () {\r\n    gui.save();\r\n  });\r\n  dom.bind(button2, 'click', function () {\r\n    var presetName = prompt('Enter a new preset name.');\r\n    if (presetName) {\r\n      gui.saveAs(presetName);\r\n    }\r\n  });\r\n  dom.bind(button3, 'click', function () {\r\n    gui.revert();\r\n  });\r\n}\r\nfunction addResizeHandle(gui) {\r\n  var pmouseX = void 0;\r\n  gui.__resize_handle = document.createElement('div');\r\n  Common.extend(gui.__resize_handle.style, {\r\n    width: '6px',\r\n    marginLeft: '-3px',\r\n    height: '200px',\r\n    cursor: 'ew-resize',\r\n    position: 'absolute'\r\n  });\r\n  function drag(e) {\r\n    e.preventDefault();\r\n    gui.width += pmouseX - e.clientX;\r\n    gui.onResize();\r\n    pmouseX = e.clientX;\r\n    return false;\r\n  }\r\n  function dragStop() {\r\n    dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\r\n    dom.unbind(window, 'mousemove', drag);\r\n    dom.unbind(window, 'mouseup', dragStop);\r\n  }\r\n  function dragStart(e) {\r\n    e.preventDefault();\r\n    pmouseX = e.clientX;\r\n    dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\r\n    dom.bind(window, 'mousemove', drag);\r\n    dom.bind(window, 'mouseup', dragStop);\r\n    return false;\r\n  }\r\n  dom.bind(gui.__resize_handle, 'mousedown', dragStart);\r\n  dom.bind(gui.__closeButton, 'mousedown', dragStart);\r\n  gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\r\n}\r\nfunction setWidth(gui, w) {\r\n  gui.domElement.style.width = w + 'px';\r\n  if (gui.__save_row && gui.autoPlace) {\r\n    gui.__save_row.style.width = w + 'px';\r\n  }\r\n  if (gui.__closeButton) {\r\n    gui.__closeButton.style.width = w + 'px';\r\n  }\r\n}\r\nfunction getCurrentPreset(gui, useInitialValues) {\r\n  var toReturn = {};\r\n  Common.each(gui.__rememberedObjects, function (val, index) {\r\n    var savedValues = {};\r\n    var controllerMap = gui.__rememberedObjectIndecesToControllers[index];\r\n    Common.each(controllerMap, function (controller, property) {\r\n      savedValues[property] = useInitialValues ? controller.initialValue : controller.getValue();\r\n    });\r\n    toReturn[index] = savedValues;\r\n  });\r\n  return toReturn;\r\n}\r\nfunction setPresetSelectIndex(gui) {\r\n  for (var index = 0; index < gui.__preset_select.length; index++) {\r\n    if (gui.__preset_select[index].value === gui.preset) {\r\n      gui.__preset_select.selectedIndex = index;\r\n    }\r\n  }\r\n}\r\nfunction updateDisplays(controllerArray) {\r\n  if (controllerArray.length !== 0) {\r\n    requestAnimationFrame$1.call(window, function () {\r\n      updateDisplays(controllerArray);\r\n    });\r\n  }\r\n  Common.each(controllerArray, function (c) {\r\n    c.updateDisplay();\r\n  });\r\n}\r\n\r\nvar color = {\r\n  Color: Color,\r\n  math: ColorMath,\r\n  interpret: interpret\r\n};\r\nvar controllers = {\r\n  Controller: Controller,\r\n  BooleanController: BooleanController,\r\n  OptionController: OptionController,\r\n  StringController: StringController,\r\n  NumberController: NumberController,\r\n  NumberControllerBox: NumberControllerBox,\r\n  NumberControllerSlider: NumberControllerSlider,\r\n  FunctionController: FunctionController,\r\n  ColorController: ColorController,\r\n  CustomController: CustomController\r\n};\r\nvar dom$1 = { dom: dom };\r\nvar gui = { GUI: GUI };\r\nvar GUI$1 = GUI;\r\nvar index = {\r\n  color: color,\r\n  controllers: controllers,\r\n  dom: dom$1,\r\n  gui: gui,\r\n  GUI: GUI$1\r\n};\r\n\r\nexport { color, controllers, dom$1 as dom, gui, GUI$1 as GUI };\r\nexport default index;\r\n//# sourceMappingURL=dat.gui.module.js.map\r\n","/**\r\n * custom controller, allow to user to change a value step by step.\r\n *\r\n * @author Andrej Hristoliubov https://anhr.github.io/AboutMe/\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\nvar UpDownController = {\r\n\r\n\t/**\r\n\t * adds new button into controller\r\n\t * @param {string} innerHTML button name\r\n\t * @param {object} [options] the following options are available\r\n\t * @param {String} [options.title] title of the button\r\n\t * @param {Event} [options.onclick] onclick event\r\n\t * @param {Event} [options.onWheel] onWheel event\r\n\t */\r\n\taddButton: function ( innerHTML, options ) {\r\n\r\n\t\toptions = options || {};\r\n\t\tvar button = document.createElement( 'span' );\r\n\t\tbutton.innerHTML = innerHTML;\r\n\t\tif ( options.title !== undefined )\r\n\t\t\tbutton.title = options.title;\r\n\t\tif ( options.onclick !== undefined ) {\r\n\r\n\t\t\tbutton.style.cursor = 'pointer';\r\n\t\t\tbutton.onclick = options.onclick;\r\n\r\n\t\t}\r\n\t\tif ( options.onwheel !== undefined ) {\r\n\r\n\t\t\tbutton.style.cursor = 'n-resize';\r\n\r\n\t\t\t//https://learn.javascript.ru/mousewheel\r\n\t\t\tif ( button.addEventListener ) {\r\n\t\t\t\tif ( 'onwheel' in document ) {\r\n\t\t\t\t\t// IE9+, FF17+, Ch31+\r\n\t\t\t\t\tbutton.addEventListener( \"wheel\", onWheel );\r\n\t\t\t\t} else if ( 'onmousewheel' in document ) {\r\n\t\t\t\t\t//   \r\n\t\t\t\t\tbutton.addEventListener( \"mousewheel\", onWheel );\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Firefox < 17\r\n\t\t\t\t\tbutton.addEventListener( \"MozMousePixelScroll\", onWheel );\r\n\t\t\t\t}\r\n\t\t\t} else { // IE8-\r\n\t\t\t\tbutton.attachEvent( \"onmousewheel\", onWheel );\r\n\t\t\t}\r\n\r\n\t\t\tfunction onWheel( e ) {\r\n\t\t\t\te = e || window.event;\r\n\r\n\t\t\t\t// wheelDelta      \r\n\t\t\t\tvar delta = e.deltaY || e.detail || e.wheelDelta;\r\n\t\t\t\toptions.onwheel( delta );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tbutton.style.margin = '0px 2px';\r\n\t\treturn button;\r\n\r\n\t},\r\n\r\n}\r\n\r\nexport default UpDownController;\r\n","/**\r\n * three class for [THREE]{@link https://github.com/anhr/three.js} variable.\r\n *\r\n * @author Andrej Hristoliubov https://anhr.github.io/AboutMe/\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\n/*  THREE,   \"npm run build\"  \r\n * (babel plugin) ReferenceError: Unknown plugin \"external-helpers\" specified in \"base\" at 1, attempted to resolve relative to \r\n//import * as THREE from 'https://threejs.org/build/three.module.js';\r\n//import * as THREE from '../../../../../three.js/dev/build/three.module.min.js';\r\n//import * as THREE from '../../three.js/dev/build/three.module.js';\r\n//import * as THREE from '../../three.js/dev/src/Three.js';\r\n//import { THREE } from 'https://raw.githack.com/anhr/commonNodeJS/master/three.js';\r\n//import * as THREE from 'https://raw.githack.com/anhr/three.js/dev/build/three.module.js';\r\n//import * as THREE from 'https://raw.githack.com/anhr/three.js/dev/build/three.module.min.js';\r\n*/\r\n\r\nvar _THREE, _dat;\r\n\r\nclass three {\r\n\r\n\t/**\r\n\t * class for [THREE]{@link https://github.com/anhr/three.js} and [dat]{@link https://github.com/dataarts/dat.gui} instances.\r\n\t * */\r\n\tconstructor() {}\r\n\t/**\r\n\t * set [THREE]{@link https://github.com/anhr/three.js}\r\n\t */\r\n\tset THREE( THREE ) {\r\n\r\n\t\tif ( _THREE ) {\r\n\r\n\t\t\tif ( !Object.is( THREE, _THREE ) )\r\n\t\t\t\tconsole.error( 'three: duplicate THREE. Please use one instance of the THREE library.' )\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\t\t_THREE = THREE;\r\n\r\n\t}\r\n\t/**\r\n\t * get [THREE]{@link https://github.com/anhr/three.js}\r\n\t */\r\n\tget THREE() {\r\n\r\n\t\tif ( _THREE === undefined )\r\n\t\t\tconsole.error( 'three: invalid _THREE = ' + _THREE + '. Call three.THREE = THREE first.' );\r\n\t\treturn _THREE;\r\n\r\n\t}\r\n\t/**\r\n\t * set [dat]{@link https://github.com/dataarts/dat.gui}\r\n\t */\r\n\tset dat( dat ) {\r\n\r\n\t\tif ( _dat ) {\r\n\r\n\t\t\tif ( !Object.is( dat, _dat ) )\r\n\t\t\t\tconsole.error( 'three: duplicate dat. Please use one instance of the dat library.' )\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\t\t_dat = dat;\r\n\r\n\t}\r\n\t/**\r\n\t * get [dat]{@link https://github.com/dataarts/dat.gui}\r\n\t */\r\n\tget dat() {\r\n\r\n/*   dat  \r\n\t\tif ( _dat === undefined && !boSetDat )\r\n\t\t\tconsole.error( 'three: invalid _dat = ' + _dat + '. Call three.dat = dat first.' );\r\n*/\t\t\t\r\n\t\treturn _dat;\r\n\r\n\t}\r\n\r\n}\r\nthree = new three();\r\n\r\nwindow.__myThree__ = window.__myThree__ || {};\r\nif ( window.__myThree__.boThree )\r\n\tconsole.error( 'three: duplicate three. Please use one instance of the three class.' )\r\nwindow.__myThree__.boThree = true;\r\n\r\nthree.isThree = function(){ return _THREE; }\r\n\r\nexport default three;","/**\r\n * @module ScaleController\r\n * @description is dat.GUI graphical user interface controller for control of the scale of threejs 3D object\r\n * \r\n * @see {@link https://threejs.org/} about threejs\r\n * @see {@link https://github.com/dataarts/dat.gui} about dat.GUI\r\n *\r\n * @author Andrej Hristoliubov https://anhr.github.io/AboutMe/\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\n//import { controllers } from '../../dat.gui/CustomController/build/dat.gui.module.js';\r\nimport { controllers } from './dat/dat.gui.module.js';\r\nimport UpDownController from './UpDownController.js';\r\n\r\n//import { dat } from './dat/dat.module.js';\r\nimport three from './three.js'\r\n\r\nclass ScaleController extends controllers.CustomController {\r\n\r\n\t/**\r\n\t* @callback onclick\r\n\t* @param {ScaleController} customController this controller\r\n\t* @param {Function} action action( value, zoom ) function for multiply or divide value to zoom\r\n\t*/\r\n\r\n\t/**\r\n\t * @description dat.GUI graphical user interface controller for control of the scale of threejs 3D object\r\n\t * @param {onclick} onclick Called whenever user has clicked this controller.\r\n\t * @param {object} [options] the following options are available:\r\n\t * @param {object} [options.settings] settings.\r\n\t * @param {number} [options.settings.zoomMultiplier] control value. Default is 1.1\r\n\t * @param {Function} [options.getLanguageCode=language code of your browser] returns the \"primary language\" subtag of the version of the browser.\r\n\t * @example \r\n//Add new ScaleController to the dat.GUI folder\r\nfolder.add( new ScaleController( function ( customController, action ) {\r\n\r\n\tvar zoom = customController.controller.getValue();\r\n\r\n\t//Scale a THREE.Mesh object\r\n\tmesh.scale.x = action( mesh.scale.x, zoom );\r\n\tmesh.scale.y = action( mesh.scale.y, zoom );\r\n\tmesh.scale.z = action( mesh.scale.z, zoom );\r\n\tmesh.needsUpdate = true;\r\n\r\n},\r\n\t{\r\n\r\n\t\tsettings: { zoomMultiplier: 1.1, },\r\n\t\tgetLanguageCode: getLanguageCode,\r\n\r\n\t} ) );\r\n\t */\r\n\tconstructor( onclick, options ) {\r\n\r\n\t\toptions = options || {};\r\n\t\toptions.settings = options.settings || {};\r\n\t\toptions.settings.zoomMultiplier = options.settings.zoomMultiplier || 1.1;\r\n\r\n\t\tsuper( {\r\n\r\n\t\t\tmultiplier: options.settings.zoomMultiplier,//1.1\r\n\t\t\tproperty: function ( customController ) {\r\n\r\n\r\n\t\t\t\t//Localization\r\n\r\n\t\t\t\tvar lang = {\r\n\r\n\t\t\t\t\t//Zoom\r\n\t\t\t\t\tzoom: 'Zoom',\r\n\t\t\t\t\tin: 'in',\r\n\t\t\t\t\tout: 'out',\r\n\t\t\t\t\twheelZoom: 'Scroll the mouse wheel to zoom',\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar _languageCode = options.getLanguageCode === undefined ? 'en'//Default language is English\r\n\t\t\t\t\t: options.getLanguageCode();\r\n\t\t\t\tswitch ( _languageCode ) {\r\n\r\n\t\t\t\t\tcase 'ru'://Russian language\r\n\r\n\t\t\t\t\t\t//Zoom\r\n\t\t\t\t\t\tlang.zoom = '';\r\n\t\t\t\t\t\tlang.in = '';\r\n\t\t\t\t\t\tlang.out = '';\r\n\t\t\t\t\t\tlang.wheelZoom = '     ';\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault://Custom language\r\n\t\t\t\t\t\tif ( ( options.lang === undefined ) || ( options.lang.languageCode != _languageCode ) )\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tObject.keys( options.lang ).forEach( function ( key ) {\r\n\r\n\t\t\t\t\t\t\tif ( lang[key] === undefined )\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\tlang[key] = options.lang[key];\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\r\n\t\t\t\tvar buttons = {},\r\n\t\t\t\t\taddButton = UpDownController.addButton;\r\n\t\t\t\tbuttons.zoomLabel = addButton( lang.zoom, {\r\n\r\n\t\t\t\t\ttitle: lang.wheelZoom,//Scroll the mouse wheel to zoom\r\n\t\t\t\t\tonwheel: function ( delta ) {\r\n\r\n\t\t\t\t\t\tonclick( customController, function ( value, zoom ) {\r\n\r\n\t\t\t\t\t\t\tif ( delta > 0 )\r\n\t\t\t\t\t\t\t\tvalue *= zoom;\r\n\t\t\t\t\t\t\telse value /= zoom;\r\n\t\t\t\t\t\t\treturn value;\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\t\t\t\tbuttons.in = addButton( '', {\r\n\r\n\t\t\t\t\ttitle: lang.in,\r\n\t\t\t\t\tonclick: function () {\r\n\r\n\t\t\t\t\t\tonclick( customController, function ( value, zoom ) {\r\n\r\n\t\t\t\t\t\t\tvalue *= zoom;\r\n\t\t\t\t\t\t\treturn value;\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\t\t\t\tbuttons.out = addButton( '', {\r\n\r\n\t\t\t\t\ttitle: lang.out,\r\n\t\t\t\t\tonclick: function () {\r\n\r\n\t\t\t\t\t\tonclick( customController, function ( value, zoom ) {\r\n\r\n\t\t\t\t\t\t\tvalue /= zoom;\r\n\t\t\t\t\t\t\treturn value;\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\t\t\t\treturn buttons;\r\n\r\n\t\t\t},\r\n\r\n\t\t}, 'multiplier', 1.1, 10, 0.1 );\r\n\t\tif ( this.property === undefined )\r\n\t\t\tconsole.error( 'init() returns ' + this.property );\r\n\r\n\t}\r\n\r\n}\r\nexport default ScaleController;\r\n\r\n/**\r\n * dat.GUI graphical user interface controllers for manipulate or multiplication of the object's property\r\n * @param {GUI} folder folder for new controllers\r\n * @param {Object} object The object to be manipulated\r\n * @param {String} property The name of the property to be manipulated\r\n * @param {function( value )} onChange Callback function that take the new  property of the object\r\n * @param {Object} [options] the following options are available\r\n * @param {object} [options.settings] settings.\r\n * @param {number} [options.settings.zoomMultiplier] control value. Default is 1.1\r\n * @param {Function} [options.getLanguageCode=language code of your browser] returns the \"primary language\" subtag of the version of the browser.\r\n * @param {String} [options.text] object's property name. Default is property name.\r\n * @param {String} [options.textTitle] object's property title. Default is not title,\r\n */\r\nfunction ScaleControllers( folder, object, property, onChange, options ) {\r\n\r\n\toptions = options || {};\r\n\tconst dat = three.dat;\r\n\tvar scaleController = folder.add( new ScaleController( function ( customController, action ) {\r\n\r\n\t\tvar value = action( controller.getValue(), scaleController.getValue() );\r\n\t\tcontroller.setValue( value );\r\n\t\tonChange( value );\r\n\r\n\t},\r\n\t\t{\r\n\r\n\t\t\tgetLanguageCode: options.getLanguageCode,\r\n\t\t\tsettings: options.settings,\r\n\r\n\t\t} ) ).onChange( function ( value ) { scaleController.zoomMultiplier = value; } );\r\n\tvar controller = dat.controllerZeroStep( folder, object, property, function ( value ) { onChange( value ); } );\r\n\tif ( options.text )\r\n\t\tdat.controllerNameAndTitle( controller, options.text, options.textTitle );\r\n\r\n}\r\nexport { ScaleControllers };\r\n","/**\r\n * PositionController is dat.GUI graphical user interface controller for control of the position of threejs 3D object\r\n * \r\n * @see {@link https://threejs.org/} about threejs\r\n * @see {@link https://github.com/dataarts/dat.gui} about dat.GUI\r\n *\r\n * @author Andrej Hristoliubov https://anhr.github.io/AboutMe/\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\n//import { controllers } from '../../dat.gui/CustomController/build/dat.gui.module.js';\r\nimport { controllers } from './dat/dat.gui.module.js';\r\nimport UpDownController from './UpDownController.js';\r\n\r\nclass PositionController extends controllers.CustomController {\r\n\r\n\t/**\r\n\t * dat.GUI graphical user interface for control of the position of threejs 3D object.\r\n\t * Base class <a href=\"../../dat.gui/CustomController/src/dat/controllers/CustomController.js\" target=\"_blank\">CustomController</a>\r\n\t * @extends controllers.CustomController.\r\n\t * @param {Event} onclickController\r\n\t * @param {object} [options={}] the following options are available:\r\n\t * @param {number} [options.settings={}] time settings.\r\n\t * @param {number} [options.settings.offset=0.1] offset.\r\n\t * @param {number} [options.min=0.1] Minimal offset.\r\n\t * @param {number} [options.max=10] Maximal offset.\r\n\t * @param {number} [options.step=0.1] step of offset.\r\n\t * @param {Function} [options.getLanguageCode=language code of your browser] returns the \"primary language\" subtag of the version of the browser.\r\n\t */\r\n\tconstructor( onclickController, options ) {\r\n\r\n\t\toptions = options || {};\r\n\t\toptions.settings = options.settings || {}; \r\n\t\tvar settings = options.settings; \r\n\r\n\t\toptions.min = options.min || 0.1;\r\n\t\toptions.max = options.max || 10;\r\n//\t\toptions.offset = options.offset || 0.1;\r\n\t\tsettings.offset = settings.offset || 0.1;\r\n\t\toptions.step = options.step || 0.1;\r\n\r\n\t\tsuper( {\r\n\r\n\t\t\toffset: settings.offset,\r\n\t\t\tproperty: function ( customController ) {\r\n\r\n\t\t\t\t//Localization\r\n\r\n\t\t\t\tvar lang = {\r\n\r\n\t\t\t\t\t//Position\r\n\t\t\t\t\toffset: 'Offset',\r\n\t\t\t\t\tadd: 'add',\r\n\t\t\t\t\tsubtract: 'subtract',\r\n\t\t\t\t\twheelPosition: 'Scroll the mouse wheel to change the position',\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\tvar _languageCode = options.getLanguageCode === undefined ? 'en'//Default language is English\r\n\t\t\t\t\t: options.getLanguageCode();\r\n\t\t\t\tswitch ( _languageCode ) {\r\n\r\n\t\t\t\t\tcase 'ru'://Russian language\r\n\r\n\t\t\t\t\t\t//Position\r\n\t\t\t\t\t\tlang.offset = '';\r\n\t\t\t\t\t\tlang.add = '';\r\n\t\t\t\t\t\tlang.subtract = '';\r\n\t\t\t\t\t\tlang.wheelPosition = '     ';\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault://Custom language\r\n\t\t\t\t\t\tif ( ( options.lang === undefined ) || ( options.lang.languageCode != _languageCode ) )\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tObject.keys( options.lang ).forEach( function ( key ) {\r\n\r\n\t\t\t\t\t\t\tif ( lang[key] === undefined )\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\tlang[key] = options.lang[key];\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\r\n\t\t\t\tvar buttons = {}, addButton = UpDownController.addButton;\r\n\t\t\t\tbuttons.Label = addButton( lang.offset, {\r\n\r\n\t\t\t\t\ttitle: lang.wheelPosition,\r\n\t\t\t\t\tonwheel: function ( delta ) {\r\n\r\n\t\t\t\t\t\tvar shift = customController.controller.getValue();\r\n\t\t\t\t\t\tonclickController( delta > 0 ? shift : - shift );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\t\t\t\tbuttons.in = addButton( '', {\r\n\r\n\t\t\t\t\ttitle: lang.add,\r\n\t\t\t\t\tonclick: function () {\r\n\r\n\t\t\t\t\t\tonclickController( customController.controller.getValue() );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\t\t\t\tbuttons.out = addButton( '', {\r\n\r\n\t\t\t\t\ttitle: lang.subtract,\r\n\t\t\t\t\tonclick: function () {\r\n\r\n\t\t\t\t\t\tonclickController( - customController.controller.getValue() );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\t\t\t\treturn buttons;\r\n\r\n\t\t\t},\r\n\r\n\t\t}, 'offset', options.min, options.max, options.step );\r\n\t\tif ( this.property === undefined )\r\n\t\t\tconsole.error( 'init() returns ' + this.property );\r\n\r\n\t}\r\n\r\n}\r\nexport default PositionController;","/**\r\n * dat-gui JavaScript Controller Library\r\n * http://code.google.com/p/dat-gui\r\n *\r\n * Copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\nfunction ___$insertStyle(css) {\r\n  if (!css) {\r\n    return;\r\n  }\r\n  if (typeof window === 'undefined') {\r\n    return;\r\n  }\r\n\r\n  var style = document.createElement('style');\r\n\r\n  style.setAttribute('type', 'text/css');\r\n  style.innerHTML = css;\r\n  document.head.appendChild(style);\r\n\r\n  return css;\r\n}\r\n\r\nfunction colorToString (color, forceCSSHex) {\r\n  var colorFormat = color.__state.conversionName.toString();\r\n  var r = Math.round(color.r);\r\n  var g = Math.round(color.g);\r\n  var b = Math.round(color.b);\r\n  var a = color.a;\r\n  var h = Math.round(color.h);\r\n  var s = color.s.toFixed(1);\r\n  var v = color.v.toFixed(1);\r\n  if (forceCSSHex || colorFormat === 'THREE_CHAR_HEX' || colorFormat === 'SIX_CHAR_HEX') {\r\n    var str = color.hex.toString(16);\r\n    while (str.length < 6) {\r\n      str = '0' + str;\r\n    }\r\n    return '#' + str;\r\n  } else if (colorFormat === 'CSS_RGB') {\r\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\r\n  } else if (colorFormat === 'CSS_RGBA') {\r\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\r\n  } else if (colorFormat === 'HEX') {\r\n    return '0x' + color.hex.toString(16);\r\n  } else if (colorFormat === 'RGB_ARRAY') {\r\n    return '[' + r + ',' + g + ',' + b + ']';\r\n  } else if (colorFormat === 'RGBA_ARRAY') {\r\n    return '[' + r + ',' + g + ',' + b + ',' + a + ']';\r\n  } else if (colorFormat === 'RGB_OBJ') {\r\n    return '{r:' + r + ',g:' + g + ',b:' + b + '}';\r\n  } else if (colorFormat === 'RGBA_OBJ') {\r\n    return '{r:' + r + ',g:' + g + ',b:' + b + ',a:' + a + '}';\r\n  } else if (colorFormat === 'HSV_OBJ') {\r\n    return '{h:' + h + ',s:' + s + ',v:' + v + '}';\r\n  } else if (colorFormat === 'HSVA_OBJ') {\r\n    return '{h:' + h + ',s:' + s + ',v:' + v + ',a:' + a + '}';\r\n  }\r\n  return 'unknown format';\r\n}\r\n\r\nvar ARR_EACH = Array.prototype.forEach;\r\nvar ARR_SLICE = Array.prototype.slice;\r\nvar Common = {\r\n  BREAK: {},\r\n  extend: function extend(target) {\r\n    this.each(ARR_SLICE.call(arguments, 1), function (obj) {\r\n      var keys = this.isObject(obj) ? Object.keys(obj) : [];\r\n      keys.forEach(function (key) {\r\n        if (!this.isUndefined(obj[key])) {\r\n          target[key] = obj[key];\r\n        }\r\n      }.bind(this));\r\n    }, this);\r\n    return target;\r\n  },\r\n  defaults: function defaults(target) {\r\n    this.each(ARR_SLICE.call(arguments, 1), function (obj) {\r\n      var keys = this.isObject(obj) ? Object.keys(obj) : [];\r\n      keys.forEach(function (key) {\r\n        if (this.isUndefined(target[key])) {\r\n          target[key] = obj[key];\r\n        }\r\n      }.bind(this));\r\n    }, this);\r\n    return target;\r\n  },\r\n  compose: function compose() {\r\n    var toCall = ARR_SLICE.call(arguments);\r\n    return function () {\r\n      var args = ARR_SLICE.call(arguments);\r\n      for (var i = toCall.length - 1; i >= 0; i--) {\r\n        args = [toCall[i].apply(this, args)];\r\n      }\r\n      return args[0];\r\n    };\r\n  },\r\n  each: function each(obj, itr, scope) {\r\n    if (!obj) {\r\n      return;\r\n    }\r\n    if (ARR_EACH && obj.forEach && obj.forEach === ARR_EACH) {\r\n      obj.forEach(itr, scope);\r\n    } else if (obj.length === obj.length + 0) {\r\n      var key = void 0;\r\n      var l = void 0;\r\n      for (key = 0, l = obj.length; key < l; key++) {\r\n        if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) {\r\n          return;\r\n        }\r\n      }\r\n    } else {\r\n      for (var _key in obj) {\r\n        if (itr.call(scope, obj[_key], _key) === this.BREAK) {\r\n          return;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  defer: function defer(fnc) {\r\n    setTimeout(fnc, 0);\r\n  },\r\n  debounce: function debounce(func, threshold, callImmediately) {\r\n    var timeout = void 0;\r\n    return function () {\r\n      var obj = this;\r\n      var args = arguments;\r\n      function delayed() {\r\n        timeout = null;\r\n        if (!callImmediately) func.apply(obj, args);\r\n      }\r\n      var callNow = callImmediately || !timeout;\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(delayed, threshold);\r\n      if (callNow) {\r\n        func.apply(obj, args);\r\n      }\r\n    };\r\n  },\r\n  toArray: function toArray(obj) {\r\n    if (obj.toArray) return obj.toArray();\r\n    return ARR_SLICE.call(obj);\r\n  },\r\n  isUndefined: function isUndefined(obj) {\r\n    return obj === undefined;\r\n  },\r\n  isNull: function isNull(obj) {\r\n    return obj === null;\r\n  },\r\n  isNaN: function (_isNaN) {\r\n    function isNaN(_x) {\r\n      return _isNaN.apply(this, arguments);\r\n    }\r\n    isNaN.toString = function () {\r\n      return _isNaN.toString();\r\n    };\r\n    return isNaN;\r\n  }(function (obj) {\r\n    return isNaN(obj);\r\n  }),\r\n  isArray: Array.isArray || function (obj) {\r\n    return obj.constructor === Array;\r\n  },\r\n  isObject: function isObject(obj) {\r\n    return obj === Object(obj);\r\n  },\r\n  isNumber: function isNumber(obj) {\r\n    return obj === obj + 0;\r\n  },\r\n  isString: function isString(obj) {\r\n    return obj === obj + '';\r\n  },\r\n  isBoolean: function isBoolean(obj) {\r\n    return obj === false || obj === true;\r\n  },\r\n  isFunction: function isFunction(obj) {\r\n    return Object.prototype.toString.call(obj) === '[object Function]';\r\n  }\r\n};\r\n\r\nvar INTERPRETATIONS = [\r\n{\r\n  litmus: Common.isString,\r\n  conversions: {\r\n    THREE_CHAR_HEX: {\r\n      read: function read(original) {\r\n        var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\r\n        if (test === null) {\r\n          return false;\r\n        }\r\n        return {\r\n          space: 'HEX',\r\n          hex: parseInt('0x' + test[1].toString() + test[1].toString() + test[2].toString() + test[2].toString() + test[3].toString() + test[3].toString(), 0)\r\n        };\r\n      },\r\n      write: colorToString\r\n    },\r\n    SIX_CHAR_HEX: {\r\n      read: function read(original) {\r\n        var test = original.match(/^#([A-F0-9]{6})$/i);\r\n        if (test === null) {\r\n          return false;\r\n        }\r\n        return {\r\n          space: 'HEX',\r\n          hex: parseInt('0x' + test[1].toString(), 0)\r\n        };\r\n      },\r\n      write: colorToString\r\n    },\r\n    CSS_RGB: {\r\n      read: function read(original) {\r\n        var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\r\n        if (test === null) {\r\n          return false;\r\n        }\r\n        return {\r\n          space: 'RGB',\r\n          r: parseFloat(test[1]),\r\n          g: parseFloat(test[2]),\r\n          b: parseFloat(test[3])\r\n        };\r\n      },\r\n      write: colorToString\r\n    },\r\n    CSS_RGBA: {\r\n      read: function read(original) {\r\n        var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\r\n        if (test === null) {\r\n          return false;\r\n        }\r\n        return {\r\n          space: 'RGB',\r\n          r: parseFloat(test[1]),\r\n          g: parseFloat(test[2]),\r\n          b: parseFloat(test[3]),\r\n          a: parseFloat(test[4])\r\n        };\r\n      },\r\n      write: colorToString\r\n    }\r\n  }\r\n},\r\n{\r\n  litmus: Common.isNumber,\r\n  conversions: {\r\n    HEX: {\r\n      read: function read(original) {\r\n        return {\r\n          space: 'HEX',\r\n          hex: original,\r\n          conversionName: 'HEX'\r\n        };\r\n      },\r\n      write: function write(color) {\r\n        return color.hex;\r\n      }\r\n    }\r\n  }\r\n},\r\n{\r\n  litmus: Common.isArray,\r\n  conversions: {\r\n    RGB_ARRAY: {\r\n      read: function read(original) {\r\n        if (original.length !== 3) {\r\n          return false;\r\n        }\r\n        return {\r\n          space: 'RGB',\r\n          r: original[0],\r\n          g: original[1],\r\n          b: original[2]\r\n        };\r\n      },\r\n      write: function write(color) {\r\n        return [color.r, color.g, color.b];\r\n      }\r\n    },\r\n    RGBA_ARRAY: {\r\n      read: function read(original) {\r\n        if (original.length !== 4) return false;\r\n        return {\r\n          space: 'RGB',\r\n          r: original[0],\r\n          g: original[1],\r\n          b: original[2],\r\n          a: original[3]\r\n        };\r\n      },\r\n      write: function write(color) {\r\n        return [color.r, color.g, color.b, color.a];\r\n      }\r\n    }\r\n  }\r\n},\r\n{\r\n  litmus: Common.isObject,\r\n  conversions: {\r\n    RGBA_OBJ: {\r\n      read: function read(original) {\r\n        if (Common.isNumber(original.r) && Common.isNumber(original.g) && Common.isNumber(original.b) && Common.isNumber(original.a)) {\r\n          return {\r\n            space: 'RGB',\r\n            r: original.r,\r\n            g: original.g,\r\n            b: original.b,\r\n            a: original.a\r\n          };\r\n        }\r\n        return false;\r\n      },\r\n      write: function write(color) {\r\n        return {\r\n          r: color.r,\r\n          g: color.g,\r\n          b: color.b,\r\n          a: color.a\r\n        };\r\n      }\r\n    },\r\n    RGB_OBJ: {\r\n      read: function read(original) {\r\n        if (Common.isNumber(original.r) && Common.isNumber(original.g) && Common.isNumber(original.b)) {\r\n          return {\r\n            space: 'RGB',\r\n            r: original.r,\r\n            g: original.g,\r\n            b: original.b\r\n          };\r\n        }\r\n        return false;\r\n      },\r\n      write: function write(color) {\r\n        return {\r\n          r: color.r,\r\n          g: color.g,\r\n          b: color.b\r\n        };\r\n      }\r\n    },\r\n    HSVA_OBJ: {\r\n      read: function read(original) {\r\n        if (Common.isNumber(original.h) && Common.isNumber(original.s) && Common.isNumber(original.v) && Common.isNumber(original.a)) {\r\n          return {\r\n            space: 'HSV',\r\n            h: original.h,\r\n            s: original.s,\r\n            v: original.v,\r\n            a: original.a\r\n          };\r\n        }\r\n        return false;\r\n      },\r\n      write: function write(color) {\r\n        return {\r\n          h: color.h,\r\n          s: color.s,\r\n          v: color.v,\r\n          a: color.a\r\n        };\r\n      }\r\n    },\r\n    HSV_OBJ: {\r\n      read: function read(original) {\r\n        if (Common.isNumber(original.h) && Common.isNumber(original.s) && Common.isNumber(original.v)) {\r\n          return {\r\n            space: 'HSV',\r\n            h: original.h,\r\n            s: original.s,\r\n            v: original.v\r\n          };\r\n        }\r\n        return false;\r\n      },\r\n      write: function write(color) {\r\n        return {\r\n          h: color.h,\r\n          s: color.s,\r\n          v: color.v\r\n        };\r\n      }\r\n    }\r\n  }\r\n}];\r\nvar result = void 0;\r\nvar toReturn = void 0;\r\nvar interpret = function interpret() {\r\n  toReturn = false;\r\n  var original = arguments.length > 1 ? Common.toArray(arguments) : arguments[0];\r\n  Common.each(INTERPRETATIONS, function (family) {\r\n    if (family.litmus(original)) {\r\n      Common.each(family.conversions, function (conversion, conversionName) {\r\n        result = conversion.read(original);\r\n        if (toReturn === false && result !== false) {\r\n          toReturn = result;\r\n          result.conversionName = conversionName;\r\n          result.conversion = conversion;\r\n          return Common.BREAK;\r\n        }\r\n      });\r\n      return Common.BREAK;\r\n    }\r\n  });\r\n  return toReturn;\r\n};\r\n\r\nvar tmpComponent = void 0;\r\nvar ColorMath = {\r\n  hsv_to_rgb: function hsv_to_rgb(h, s, v) {\r\n    var hi = Math.floor(h / 60) % 6;\r\n    var f = h / 60 - Math.floor(h / 60);\r\n    var p = v * (1.0 - s);\r\n    var q = v * (1.0 - f * s);\r\n    var t = v * (1.0 - (1.0 - f) * s);\r\n    var c = [[v, t, p], [q, v, p], [p, v, t], [p, q, v], [t, p, v], [v, p, q]][hi];\r\n    return {\r\n      r: c[0] * 255,\r\n      g: c[1] * 255,\r\n      b: c[2] * 255\r\n    };\r\n  },\r\n  rgb_to_hsv: function rgb_to_hsv(r, g, b) {\r\n    var min = Math.min(r, g, b);\r\n    var max = Math.max(r, g, b);\r\n    var delta = max - min;\r\n    var h = void 0;\r\n    var s = void 0;\r\n    if (max !== 0) {\r\n      s = delta / max;\r\n    } else {\r\n      return {\r\n        h: NaN,\r\n        s: 0,\r\n        v: 0\r\n      };\r\n    }\r\n    if (r === max) {\r\n      h = (g - b) / delta;\r\n    } else if (g === max) {\r\n      h = 2 + (b - r) / delta;\r\n    } else {\r\n      h = 4 + (r - g) / delta;\r\n    }\r\n    h /= 6;\r\n    if (h < 0) {\r\n      h += 1;\r\n    }\r\n    return {\r\n      h: h * 360,\r\n      s: s,\r\n      v: max / 255\r\n    };\r\n  },\r\n  rgb_to_hex: function rgb_to_hex(r, g, b) {\r\n    var hex = this.hex_with_component(0, 2, r);\r\n    hex = this.hex_with_component(hex, 1, g);\r\n    hex = this.hex_with_component(hex, 0, b);\r\n    return hex;\r\n  },\r\n  component_from_hex: function component_from_hex(hex, componentIndex) {\r\n    return hex >> componentIndex * 8 & 0xFF;\r\n  },\r\n  hex_with_component: function hex_with_component(hex, componentIndex, value) {\r\n    return value << (tmpComponent = componentIndex * 8) | hex & ~(0xFF << tmpComponent);\r\n  }\r\n};\r\n\r\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\r\n  return typeof obj;\r\n} : function (obj) {\r\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar classCallCheck = function (instance, Constructor) {\r\n  if (!(instance instanceof Constructor)) {\r\n    throw new TypeError(\"Cannot call a class as a function\");\r\n  }\r\n};\r\n\r\nvar createClass = function () {\r\n  function defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n      var descriptor = props[i];\r\n      descriptor.enumerable = descriptor.enumerable || false;\r\n      descriptor.configurable = true;\r\n      if (\"value\" in descriptor) descriptor.writable = true;\r\n      Object.defineProperty(target, descriptor.key, descriptor);\r\n    }\r\n  }\r\n\r\n  return function (Constructor, protoProps, staticProps) {\r\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\r\n    if (staticProps) defineProperties(Constructor, staticProps);\r\n    return Constructor;\r\n  };\r\n}();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar get = function get(object, property, receiver) {\r\n  if (object === null) object = Function.prototype;\r\n  var desc = Object.getOwnPropertyDescriptor(object, property);\r\n\r\n  if (desc === undefined) {\r\n    var parent = Object.getPrototypeOf(object);\r\n\r\n    if (parent === null) {\r\n      return undefined;\r\n    } else {\r\n      return get(parent, property, receiver);\r\n    }\r\n  } else if (\"value\" in desc) {\r\n    return desc.value;\r\n  } else {\r\n    var getter = desc.get;\r\n\r\n    if (getter === undefined) {\r\n      return undefined;\r\n    }\r\n\r\n    return getter.call(receiver);\r\n  }\r\n};\r\n\r\nvar inherits = function (subClass, superClass) {\r\n  if (typeof superClass !== \"function\" && superClass !== null) {\r\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\r\n  }\r\n\r\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\r\n    constructor: {\r\n      value: subClass,\r\n      enumerable: false,\r\n      writable: true,\r\n      configurable: true\r\n    }\r\n  });\r\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar possibleConstructorReturn = function (self, call) {\r\n  if (!self) {\r\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\r\n  }\r\n\r\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\r\n};\r\n\r\nvar Color = function () {\r\n  function Color() {\r\n    classCallCheck(this, Color);\r\n    this.__state = interpret.apply(this, arguments);\r\n    if (this.__state === false) {\r\n      throw new Error('Failed to interpret color arguments');\r\n    }\r\n    this.__state.a = this.__state.a || 1;\r\n  }\r\n  createClass(Color, [{\r\n    key: 'toString',\r\n    value: function toString() {\r\n      return colorToString(this);\r\n    }\r\n  }, {\r\n    key: 'toHexString',\r\n    value: function toHexString() {\r\n      return colorToString(this, true);\r\n    }\r\n  }, {\r\n    key: 'toOriginal',\r\n    value: function toOriginal() {\r\n      return this.__state.conversion.write(this);\r\n    }\r\n  }]);\r\n  return Color;\r\n}();\r\nfunction defineRGBComponent(target, component, componentHexIndex) {\r\n  Object.defineProperty(target, component, {\r\n    get: function get$$1() {\r\n      if (this.__state.space === 'RGB') {\r\n        return this.__state[component];\r\n      }\r\n      Color.recalculateRGB(this, component, componentHexIndex);\r\n      return this.__state[component];\r\n    },\r\n    set: function set$$1(v) {\r\n      if (this.__state.space !== 'RGB') {\r\n        Color.recalculateRGB(this, component, componentHexIndex);\r\n        this.__state.space = 'RGB';\r\n      }\r\n      this.__state[component] = v;\r\n    }\r\n  });\r\n}\r\nfunction defineHSVComponent(target, component) {\r\n  Object.defineProperty(target, component, {\r\n    get: function get$$1() {\r\n      if (this.__state.space === 'HSV') {\r\n        return this.__state[component];\r\n      }\r\n      Color.recalculateHSV(this);\r\n      return this.__state[component];\r\n    },\r\n    set: function set$$1(v) {\r\n      if (this.__state.space !== 'HSV') {\r\n        Color.recalculateHSV(this);\r\n        this.__state.space = 'HSV';\r\n      }\r\n      this.__state[component] = v;\r\n    }\r\n  });\r\n}\r\nColor.recalculateRGB = function (color, component, componentHexIndex) {\r\n  if (color.__state.space === 'HEX') {\r\n    color.__state[component] = ColorMath.component_from_hex(color.__state.hex, componentHexIndex);\r\n  } else if (color.__state.space === 'HSV') {\r\n    Common.extend(color.__state, ColorMath.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\r\n  } else {\r\n    throw new Error('Corrupted color state');\r\n  }\r\n};\r\nColor.recalculateHSV = function (color) {\r\n  var result = ColorMath.rgb_to_hsv(color.r, color.g, color.b);\r\n  Common.extend(color.__state, {\r\n    s: result.s,\r\n    v: result.v\r\n  });\r\n  if (!Common.isNaN(result.h)) {\r\n    color.__state.h = result.h;\r\n  } else if (Common.isUndefined(color.__state.h)) {\r\n    color.__state.h = 0;\r\n  }\r\n};\r\nColor.COMPONENTS = ['r', 'g', 'b', 'h', 's', 'v', 'hex', 'a'];\r\ndefineRGBComponent(Color.prototype, 'r', 2);\r\ndefineRGBComponent(Color.prototype, 'g', 1);\r\ndefineRGBComponent(Color.prototype, 'b', 0);\r\ndefineHSVComponent(Color.prototype, 'h');\r\ndefineHSVComponent(Color.prototype, 's');\r\ndefineHSVComponent(Color.prototype, 'v');\r\nObject.defineProperty(Color.prototype, 'a', {\r\n  get: function get$$1() {\r\n    return this.__state.a;\r\n  },\r\n  set: function set$$1(v) {\r\n    this.__state.a = v;\r\n  }\r\n});\r\nObject.defineProperty(Color.prototype, 'hex', {\r\n  get: function get$$1() {\r\n    if (!this.__state.space !== 'HEX') {\r\n      this.__state.hex = ColorMath.rgb_to_hex(this.r, this.g, this.b);\r\n    }\r\n    return this.__state.hex;\r\n  },\r\n  set: function set$$1(v) {\r\n    this.__state.space = 'HEX';\r\n    this.__state.hex = v;\r\n  }\r\n});\r\n\r\nvar Controller = function () {\r\n  function Controller(object, property) {\r\n    classCallCheck(this, Controller);\r\n    this.initialValue = object[property];\r\n    this.domElement = document.createElement('div');\r\n    this.object = object;\r\n    this.property = property;\r\n    this.__onChange = undefined;\r\n    this.__onFinishChange = undefined;\r\n  }\r\n  createClass(Controller, [{\r\n    key: 'onChange',\r\n    value: function onChange(fnc) {\r\n      this.__onChange = fnc;\r\n      return this;\r\n    }\r\n  }, {\r\n    key: 'onFinishChange',\r\n    value: function onFinishChange(fnc) {\r\n      this.__onFinishChange = fnc;\r\n      return this;\r\n    }\r\n  }, {\r\n    key: 'setValue',\r\n    value: function setValue(newValue) {\r\n      this.object[this.property] = newValue;\r\n      if (this.__onChange) {\r\n        this.__onChange.call(this, newValue);\r\n      }\r\n      this.updateDisplay();\r\n      return this;\r\n    }\r\n  }, {\r\n    key: 'getValue',\r\n    value: function getValue() {\r\n      return this.object[this.property];\r\n    }\r\n  }, {\r\n    key: 'updateDisplay',\r\n    value: function updateDisplay() {\r\n      return this;\r\n    }\r\n  }, {\r\n    key: 'isModified',\r\n    value: function isModified() {\r\n      return this.initialValue !== this.getValue();\r\n    }\r\n  }]);\r\n  return Controller;\r\n}();\r\n\r\nvar EVENT_MAP = {\r\n  HTMLEvents: ['change'],\r\n  MouseEvents: ['click', 'mousemove', 'mousedown', 'mouseup', 'mouseover'],\r\n  KeyboardEvents: ['keydown']\r\n};\r\nvar EVENT_MAP_INV = {};\r\nCommon.each(EVENT_MAP, function (v, k) {\r\n  Common.each(v, function (e) {\r\n    EVENT_MAP_INV[e] = k;\r\n  });\r\n});\r\nvar CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\r\nfunction cssValueToPixels(val) {\r\n  if (val === '0' || Common.isUndefined(val)) {\r\n    return 0;\r\n  }\r\n  var match = val.match(CSS_VALUE_PIXELS);\r\n  if (!Common.isNull(match)) {\r\n    return parseFloat(match[1]);\r\n  }\r\n  return 0;\r\n}\r\nvar dom = {\r\n  makeSelectable: function makeSelectable(elem, selectable) {\r\n    if (elem === undefined || elem.style === undefined) return;\r\n    elem.onselectstart = selectable ? function () {\r\n      return false;\r\n    } : function () {};\r\n    elem.style.MozUserSelect = selectable ? 'auto' : 'none';\r\n    elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\r\n    elem.unselectable = selectable ? 'on' : 'off';\r\n  },\r\n  makeFullscreen: function makeFullscreen(elem, hor, vert) {\r\n    var vertical = vert;\r\n    var horizontal = hor;\r\n    if (Common.isUndefined(horizontal)) {\r\n      horizontal = true;\r\n    }\r\n    if (Common.isUndefined(vertical)) {\r\n      vertical = true;\r\n    }\r\n    elem.style.position = 'absolute';\r\n    if (horizontal) {\r\n      elem.style.left = 0;\r\n      elem.style.right = 0;\r\n    }\r\n    if (vertical) {\r\n      elem.style.top = 0;\r\n      elem.style.bottom = 0;\r\n    }\r\n  },\r\n  fakeEvent: function fakeEvent(elem, eventType, pars, aux) {\r\n    var params = pars || {};\r\n    var className = EVENT_MAP_INV[eventType];\r\n    if (!className) {\r\n      throw new Error('Event type ' + eventType + ' not supported.');\r\n    }\r\n    var evt = document.createEvent(className);\r\n    switch (className) {\r\n      case 'MouseEvents':\r\n        {\r\n          var clientX = params.x || params.clientX || 0;\r\n          var clientY = params.y || params.clientY || 0;\r\n          evt.initMouseEvent(eventType, params.bubbles || false, params.cancelable || true, window, params.clickCount || 1, 0,\r\n          0,\r\n          clientX,\r\n          clientY,\r\n          false, false, false, false, 0, null);\r\n          break;\r\n        }\r\n      case 'KeyboardEvents':\r\n        {\r\n          var init = evt.initKeyboardEvent || evt.initKeyEvent;\r\n          Common.defaults(params, {\r\n            cancelable: true,\r\n            ctrlKey: false,\r\n            altKey: false,\r\n            shiftKey: false,\r\n            metaKey: false,\r\n            keyCode: undefined,\r\n            charCode: undefined\r\n          });\r\n          init(eventType, params.bubbles || false, params.cancelable, window, params.ctrlKey, params.altKey, params.shiftKey, params.metaKey, params.keyCode, params.charCode);\r\n          break;\r\n        }\r\n      default:\r\n        {\r\n          evt.initEvent(eventType, params.bubbles || false, params.cancelable || true);\r\n          break;\r\n        }\r\n    }\r\n    Common.defaults(evt, aux);\r\n    elem.dispatchEvent(evt);\r\n  },\r\n  bind: function bind(elem, event, func, newBool) {\r\n    var bool = newBool || false;\r\n    if (elem.addEventListener) {\r\n      elem.addEventListener(event, func, bool);\r\n    } else if (elem.attachEvent) {\r\n      elem.attachEvent('on' + event, func);\r\n    }\r\n    return dom;\r\n  },\r\n  unbind: function unbind(elem, event, func, newBool) {\r\n    var bool = newBool || false;\r\n    if (elem.removeEventListener) {\r\n      elem.removeEventListener(event, func, bool);\r\n    } else if (elem.detachEvent) {\r\n      elem.detachEvent('on' + event, func);\r\n    }\r\n    return dom;\r\n  },\r\n  addClass: function addClass(elem, className) {\r\n    if (elem.className === undefined) {\r\n      elem.className = className;\r\n    } else if (elem.className !== className) {\r\n      var classes = elem.className.split(/ +/);\r\n      if (classes.indexOf(className) === -1) {\r\n        classes.push(className);\r\n        elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\r\n      }\r\n    }\r\n    return dom;\r\n  },\r\n  removeClass: function removeClass(elem, className) {\r\n    if (className) {\r\n      if (elem.className === className) {\r\n        elem.removeAttribute('class');\r\n      } else {\r\n        var classes = elem.className.split(/ +/);\r\n        var index = classes.indexOf(className);\r\n        if (index !== -1) {\r\n          classes.splice(index, 1);\r\n          elem.className = classes.join(' ');\r\n        }\r\n      }\r\n    } else {\r\n      elem.className = undefined;\r\n    }\r\n    return dom;\r\n  },\r\n  hasClass: function hasClass(elem, className) {\r\n    return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\r\n  },\r\n  getWidth: function getWidth(elem) {\r\n    var style = getComputedStyle(elem);\r\n    return cssValueToPixels(style['border-left-width']) + cssValueToPixels(style['border-right-width']) + cssValueToPixels(style['padding-left']) + cssValueToPixels(style['padding-right']) + cssValueToPixels(style.width);\r\n  },\r\n  getHeight: function getHeight(elem) {\r\n    var style = getComputedStyle(elem);\r\n    return cssValueToPixels(style['border-top-width']) + cssValueToPixels(style['border-bottom-width']) + cssValueToPixels(style['padding-top']) + cssValueToPixels(style['padding-bottom']) + cssValueToPixels(style.height);\r\n  },\r\n  getOffset: function getOffset(el) {\r\n    var elem = el;\r\n    var offset = { left: 0, top: 0 };\r\n    if (elem.offsetParent) {\r\n      do {\r\n        offset.left += elem.offsetLeft;\r\n        offset.top += elem.offsetTop;\r\n        elem = elem.offsetParent;\r\n      } while (elem);\r\n    }\r\n    return offset;\r\n  },\r\n  isActive: function isActive(elem) {\r\n    return elem === document.activeElement && (elem.type || elem.href);\r\n  }\r\n};\r\n\r\nvar BooleanController = function (_Controller) {\r\n  inherits(BooleanController, _Controller);\r\n  function BooleanController(object, property) {\r\n    classCallCheck(this, BooleanController);\r\n    var _this2 = possibleConstructorReturn(this, (BooleanController.__proto__ || Object.getPrototypeOf(BooleanController)).call(this, object, property));\r\n    var _this = _this2;\r\n    _this2.__prev = _this2.getValue();\r\n    _this2.__checkbox = document.createElement('input');\r\n    _this2.__checkbox.setAttribute('type', 'checkbox');\r\n    function onChange() {\r\n      _this.setValue(!_this.__prev);\r\n    }\r\n    dom.bind(_this2.__checkbox, 'change', onChange, false);\r\n    _this2.domElement.appendChild(_this2.__checkbox);\r\n    _this2.updateDisplay();\r\n    return _this2;\r\n  }\r\n  createClass(BooleanController, [{\r\n    key: 'setValue',\r\n    value: function setValue(v) {\r\n      var toReturn = get(BooleanController.prototype.__proto__ || Object.getPrototypeOf(BooleanController.prototype), 'setValue', this).call(this, v);\r\n      if (this.__onFinishChange) {\r\n        this.__onFinishChange.call(this, this.getValue());\r\n      }\r\n      this.__prev = this.getValue();\r\n      return toReturn;\r\n    }\r\n  }, {\r\n    key: 'updateDisplay',\r\n    value: function updateDisplay() {\r\n      if (this.getValue() === true) {\r\n        this.__checkbox.setAttribute('checked', 'checked');\r\n        this.__checkbox.checked = true;\r\n        this.__prev = true;\r\n      } else {\r\n        this.__checkbox.checked = false;\r\n        this.__prev = false;\r\n      }\r\n      return get(BooleanController.prototype.__proto__ || Object.getPrototypeOf(BooleanController.prototype), 'updateDisplay', this).call(this);\r\n    }\r\n  }]);\r\n  return BooleanController;\r\n}(Controller);\r\n\r\nvar OptionController = function (_Controller) {\r\n  inherits(OptionController, _Controller);\r\n  function OptionController(object, property, opts) {\r\n    classCallCheck(this, OptionController);\r\n    var _this2 = possibleConstructorReturn(this, (OptionController.__proto__ || Object.getPrototypeOf(OptionController)).call(this, object, property));\r\n    var options = opts;\r\n    var _this = _this2;\r\n    _this2.__select = document.createElement('select');\r\n    if (Common.isArray(options)) {\r\n      var map = {};\r\n      Common.each(options, function (element) {\r\n        map[element] = element;\r\n      });\r\n      options = map;\r\n    }\r\n    Common.each(options, function (value, key) {\r\n      var opt = document.createElement('option');\r\n      opt.innerHTML = key;\r\n      opt.setAttribute('value', value);\r\n      _this.__select.appendChild(opt);\r\n    });\r\n    _this2.updateDisplay();\r\n    dom.bind(_this2.__select, 'change', function () {\r\n      var desiredValue = this.options[this.selectedIndex].value;\r\n      _this.setValue(desiredValue);\r\n    });\r\n    _this2.domElement.appendChild(_this2.__select);\r\n    return _this2;\r\n  }\r\n  createClass(OptionController, [{\r\n    key: 'setValue',\r\n    value: function setValue(v) {\r\n      var toReturn = get(OptionController.prototype.__proto__ || Object.getPrototypeOf(OptionController.prototype), 'setValue', this).call(this, v);\r\n      if (this.__onFinishChange) {\r\n        this.__onFinishChange.call(this, this.getValue());\r\n      }\r\n      return toReturn;\r\n    }\r\n  }, {\r\n    key: 'updateDisplay',\r\n    value: function updateDisplay() {\r\n      if (dom.isActive(this.__select)) return this;\r\n      this.__select.value = this.getValue();\r\n      return get(OptionController.prototype.__proto__ || Object.getPrototypeOf(OptionController.prototype), 'updateDisplay', this).call(this);\r\n    }\r\n  }]);\r\n  return OptionController;\r\n}(Controller);\r\n\r\nvar StringController = function (_Controller) {\r\n  inherits(StringController, _Controller);\r\n  function StringController(object, property) {\r\n    classCallCheck(this, StringController);\r\n    var _this2 = possibleConstructorReturn(this, (StringController.__proto__ || Object.getPrototypeOf(StringController)).call(this, object, property));\r\n    var _this = _this2;\r\n    function onChange() {\r\n      _this.setValue(_this.__input.value);\r\n    }\r\n    function onBlur() {\r\n      if (_this.__onFinishChange) {\r\n        _this.__onFinishChange.call(_this, _this.getValue());\r\n      }\r\n    }\r\n    _this2.__input = document.createElement('input');\r\n    _this2.__input.setAttribute('type', 'text');\r\n    dom.bind(_this2.__input, 'keyup', onChange);\r\n    dom.bind(_this2.__input, 'change', onChange);\r\n    dom.bind(_this2.__input, 'blur', onBlur);\r\n    dom.bind(_this2.__input, 'keydown', function (e) {\r\n      if (e.keyCode === 13) {\r\n        this.blur();\r\n      }\r\n    });\r\n    _this2.updateDisplay();\r\n    _this2.domElement.appendChild(_this2.__input);\r\n    return _this2;\r\n  }\r\n  createClass(StringController, [{\r\n    key: 'updateDisplay',\r\n    value: function updateDisplay() {\r\n      if (!dom.isActive(this.__input)) {\r\n        this.__input.value = this.getValue();\r\n      }\r\n      return get(StringController.prototype.__proto__ || Object.getPrototypeOf(StringController.prototype), 'updateDisplay', this).call(this);\r\n    }\r\n  }]);\r\n  return StringController;\r\n}(Controller);\r\n\r\nfunction numDecimals(x) {\r\n  var _x = x.toString();\r\n  if (_x.indexOf('.') > -1) {\r\n    return _x.length - _x.indexOf('.') - 1;\r\n  }\r\n  return 0;\r\n}\r\nvar NumberController = function (_Controller) {\r\n  inherits(NumberController, _Controller);\r\n  function NumberController(object, property, params) {\r\n    classCallCheck(this, NumberController);\r\n    var _this = possibleConstructorReturn(this, (NumberController.__proto__ || Object.getPrototypeOf(NumberController)).call(this, object, property));\r\n    var _params = params || {};\r\n    _this.__min = _params.min;\r\n    _this.__max = _params.max;\r\n    _this.__step = _params.step;\r\n    if (Common.isUndefined(_this.__step)) {\r\n      if (_this.initialValue === 0) {\r\n        _this.__impliedStep = 1;\r\n      } else {\r\n        _this.__impliedStep = Math.pow(10, Math.floor(Math.log(Math.abs(_this.initialValue)) / Math.LN10)) / 10;\r\n      }\r\n    } else {\r\n      _this.__impliedStep = _this.__step;\r\n    }\r\n    _this.__precision = numDecimals(_this.__impliedStep);\r\n    return _this;\r\n  }\r\n  createClass(NumberController, [{\r\n    key: 'setValue',\r\n    value: function setValue(v) {\r\n      var _v = v;\r\n      if (this.__min !== undefined && _v < this.__min) {\r\n        _v = this.__min;\r\n      } else if (this.__max !== undefined && _v > this.__max) {\r\n        _v = this.__max;\r\n      }\r\n      if (this.__step !== undefined && _v % this.__step !== 0) {\r\n        _v = Math.round(_v / this.__step) * this.__step;\r\n      }\r\n      return get(NumberController.prototype.__proto__ || Object.getPrototypeOf(NumberController.prototype), 'setValue', this).call(this, _v);\r\n    }\r\n  }, {\r\n    key: 'min',\r\n    value: function min(minValue) {\r\n      this.__min = minValue;\r\n      return this;\r\n    }\r\n  }, {\r\n    key: 'max',\r\n    value: function max(maxValue) {\r\n      this.__max = maxValue;\r\n      return this;\r\n    }\r\n  }, {\r\n    key: 'step',\r\n    value: function step(stepValue) {\r\n      this.__step = stepValue;\r\n      this.__impliedStep = stepValue;\r\n      this.__precision = numDecimals(stepValue);\r\n      return this;\r\n    }\r\n  }]);\r\n  return NumberController;\r\n}(Controller);\r\n\r\nfunction roundToDecimal(value, decimals) {\r\n  var tenTo = Math.pow(10, decimals);\r\n  return Math.round(value * tenTo) / tenTo;\r\n}\r\nvar NumberControllerBox = function (_NumberController) {\r\n  inherits(NumberControllerBox, _NumberController);\r\n  function NumberControllerBox(object, property, params) {\r\n    classCallCheck(this, NumberControllerBox);\r\n    var _this2 = possibleConstructorReturn(this, (NumberControllerBox.__proto__ || Object.getPrototypeOf(NumberControllerBox)).call(this, object, property, params));\r\n    _this2.__truncationSuspended = false;\r\n    var _this = _this2;\r\n    var prevY = void 0;\r\n    function onChange() {\r\n      var attempted = parseFloat(_this.__input.value);\r\n      if (!Common.isNaN(attempted)) {\r\n        _this.setValue(attempted);\r\n      }\r\n    }\r\n    function onFinish() {\r\n      if (_this.__onFinishChange) {\r\n        _this.__onFinishChange.call(_this, _this.getValue());\r\n      }\r\n    }\r\n    function onBlur() {\r\n      onFinish();\r\n    }\r\n    function onMouseDrag(e) {\r\n      var diff = prevY - e.clientY;\r\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\r\n      prevY = e.clientY;\r\n    }\r\n    function onMouseUp() {\r\n      dom.unbind(window, 'mousemove', onMouseDrag);\r\n      dom.unbind(window, 'mouseup', onMouseUp);\r\n      onFinish();\r\n    }\r\n    function onMouseDown(e) {\r\n      dom.bind(window, 'mousemove', onMouseDrag);\r\n      dom.bind(window, 'mouseup', onMouseUp);\r\n      prevY = e.clientY;\r\n    }\r\n    _this2.__input = document.createElement('input');\r\n    _this2.__input.setAttribute('type', 'text');\r\n    dom.bind(_this2.__input, 'change', onChange);\r\n    dom.bind(_this2.__input, 'blur', onBlur);\r\n    dom.bind(_this2.__input, 'mousedown', onMouseDown);\r\n    dom.bind(_this2.__input, 'keydown', function (e) {\r\n      if (e.keyCode === 13) {\r\n        _this.__truncationSuspended = true;\r\n        this.blur();\r\n        _this.__truncationSuspended = false;\r\n        onFinish();\r\n      }\r\n    });\r\n    _this2.updateDisplay();\r\n    _this2.domElement.appendChild(_this2.__input);\r\n    return _this2;\r\n  }\r\n  createClass(NumberControllerBox, [{\r\n    key: 'updateDisplay',\r\n    value: function updateDisplay() {\r\n      this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\r\n      return get(NumberControllerBox.prototype.__proto__ || Object.getPrototypeOf(NumberControllerBox.prototype), 'updateDisplay', this).call(this);\r\n    }\r\n  }]);\r\n  return NumberControllerBox;\r\n}(NumberController);\r\n\r\nfunction map(v, i1, i2, o1, o2) {\r\n  return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\r\n}\r\nvar NumberControllerSlider = function (_NumberController) {\r\n  inherits(NumberControllerSlider, _NumberController);\r\n  function NumberControllerSlider(object, property, min, max, step) {\r\n    classCallCheck(this, NumberControllerSlider);\r\n    var _this2 = possibleConstructorReturn(this, (NumberControllerSlider.__proto__ || Object.getPrototypeOf(NumberControllerSlider)).call(this, object, property, { min: min, max: max, step: step }));\r\n    var _this = _this2;\r\n    _this2.__background = document.createElement('div');\r\n    _this2.__foreground = document.createElement('div');\r\n    dom.bind(_this2.__background, 'mousedown', onMouseDown);\r\n    dom.bind(_this2.__background, 'touchstart', onTouchStart);\r\n    dom.addClass(_this2.__background, 'slider');\r\n    dom.addClass(_this2.__foreground, 'slider-fg');\r\n    function onMouseDown(e) {\r\n      document.activeElement.blur();\r\n      dom.bind(window, 'mousemove', onMouseDrag);\r\n      dom.bind(window, 'mouseup', onMouseUp);\r\n      onMouseDrag(e);\r\n    }\r\n    function onMouseDrag(e) {\r\n      e.preventDefault();\r\n      var bgRect = _this.__background.getBoundingClientRect();\r\n      _this.setValue(map(e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\r\n      return false;\r\n    }\r\n    function onMouseUp() {\r\n      dom.unbind(window, 'mousemove', onMouseDrag);\r\n      dom.unbind(window, 'mouseup', onMouseUp);\r\n      if (_this.__onFinishChange) {\r\n        _this.__onFinishChange.call(_this, _this.getValue());\r\n      }\r\n    }\r\n    function onTouchStart(e) {\r\n      if (e.touches.length !== 1) {\r\n        return;\r\n      }\r\n      dom.bind(window, 'touchmove', onTouchMove);\r\n      dom.bind(window, 'touchend', onTouchEnd);\r\n      onTouchMove(e);\r\n    }\r\n    function onTouchMove(e) {\r\n      var clientX = e.touches[0].clientX;\r\n      var bgRect = _this.__background.getBoundingClientRect();\r\n      _this.setValue(map(clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\r\n    }\r\n    function onTouchEnd() {\r\n      dom.unbind(window, 'touchmove', onTouchMove);\r\n      dom.unbind(window, 'touchend', onTouchEnd);\r\n      if (_this.__onFinishChange) {\r\n        _this.__onFinishChange.call(_this, _this.getValue());\r\n      }\r\n    }\r\n    _this2.updateDisplay();\r\n    _this2.__background.appendChild(_this2.__foreground);\r\n    _this2.domElement.appendChild(_this2.__background);\r\n    return _this2;\r\n  }\r\n  createClass(NumberControllerSlider, [{\r\n    key: 'updateDisplay',\r\n    value: function updateDisplay() {\r\n      var pct = (this.getValue() - this.__min) / (this.__max - this.__min);\r\n      this.__foreground.style.width = pct * 100 + '%';\r\n      return get(NumberControllerSlider.prototype.__proto__ || Object.getPrototypeOf(NumberControllerSlider.prototype), 'updateDisplay', this).call(this);\r\n    }\r\n  }]);\r\n  return NumberControllerSlider;\r\n}(NumberController);\r\n\r\nvar FunctionController = function (_Controller) {\r\n  inherits(FunctionController, _Controller);\r\n  function FunctionController(object, property, text) {\r\n    classCallCheck(this, FunctionController);\r\n    var _this2 = possibleConstructorReturn(this, (FunctionController.__proto__ || Object.getPrototypeOf(FunctionController)).call(this, object, property));\r\n    var _this = _this2;\r\n    _this2.__button = document.createElement('div');\r\n    _this2.__button.innerHTML = text === undefined ? 'Fire' : text;\r\n    dom.bind(_this2.__button, 'click', function (e) {\r\n      e.preventDefault();\r\n      _this.fire();\r\n      return false;\r\n    });\r\n    dom.addClass(_this2.__button, 'button');\r\n    _this2.domElement.appendChild(_this2.__button);\r\n    return _this2;\r\n  }\r\n  createClass(FunctionController, [{\r\n    key: 'fire',\r\n    value: function fire() {\r\n      if (this.__onChange) {\r\n        this.__onChange.call(this);\r\n      }\r\n      this.getValue().call(this.object);\r\n      if (this.__onFinishChange) {\r\n        this.__onFinishChange.call(this, this.getValue());\r\n      }\r\n    }\r\n  }]);\r\n  return FunctionController;\r\n}(Controller);\r\n\r\nvar ColorController = function (_Controller) {\r\n    inherits(ColorController, _Controller);\r\n    function ColorController(object, property) {\r\n        classCallCheck(this, ColorController);\r\n        var _this2 = possibleConstructorReturn(this, (ColorController.__proto__ || Object.getPrototypeOf(ColorController)).call(this, object, property));\r\n        _this2.__color = new Color(_this2.getValue());\r\n        _this2.__temp = new Color(0);\r\n        var _this = _this2;\r\n        _this2.domElement = document.createElement('div');\r\n        dom.makeSelectable(_this2.domElement, false);\r\n        _this2.__selector = document.createElement('div');\r\n        _this2.__selector.className = 'selector';\r\n        _this2.__saturation_field = document.createElement('div');\r\n        _this2.__saturation_field.className = 'saturation-field';\r\n        _this2.__field_knob = document.createElement('div');\r\n        _this2.__field_knob.className = 'field-knob';\r\n        _this2.__field_knob_border = '2px solid ';\r\n        _this2.__hue_knob = document.createElement('div');\r\n        _this2.__hue_knob.className = 'hue-knob';\r\n        _this2.__hue_field = document.createElement('div');\r\n        _this2.__hue_field.className = 'hue-field';\r\n        _this2.__input = document.createElement('input');\r\n        _this2.__input.type = 'text';\r\n        _this2.__input_textShadow = '0 1px 1px ';\r\n        dom.bind(_this2.__input, 'keydown', function (e) {\r\n            if (e.keyCode === 13) {\r\n                onBlur.call(this);\r\n            }\r\n        });\r\n        dom.bind(_this2.__input, 'blur', onBlur);\r\n        dom.bind(_this2.__selector, 'mousedown', function ()        {\r\n            dom.addClass(this, 'drag').bind(window, 'mouseup', function ()        {\r\n                dom.removeClass(_this.__selector, 'drag');\r\n            });\r\n        });\r\n        dom.bind(_this2.__selector, 'touchstart', function ()        {\r\n            dom.addClass(this, 'drag').bind(window, 'touchend', function ()        {\r\n                dom.removeClass(_this.__selector, 'drag');\r\n            });\r\n        });\r\n        var valueField = document.createElement('div');\r\n        Common.extend(_this2.__selector.style, {\r\n            width: '122px',\r\n            height: '102px',\r\n            padding: '3px',\r\n            backgroundColor: '#222',\r\n            boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\r\n        });\r\n        Common.extend(_this2.__field_knob.style, {\r\n            position: 'absolute',\r\n            width: '12px',\r\n            height: '12px',\r\n            border: _this2.__field_knob_border + (_this2.__color.v < 0.5 ? '#fff' : '#000'),\r\n            boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\r\n            borderRadius: '12px',\r\n            zIndex: 1\r\n        });\r\n        Common.extend(_this2.__hue_knob.style, {\r\n            position: 'absolute',\r\n            width: '15px',\r\n            height: '2px',\r\n            borderRight: '4px solid #fff',\r\n            zIndex: 1\r\n        });\r\n        Common.extend(_this2.__saturation_field.style, {\r\n            width: '100px',\r\n            height: '100px',\r\n            border: '1px solid #555',\r\n            marginRight: '3px',\r\n            display: 'inline-block',\r\n            cursor: 'pointer'\r\n        });\r\n        Common.extend(valueField.style, {\r\n            width: '100%',\r\n            height: '100%',\r\n            background: 'none'\r\n        });\r\n        linearGradient(valueField, 'top', 'rgba(0,0,0,0)', '#000');\r\n        Common.extend(_this2.__hue_field.style, {\r\n            width: '15px',\r\n            height: '100px',\r\n            border: '1px solid #555',\r\n            cursor: 'ns-resize',\r\n            position: 'absolute',\r\n            top: '3px',\r\n            right: '3px'\r\n        });\r\n        hueGradient(_this2.__hue_field);\r\n        Common.extend(_this2.__input.style, {\r\n            outline: 'none',\r\n            textAlign: 'center',\r\n            color: '#fff',\r\n            border: 0,\r\n            fontWeight: 'bold',\r\n            textShadow: _this2.__input_textShadow + 'rgba(0,0,0,0.7)'\r\n        });\r\n        dom.bind(_this2.__saturation_field, 'mousedown', fieldDown);\r\n        dom.bind(_this2.__saturation_field, 'touchstart', fieldDown);\r\n        dom.bind(_this2.__field_knob, 'mousedown', fieldDown);\r\n        dom.bind(_this2.__field_knob, 'touchstart', fieldDown);\r\n        dom.bind(_this2.__hue_field, 'mousedown', fieldDownH);\r\n        dom.bind(_this2.__hue_field, 'touchstart', fieldDownH);\r\n        function fieldDown(e) {\r\n            setSV(e);\r\n            dom.bind(window, 'mousemove', setSV);\r\n            dom.bind(window, 'touchmove', setSV);\r\n            dom.bind(window, 'mouseup', fieldUpSV);\r\n            dom.bind(window, 'touchend', fieldUpSV);\r\n        }\r\n        function fieldDownH(e) {\r\n            setH(e);\r\n            dom.bind(window, 'mousemove', setH);\r\n            dom.bind(window, 'touchmove', setH);\r\n            dom.bind(window, 'mouseup', fieldUpH);\r\n            dom.bind(window, 'touchend', fieldUpH);\r\n        }\r\n        function fieldUpSV() {\r\n            dom.unbind(window, 'mousemove', setSV);\r\n            dom.unbind(window, 'touchmove', setSV);\r\n            dom.unbind(window, 'mouseup', fieldUpSV);\r\n            dom.unbind(window, 'touchend', fieldUpSV);\r\n            onFinish();\r\n        }\r\n        function fieldUpH() {\r\n            dom.unbind(window, 'mousemove', setH);\r\n            dom.unbind(window, 'touchmove', setH);\r\n            dom.unbind(window, 'mouseup', fieldUpH);\r\n            dom.unbind(window, 'touchend', fieldUpH);\r\n            onFinish();\r\n        }\r\n        function onBlur() {\r\n            var i = interpret(this.value);\r\n            if (i !== false) {\r\n                _this.__color.__state = i;\r\n                _this.setValue(_this.__color.toOriginal());\r\n            } else {\r\n                this.value = _this.__color.toString();\r\n            }\r\n        }\r\n        function onFinish() {\r\n            if (_this.__onFinishChange) {\r\n                _this.__onFinishChange.call(_this, _this.__color.toOriginal());\r\n            }\r\n        }\r\n        _this2.__saturation_field.appendChild(valueField);\r\n        _this2.__selector.appendChild(_this2.__field_knob);\r\n        _this2.__selector.appendChild(_this2.__saturation_field);\r\n        _this2.__selector.appendChild(_this2.__hue_field);\r\n        _this2.__hue_field.appendChild(_this2.__hue_knob);\r\n        _this2.domElement.appendChild(_this2.__input);\r\n        _this2.domElement.appendChild(_this2.__selector);\r\n        _this2.updateDisplay();\r\n        function setSV(e) {\r\n            if (e.type.indexOf('touch') === -1) {\r\n                e.preventDefault();\r\n            }\r\n            var fieldRect = _this.__saturation_field.getBoundingClientRect();\r\n            var _ref = e.touches && e.touches[0] || e,\r\n                clientX = _ref.clientX,\r\n                clientY = _ref.clientY;\r\n            var s = (clientX - fieldRect.left) / (fieldRect.right - fieldRect.left);\r\n            var v = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\r\n            if (v > 1) {\r\n                v = 1;\r\n            } else if (v < 0) {\r\n                v = 0;\r\n            }\r\n            if (s > 1) {\r\n                s = 1;\r\n            } else if (s < 0) {\r\n                s = 0;\r\n            }\r\n            _this.__color.v = v;\r\n            _this.__color.s = s;\r\n            _this.setValue(_this.__color.toOriginal());\r\n            return false;\r\n        }\r\n        function setH(e) {\r\n            if (e.type.indexOf('touch') === -1) {\r\n                e.preventDefault();\r\n            }\r\n            var fieldRect = _this.__hue_field.getBoundingClientRect();\r\n            var _ref2 = e.touches && e.touches[0] || e,\r\n                clientY = _ref2.clientY;\r\n            var h = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\r\n            if (h > 1) {\r\n                h = 1;\r\n            } else if (h < 0) {\r\n                h = 0;\r\n            }\r\n            _this.__color.h = h * 360;\r\n            _this.setValue(_this.__color.toOriginal());\r\n            return false;\r\n        }\r\n        return _this2;\r\n    }\r\n    createClass(ColorController, [{\r\n        key: 'updateDisplay',\r\n        value: function updateDisplay() {\r\n            var i = interpret(this.getValue());\r\n            if (i !== false) {\r\n                var mismatch = false;\r\n                Common.each(Color.COMPONENTS, function (component) {\r\n                    if (!Common.isUndefined(i[component]) && !Common.isUndefined(this.__color.__state[component]) && i[component] !== this.__color.__state[component]) {\r\n                        mismatch = true;\r\n                        return {};\r\n                    }\r\n                }, this);\r\n                if (mismatch) {\r\n                    Common.extend(this.__color.__state, i);\r\n                }\r\n            }\r\n            Common.extend(this.__temp.__state, this.__color.__state);\r\n            this.__temp.a = 1;\r\n            var flip = this.__color.v < 0.5 || this.__color.s > 0.5 ? 255 : 0;\r\n            var _flip = 255 - flip;\r\n            Common.extend(this.__field_knob.style, {\r\n                marginLeft: 100 * this.__color.s - 7 + 'px',\r\n                marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\r\n                backgroundColor: this.__temp.toHexString(),\r\n                border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip + ')'\r\n            });\r\n            this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px';\r\n            this.__temp.s = 1;\r\n            this.__temp.v = 1;\r\n            linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toHexString());\r\n            this.__input.value = this.__color.toString();\r\n            Common.extend(this.__input.style, {\r\n                backgroundColor: this.__color.toHexString(),\r\n                color: 'rgb(' + flip + ',' + flip + ',' + flip + ')',\r\n                textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip + ',.7)'\r\n            });\r\n        }\r\n    }]);\r\n    return ColorController;\r\n}(Controller);\r\nvar vendors = ['-moz-', '-o-', '-webkit-', '-ms-', ''];\r\nfunction linearGradient(elem, x, a, b) {\r\n    elem.style.background = '';\r\n    Common.each(vendors, function (vendor) {\r\n        elem.style.cssText += 'background: ' + vendor + 'linear-gradient(' + x + ', ' + a + ' 0%, ' + b + ' 100%); ';\r\n    });\r\n}\r\nfunction hueGradient(elem) {\r\n    elem.style.background = '';\r\n    elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);';\r\n    elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\r\n    elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\r\n    elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\r\n    elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\r\n}\r\n\r\nvar ControllerFactory = function ControllerFactory(object, property) {\r\n  var initialValue = object[property];\r\n  if (Common.isArray(arguments[2]) || Common.isObject(arguments[2])) {\r\n    return new OptionController(object, property, arguments[2]);\r\n  }\r\n  if (Common.isNumber(initialValue)) {\r\n    if (Common.isNumber(arguments[2]) && Common.isNumber(arguments[3])) {\r\n      if (Common.isNumber(arguments[4])) {\r\n        return new NumberControllerSlider(object, property, arguments[2], arguments[3], arguments[4]);\r\n      }\r\n      return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\r\n    }\r\n    if (Common.isNumber(arguments[4])) {\r\n      return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3], step: arguments[4] });\r\n    }\r\n    return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3] });\r\n  }\r\n  if (Common.isString(initialValue)) {\r\n    return new StringController(object, property);\r\n  }\r\n  if (Common.isFunction(initialValue)) {\r\n    return new FunctionController(object, property, '');\r\n  }\r\n  if (Common.isBoolean(initialValue)) {\r\n    return new BooleanController(object, property);\r\n  }\r\n  return null;\r\n};\r\n\r\nvar CustomController = function (_Controller) {\r\n  inherits(CustomController, _Controller);\r\n  function CustomController(object, property) {\r\n    classCallCheck(this, CustomController);\r\n    var _this = possibleConstructorReturn(this, (CustomController.__proto__ || Object.getPrototypeOf(CustomController)).call(this, object, property));\r\n    _this.arguments = {\r\n      object: object, property: property, opts: Array.prototype.slice.call(arguments, 2)\r\n    };\r\n    if (object.property) _this.property = object.property(_this);\r\n    return _this;\r\n  }\r\n  createClass(CustomController, [{\r\n    key: 'controller',\r\n    set: function set$$1(newController) {\r\n      this._controller = newController;\r\n    },\r\n    get: function get$$1() {\r\n      return this._controller;\r\n    }\r\n  }]);\r\n  return CustomController;\r\n}(Controller);\r\n\r\nvar css = {\r\n  load: function load(url, indoc) {\r\n    var doc = indoc || document;\r\n    var link = doc.createElement('link');\r\n    link.type = 'text/css';\r\n    link.rel = 'stylesheet';\r\n    link.href = url;\r\n    doc.getElementsByTagName('head')[0].appendChild(link);\r\n  },\r\n  inject: function inject(cssContent, indoc) {\r\n    var doc = indoc || document;\r\n    var injected = document.createElement('style');\r\n    injected.type = 'text/css';\r\n    injected.innerHTML = cssContent;\r\n    var head = doc.getElementsByTagName('head')[0];\r\n    try {\r\n      head.appendChild(injected);\r\n    } catch (e) {\r\n    }\r\n  }\r\n};\r\n\r\nvar saveDialogContents = \"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n\\n    </div>\\n\\n  </div>\\n\\n</div>\";\r\n\r\nfunction requestAnimationFrame(callback) {\r\n  setTimeout(callback, 1000 / 60);\r\n}\r\nvar requestAnimationFrame$1 = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || requestAnimationFrame;\r\n\r\nvar CenteredDiv = function () {\r\n  function CenteredDiv() {\r\n    classCallCheck(this, CenteredDiv);\r\n    this.backgroundElement = document.createElement('div');\r\n    Common.extend(this.backgroundElement.style, {\r\n      backgroundColor: 'rgba(0,0,0,0.8)',\r\n      top: 0,\r\n      left: 0,\r\n      display: 'none',\r\n      zIndex: '1000',\r\n      opacity: 0,\r\n      WebkitTransition: 'opacity 0.2s linear',\r\n      transition: 'opacity 0.2s linear'\r\n    });\r\n    dom.makeFullscreen(this.backgroundElement);\r\n    this.backgroundElement.style.position = 'fixed';\r\n    this.domElement = document.createElement('div');\r\n    Common.extend(this.domElement.style, {\r\n      position: 'fixed',\r\n      display: 'none',\r\n      zIndex: '1001',\r\n      opacity: 0,\r\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\r\n      transition: 'transform 0.2s ease-out, opacity 0.2s linear'\r\n    });\r\n    document.body.appendChild(this.backgroundElement);\r\n    document.body.appendChild(this.domElement);\r\n    var _this = this;\r\n    dom.bind(this.backgroundElement, 'click', function () {\r\n      _this.hide();\r\n    });\r\n  }\r\n  createClass(CenteredDiv, [{\r\n    key: 'show',\r\n    value: function show() {\r\n      var _this = this;\r\n      this.backgroundElement.style.display = 'block';\r\n      this.domElement.style.display = 'block';\r\n      this.domElement.style.opacity = 0;\r\n      this.domElement.style.webkitTransform = 'scale(1.1)';\r\n      this.layout();\r\n      Common.defer(function () {\r\n        _this.backgroundElement.style.opacity = 1;\r\n        _this.domElement.style.opacity = 1;\r\n        _this.domElement.style.webkitTransform = 'scale(1)';\r\n      });\r\n    }\r\n  }, {\r\n    key: 'hide',\r\n    value: function hide() {\r\n      var _this = this;\r\n      var hide = function hide() {\r\n        _this.domElement.style.display = 'none';\r\n        _this.backgroundElement.style.display = 'none';\r\n        dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\r\n        dom.unbind(_this.domElement, 'transitionend', hide);\r\n        dom.unbind(_this.domElement, 'oTransitionEnd', hide);\r\n      };\r\n      dom.bind(this.domElement, 'webkitTransitionEnd', hide);\r\n      dom.bind(this.domElement, 'transitionend', hide);\r\n      dom.bind(this.domElement, 'oTransitionEnd', hide);\r\n      this.backgroundElement.style.opacity = 0;\r\n      this.domElement.style.opacity = 0;\r\n      this.domElement.style.webkitTransform = 'scale(1.1)';\r\n    }\r\n  }, {\r\n    key: 'layout',\r\n    value: function layout() {\r\n      this.domElement.style.left = window.innerWidth / 2 - dom.getWidth(this.domElement) / 2 + 'px';\r\n      this.domElement.style.top = window.innerHeight / 2 - dom.getHeight(this.domElement) / 2 + 'px';\r\n    }\r\n  }]);\r\n  return CenteredDiv;\r\n}();\r\n\r\nvar styleSheet = ___$insertStyle(\".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\");\r\n\r\ncss.inject(styleSheet);\r\nvar CSS_NAMESPACE = 'dg';\r\nvar HIDE_KEY_CODE = 72;\r\nvar CLOSE_BUTTON_HEIGHT = 20;\r\nvar DEFAULT_DEFAULT_PRESET_NAME = 'Default';\r\nvar SUPPORTS_LOCAL_STORAGE = function () {\r\n  try {\r\n    return !!window.localStorage;\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n}();\r\nvar SAVE_DIALOGUE = void 0;\r\nvar autoPlaceVirgin = true;\r\nvar autoPlaceContainer = void 0;\r\nvar hide = false;\r\nvar hideableGuis = [];\r\nvar GUI = function GUI(pars) {\r\n  var _this = this;\r\n  var params = pars || {};\r\n  this.domElement = document.createElement('div');\r\n  this.__ul = document.createElement('ul');\r\n  this.domElement.appendChild(this.__ul);\r\n  dom.addClass(this.domElement, CSS_NAMESPACE);\r\n  this.__folders = {};\r\n  this.__controllers = [];\r\n  this.__rememberedObjects = [];\r\n  this.__rememberedObjectIndecesToControllers = [];\r\n  this.__listening = [];\r\n  params = Common.defaults(params, {\r\n    closeOnTop: false,\r\n    autoPlace: true,\r\n    width: GUI.DEFAULT_WIDTH\r\n  });\r\n  params = Common.defaults(params, {\r\n    resizable: params.autoPlace,\r\n    hideable: params.autoPlace\r\n  });\r\n  if (!Common.isUndefined(params.load)) {\r\n    if (params.preset) {\r\n      params.load.preset = params.preset;\r\n    }\r\n  } else {\r\n    params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\r\n  }\r\n  if (Common.isUndefined(params.parent) && params.hideable) {\r\n    hideableGuis.push(this);\r\n  }\r\n  params.resizable = Common.isUndefined(params.parent) && params.resizable;\r\n  if (params.autoPlace && Common.isUndefined(params.scrollable)) {\r\n    params.scrollable = true;\r\n  }\r\n  var useLocalStorage = SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\r\n  var saveToLocalStorage = void 0;\r\n  var titleRow = void 0;\r\n  Object.defineProperties(this,\r\n  {\r\n    parent: {\r\n      get: function get$$1() {\r\n        return params.parent;\r\n      }\r\n    },\r\n    scrollable: {\r\n      get: function get$$1() {\r\n        return params.scrollable;\r\n      }\r\n    },\r\n    autoPlace: {\r\n      get: function get$$1() {\r\n        return params.autoPlace;\r\n      }\r\n    },\r\n    closeOnTop: {\r\n      get: function get$$1() {\r\n        return params.closeOnTop;\r\n      }\r\n    },\r\n    preset: {\r\n      get: function get$$1() {\r\n        if (_this.parent) {\r\n          return _this.getRoot().preset;\r\n        }\r\n        return params.load.preset;\r\n      },\r\n      set: function set$$1(v) {\r\n        if (_this.parent) {\r\n          _this.getRoot().preset = v;\r\n        } else {\r\n          params.load.preset = v;\r\n        }\r\n        setPresetSelectIndex(this);\r\n        _this.revert();\r\n      }\r\n    },\r\n    width: {\r\n      get: function get$$1() {\r\n        return params.width;\r\n      },\r\n      set: function set$$1(v) {\r\n        params.width = v;\r\n        setWidth(_this, v);\r\n      }\r\n    },\r\n    name: {\r\n      get: function get$$1() {\r\n        return params.name;\r\n      },\r\n      set: function set$$1(v) {\r\n        params.name = v;\r\n        if (titleRow) {\r\n          titleRow.innerHTML = params.name;\r\n        }\r\n      }\r\n    },\r\n    closed: {\r\n      get: function get$$1() {\r\n        return params.closed;\r\n      },\r\n      set: function set$$1(v) {\r\n        params.closed = v;\r\n        if (params.closed) {\r\n          dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\r\n        } else {\r\n          dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\r\n        }\r\n        this.onResize();\r\n        if (_this.__closeButton) {\r\n          _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\r\n        }\r\n      }\r\n    },\r\n    load: {\r\n      get: function get$$1() {\r\n        return params.load;\r\n      }\r\n    },\r\n    useLocalStorage: {\r\n      get: function get$$1() {\r\n        return useLocalStorage;\r\n      },\r\n      set: function set$$1(bool) {\r\n        if (SUPPORTS_LOCAL_STORAGE) {\r\n          useLocalStorage = bool;\r\n          if (bool) {\r\n            dom.bind(window, 'unload', saveToLocalStorage);\r\n          } else {\r\n            dom.unbind(window, 'unload', saveToLocalStorage);\r\n          }\r\n          localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\r\n        }\r\n      }\r\n    }\r\n  });\r\n  if (Common.isUndefined(params.parent)) {\r\n    this.closed = params.closed || false;\r\n    dom.addClass(this.domElement, GUI.CLASS_MAIN);\r\n    dom.makeSelectable(this.domElement, false);\r\n    if (SUPPORTS_LOCAL_STORAGE) {\r\n      if (useLocalStorage) {\r\n        _this.useLocalStorage = true;\r\n        var savedGui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\r\n        if (savedGui) {\r\n          params.load = JSON.parse(savedGui);\r\n        }\r\n      }\r\n    }\r\n    this.__closeButton = document.createElement('div');\r\n    this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\r\n    dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\r\n    if (params.closeOnTop) {\r\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_TOP);\r\n      this.domElement.insertBefore(this.__closeButton, this.domElement.childNodes[0]);\r\n    } else {\r\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BOTTOM);\r\n      this.domElement.appendChild(this.__closeButton);\r\n    }\r\n    dom.bind(this.__closeButton, 'click', function () {\r\n      _this.closed = !_this.closed;\r\n    });\r\n  } else {\r\n    if (params.closed === undefined) {\r\n      params.closed = true;\r\n    }\r\n    var titleRowName = document.createTextNode(params.name);\r\n    dom.addClass(titleRowName, 'controller-name');\r\n    titleRow = addRow(_this, titleRowName);\r\n    var onClickTitle = function onClickTitle(e) {\r\n      e.preventDefault();\r\n      _this.closed = !_this.closed;\r\n      return false;\r\n    };\r\n    dom.addClass(this.__ul, GUI.CLASS_CLOSED);\r\n    dom.addClass(titleRow, 'title');\r\n    dom.bind(titleRow, 'click', onClickTitle);\r\n    if (!params.closed) {\r\n      this.closed = false;\r\n    }\r\n  }\r\n  if (params.autoPlace) {\r\n    if (Common.isUndefined(params.parent)) {\r\n      if (autoPlaceVirgin) {\r\n        autoPlaceContainer = document.createElement('div');\r\n        dom.addClass(autoPlaceContainer, CSS_NAMESPACE);\r\n        dom.addClass(autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER);\r\n        document.body.appendChild(autoPlaceContainer);\r\n        autoPlaceVirgin = false;\r\n      }\r\n      autoPlaceContainer.appendChild(this.domElement);\r\n      dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\r\n    }\r\n    if (!this.parent) {\r\n      setWidth(_this, params.width);\r\n    }\r\n  }\r\n  this.__resizeHandler = function () {\r\n    _this.onResizeDebounced();\r\n  };\r\n  dom.bind(window, 'resize', this.__resizeHandler);\r\n  dom.bind(this.__ul, 'webkitTransitionEnd', this.__resizeHandler);\r\n  dom.bind(this.__ul, 'transitionend', this.__resizeHandler);\r\n  dom.bind(this.__ul, 'oTransitionEnd', this.__resizeHandler);\r\n  this.onResize();\r\n  if (params.resizable) {\r\n    addResizeHandle(this);\r\n  }\r\n  saveToLocalStorage = function saveToLocalStorage() {\r\n    if (SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(_this, 'isLocal')) === 'true') {\r\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\r\n    }\r\n  };\r\n  this.saveToLocalStorageIfPossible = saveToLocalStorage;\r\n  function resetWidth() {\r\n    var root = _this.getRoot();\r\n    root.width += 1;\r\n    Common.defer(function () {\r\n      root.width -= 1;\r\n    });\r\n  }\r\n  if (!params.parent) {\r\n    resetWidth();\r\n  }\r\n};\r\nGUI.toggleHide = function () {\r\n  hide = !hide;\r\n  Common.each(hideableGuis, function (gui) {\r\n    gui.domElement.style.display = hide ? 'none' : '';\r\n  });\r\n};\r\nGUI.CLASS_AUTO_PLACE = 'a';\r\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\r\nGUI.CLASS_MAIN = 'main';\r\nGUI.CLASS_CONTROLLER_ROW = 'cr';\r\nGUI.CLASS_TOO_TALL = 'taller-than-window';\r\nGUI.CLASS_CLOSED = 'closed';\r\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\r\nGUI.CLASS_CLOSE_TOP = 'close-top';\r\nGUI.CLASS_CLOSE_BOTTOM = 'close-bottom';\r\nGUI.CLASS_DRAG = 'drag';\r\nGUI.DEFAULT_WIDTH = 245;\r\nGUI.TEXT_CLOSED = 'Close Controls';\r\nGUI.TEXT_OPEN = 'Open Controls';\r\nGUI._keydownHandler = function (e) {\r\n  if (document.activeElement.type !== 'text' && (e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE)) {\r\n    GUI.toggleHide();\r\n  }\r\n};\r\ndom.bind(window, 'keydown', GUI._keydownHandler, false);\r\nCommon.extend(GUI.prototype,\r\n{\r\n  add: function add(object, property) {\r\n    return _add(this, object, property, {\r\n      factoryArgs: Array.prototype.slice.call(arguments, 2)\r\n    });\r\n  },\r\n  addColor: function addColor(object, property) {\r\n    return _add(this, object, property, {\r\n      color: true\r\n    });\r\n  },\r\n  remove: function remove(controller) {\r\n    this.__ul.removeChild(controller.__li);\r\n    this.__controllers.splice(this.__controllers.indexOf(controller), 1);\r\n    var _this = this;\r\n    Common.defer(function () {\r\n      _this.onResize();\r\n    });\r\n  },\r\n  destroy: function destroy() {\r\n    if (this.parent) {\r\n      throw new Error('Only the root GUI should be removed with .destroy(). ' + 'For subfolders, use gui.removeFolder(folder) instead.');\r\n    }\r\n    if (this.autoPlace) {\r\n      autoPlaceContainer.removeChild(this.domElement);\r\n    }\r\n    var _this = this;\r\n    Common.each(this.__folders, function (subfolder) {\r\n      _this.removeFolder(subfolder);\r\n    });\r\n    dom.unbind(window, 'keydown', GUI._keydownHandler, false);\r\n    removeListeners(this);\r\n  },\r\n  addFolder: function addFolder(name) {\r\n    if (this.__folders[name] !== undefined) {\r\n      throw new Error('You already have a folder in this GUI by the' + ' name \"' + name + '\"');\r\n    }\r\n    var newGuiParams = { name: name, parent: this };\r\n    newGuiParams.autoPlace = this.autoPlace;\r\n    if (this.load &&\r\n    this.load.folders &&\r\n    this.load.folders[name]) {\r\n      newGuiParams.closed = this.load.folders[name].closed;\r\n      newGuiParams.load = this.load.folders[name];\r\n    }\r\n    var gui = new GUI(newGuiParams);\r\n    this.__folders[name] = gui;\r\n    var li = addRow(this, gui.domElement);\r\n    dom.addClass(li, 'folder');\r\n    return gui;\r\n  },\r\n  removeFolder: function removeFolder(folder) {\r\n    this.__ul.removeChild(folder.domElement.parentElement);\r\n    delete this.__folders[folder.name];\r\n    if (this.load &&\r\n    this.load.folders &&\r\n    this.load.folders[folder.name]) {\r\n      delete this.load.folders[folder.name];\r\n    }\r\n    removeListeners(folder);\r\n    var _this = this;\r\n    Common.each(folder.__folders, function (subfolder) {\r\n      folder.removeFolder(subfolder);\r\n    });\r\n    Common.defer(function () {\r\n      _this.onResize();\r\n    });\r\n  },\r\n  open: function open() {\r\n    this.closed = false;\r\n  },\r\n  close: function close() {\r\n    this.closed = true;\r\n  },\r\n  hide: function hide() {\r\n    this.domElement.style.display = 'none';\r\n  },\r\n  show: function show() {\r\n    this.domElement.style.display = '';\r\n  },\r\n  onResize: function onResize() {\r\n    var root = this.getRoot();\r\n    if (root.scrollable) {\r\n      var top = dom.getOffset(root.__ul).top;\r\n      var h = 0;\r\n      Common.each(root.__ul.childNodes, function (node) {\r\n        if (!(root.autoPlace && node === root.__save_row)) {\r\n          h += dom.getHeight(node);\r\n        }\r\n      });\r\n      if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\r\n        dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\r\n        root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\r\n      } else {\r\n        dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\r\n        root.__ul.style.height = 'auto';\r\n      }\r\n    }\r\n    if (root.__resize_handle) {\r\n      Common.defer(function () {\r\n        root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\r\n      });\r\n    }\r\n    if (root.__closeButton) {\r\n      root.__closeButton.style.width = root.width + 'px';\r\n    }\r\n  },\r\n  onResizeDebounced: Common.debounce(function () {\r\n    this.onResize();\r\n  }, 50),\r\n  remember: function remember() {\r\n    if (Common.isUndefined(SAVE_DIALOGUE)) {\r\n      SAVE_DIALOGUE = new CenteredDiv();\r\n      SAVE_DIALOGUE.domElement.innerHTML = saveDialogContents;\r\n    }\r\n    if (this.parent) {\r\n      throw new Error('You can only call remember on a top level GUI.');\r\n    }\r\n    var _this = this;\r\n    Common.each(Array.prototype.slice.call(arguments), function (object) {\r\n      if (_this.__rememberedObjects.length === 0) {\r\n        addSaveMenu(_this);\r\n      }\r\n      if (_this.__rememberedObjects.indexOf(object) === -1) {\r\n        _this.__rememberedObjects.push(object);\r\n      }\r\n    });\r\n    if (this.autoPlace) {\r\n      setWidth(this, this.width);\r\n    }\r\n  },\r\n  getRoot: function getRoot() {\r\n    var gui = this;\r\n    while (gui.parent) {\r\n      gui = gui.parent;\r\n    }\r\n    return gui;\r\n  },\r\n  getSaveObject: function getSaveObject() {\r\n    var toReturn = this.load;\r\n    toReturn.closed = this.closed;\r\n    if (this.__rememberedObjects.length > 0) {\r\n      toReturn.preset = this.preset;\r\n      if (!toReturn.remembered) {\r\n        toReturn.remembered = {};\r\n      }\r\n      toReturn.remembered[this.preset] = getCurrentPreset(this);\r\n    }\r\n    toReturn.folders = {};\r\n    Common.each(this.__folders, function (element, key) {\r\n      toReturn.folders[key] = element.getSaveObject();\r\n    });\r\n    return toReturn;\r\n  },\r\n  save: function save() {\r\n    if (!this.load.remembered) {\r\n      this.load.remembered = {};\r\n    }\r\n    this.load.remembered[this.preset] = getCurrentPreset(this);\r\n    markPresetModified(this, false);\r\n    this.saveToLocalStorageIfPossible();\r\n  },\r\n  saveAs: function saveAs(presetName) {\r\n    if (!this.load.remembered) {\r\n      this.load.remembered = {};\r\n      this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\r\n    }\r\n    this.load.remembered[presetName] = getCurrentPreset(this);\r\n    this.preset = presetName;\r\n    addPresetOption(this, presetName, true);\r\n    this.saveToLocalStorageIfPossible();\r\n  },\r\n  revert: function revert(gui) {\r\n    Common.each(this.__controllers, function (controller) {\r\n      if (!this.getRoot().load.remembered) {\r\n        controller.setValue(controller.initialValue);\r\n      } else {\r\n        recallSavedValue(gui || this.getRoot(), controller);\r\n      }\r\n      if (controller.__onFinishChange) {\r\n        controller.__onFinishChange.call(controller, controller.getValue());\r\n      }\r\n    }, this);\r\n    Common.each(this.__folders, function (folder) {\r\n      folder.revert(folder);\r\n    });\r\n    if (!gui) {\r\n      markPresetModified(this.getRoot(), false);\r\n    }\r\n  },\r\n  listen: function listen(controller) {\r\n    var init = this.__listening.length === 0;\r\n    this.__listening.push(controller);\r\n    if (init) {\r\n      updateDisplays(this.__listening);\r\n    }\r\n  },\r\n  updateDisplay: function updateDisplay() {\r\n    Common.each(this.__controllers, function (controller) {\r\n      controller.updateDisplay();\r\n    });\r\n    Common.each(this.__folders, function (folder) {\r\n      folder.updateDisplay();\r\n    });\r\n  }\r\n});\r\nfunction addRow(gui, newDom, liBefore) {\r\n  var li = document.createElement('li');\r\n  if (newDom) {\r\n    li.appendChild(newDom);\r\n  }\r\n  if (liBefore) {\r\n    gui.__ul.insertBefore(li, liBefore);\r\n  } else {\r\n    gui.__ul.appendChild(li);\r\n  }\r\n  gui.onResize();\r\n  return li;\r\n}\r\nfunction removeListeners(gui) {\r\n  dom.unbind(window, 'resize', gui.__resizeHandler);\r\n  if (gui.saveToLocalStorageIfPossible) {\r\n    dom.unbind(window, 'unload', gui.saveToLocalStorageIfPossible);\r\n  }\r\n}\r\nfunction markPresetModified(gui, modified) {\r\n  var opt = gui.__preset_select[gui.__preset_select.selectedIndex];\r\n  if (modified) {\r\n    opt.innerHTML = opt.value + '*';\r\n  } else {\r\n    opt.innerHTML = opt.value;\r\n  }\r\n}\r\nfunction augmentController(gui, li, controller) {\r\n  controller.__li = li;\r\n  controller.__gui = gui;\r\n  Common.extend(controller,                                   {\r\n    options: function options(_options) {\r\n      if (arguments.length > 1) {\r\n        var nextSibling = controller.__li.nextElementSibling;\r\n        controller.remove();\r\n        return _add(gui, controller.object, controller.property, {\r\n          before: nextSibling,\r\n          factoryArgs: [Common.toArray(arguments)]\r\n        });\r\n      }\r\n      if (Common.isArray(_options) || Common.isObject(_options)) {\r\n        var _nextSibling = controller.__li.nextElementSibling;\r\n        controller.remove();\r\n        return _add(gui, controller.object, controller.property, {\r\n          before: _nextSibling,\r\n          factoryArgs: [_options]\r\n        });\r\n      }\r\n    },\r\n    name: function name(_name) {\r\n      controller.__li.firstElementChild.firstElementChild.innerHTML = _name;\r\n      return controller;\r\n    },\r\n    listen: function listen() {\r\n      controller.__gui.listen(controller);\r\n      return controller;\r\n    },\r\n    remove: function remove() {\r\n      controller.__gui.remove(controller);\r\n      return controller;\r\n    }\r\n  });\r\n  if (controller instanceof NumberControllerSlider) {\r\n    var box = new NumberControllerBox(controller.object, controller.property, { min: controller.__min, max: controller.__max, step: controller.__step });\r\n    Common.each(['updateDisplay', 'onChange', 'onFinishChange', 'step', 'min', 'max'], function (method) {\r\n      var pc = controller[method];\r\n      var pb = box[method];\r\n      controller[method] = box[method] = function () {\r\n        var args = Array.prototype.slice.call(arguments);\r\n        pb.apply(box, args);\r\n        return pc.apply(controller, args);\r\n      };\r\n    });\r\n    dom.addClass(li, 'has-slider');\r\n    controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\r\n  } else if (controller instanceof NumberControllerBox) {\r\n    var r = function r(returned) {\r\n      if (Common.isNumber(controller.__min) && Common.isNumber(controller.__max)) {\r\n        var oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\r\n        var wasListening = controller.__gui.__listening.indexOf(controller) > -1;\r\n        controller.remove();\r\n        var newController = _add(gui, controller.object, controller.property, {\r\n          before: controller.__li.nextElementSibling,\r\n          factoryArgs: [controller.__min, controller.__max, controller.__step]\r\n        });\r\n        newController.name(oldName);\r\n        if (wasListening) newController.listen();\r\n        return newController;\r\n      }\r\n      return returned;\r\n    };\r\n    controller.min = Common.compose(r, controller.min);\r\n    controller.max = Common.compose(r, controller.max);\r\n  } else if (controller instanceof BooleanController) {\r\n    dom.bind(li, 'click', function () {\r\n      dom.fakeEvent(controller.__checkbox, 'click');\r\n    });\r\n    dom.bind(controller.__checkbox, 'click', function (e) {\r\n      e.stopPropagation();\r\n    });\r\n  } else if (controller instanceof FunctionController) {\r\n    dom.bind(li, 'click', function () {\r\n      dom.fakeEvent(controller.__button, 'click');\r\n    });\r\n    dom.bind(li, 'mouseover', function () {\r\n      dom.addClass(controller.__button, 'hover');\r\n    });\r\n    dom.bind(li, 'mouseout', function () {\r\n      dom.removeClass(controller.__button, 'hover');\r\n    });\r\n  } else if (controller instanceof ColorController) {\r\n    dom.addClass(li, 'color');\r\n    controller.updateDisplay = Common.compose(function (val) {\r\n      li.style.borderLeftColor = controller.__color.toString();\r\n      return val;\r\n    }, controller.updateDisplay);\r\n    controller.updateDisplay();\r\n  }\r\n  controller.setValue = Common.compose(function (val) {\r\n    if (gui.getRoot().__preset_select && controller.isModified()) {\r\n      markPresetModified(gui.getRoot(), true);\r\n    }\r\n    return val;\r\n  }, controller.setValue);\r\n}\r\nfunction recallSavedValue(gui, controller) {\r\n  var root = gui.getRoot();\r\n  var matchedIndex = root.__rememberedObjects.indexOf(controller.object);\r\n  if (matchedIndex !== -1) {\r\n    var controllerMap = root.__rememberedObjectIndecesToControllers[matchedIndex];\r\n    if (controllerMap === undefined) {\r\n      controllerMap = {};\r\n      root.__rememberedObjectIndecesToControllers[matchedIndex] = controllerMap;\r\n    }\r\n    controllerMap[controller.property] = controller;\r\n    if (root.load && root.load.remembered) {\r\n      var presetMap = root.load.remembered;\r\n      var preset = void 0;\r\n      if (presetMap[gui.preset]) {\r\n        preset = presetMap[gui.preset];\r\n      } else if (presetMap[DEFAULT_DEFAULT_PRESET_NAME]) {\r\n        preset = presetMap[DEFAULT_DEFAULT_PRESET_NAME];\r\n      } else {\r\n        return;\r\n      }\r\n      if (preset[matchedIndex] && preset[matchedIndex][controller.property] !== undefined) {\r\n        var value = preset[matchedIndex][controller.property];\r\n        controller.initialValue = value;\r\n        controller.setValue(value);\r\n      }\r\n    }\r\n  }\r\n}\r\nfunction _add(gui, object, property, params) {\r\n  var customObject;\r\n  if (object.arguments) {\r\n    customObject = object;\r\n    object = customObject.arguments.object;\r\n    property = customObject.arguments.property;\r\n    params = {\r\n      factoryArgs: customObject.arguments.opts\r\n    };\r\n  }\r\n  if (customObject === undefined && object[property] === undefined) {\r\n    throw new Error('Object \"' + object + '\" has no property \"' + property + '\"');\r\n  }\r\n  var controller = void 0;\r\n  if (params.color) {\r\n    controller = new ColorController(object, property);\r\n  } else if (customObject !== undefined && typeof customObject.property === \"string\") {\r\n    controller = customObject;\r\n  } else {\r\n    var factoryArgs = [object, property].concat(params.factoryArgs);\r\n    controller = ControllerFactory.apply(gui, factoryArgs);\r\n  }\r\n  if (controller === null) controller = customObject;else if (customObject !== undefined) customObject.controller = controller;\r\n  if (params.before instanceof Controller) {\r\n    params.before = params.before.__li;\r\n  }\r\n  recallSavedValue(gui, controller);\r\n  dom.addClass(controller.domElement, 'c');\r\n  var name = document.createElement('span');\r\n  dom.addClass(name, 'property-name');\r\n  if (customObject !== undefined && _typeof(customObject.property) === \"object\") {\r\n    for (var propertyName in customObject.property) {\r\n      name.appendChild(customObject.property[propertyName]);\r\n    }\r\n  } else name.innerHTML = controller.property;\r\n  var container = document.createElement('div');\r\n  container.appendChild(name);\r\n  container.appendChild(controller.domElement);\r\n  var li = addRow(gui, container, params.before);\r\n  dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\r\n  if (controller instanceof ColorController) {\r\n    dom.addClass(li, 'color');\r\n  } else {\r\n    dom.addClass(li, _typeof(controller.getValue()));\r\n  }\r\n  augmentController(gui, li, controller);\r\n  gui.__controllers.push(controller);\r\n  return controller;\r\n}\r\nfunction getLocalStorageHash(gui, key) {\r\n  return document.location.href + '.' + key;\r\n}\r\nfunction addPresetOption(gui, name, setSelected) {\r\n  var opt = document.createElement('option');\r\n  opt.innerHTML = name;\r\n  opt.value = name;\r\n  gui.__preset_select.appendChild(opt);\r\n  if (setSelected) {\r\n    gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\r\n  }\r\n}\r\nfunction showHideExplain(gui, explain) {\r\n  explain.style.display = gui.useLocalStorage ? 'block' : 'none';\r\n}\r\nfunction addSaveMenu(gui) {\r\n  var div = gui.__save_row = document.createElement('li');\r\n  dom.addClass(gui.domElement, 'has-save');\r\n  gui.__ul.insertBefore(div, gui.__ul.firstChild);\r\n  dom.addClass(div, 'save-row');\r\n  var gears = document.createElement('span');\r\n  gears.innerHTML = '&nbsp;';\r\n  dom.addClass(gears, 'button gears');\r\n  var button = document.createElement('span');\r\n  button.innerHTML = 'Save';\r\n  dom.addClass(button, 'button');\r\n  dom.addClass(button, 'save');\r\n  var button2 = document.createElement('span');\r\n  button2.innerHTML = 'New';\r\n  dom.addClass(button2, 'button');\r\n  dom.addClass(button2, 'save-as');\r\n  var button3 = document.createElement('span');\r\n  button3.innerHTML = 'Revert';\r\n  dom.addClass(button3, 'button');\r\n  dom.addClass(button3, 'revert');\r\n  var select = gui.__preset_select = document.createElement('select');\r\n  if (gui.load && gui.load.remembered) {\r\n    Common.each(gui.load.remembered, function (value, key) {\r\n      addPresetOption(gui, key, key === gui.preset);\r\n    });\r\n  } else {\r\n    addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\r\n  }\r\n  dom.bind(select, 'change', function () {\r\n    for (var index = 0; index < gui.__preset_select.length; index++) {\r\n      gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\r\n    }\r\n    gui.preset = this.value;\r\n  });\r\n  div.appendChild(select);\r\n  div.appendChild(gears);\r\n  div.appendChild(button);\r\n  div.appendChild(button2);\r\n  div.appendChild(button3);\r\n  if (SUPPORTS_LOCAL_STORAGE) {\r\n    var explain = document.getElementById('dg-local-explain');\r\n    var localStorageCheckBox = document.getElementById('dg-local-storage');\r\n    var saveLocally = document.getElementById('dg-save-locally');\r\n    saveLocally.style.display = 'block';\r\n    if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\r\n      localStorageCheckBox.setAttribute('checked', 'checked');\r\n    }\r\n    showHideExplain(gui, explain);\r\n    dom.bind(localStorageCheckBox, 'change', function () {\r\n      gui.useLocalStorage = !gui.useLocalStorage;\r\n      showHideExplain(gui, explain);\r\n    });\r\n  }\r\n  var newConstructorTextArea = document.getElementById('dg-new-constructor');\r\n  dom.bind(newConstructorTextArea, 'keydown', function (e) {\r\n    if (e.metaKey && (e.which === 67 || e.keyCode === 67)) {\r\n      SAVE_DIALOGUE.hide();\r\n    }\r\n  });\r\n  dom.bind(gears, 'click', function () {\r\n    newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\r\n    SAVE_DIALOGUE.show();\r\n    newConstructorTextArea.focus();\r\n    newConstructorTextArea.select();\r\n  });\r\n  dom.bind(button, 'click', function () {\r\n    gui.save();\r\n  });\r\n  dom.bind(button2, 'click', function () {\r\n    var presetName = prompt('Enter a new preset name.');\r\n    if (presetName) {\r\n      gui.saveAs(presetName);\r\n    }\r\n  });\r\n  dom.bind(button3, 'click', function () {\r\n    gui.revert();\r\n  });\r\n}\r\nfunction addResizeHandle(gui) {\r\n  var pmouseX = void 0;\r\n  gui.__resize_handle = document.createElement('div');\r\n  Common.extend(gui.__resize_handle.style, {\r\n    width: '6px',\r\n    marginLeft: '-3px',\r\n    height: '200px',\r\n    cursor: 'ew-resize',\r\n    position: 'absolute'\r\n  });\r\n  function drag(e) {\r\n    e.preventDefault();\r\n    gui.width += pmouseX - e.clientX;\r\n    gui.onResize();\r\n    pmouseX = e.clientX;\r\n    return false;\r\n  }\r\n  function dragStop() {\r\n    dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\r\n    dom.unbind(window, 'mousemove', drag);\r\n    dom.unbind(window, 'mouseup', dragStop);\r\n  }\r\n  function dragStart(e) {\r\n    e.preventDefault();\r\n    pmouseX = e.clientX;\r\n    dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\r\n    dom.bind(window, 'mousemove', drag);\r\n    dom.bind(window, 'mouseup', dragStop);\r\n    return false;\r\n  }\r\n  dom.bind(gui.__resize_handle, 'mousedown', dragStart);\r\n  dom.bind(gui.__closeButton, 'mousedown', dragStart);\r\n  gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\r\n}\r\nfunction setWidth(gui, w) {\r\n  gui.domElement.style.width = w + 'px';\r\n  if (gui.__save_row && gui.autoPlace) {\r\n    gui.__save_row.style.width = w + 'px';\r\n  }\r\n  if (gui.__closeButton) {\r\n    gui.__closeButton.style.width = w + 'px';\r\n  }\r\n}\r\nfunction getCurrentPreset(gui, useInitialValues) {\r\n  var toReturn = {};\r\n  Common.each(gui.__rememberedObjects, function (val, index) {\r\n    var savedValues = {};\r\n    var controllerMap = gui.__rememberedObjectIndecesToControllers[index];\r\n    Common.each(controllerMap, function (controller, property) {\r\n      savedValues[property] = useInitialValues ? controller.initialValue : controller.getValue();\r\n    });\r\n    toReturn[index] = savedValues;\r\n  });\r\n  return toReturn;\r\n}\r\nfunction setPresetSelectIndex(gui) {\r\n  for (var index = 0; index < gui.__preset_select.length; index++) {\r\n    if (gui.__preset_select[index].value === gui.preset) {\r\n      gui.__preset_select.selectedIndex = index;\r\n    }\r\n  }\r\n}\r\nfunction updateDisplays(controllerArray) {\r\n  if (controllerArray.length !== 0) {\r\n    requestAnimationFrame$1.call(window, function () {\r\n      updateDisplays(controllerArray);\r\n    });\r\n  }\r\n  Common.each(controllerArray, function (c) {\r\n    c.updateDisplay();\r\n  });\r\n}\r\n\r\nvar color = {\r\n  Color: Color,\r\n  math: ColorMath,\r\n  interpret: interpret\r\n};\r\nvar controllers = {\r\n  Controller: Controller,\r\n  BooleanController: BooleanController,\r\n  OptionController: OptionController,\r\n  StringController: StringController,\r\n  NumberController: NumberController,\r\n  NumberControllerBox: NumberControllerBox,\r\n  NumberControllerSlider: NumberControllerSlider,\r\n  FunctionController: FunctionController,\r\n  ColorController: ColorController,\r\n  CustomController: CustomController\r\n};\r\nvar dom$1 = { dom: dom };\r\nvar gui = { GUI: GUI };\r\nvar GUI$1 = GUI;\r\nvar index = {\r\n  color: color,\r\n  controllers: controllers,\r\n  dom: dom$1,\r\n  gui: gui,\r\n  GUI: GUI$1\r\n};\r\n\r\nexport { color, controllers, dom$1 as dom, gui, GUI$1 as GUI };\r\nexport default index;\r\n//# sourceMappingURL=dat.gui.module.js.map\r\n","/**\r\n * get position functions library\r\n *\r\n * @author Andrej Hristoliubov https://anhr.github.io/AboutMe/\r\n * \r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\nimport three from './three.js'\r\n\r\n/**\r\n * gets the position from the geometry.attributes.position of the object.\r\n * @param {THREE.Mesh} object\r\n * @param {number} index index of position in the object.geometry.attributes.position\r\n * @returns position\r\n */\r\nexport function getObjectLocalPosition( object, index ) {\r\n\r\n\tconst THREE = three.THREE;\r\n\tconst attributesPosition = object.geometry.attributes.position,\r\n\t\tposition = attributesPosition.itemSize >= 4 ? new THREE.Vector4( 0, 0, 0, 0 ) : new THREE.Vector3();\r\n\tposition.fromArray( attributesPosition.array, index * attributesPosition.itemSize );\r\n\treturn position;\r\n\r\n}\r\n\r\n/**\r\n * gets position of the vector in world coordinates, taking into account the position, scale and rotation of the 3D object\r\n * @param {THREE.Object3D} object\r\n * @param {THREE.Vector3} pos local position\r\n * @returns world position \r\n */\r\nexport function getWorldPosition( object, pos ) {\r\n\r\n\tconst THREE = three.THREE;\r\n\tvar position = pos.clone();\r\n\r\n\t/*\r\n\t\t//https://stackoverflow.com/questions/11495089/how-to-get-the-absolute-position-of-a-vertex-in-three-js\r\n\t\t//     \r\n\t\tobject.updateMatrixWorld();\r\n\t\tposition.applyMatrix4( object.matrixWorld );\r\n\t*/\r\n\tfunction getPosition( object, pos ) {\r\n\r\n\t\tvar position = new THREE.Vector3(),\r\n\t\t\tpositionAngle = new THREE.Vector3();\r\n\t\tposition = pos.clone();\r\n\t\tposition.multiply( object.scale );\r\n\r\n\t\t//rotation\r\n\t\tpositionAngle.copy( position );\r\n\t\tpositionAngle.applyEuler( object.rotation );\r\n\t\tposition.x = positionAngle.x;\r\n\t\tposition.y = positionAngle.y;\r\n\t\tposition.z = positionAngle.z;\r\n\r\n\t\tposition.add( object.position );\r\n\t\treturn position;\r\n\r\n\t}\r\n\tdo {\r\n\r\n\t\tposition = getPosition( object, position );\r\n\t\tobject = object.parent;\r\n\r\n\t} while ( object && object.parent );\r\n\treturn position;\r\n\r\n}\r\n\r\n/**\r\n * gets the position from the geometry.attributes.position of the object in world coordinates.\r\n * @param {THREE.Mesh} object\r\n * @param {number} index index of position in the object.geometry.attributes.position\r\n * @returns position\r\n */\r\nexport function getObjectPosition( object, index ) {\r\n\r\n\tif ( index === -1 )\r\n\t\treturn undefined;\r\n\tif ( index === undefined )\r\n\t\treturn object.position;\r\n\treturn getWorldPosition( object, getObjectLocalPosition( object, index ) )\r\n\r\n}\r\n\r\n","var WEBGL = {\r\n\r\n\tisWebGLAvailable: function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\treturn !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );\r\n\r\n\t\t} catch ( e ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tisWebGL2Available: function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\treturn !! ( window.WebGL2RenderingContext && canvas.getContext( 'webgl2' ) );\r\n\r\n\t\t} catch ( e ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetWebGLErrorMessage: function () {\r\n\r\n\t\treturn this.getErrorMessage( 1 );\r\n\r\n\t},\r\n\r\n\tgetWebGL2ErrorMessage: function () {\r\n\r\n\t\treturn this.getErrorMessage( 2 );\r\n\r\n\t},\r\n\r\n\tgetErrorMessage: function ( version ) {\r\n\r\n\t\tvar names = {\r\n\t\t\t1: 'WebGL',\r\n\t\t\t2: 'WebGL 2'\r\n\t\t};\r\n\r\n\t\tvar contexts = {\r\n\t\t\t1: window.WebGLRenderingContext,\r\n\t\t\t2: window.WebGL2RenderingContext\r\n\t\t};\r\n\r\n\t\tvar message = 'Your $0 does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">$1</a>';\r\n\r\n\t\tvar element = document.createElement( 'div' );\r\n\t\telement.id = 'webglmessage';\r\n\t\telement.style.fontFamily = 'monospace';\r\n\t\telement.style.fontSize = '13px';\r\n\t\telement.style.fontWeight = 'normal';\r\n\t\telement.style.textAlign = 'center';\r\n\t\telement.style.background = '#fff';\r\n\t\telement.style.color = '#000';\r\n\t\telement.style.padding = '1.5em';\r\n\t\telement.style.width = '400px';\r\n\t\telement.style.margin = '5em auto 0';\r\n\r\n\t\tif ( contexts[ version ] ) {\r\n\r\n\t\t\tmessage = message.replace( '$0', 'graphics card' );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmessage = message.replace( '$0', 'browser' );\r\n\r\n\t\t}\r\n\r\n\t\tmessage = message.replace( '$1', names[ version ] );\r\n\r\n\t\telement.innerHTML = message;\r\n\r\n\t\treturn element;\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { WEBGL };\r\n","/**\r\n * node.js version of the synchronous download of the file.\r\n * @author Andrej Hristoliubov https://anhr.github.io/AboutMe/\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\n//The myRequest is cross-browser XMLHttpRequest wrapper.\r\nfunction myRequest( options ) {\r\n\r\n\tthis.loadXMLDoc = function () {\r\n\t\tvar req;\r\n\r\n\t\tif ( window.XMLHttpRequest ) {\r\n\t\t\treq = new XMLHttpRequest();\r\n\t\t\tif ( !req )\r\n\t\t\t\tthrow \"new XMLHttpRequest() failed!\"\r\n\t\t}\r\n\t\telse if ( window.ActiveXObject ) {\r\n\t\t\treq = this.NewActiveXObject();\r\n\t\t\tif ( !req )\r\n\t\t\t\tthrow \"NewActiveXObject() failed!\"\r\n\t\t}\r\n\t\telse throw \"myRequest.loadXMLDoc(...) failed!\";\r\n\t\treturn req;\r\n\t}\r\n\r\n\tthis.NewActiveXObject = function () {\r\n\t\ttry { return new ActiveXObject( \"Msxml2.XMLHTTP.6.0\" ); }\r\n\t\tcatch ( e ) { }\r\n\t\ttry { return new ActiveXObject( \"Msxml2.XMLHTTP.3.0\" ); }\r\n\t\tcatch ( e ) { }\r\n\t\ttry { return new ActiveXObject( \"Msxml2.XMLHTTP\" ); }\r\n\t\tcatch ( e ) { }\r\n\t\ttry { return new ActiveXObject( \"Microsoft.XMLHTTP\" ); }\r\n\t\tcatch ( e ) { }\r\n\t\tErrorMessage( 'This browser does not support XMLHttpRequest. Probably, your security settings do not allow Web sites to use ActiveX controls installed on your computer. Refresh your Web page to find out the current status of your Web page or enable the \"Initialize and script ActiveX controls not marked as safe\" and \"Run Active X controls and plug-ins\" of the Security settings of the Internet zone of your browser.' );\r\n\t\treturn null;\r\n\t}\r\n\r\n\tthis.XMLHttpRequestStart = function ( onreadystatechange, async ) {\r\n\r\n\t\tthis.XMLHttpRequestStop();//For compatibility with IE Windows Phone\r\n\r\n\t\tthis.req.onreadystatechange = onreadystatechange;\r\n\r\n\t\t//ATTENTION!!! do not works in IE\r\n\t\tif ( \"onerror\" in this.req ) {\r\n\t\t\tthis.req.onerror = function ( event ) {\r\n\t\t\t\tErrorMessage( \"XMLHttpRequest error. url: \" + this.url, false, false );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.XMLHttpRequestReStart( async );\r\n\t}\r\n\r\n\tthis.getUrl = function () {\r\n\t\tif ( ( typeof this.url == 'undefined' ) || ( this.url == null ) ) {\r\n\t\t\tthis.url = \"XMLHttpRequest.xml\";\r\n\t\t}\r\n\t\treturn this.url + ( this.params ? this.params : \"\" );\r\n\t}\r\n\r\n\tthis.XMLHttpRequestReStart = function ( async ) {\r\n\t\ttry {\r\n\t\t\tif ( typeof async == 'undefined' )\r\n\t\t\t\tasync = true;\r\n\t\t\tthis.req.open( \"GET\", this.getUrl(), async );\r\n\t\t\tif ( async ) {\r\n\t\t\t\tvar timeout = ( 60 + 30 ) * 1000;//!!!     CSocketWaitEvent::WaitResponse\r\n\t\t\t\tif ( \"timeout\" in this.req )//for IE6\r\n\t\t\t\t\tthis.req.timeout = timeout;\r\n\t\t\t\tif ( \"ontimeout\" in this.req )\r\n\t\t\t\t\tthis.req.ontimeout = function () {\r\n\t\t\t\t\t\tErrorMessage( 'XMLHttpRequest timeout', false, false );\r\n\t\t\t\t\t}\r\n\t\t\t\telse {//for Safari, IE6\r\n\t\t\t\t\tclearTimeout( this.timeout_id_SendReq );\r\n\t\t\t\t\tthis.timeout_id_SendReq = setTimeout( function () {\r\n\t\t\t\t\t\tErrorMessage( 'XMLHttpRequest timeout 2', false, false );\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t, timeout );\r\n\t\t\t\t\t//console.log(\"setTimeout this.req.timeout_id_SendReq = \" + this.req.timeout_id_SendReq);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.req.send( null );\r\n\t\t} catch ( e ) {\r\n\t\t\tErrorMessage( e.message + \" url: \" + this.url, false, false );\r\n\t\t}\r\n\t}\r\n\r\n\tthis.XMLHttpRequestStop = function () {\r\n\t\t//console.log(\"XMLHttpRequestStop(...)\");\r\n\t\tif ( this.req == null )\r\n\t\t\treturn;\r\n\t\tthis.req.abort();\r\n\t}\r\n\r\n\tthis.ProcessReqChange = function ( processStatus200 ) {\r\n\t\tvar req = this.req;\r\n\t\tif ( ( typeof isIE === 'undefined' ) || !isIE ) {\r\n\t\t\t//\tconsole.log(\"processReqChange(); req.statusText: \" + req.statusText + \". req.status = \" + req.status + \". req.readyState = \" + req.readyState + \". req.responseText: \" + req.responseText);\r\n\t\t}\r\n\t\t// only if req shows \"complete\"\r\n\t\t//http://www.w3schools.com/ajax/ajax_xmlhttprequest_onreadystatechange.asp\r\n\t\t//http://xmlhttprequest.ru/w3c\r\n\t\tswitch ( req.readyState ) {\r\n\t\t\tcase 4://request finished and response is ready\r\n\t\t\t\t{\r\n\t\t\t\t\tif ( typeof req.status == \"unknown\" ) {//IE5 timeout\r\n\t\t\t\t\t\tconsoleError( 'typeof XMLHttpRequest status == \"unknown\"' );\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//    switch   \r\n\t\t\t\t\tif ( req.status == 200 )//OK)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tclearTimeout( this.timeout_id_SendReq );\r\n\t\t\t\t\t\treturn processStatus200( this );\r\n\t\t\t\t\t}//200://OK\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tErrorMessage( \"Invalid XMLHttpRequest status : \" + req.status + \" url: \" + this.url );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1://server connection established\r\n\t\t\tcase 2://request received\r\n\t\t\tcase 3://processing request\r\n\t\t\t\tbreak;\r\n\t\t\t//\t\tcase 404:\r\n\t\t\tcase 0://request not initialized\r\n\t\t\tdefault:\r\n\t\t\t\tthrow \"processReqChange(); req.readyState = \" + req.readyState;\r\n\t\t\t\tbreak;\r\n\t\t}//switch(req.readyState)\r\n\t\treturn true;\r\n\t}\r\n\r\n\tthis.processStatus200Error = function () {\r\n\t\tvar error = this.GetElementText( 'error', true );\r\n\t\tif ( error ) {\r\n\t\t\tErrorMessage( error );\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tthis.GetElementText = function ( tagName, noDisplayErrorMessage ) {\r\n\t\tvar xmlhttp = this.req;\r\n\t\tif ( !xmlhttp.responseXML ) {\r\n\t\t\tif ( noDisplayErrorMessage != true )\r\n\t\t\t\tErrorMessage( 'GetXMLElementText(xmlhttp, ' + tagName + '); xmlhttp.responseXML is null.\\nxmlhttp.responseText:\\n' + xmlhttp.responseText );\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar element = xmlhttp.responseXML.getElementsByTagName( tagName );\r\n\r\n\t\t//ATTENTION!!! For IE set the content-type m_HttpResponse.SetContentType(\"text/xml\");\r\n\r\n\t\tif ( element.length == 0 ) {\r\n\t\t\tif ( noDisplayErrorMessage != true )\r\n\t\t\t\tErrorMessage( 'GetXMLElementText(xmlhttp, \"' + tagName + '\"); element.length == ' + element.length );\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t\tvar text = \"\";\r\n\t\tfor ( var i = 0; i < element.length; i++ ) {\r\n\t\t\tif ( typeof ( element[i].textContent ) == 'undefined' ) {\r\n\t\t\t\tif ( typeof ( element[i].text ) == 'undefined' ) {\r\n\t\t\t\t\tErrorMessage( 'GetXMLElementText(xmlhttp, ' + tagName + '); element[' + i + '].text) == undefined' );\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t}\r\n\t\t\t\tif ( text != \"\" )\r\n\t\t\t\t\ttext += \" \";\r\n\t\t\t\ttext += element[i].text;//IE\r\n\t\t\t}\r\n\t\t\telse text += element[i].textContent;//Chrome\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\tif ( options.data ) {\r\n\t\tthis.req = options.data.req;\r\n\t\tthis.url = options.data.url;\r\n\t\tthis.params = options.data.params;\r\n\t} else {\r\n\t\ttry {\r\n\t\t\tthis.req = this.loadXMLDoc();\r\n\t\t} catch ( e ) {\r\n\t\t\tvar message;\r\n\t\t\tif ( typeof e.message == 'undefined' )\r\n\t\t\t\tmessage = e;\r\n\t\t\telse message = e.message;\r\n\t\t\tErrorMessage( \"Your browser is too old and is not compatible with our site.\\n\\n\"\r\n\t\t\t\t+ window.navigator.appName + \" \" + window.navigator.appVersion + \"\\n\\n\" + message );\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\tif ( !this.req ) {\r\n\t\tconsoleError( \"Invalid myRequest.req: \" + this.req );\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction ErrorMessage( error ) {\r\n\r\n\t\tconsole.error( error );\r\n\t\toptions.onerror( error );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * @callback onerror\r\n * @param {string} str - error details\r\n */\r\n\r\n/**\r\n * Synchronous load file\r\n * @param {string} url URL of an external file.\r\n * @param {Object} [options] the following options are available.\r\n * @param {Function} [options.onload] function () The onload event occurs when a script has been loaded. Optional.\r\n * @param {onerror} [options.onerror] function ( str ) The onerror event occurs when an error has been occured. Optional.\r\n * @returns {string} file content\r\n * @example\r\n * \r\n\t//Simplest example.\r\n\tdocument.getElementById( \"elID\" ).innerHTML = loadFile.sync('element.html');\r\n *\r\n * @example\r\n *\r\n\t//onload, onerror events.\r\n\tdocument.getElementById( \"elID\").innerHTML = loadFile.sync( 'element.html',\r\n\t{\r\n\t\tonload: function ( response ) {\r\n\r\n\t\t\tvar str = 'file has been loaded successfully';\r\n\t\t\tconsole.log( str );\r\n\r\n\t\t},\r\n\t\tonerror: function ( str, e ) {\r\n\r\n\t\t\tconsole.error( str );\r\n\r\n\t\t},\r\n\t}, );\r\n */\r\nfunction sync( url, options ) {\r\n\r\n\toptions = options || {};\r\n\toptions.onload = options.onload || function () { };\r\n\toptions.onerror = options.onerror || function () { };\r\n\r\n\tvar response,\r\n\t\trequest = new myRequest( options );\r\n\trequest.url = url;\r\n\trequest.XMLHttpRequestStart(\r\n\r\n\t\tfunction () {//onreadystatechange\r\n\r\n\t\t\trequest.ProcessReqChange( function ( myRequest ) {//processStatus200\r\n\r\n\t\t\t\tif ( myRequest.processStatus200Error() )\r\n\t\t\t\t\treturn;\r\n\t\t\t\tresponse = myRequest.req.responseText;\r\n\t\t\t\t//console.log( 'loadFile.sync.onload() ' + url );\r\n\t\t\t\toptions.onload( response, url );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\t\t, false//Synchronous mode\r\n\r\n\t);\r\n\t//console.log( 'sync(' + url + ')' );\r\n\treturn response;\r\n\r\n}\r\n\r\n/**\r\n * display a text to HTML\r\n * @param {string} str source text\r\n * @returns {string} escaped text\r\n */\r\nfunction escapeHtml( str ) {\r\n\r\n\treturn str.replace( /[&<>\"'\\/]/g, function ( s ) {\r\n\r\n\t\tvar entityMap = {\r\n\r\n\t\t\t\"&\": \"&amp;\",\r\n\t\t\t\"<\": \"&lt;\",\r\n\t\t\t\">\": \"&gt;\",\r\n\t\t\t'\"': '&quot;',\r\n\t\t\t\"'\": '&#39;',\r\n\t\t\t\"/\": '&#x2F;'\r\n\r\n\t\t};\r\n\r\n\t\treturn entityMap[s];\r\n\r\n\t} );\r\n}\r\n\r\nexport { sync, escapeHtml };\r\n","/**\r\n * node.js version of the load JavaScript file\r\n * @author Andrej Hristoliubov https://anhr.github.io/AboutMe/\r\n *\r\n * Thanks to:\r\n *http://javascript.ru/forum/events/21439-dinamicheskaya-zagruzka-skriptov.html\r\n *https://learn.javascript.ru/onload-onerror\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\n//Please download https://github.com/anhr/loadFileNodeJS into ../loadFileNodeJS folder\r\nimport { sync as loadFileSync, escapeHtml } from '../loadFileNodeJS/index.js';\r\n\r\n/**\r\n * @callback onerror\r\n * @param {string} str - error details\r\n */\r\n\r\n/**\r\n * Synchronous load JavaScript file\r\n * @param {string} src URL of an external script file.\r\n * @param {Object} [options] the following options are available.\r\n * @param {Function} [options.onload] function () The onload event occurs when a script has been loaded. Optional.\r\n * @param {onerror} [options.onerror] function ( str ) The onerror event occurs when an error has been occured. Optional.\r\n * @param {string}[options.appendTo] The node to which the new script will be append. Optional. Default is head node\r\n * @param {Object|string}[options.tag] The script's tag attributes (Object) or tag type (string). Optional.\r\n * Available tag types:\r\n *\t'style' - load a style file (.css extension)\r\n * @param {string} [options.tag.name] tag name. Default is 'script'\r\n * @param {Object} [options.tag.attribute] tag attribute. Optional.\r\n * @param {string} options.tag.attribute.name attribute name. Default is 'type'\r\n * @param {string} options.tag.attribute.value attribute value. Default is 'text/javascript'\r\n *\r\n * @example\r\n * \r\n\t//Simplest example. Append script into head node.\r\n\tloadScript.sync( 'sync.js' );\r\n\r\n * @example\r\n * \r\n\t//onload, onerror events. Append script into \"appendto\" element\r\n\tloadScript.sync( 'sync.js',\r\n\t\t{\r\n\t\t\tonload: function ( response ) {\r\n\r\n\t\t\t\tvar str = 'file has been loaded successfully';\r\n\t\t\t\tconsole.log( str );\r\n\r\n\t\t\t},\r\n\t\t\tonerror: function ( str, e ) {\r\n\r\n\t\t\t\telSync2Res.style.color = 'red';\r\n\r\n\t\t\t},\r\n\t\t\tappendTo: document.getElementById( \"appendto\" ),\r\n\t\t},\r\n\t);\r\n *\r\n * @example\r\n *\r\n\t//Append style into head node.\r\n\tloadScript.sync( \"controls.css\",\r\n\t{\r\n\t\t//style rel=\"stylesheet\"\r\n\t\ttag: {\r\n\r\n\t\t\tname: 'style',\r\n\t\t\tattribute: {\r\n\r\n\t\t\t\tname: 'rel',\r\n\t\t\t\tvalue: 'stylesheet',\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n */\r\nfunction sync( src, options ) {\r\n\r\n\toptions = options || {};\r\n\toptions.onload = options.onload || function () { };\r\n\toptions.onerror = options.onerror || function () { };\r\n\toptions.appendTo = options.appendTo || document.getElementsByTagName( 'head' )[0];\r\n\r\n\tif ( isScriptExists( options.appendTo, src ) ) {\r\n\r\n\t\t//options.onerror( 'duplicate downloading of the ' + src + ' file' );\r\n\t\toptions.onload();\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tif ( src instanceof Array ) {\r\n\r\n\t\tvar error,\r\n\t\t\toptionsItem = {\r\n\r\n\t\t\t\tappendTo: options.appendTo,\r\n\t\t\t\ttag: options.tag,\r\n\t\t\t\tonload: function ( response, url ) {\r\n\t\t\t\t\r\n\t\t\t\t\tconsole.log( 'loadScript.sync.onload: ' + url );\r\n\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tonerror: function ( str ) {\r\n\r\n\t\t\t\t\toptions.onerror( str );\r\n\t\t\t\t\terror = str;\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t};\r\n\t\tfor ( var i = 0; i < src.length; i++ ) {\r\n\r\n\t\t\tvar item = src[ i ];\r\n\t\t\tloadScriptBase( function ( script ) {\r\n\r\n\t\t\t\tscript.setAttribute( \"id\", item );\r\n\t\t\t\tscript.innerHTML = loadFileSync( item, optionsItem );\r\n\r\n\t\t\t}, optionsItem );\r\n\t\t\tif ( error !== undefined )\r\n\t\t\t\tbreak;\r\n\r\n\t\t};\r\n\t\tif ( error === undefined )\r\n\t\t\toptions.onload();\r\n\r\n\t} else loadScriptBase( function ( script ) {\r\n\r\n\t\tscript.setAttribute( \"id\", src );\r\n\t\tscript.innerHTML = loadFileSync( src, options );\r\n\r\n\t}, options );\r\n\r\n}\r\n\r\n/**\r\n * @callback onerrorasync\r\n * @param {string} str - error details\r\n * @param {Object} e - event\r\n */\r\n\r\n/**\r\n * Asynchronous load JavaScript file\r\n * @param {string|string[]} src URL of an external script file or array of the script file names.\r\n * @param {Object} [options] the following options are available.\r\n * @param {Function} [options.onload] function () The onload event occurs when a script has been loaded. Optional.\r\n * @param {onerrorasync} [options.onerror] function ( str, e ) The onerror event occurs when an error has been occured. Optional.\r\n * @param {string}[options.appendTo] The node to which the new script will be append. Optional. Default is head node\r\n * @param {Object}[options.tag] The script's tag attributes. Optional.\r\n * @param {string} options.tag.name tag name. Default is 'script'\r\n * @param {Object} [options.tag.attribute] tag attribute. Optional.\r\n * @param {string} options.tag.attribute.name attribute name. Default is 'type'\r\n * @param {string} options.tag.attribute.value attribute value. Default is 'text/javascript'\r\n*\r\n * @example\r\n * \r\n\t//Simplest example. Append script into head node.\r\n\tloadScript.async( \"JavaScript.js);\r\n * \r\n * @example\r\n *\r\n\t//onload, onerror events. Append script into \"appendto\" element\r\n\tloadScript.async( \"JavaScript.js\",\r\n\t{\r\n \t\tonload: function () {\r\n \r\n \t\t\tvar str = 'file has been loaded successfully';\r\n \t\t\tconsole.log( str );\r\n \r\n \t\t},\r\n \t\tonerror: function ( str, e ) {\r\n \r\n \t\t\tconsole.error( str );\r\n \r\n \t\t},\r\n \t\tappendTo: document.getElementById( \"appendto\" ),\r\n \r\n \t}\r\n \r\n  );\r\n *\r\n * @example\r\n *\r\n\t//loading of array of JavaScript files. Append script into head node.\r\n\tloadScript.async( [\r\n \t\t\"JavaScript1.js\",\r\n \t\t\"JavaScript2.js\",\r\n \t],\r\n \t{\r\n \t\tonload: function () {\r\n \r\n \t\t\tvar str = 'file has been loaded successfully';\r\n \t\t\tconsole.log( str );\r\n \r\n \t\t},\r\n \t\tonerror: function ( str, e ) {\r\n \r\n \t\t\tconsole.error( str );\r\n \r\n \t\t},\r\n \r\n \t}\r\n \r\n  );\r\n */\r\nfunction async( src, options ) {\r\n\r\n\toptions = options || {};\r\n\toptions.appendTo = options.appendTo || document.getElementsByTagName( 'head' )[ 0 ];\r\n\toptions.onload = options.onload || function () {};\r\n\r\n\tvar isrc;\r\n\r\n\tfunction async( srcAsync ) {\r\n\r\n\t\tfunction next() {\r\n\r\n\t\t\tif ( src instanceof Array && ( isrc < ( src.length - 1 ) ) ) {\r\n\r\n\t\t\t\tisrc++;\r\n\t\t\t\tasync( src[isrc] );\r\n\r\n\t\t\t} else options.onload();\r\n\r\n\t\t}\r\n\r\n\t\tif ( isScriptExists( options.appendTo, srcAsync, options.onload ) ) {\r\n\r\n\t\t\tnext();\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tloadScriptBase( function ( script ) {\r\n\r\n\t\t\tscript.setAttribute( \"id\", srcAsync );\r\n\r\n\t\t\tfunction _onload() {\r\n\r\n\t\t\t\tconsole.log( 'loadScript.async.onload() ' + srcAsync );\r\n\t\t\t\tif ( options.onload !== undefined ) {\r\n\r\n\t\t\t\t\tnext();\r\n/*\r\n\t\t\t\t\tif ( src instanceof Array && ( isrc < ( src.length - 1 ) ) ) {\r\n\r\n\t\t\t\t\t\tisrc++;\r\n\t\t\t\t\t\tasync( src[isrc] );\r\n\r\n\t\t\t\t\t} else options.onload();\r\n*/\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( script.readyState && ! script.onload ) {\r\n\r\n\t\t\t\t// IE, Opera\r\n\t\t\t\tscript.onreadystatechange = function () {\r\n\r\n\t\t\t\t\tif ( script.readyState == \"complete\" ) {\r\n\r\n\t\t\t\t\t\t//    loaded\r\n\t\t\t\t\t\tif ( options.onload !== undefined ) options.onload(); // (2)\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( script.readyState == \"loaded\" ) {\r\n\r\n\t\t\t\t\t\tsetTimeout( options.onload, 0 ); // (1)\r\n\r\n\t\t\t\t\t\t//  ,     complete\r\n\t\t\t\t\t\tthis.onreadystatechange = null;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Rest\r\n\t\t\t\tscript.onload = _onload;\r\n\r\n\t\t\t\tscript.onerror = function ( e ) {\r\n\r\n\t\t\t\t\tvar str = 'loadScript: \"' + this.src + '\" failed';\r\n\t\t\t\t\tif ( options.onerror !== undefined )\r\n\t\t\t\t\t\toptions.onerror( str, e );\r\n\t\t\t\t\tconsole.error( str );\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscript.src = srcAsync;\r\n\r\n\t\t}, options );\r\n\r\n\t}\r\n\r\n\tif ( src instanceof Array ) {\r\n\r\n\t\tisrc = 0;\r\n\t\tasync( src[ isrc ] );\r\n\r\n\t} else async( src );\r\n\r\n}\r\n\r\nfunction loadScriptBase( callback, options ) {\r\n\r\n\toptions.tag = options.tag || {};\r\n\tif ( typeof options.tag === \"string\" ) {\r\n\r\n\t\tswitch ( options.tag ) {\r\n\r\n\t\t\tcase 'style':\r\n\t\t\t\toptions.tag = {\r\n\r\n\t\t\t\t\tname: 'style',\r\n\t\t\t\t\tattribute: {\r\n\r\n\t\t\t\t\t\tname: 'rel',\r\n\t\t\t\t\t\tvalue: 'stylesheet',\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: console.error( 'Invalid options.tag: ' + options.tag );\r\n\t\t\t\treturn;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\toptions.tag.name = options.tag.name || 'script';\r\n\tvar script = document.createElement( options.tag.name );\r\n\r\n\toptions.tag.attribute = options.tag.attribute || {};\r\n\toptions.tag.attribute.name = options.tag.attribute.name || \"type\";\r\n\toptions.tag.attribute.value = options.tag.attribute.value || 'text/javascript';\r\n\tscript.setAttribute( options.tag.attribute.name, options.tag.attribute.value );\r\n\r\n\tcallback( script );\r\n\toptions.appendTo.appendChild( script );\r\n\r\n}\r\n\r\nfunction isScriptExists( elParent, srcAsync, onload ) {\r\n\r\n\tvar scripts = elParent.querySelectorAll( 'script' );\r\n\tfor ( var i = 0; i < scripts.length; i++ ) {\r\n\r\n\t\tvar child = scripts[i];\r\n\t\tif ( child.id === srcAsync ) {\r\n\r\n/*\r\n\t\t\tif ( onload !== undefined )\r\n\t\t\t\tonload();\r\n*/\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\treturn false;\r\n\r\n}\r\n\r\nexport { async, sync, escapeHtml };\r\n","/**\r\n * node.js version of download of the scripts.\r\n * \r\n * @author Andrej Hristoliubov https://anhr.github.io/AboutMe/\r\n *\r\n * Copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\nimport { sync, async } from './index.js';\r\n\r\nvar loadScript = {\r\n\r\n\tsync: sync,\r\n\tasync: async,\r\n\r\n}\r\nexport default loadScript;\r\n","/**\r\n * @module ColorPicker\r\n * @description Pure JavaScript color picker.\r\n * @author Andrej Hristoliubov https://anhr.github.io/AboutMe/\r\n *\r\n * Thanks to https://github.com/DavidDurman/FlexiColorPicker\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n */\r\n\r\n\r\nimport loadScript from '../loadScriptNodeJS/loadScript.js';\r\n//import loadScript from 'https://raw.githack.com/anhr/commonNodeJS/master/loadScriptNodeJS/loadScript.js';\r\n//import loadScript from 'http://localhost/anhr/commonNodeJS/master/loadScriptNodeJS/loadScript.js';\r\n\r\nimport three from '../three.js'\r\n\r\nconst optionsStyle = {\r\n\r\n\t//style rel=\"stylesheet\"\r\n\ttag: 'style'\r\n\r\n}\r\n\r\n//Thanks to https://stackoverflow.com/a/27369985/5175935\r\n//     frustumPoints.js           frustumPoints.js\r\nconst getCurrentScript = function () {\r\n\r\n\tif ( document.currentScript && ( document.currentScript.src !== '' ) )\r\n\t\treturn document.currentScript.src;\r\n\tconst scripts = document.getElementsByTagName( 'script' ),\r\n\t\tstr = scripts[scripts.length - 1].src;\r\n\tif ( str !== '' )\r\n\t\treturn src;\r\n\t//Thanks to https://stackoverflow.com/a/42594856/5175935\r\n\treturn new Error().stack.match( /(https?:[^:]*)/ )[0];\r\n\r\n};\r\n//Thanks to https://stackoverflow.com/a/27369985/5175935\r\nconst getCurrentScriptPath = function () {\r\n\tconst script = getCurrentScript(),\r\n\t\tpath = script.substring( 0, script.lastIndexOf( '/' ) );\r\n\treturn path;\r\n};\r\n//console.warn( 'getCurrentScriptPath = ' + getCurrentScriptPath() );\r\nconst currentScriptPath = getCurrentScriptPath();\r\n\r\n//loadScript.sync( 'https://raw.githack.com/anhr/commonNodeJS/master/colorpicker/colorpicker.css', optionsStyle );\r\nloadScript.sync( currentScriptPath + '/colorpicker.css', optionsStyle );\r\n\r\nconst type = ( window.SVGAngle || document.implementation.hasFeature( \"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\" ) ? \"SVG\" : \"VML\" ),\r\n\tsvgNS = 'http://www.w3.org/2000/svg';\r\nvar uniqID = 0;\r\n\r\nclass ColorPicker {\r\n\r\n\t/**Pure JavaScript color picker.\r\n\t * @class\r\n\t * @see [FlexiColorPicker]{@link https://github.com/DavidDurman/FlexiColorPicker}\r\n\t * */\r\n\tconstructor() {\r\n\r\n\t\tconst _this = this;\r\n\t\t/**\r\n\t\t * enumeration of available palettes.\r\n\t\t * @readonly\r\n\t\t * @enum {number}\r\n\t\t */\r\n\t\tthis.paletteIndexes = {\r\n\r\n\t\t\t/** <a href=\"../Example/index.html#BGRW\" target=\"_blank\">blue, green, red, white</a> palette. This is the default palette*/\r\n\t\t\tBGRW: 0,\r\n\t\t\t/** <a href=\"../Example/index.html#Monochrome\" target=\"_blank\">monochrome</a> palette */\r\n\t\t\tmonochrome: 1,\r\n\t\t\t/** <a href=\"../Example/index.html#Bidirectional\" target=\"_blank\">red, black, green</a> palette */\r\n\t\t\tbidirectional: 2,//\r\n\t\t\t/** <a href=\"../Example/index.html#rainbow\" target=\"_blank\">rainbow</a> palette */\r\n\t\t\trainbow: 3,\r\n\r\n\t\t}\r\n\r\n\t\tfunction CreateSVGElement( el, attrs, children ) {\r\n\r\n\t\t\tel = document.createElementNS( svgNS, el );\r\n\t\t\tfor ( var key in attrs )\r\n\t\t\t\tel.setAttribute( key, attrs[key] );\r\n\t\t\tif ( Object.prototype.toString.call( children ) != '[object Array]' ) children = [children];\r\n\t\t\tvar i = 0, len = ( children[0] && children.length ) || 0;\r\n\t\t\tfor ( ; i < len; i++ )\r\n\t\t\t\tel.appendChild( children[i] );\r\n\t\t\treturn el;\r\n\t\t}\r\n\r\n\t\tvar boCreated = false;\r\n\t\t/**\r\n\t\t * @callback callback\r\n\t\t * @description Called whenever the color is changed provided chosen color in RGB HEX format. See options.sliderIndicator.callback param of the create method.\r\n\t\t * @param {object} c color\r\n\t\t * @param {string} c.hex A hexadecimal color is specified with: #RRGGBB, where the RR (red), GG (green) and BB (blue)\r\n\t\t * <pre>\r\n\t\t * hexadecimal integers specify the components of the color. All values must be between 00 and FF.\r\n\t\t * Example #00ff00\r\n\t\t * </pre>\r\n\t\t * @param {number} c.r red of RGB color value. Must be between 0 and 255.\r\n\t\t * @param {number} c.g green of RGB color value. Must be between 0 and 255.\r\n\t\t * @param {number} c.b blue of RGB color value. Must be between 0 and 255.\r\n\t\t * @param {number} percent position of the mouse pointer in the percents. See details in options.direction param\r\n\t\t */\r\n\r\n\t\t/**\r\n\t\t * @callback onError\r\n\t\t * @param {string} message error message\r\n\t\t */\r\n\r\n\t\t/**\r\n\t\t * creates an instance of ColorPicker\r\n\t\t * @param {string|HTMLElement} elSliderWrapper id of the ColorPicker element or ColorPicker element\r\n\t\t * @param {object} [options] followed options is availablee\r\n\t\t * @param {paletteIndexes|object[]|Palette} [options.palette] Palette index or palette array or Palette. The following indexes are available:\r\n\t\t * <pre>\r\n\t\t * paletteIndexes.BGRW: 0 - blue, green, red, white palette.\r\n\t\t * paletteIndexes.monochrome: 1,\r\n\t\t * paletteIndexes.bidirectional: 2,//red, black, green\r\n\t\t * paletteIndexes.rainbow: 3,\r\n\t\t * Default is paletteIndexes.BGRW index.\r\n\t\t * Example of palette array:\r\n\t\t[\r\n\t\t\t{ percent: 0, r: 0, g: 0, b: 0, },\r\n\t\t\t{ percent: 10, r: 0xff, g: 255, b: 0xff, },\r\n\t\t\t{ percent: 100, r: 0xff, g: 255, b: 0xff, },\r\n\t\t]\r\n\t\t * Palette see function Palette( options ) for details\r\n\t\t * </pre>\r\n\t\t * @param {object} [options.orientation] orientation of the element. Available \"horizontal\" or \"vertical\" orientation\r\n\t\t * @param {object} [options.direction] true - position of the mouse pointer relative left side for 'horizontal' slider\r\n\t\t * or bottom side for 'vertical' slider in the percents.\r\n\t\t * <p>\r\n\t\t * false - position of the mouse pointer relative right side for 'horizontal' slider\r\n\t\t * or relative top side for 'vertical' slider in the percents.\r\n\t\t * </p>\r\n\t\t * Default is true.\r\n\t\t * @param {object} [options.style] style statements\r\n\t\t * @param {object} [options.style.width] width of the element. Default is 200px for options.orientation = \"horizontal\"\r\n\t\t * and 30px for options.orientation = \"vertical\".\r\n\t\t * @param {object} [options.style.height] height of the element. Default is 30px for options.orientation = \"horizontal\"\r\n\t\t * and 200px for options.orientation = \"vertical\".\r\n\t\t * @param {string} [options.style.border] elSliderWrapper border. Example: '1px solid black'\r\n\t\t * @param {object} [options.sliderIndicator] adds a slider-indicator element for choose by mouse a color from palette.\r\n\t\t * Default is undefuned\r\n\t\t * @param {callback} [options.sliderIndicator.callback] Called whenever the color is changed provided chosen color in RGB HEX format.\r\n\t\t * @param {number} [options.sliderIndicator.value] Initial position of the slider indicator in percent. Default is 0.\r\n\t\t * @param {onError} [options.onError] Called whenever an error has occurred.\r\n\t\t * @param {boolean} [options.duplicate] true - allow to create two or more palettes on your web page.\r\n\t\t */\r\n\t\tthis.create = function( elSliderWrapper, options ) {\r\n\r\n\t\t\toptions = options || {};\r\n\t\t\toptions.orientation = options.orientation || 'horizontal';\r\n\r\n\t\t\tfunction isHorizontal() { return options.orientation === \"horizontal\"; }\r\n\r\n\t\t\tif ( options.direction === undefined )\r\n\t\t\t\toptions.direction = true;\r\n\t\t\toptions.style = options.style || {};\r\n\t\t\t//\t\toptions.style.width = options.style.width || ( isHorizontal() ? '200px' : '30px' );\r\n\t\t\toptions.style.width = options.style.width || ( isHorizontal() ? 200 : 30 );\r\n\t\t\toptions.style.height = options.style.height || ( isHorizontal() ? 30 : 200 );\r\n\r\n\t\t\toptions.onError = options.onError || function () { }\r\n\r\n\t\t\tif ( elSliderWrapper instanceof HTMLElement !== true ) {\r\n\r\n\t\t\t\tif ( typeof elSliderWrapper !== \"string\" ) {\r\n\r\n\t\t\t\t\tconsole.error( 'ColorPicker.create: invalid elSliderWrapper = ' + elSliderWrapper );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\t\t\t\telSliderWrapper = document.getElementById( elSliderWrapper );\r\n\t\t\t\tif ( elSliderWrapper === null ) {\r\n\r\n\t\t\t\t\tconsole.error( 'ColorPicker.create: invalid elSliderWrapper = ' + elSliderWrapper );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\telSliderWrapper.classList.add( 'slider-wrapper' );\r\n\t\t\tfor ( var style in options.style ) {\r\n\r\n\t\t\t\telSliderWrapper.style[style] = options.style[style];\r\n\r\n\t\t\t}\r\n\r\n//\t\t\tconst palette = options.palette instanceof Palette ? options.palette : new Palette( options );\r\n\t\t\tconst palette = options.palette instanceof this.palette ? options.palette : new this.palette( options );\r\n\t\t\tvar slide;\r\n\t\t\tfunction getSlideHeight() {\r\n\r\n\t\t\t\tif ( typeof options.style.height === \"string\" )\r\n\t\t\t\t\treturn parseInt( options.style.height );\r\n\t\t\t\treturn options.style.height;\r\n\r\n\t\t\t}\r\n\t\t\tfunction getSlideWidth() { return slide.clientWidth; }\r\n\t\t\t/**\r\n\t\t\t * sets color from palette\r\n\t\t\t * @param {number} value coordinate of color from palette in percent\r\n\t\t\t * @param {number} position coordinate of color from palette\r\n\t\t\t */\r\n\t\t\tfunction setValue( value, position ) {\r\n\r\n\t\t\t\tif ( slideIndicator === undefined ) {\r\n\r\n\t\t\t\t\tconsole.error( 'Set value of this instance of the ColorPicker is impossible because options.sliderIndicator is not defined.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tconst c = palette.hsv2rgb( value );\r\n\t\t\t\tif ( c === undefined ) {\r\n\r\n\t\t\t\t\tconsole.error( 'ColorPicker.setValue: invalud c = ' + c );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvalue = c.percent;\r\n\t\t\t\tif ( position === undefined )\r\n\t\t\t\t\tposition = isHorizontal() ?\r\n\t\t\t\t\t\t( getSlideWidth() * value ) / 100 :\r\n\t\t\t\t\t\tgetSlideHeight() - ( getSlideHeight() * ( options.direction ? value : 100 - value ) ) / 100;\r\n\t\t\t\tpositionIndicators( position );\r\n\t\t\t\tif ( options.sliderIndicator.callback !== undefined ) {\r\n\r\n\t\t\t\t\t//console.warn( 'callback: ' + c.percent + ' percent c.hex = ' + c.hex );\r\n\t\t\t\t\toptions.sliderIndicator.callback( c );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar slideIndicator;\r\n\t\t\tif ( options.sliderIndicator !== undefined ) {\r\n\r\n\t\t\t\tslideIndicator = document.createElement( 'div' );\r\n\t\t\t\tslideIndicator.className = 'slider-indicator';\r\n\t\t\t\tif ( isHorizontal() )\r\n\t\t\t\t\tslideIndicator.style.width = '10px';\r\n\t\t\t\telse slideIndicator.style.height = '10px';\r\n\t\t\t\telSliderWrapper.appendChild( slideIndicator );\r\n\t\t\t\tslideIndicator.style.pointerEvents = 'none';\r\n\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Helper to position indicators.\r\n\t\t\t * @param {number} position Coordinates of the mouse cursor in the slide area.\r\n\t\t\t */\r\n\t\t\tfunction positionIndicators( position ) {\r\n\r\n\t\t\t\tif ( slideIndicator === undefined )\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif ( isHorizontal() ) {\r\n\r\n\t\t\t\t\tif ( ( position < 0 ) || ( position > getSlideWidth() ) ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'ColorPicker.positionIndicators: Invalid position = ' + position );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tslideIndicator.style.top = '0px';\r\n\t\t\t\t\tslideIndicator.style.left = ( ( options.direction ? position : getSlideWidth() - position ) - slideIndicator.offsetWidth / 2 ) + 'px';\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( ( position < 0 ) || ( position > getSlideHeight() ) ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'ColorPicker.positionIndicators: Invalid position = ' + position );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tslideIndicator.style.left = '0px';\r\n\t\t\t\t\tslideIndicator.style.top = ( position - slideIndicator.offsetHeight / 2 ) + 'px';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t\tif ( type == 'SVG' ) {\r\n\r\n\t\t\t\ttry {\r\n\r\n\t\t\t\t\tconst linearGradient = 'linearGradient';\r\n\t\t\t\t\tslide = CreateSVGElement( 'svg', {\r\n\t\t\t\t\t\txmlns: 'http://www.w3.org/2000/svg',\r\n\t\t\t\t\t\tversion: '1.1',\r\n\t\t\t\t\t\twidth: isHorizontal() ? '100%' : options.style.width,\r\n\t\t\t\t\t\theight: options.style.height,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\tCreateSVGElement( 'defs', {},\r\n\t\t\t\t\t\t\t\tCreateSVGElement( linearGradient, {\r\n\r\n\t\t\t\t\t\t\t\t\tid: 'gradient-hsv-' + uniqID,\r\n\t\t\t\t\t\t\t\t\tx1: isHorizontal() && options.direction ? '100%' : '0%',\r\n\t\t\t\t\t\t\t\t\ty1: !isHorizontal() && !options.direction ? '100%' : '0%',\r\n\t\t\t\t\t\t\t\t\tx2: isHorizontal() && !options.direction ? '100%' : '0%',\r\n\t\t\t\t\t\t\t\t\ty2: !isHorizontal() && options.direction ? '100%' : '0%',\r\n\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tpalette.getPalette()\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tCreateSVGElement( 'rect', { x: '0', y: '0', width: '100%', height: '100%', fill: 'url(#gradient-hsv-' + uniqID + ')' } )\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif ( slideIndicator !== undefined ) {\r\n\r\n\t\t\t\t\t\tslide.style.cursor = isHorizontal() ? 'e-resize' : 's-resize';\r\n\t\t\t\t\t\tslideIndicator.style.cursor = slide.style.cursor;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\t\t//I can not get \r\n\t\t\t\t\t// slide.querySelector( linearGradient );\r\n\t\t\t\t\t//in Safari 5.1.7 browser for Windows\r\n\t\t\t\t\t//Instead I see the error message:\r\n\t\t\t\t\t// 'null' is not an object( evaluating 'hsvGradient.id = 'gradient - hsv - ' + uniqID' )\r\n\t\t\t\t\tconsole.error( 'Create SVG element failed! ' + e.message );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\telSliderWrapper.appendChild( slide );\r\n\t\t\t\telSliderWrapper.style.height = getSlideHeight() + 'px';\r\n\r\n\t\t\t\tif ( slideIndicator !== undefined ) {\r\n\r\n\t\t\t\t\tif ( isHorizontal() )\r\n\t\t\t\t\t\tslideIndicator.style.height = ( parseInt( options.style.height ) - 2 ) + 'px';\r\n\t\t\t\t\telse slideIndicator.style.width = ( parseInt( options.style.width ) - 2 ) + 'px';\r\n\r\n\t\t\t\t\toptions.sliderIndicator.value = options.sliderIndicator.value || 0;\r\n\t\t\t\t\tsetValue( options.sliderIndicator.value );\r\n\r\n\t\t\t\t}\r\n\t\t\t\tuniqID++;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( 'Under constraction' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction mouseMove( mouse ) {\r\n\r\n\t\t\t\t//for IE\r\n\t\t\t\tmouse.x = parseInt( mouse.x );\r\n\t\t\t\tmouse.y = parseInt( mouse.y );\r\n\r\n\t\t\t\tvar position, size, value;\r\n\t\t\t\tif ( isHorizontal() ) {\r\n\r\n\t\t\t\t\tposition = mouse.x;\r\n\t\t\t\t\tsize = getSlideWidth() - 1;\r\n\r\n\t\t\t\t\tif ( position >= getSlideWidth() )\r\n\t\t\t\t\t\tposition = size;\r\n\t\t\t\t\tvalue = ( position * 100 ) / size;\r\n\t\t\t\t\tif ( !options.direction ) {\r\n\r\n\t\t\t\t\t\tvalue = 100 - value;\r\n\t\t\t\t\t\tposition = size - position;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tposition = mouse.y;\r\n\t\t\t\t\tsize = getSlideHeight() - 1;\r\n\r\n\t\t\t\t\tif ( position >= getSlideHeight() )\r\n\t\t\t\t\t\tposition = size;\r\n\t\t\t\t\tvalue = ( 1 - position / size ) * 100;\r\n\t\t\t\t\tif ( !options.direction ) {\r\n\r\n\t\t\t\t\t\tvalue = 100 - value;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tsetValue( value, position );\r\n\r\n\t\t\t}\r\n\t\t\tif ( slideIndicator !== undefined ) {\r\n\r\n\t\t\t\tvar mouseout = false;\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Return click event handler for the slider.\r\n\t\t\t\t * Sets picker background color and calls options.sliderIndicator.callback if provided.\r\n\t\t\t\t */\r\n\t\t\t\tfunction slideListener() {\r\n\r\n\t\t\t\t\treturn function ( evt ) {\r\n\r\n\t\t\t\t\t\tif ( mouseout )\r\n\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\tevt = evt || window.event;\r\n\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * Return mouse position relative to the element el.\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tfunction mousePosition( evt ) {\r\n\t\t\t\t\t\t\t// IE:\r\n\t\t\t\t\t\t\tif ( window.event && window.event.contentOverflow !== undefined ) {\r\n\t\t\t\t\t\t\t\treturn { x: window.event.offsetX, y: window.event.offsetY };\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// Webkit:\r\n\t\t\t\t\t\t\tif ( evt.offsetX !== undefined && evt.offsetY !== undefined ) {\r\n\t\t\t\t\t\t\t\treturn { x: evt.offsetX, y: evt.offsetY };\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// Firefox:\r\n\t\t\t\t\t\t\tvar wrapper = evt.target.parentNode.parentNode;\r\n\t\t\t\t\t\t\treturn { x: evt.layerX - wrapper.offsetLeft, y: evt.layerY - wrapper.offsetTop };\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tmouseMove( mousePosition( evt ) );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction addEventListener( element, event, listener ) {\r\n\r\n\t\t\t\t\tif ( element === null )\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tif ( element.attachEvent ) {\r\n\r\n\t\t\t\t\t\telement.attachEvent( 'on' + event, listener );\r\n\r\n\t\t\t\t\t} else if ( element.addEventListener ) {\r\n\r\n\t\t\t\t\t\telement.addEventListener( event, listener, false );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\taddEventListener( slide, 'click', slideListener() );\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * @callback listener\r\n\t\t\t\t*/\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Enable drag&drop color selection.\r\n\t\t\t\t * @param {object} ctx ColorPicker instance.\r\n\t\t\t\t * @param {listener} listener Function that will be called whenever mouse is dragged over the element with event object as argument.\r\n\t\t\t\t */\r\n\t\t\t\tfunction enableDragging( ctx, listener ) {\r\n\r\n\t\t\t\t\tvar element = slide;\r\n\r\n\t\t\t\t\t//Touchscreen support\r\n\r\n\t\t\t\t\taddEventListener( element, 'touchstart', function ( evt ) { } );\r\n\t\t\t\t\taddEventListener( element, 'touchmove', function ( evt ) {\r\n\r\n\t\t\t\t\t\tevt.preventDefault();\r\n\r\n\t\t\t\t\t\tvar rect = evt.srcElement.getBoundingClientRect(),\r\n\t\t\t\t\t\t\tx = ( evt.touches[0].clientX - rect.left ),\r\n\t\t\t\t\t\t\ty = ( evt.touches[0].clientY - rect.top );\r\n\t\t\t\t\t\tif ( x < 0 ) x = 0;\r\n\t\t\t\t\t\tif ( y < 0 ) y = 0;\r\n\t\t\t\t\t\tmouseMove( { x: x, y: y } );\r\n\r\n\t\t\t\t\t} );\r\n\t\t\t\t\taddEventListener( element, 'touchend', function ( evt ) {\r\n\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t//mouse support\r\n\t\t\t\t\taddEventListener( element, 'mousedown', function ( evt ) {\r\n\r\n\t\t\t\t\t\tconst mouseup = 'mouseup', mousemove = 'mousemove';\r\n\t\t\t\t\t\tfunction onMouseUp() {\r\n\r\n\t\t\t\t\t\t\t//console.warn( mouseup );\r\n\t\t\t\t\t\t\tfunction removeEventListener( element, event, listener ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( element === null )\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\t\t\tif ( element.detachEvent ) {\r\n\r\n\t\t\t\t\t\t\t\t\telement.detachEvent( 'on' + event, listener );\r\n\r\n\t\t\t\t\t\t\t\t} else if ( element.removeEventListener ) {\r\n\r\n\t\t\t\t\t\t\t\t\telement.removeEventListener( event, listener, false );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tremoveEventListener( window, mouseup, onMouseUp );\r\n\t\t\t\t\t\t\tremoveEventListener( window, mousemove, listener );\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\taddEventListener( window, mouseup, onMouseUp );\r\n\t\t\t\t\t\taddEventListener( window, mousemove, listener );\r\n\r\n\t\t\t\t\t} );\r\n\t\t\t\t\taddEventListener( element, 'mouseout', function ( evt ) { mouseout = true; } );\r\n\t\t\t\t\taddEventListener( element, 'mouseover', function ( evt ) { mouseout = false; } );\r\n\t\t\t\t}\r\n\t\t\t\tenableDragging( this, slideListener() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\r\n\t\t\t\tsetValue: setValue,\r\n\r\n\t\t\t};\r\n\t\t}\r\n\t\t/**\r\n\t\t * create palette\r\n\t\t * @param {object} [options] the following options are available\r\n\t\t * @param {paletteIndexes|object[]} [options.palette] Palette index or palette array. The following indexes are available:\r\n\t\t * <pre>\r\n\t\t * paletteIndexes.BGRW: 0 - blue, green, red, white palette.\r\n\t\t * paletteIndexes.monochrome: 1,\r\n\t\t * paletteIndexes.bidirectional: 2,//red, black, green\r\n\t\t * paletteIndexes.rainbow: 3,\r\n\t\t * Default is paletteIndexes.BGRW index.\r\n\t\t * Example of palette array:\r\n\t\t[\r\n\t\t\t{ percent: 0, r: 0, g: 0, b: 0, },\r\n\t\t\t{ percent: 10, r: 0xff, g: 255, b: 0xff, },\r\n\t\t\t{ percent: 100, r: 0xff, g: 255, b: 0xff, },\r\n\t\t]\r\n\t\t* </pre>\r\n\t\t*/\r\n\t\tthis.palette = function( options ) {\r\n\r\n\r\n\t\t\tfunction paletteitem( percent, r, g, b ) {\r\n\r\n\t\t\t\treturn {\r\n\r\n\t\t\t\t\tpercent: percent,\r\n\t\t\t\t\tr: r,\r\n\t\t\t\t\tg: g,\r\n\t\t\t\t\tb: b,\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\toptions = options || {};\r\n\t\t\t/*        \r\n\t\t\t\tif ( !options.duplicate && boCreated ) {\r\n\t\t\t\r\n\t\t\t\t\tconsole.warn( 'Palette: duplicate palette' );\r\n\t\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\t\t}\r\n\t\t\t*/\r\n\t\t\tif ( options.palette === undefined )\r\n\t\t\t\toptions.palette = _this.paletteIndexes.BGRW;\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @returns Index of palette.\r\n\t\t\t * <pre>\r\n\t\t\t * 0 - <a href=\"../Example/index.html#BGRW\" target=\"_blank\">BGRW</a>\r\n\t\t\t * 1 - <a href=\"../Example/index.html#Monochrome\" target=\"_blank\">monochrome</a>\r\n\t\t\t * 2 - <a href=\"../Example/index.html#Bidirectional\" target=\"_blank\">bidirectional</a>\r\n\t\t\t * 3 - <a href=\"../Example/index.html#rainbow\" target=\"_blank\">rainbow</a>\r\n\t\t\t * </pre>\r\n\t\t\t * */\r\n\t\t\tthis.getPaletteIndex = function () { return options.palette; }\r\n\r\n\t\t\tvar arrayPalette = [\r\n\r\n\t\t\t\tnew paletteitem( 0, 0x00, 0x00, 0xFF ),//blue\r\n\t\t\t\tnew paletteitem( 33, 0x00, 0xFF, 0x00 ),//green\r\n\t\t\t\tnew paletteitem( 66, 0xFF, 0xFF, 0x00 ),//red\r\n\t\t\t\tnew paletteitem( 100, 0xFF, 0xFF, 0xFF ),//white\r\n\r\n\t\t\t];\r\n\t\t\tswitch ( typeof options.palette ) {\r\n\r\n\t\t\t\tcase 'number':\r\n\t\t\t\t\tswitch ( options.palette ) {\r\n\r\n\t\t\t\t\t\tcase _this.paletteIndexes.BGRW:\r\n\t\t\t\t\t\t\tbreak;//default palette\r\n\t\t\t\t\t\tcase _this.paletteIndexes.monochrome:\r\n\t\t\t\t\t\t\tvar arrayPalette = [\r\n\r\n\t\t\t\t\t\t\t\tnew paletteitem( 0, 0x00, 0x00, 0x00 ),//blach\r\n\t\t\t\t\t\t\t\tnew paletteitem( 100, 0xFF, 0xFF, 0xFF ),//white\r\n\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase _this.paletteIndexes.bidirectional:\r\n\t\t\t\t\t\t\tvar arrayPalette = [\r\n\t\t\t\t\t\t\t\tnew paletteitem( 0, 0xff, 0x30, 0x30 ),//red\r\n\t\t\t\t\t\t\t\tnew paletteitem( 50, 0x30, 0x30, 0x30 ),//gray\r\n\t\t\t\t\t\t\t\tnew paletteitem( 100, 0x30, 0xFF, 0x30 ),//green\r\n\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase _this.paletteIndexes.rainbow:\r\n\t\t\t\t\t\t\tvar arrayPalette = [\r\n\r\n\t\t\t\t\t\t\t\tnew paletteitem( 0, 0xff, 0x32, 0x32 ),\r\n\t\t\t\t\t\t\t\tnew paletteitem( 16, 0xfc, 0xf5, 0x28 ),\r\n\t\t\t\t\t\t\t\tnew paletteitem( 32, 0x28, 0xfc, 0x28 ),\r\n\t\t\t\t\t\t\t\tnew paletteitem( 50, 0x28, 0xfc, 0xf8 ),\r\n\t\t\t\t\t\t\t\tnew paletteitem( 66, 0x27, 0x2e, 0xf9 ),\r\n\t\t\t\t\t\t\t\tnew paletteitem( 82, 0xff, 0x28, 0xfb ),\r\n\t\t\t\t\t\t\t\tnew paletteitem( 100, 0xff, 0x32, 0x32 ),\r\n\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault: console.error( 'ColorPicker.create.Palette: invalid options.palette = ' + options.palette );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"object\":\r\n\t\t\t\t\tif ( Array.isArray( options.palette ) ) {\r\n\r\n\t\t\t\t\t\t//Custom palette\r\n\t\t\t\t\t\tarrayPalette = options.palette;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tvar message = 'invalid options.palette = ' + options.palette;\r\n\t\t\t\t\tconsole.error( 'ColorPicker.create.Palette: ' + message );\r\n\t\t\t\t\toptions.onError( message );\r\n\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t* @returns {object[]} palette array\r\n\t\t\t*/\r\n\t\t\tthis.getPalette = function () {\r\n\r\n\t\t\t\tconst palette = [];\r\n\t\t\t\tarrayPalette.forEach( function ( item ) {\r\n\r\n\t\t\t\t\tpalette.unshift( CreateSVGElement( 'stop', {\r\n\r\n\t\t\t\t\t\toffset: ( 100 - item.percent ) + '%', 'stop-color': '#'\r\n\t\t\t\t\t\t\t//Thanks to https://stackoverflow.com/a/13240395/5175935\r\n\t\t\t\t\t\t\t+ ( \"0\" + ( Number( item.r ).toString( 16 ) ) ).slice( -2 ).toUpperCase()\r\n\t\t\t\t\t\t\t+ ( \"0\" + ( Number( item.g ).toString( 16 ) ) ).slice( -2 ).toUpperCase()\r\n\t\t\t\t\t\t\t+ ( \"0\" + ( Number( item.b ).toString( 16 ) ) ).slice( -2 ).toUpperCase(),\r\n\t\t\t\t\t\t'stop-opacity': '1'\r\n\r\n\t\t\t\t\t} ) );\r\n\r\n\t\t\t\t} );\r\n\t\t\t\treturn palette;\r\n\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t* converts a percent or value from min to max  to object with r, g, b, hex and percent.\r\n\t\t\t* @param {number} stringPercent coordinate of color from palette in percent or value from min to max\r\n\t\t\t* @param {number} [min] min stringPercent. Default is undefined.\r\n\t\t\t* @param {number} [max] max stringPercent. Default is undefined.\r\n\t\t\t* @returns {object} object with r, g, b, hex and percent\r\n\t\t\t*/\r\n\t\t\tthis.hsv2rgb = function ( stringPercent, min, max ) {\r\n\r\n\t\t\t\tvar percent = parseFloat( stringPercent );\r\n\t\t\t\tif ( min !== undefined && max !== undefined )\r\n\t\t\t\t\tpercent = ( 100 / ( max - min ) ) * ( percent - min );\r\n\t\t\t\tvar lastPalette = arrayPalette[arrayPalette.length - 1];\r\n\t\t\t\tif ( lastPalette.percent !== 100 ) {\r\n\r\n\t\t\t\t\t//not compatible with Safari for Windows\r\n\t\t\t\t\t//var lastItem = Object.assign( {}, arrayPalette[arrayPalette.length - 1] );\r\n\r\n\t\t\t\t\tconst lastItem = {};\r\n\t\t\t\t\tObject.keys( lastPalette ).forEach( function ( key ) {\r\n\r\n\t\t\t\t\t\tlastItem[key] = lastPalette[key];\r\n\r\n\t\t\t\t\t} );\r\n\t\t\t\t\tlastItem.percent = 100;\r\n\t\t\t\t\tarrayPalette.push( lastItem );\r\n\r\n\t\t\t\t}\r\n\t\t\t\tvar itemPrev;\r\n\t\t\t\tfor ( var i = 0; i < arrayPalette.length; i++ ) {\r\n\r\n\t\t\t\t\tconst item = arrayPalette[i];\r\n\t\t\t\t\tif ( itemPrev === undefined )\r\n\t\t\t\t\t\titemPrev = item;\r\n\t\t\t\t\tif ( ( ( percent >= itemPrev.percent ) && ( percent <= item.percent ) ) ) {\r\n\r\n\t\t\t\t\t\tfunction color( percentPrev, prev, percentItem, item ) {\r\n\r\n\t\t\t\t\t\t\tvar percentD = percentItem - percentPrev;\r\n\t\t\t\t\t\t\tif ( percentD === 0 )\r\n\t\t\t\t\t\t\t\treturn prev;\r\n\t\t\t\t\t\t\treturn Math.round( prev + ( ( item - prev ) / percentD ) * ( percent - percentPrev ) );\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst r = color( itemPrev.percent, itemPrev.r, item.percent, item.r ),\r\n\t\t\t\t\t\t\tg = color( itemPrev.percent, itemPrev.g, item.percent, item.g ),\r\n\t\t\t\t\t\t\tb = color( itemPrev.percent, itemPrev.b, item.percent, item.b );\r\n\t\t\t\t\t\treturn {\r\n\r\n\t\t\t\t\t\t\tr: r,\r\n\t\t\t\t\t\t\tg: g,\r\n\t\t\t\t\t\t\tb: b,\r\n\t\t\t\t\t\t\thex: \"#\" + ( 16777216 | b | ( g << 8 ) | ( r << 16 ) ).toString( 16 ).slice( 1 ),\r\n\t\t\t\t\t\t\tpercent: percent\r\n\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\titemPrev = item;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( options.onError !== undefined )\r\n\t\t\t\t\toptions.onError( 'Invalid color value of the ColorPicker: ' + stringPercent );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t* converts a value in percentages to color.\r\n\t\t\t* @param {number} value coordinate of color from palette in percent. Default value range from 0 to 100.\r\n\t\t\t* @param {number} min minimal value\r\n\t\t\t* @param {number} max maximal value\r\n\t\t\t* @returns {THREE.Color} [color]{@link https://threejs.org/docs/index.html?q=Colo#api/en/math/Color}\r\n\t\t\t*/\r\n\t\t\tthis.toColor = function ( value, min, max ) {\r\n\r\n\t\t\t\tconst THREE = three.THREE;\r\n\t\t\t\t/*\r\n\t\t\t\t\t\tif ( typeof THREE === 'undefined' ) {\r\n\t\t\t\t\r\n\t\t\t\t\t\t\tconsole.error( 'Call ColorPicker.palette.setTHREE(THREE) first.' );\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t*/\r\n\t\t\t\tif ( value instanceof THREE.Color )\r\n\t\t\t\t\treturn value;\r\n\t\t\t\tvar c = this.hsv2rgb( value, min, max );\r\n\t\t\t\tif ( c === undefined )\r\n\t\t\t\t\tc = { r: 255, g: 255, b: 255 }\r\n\t\t\t\treturn new THREE.Color( \"rgb(\" + c.r + \", \" + c.g + \", \" + c.b + \")\" );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tboCreated = true;\r\n\r\n\t\t}\r\n\t}\r\n}\r\nColorPicker = new ColorPicker();\r\nexport default ColorPicker;\r\n","import three from '../three.js'\r\n/*\r\nimport {\r\n\tEventDispatcher,\r\n\tMOUSE,\r\n\tQuaternion,\r\n\tSpherical,\r\n\tTOUCH,\r\n\tVector2,\r\n\tVector3\r\n} from '../../../build/three.module.js';\r\n*/\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n//\r\n//    Orbit - left mouse / touch: one-finger move\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\r\n\r\nvar OrbitControls = function ( object, domElement ) {\r\n\r\n\tconst EventDispatcher = three.THREE.EventDispatcher,\r\n\t\tMOUSE = three.THREE.MOUSE,\r\n\t\tQuaternion = three.THREE.Quaternion,\r\n\t\tSpherical = three.THREE.Spherical,\r\n\t\tTOUCH = three.THREE.TOUCH,\r\n\t\tVector2 = three.THREE.Vector2,\r\n\t\tVector3 = three.THREE.Vector3;\r\n/*\r\n\tOrbitControls.prototype = Object.create( EventDispatcher.prototype );\r\n\tOrbitControls.prototype.constructor = OrbitControls;\r\n\t\r\n\tMapControls.prototype = Object.create( EventDispatcher.prototype );\r\n\tMapControls.prototype.constructor = MapControls;\r\n*/\r\n\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\r\n\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\r\n\r\n\tthis.object = object;\r\n\tthis.domElement = domElement;\r\n\r\n\t// Set to false to disable this control\r\n\tthis.enabled = true;\r\n\r\n\t// \"target\" sets the location of focus, where the object orbits around\r\n\tthis.target = new Vector3();\r\n\r\n\t// How far you can dolly in and out ( PerspectiveCamera only )\r\n\tthis.minDistance = 0;\r\n\tthis.maxDistance = Infinity;\r\n\r\n\t// How far you can zoom in and out ( OrthographicCamera only )\r\n\tthis.minZoom = 0;\r\n\tthis.maxZoom = Infinity;\r\n\r\n\t// How far you can orbit vertically, upper and lower limits.\r\n\t// Range is 0 to Math.PI radians.\r\n\tthis.minPolarAngle = 0; // radians\r\n\tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n\t// How far you can orbit horizontally, upper and lower limits.\r\n\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\r\n\tthis.minAzimuthAngle = - Infinity; // radians\r\n\tthis.maxAzimuthAngle = Infinity; // radians\r\n\r\n\t// Set to true to enable damping (inertia)\r\n\t// If damping is enabled, you must call controls.update() in your animation loop\r\n\tthis.enableDamping = false;\r\n\tthis.dampingFactor = 0.05;\r\n\r\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n\t// Set to false to disable zooming\r\n\tthis.enableZoom = true;\r\n\tthis.zoomSpeed = 1.0;\r\n\r\n\t// Set to false to disable rotating\r\n\tthis.enableRotate = true;\r\n\tthis.rotateSpeed = 1.0;\r\n\r\n\t// Set to false to disable panning\r\n\tthis.enablePan = true;\r\n\tthis.panSpeed = 1.0;\r\n\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\r\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n\t// Set to true to automatically rotate around the target\r\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n\tthis.autoRotate = false;\r\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\r\n\r\n\t// The four arrow keys\r\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\r\n\r\n\t// Mouse buttons\r\n\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\r\n\r\n\t// Touch fingers\r\n\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\r\n\r\n\t// for reset\r\n\tthis.target0 = this.target.clone();\r\n\tthis.position0 = this.object.position.clone();\r\n\tthis.zoom0 = this.object.zoom;\r\n\r\n\t// the target DOM element for key events\r\n\tthis._domElementKeyEvents = null;\r\n\r\n\t//\r\n\t// public methods\r\n\t//\r\n\r\n\tthis.getPolarAngle = function () {\r\n\r\n\t\treturn spherical.phi;\r\n\r\n\t};\r\n\r\n\tthis.getAzimuthalAngle = function () {\r\n\r\n\t\treturn spherical.theta;\r\n\r\n\t};\r\n\r\n\tthis.listenToKeyEvents = function ( domElement ) {\r\n\r\n\t\tdomElement.addEventListener( 'keydown', onKeyDown );\r\n\t\tthis._domElementKeyEvents = domElement;\r\n\r\n\t};\r\n\r\n\tthis.saveState = function () {\r\n\r\n\t\tscope.target0.copy( scope.target );\r\n\t\tscope.position0.copy( scope.object.position );\r\n\t\tscope.zoom0 = scope.object.zoom;\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tscope.target.copy( scope.target0 );\r\n\t\tscope.object.position.copy( scope.position0 );\r\n\t\tscope.object.zoom = scope.zoom0;\r\n\r\n\t\tscope.object.updateProjectionMatrix();\r\n\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\tscope.update();\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t};\r\n\r\n\t// this method is exposed, but perhaps it would be better if we can make it private...\r\n\tthis.update = function () {\r\n\r\n\t\tvar offset = new Vector3();\r\n\r\n\t\t// so camera.up is the orbit axis\r\n\t\tvar quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\r\n\t\tvar quatInverse = quat.clone().invert();\r\n\r\n\t\tvar lastPosition = new Vector3();\r\n\t\tvar lastQuaternion = new Quaternion();\r\n\r\n\t\tvar twoPI = 2 * Math.PI;\r\n\r\n\t\treturn function update() {\r\n\r\n\t\t\tvar position = scope.object.position;\r\n\r\n\t\t\toffset.copy( position ).sub( scope.target );\r\n\r\n\t\t\t// rotate offset to \"y-axis-is-up\" space\r\n\t\t\toffset.applyQuaternion( quat );\r\n\r\n\t\t\t// angle from z-axis around y-axis\r\n\t\t\tspherical.setFromVector3( offset );\r\n\r\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\r\n\r\n\t\t\t\trotateLeft( getAutoRotationAngle() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( scope.enableDamping ) {\r\n\r\n\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\r\n\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tspherical.theta += sphericalDelta.theta;\r\n\t\t\t\tspherical.phi += sphericalDelta.phi;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// restrict theta to be between desired limits\r\n\r\n\t\t\tvar min = scope.minAzimuthAngle;\r\n\t\t\tvar max = scope.maxAzimuthAngle;\r\n\r\n\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\r\n\r\n\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\r\n\r\n\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\r\n\r\n\t\t\t\tif ( min <= max ) {\r\n\r\n\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\r\n\t\t\t\t\t\tMath.max( min, spherical.theta ) :\r\n\t\t\t\t\t\tMath.min( max, spherical.theta );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// restrict phi to be between desired limits\r\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\r\n\r\n\t\t\tspherical.makeSafe();\r\n\r\n\r\n\t\t\tspherical.radius *= scale;\r\n\r\n\t\t\t// restrict radius to be between desired limits\r\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\r\n\r\n\t\t\t// move target to panned location\r\n\r\n\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tscope.target.add( panOffset );\r\n\r\n\t\t\t}\r\n\r\n\t\t\toffset.setFromSpherical( spherical );\r\n\r\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\r\n\t\t\toffset.applyQuaternion( quatInverse );\r\n\r\n\t\t\tposition.copy( scope.target ).add( offset );\r\n\r\n\t\t\tscope.object.lookAt( scope.target );\r\n\r\n\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\r\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\r\n\r\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\r\n\r\n\t\t\t\tpanOffset.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscale = 1;\r\n\r\n\t\t\t// update condition is:\r\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\r\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n\t\t\tif ( zoomChanged ||\r\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\r\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\r\n\r\n\t\t\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t\t\t\tlastPosition.copy( scope.object.position );\r\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\r\n\t\t\t\tzoomChanged = false;\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\r\n\r\n\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\r\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\r\n\r\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart );\r\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd );\r\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove );\r\n\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove );\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp );\r\n\r\n\r\n\t\tif ( scope._domElementKeyEvents !== null ) {\r\n\r\n\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\r\n\r\n\t\t}\r\n\r\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n\t};\r\n\r\n\t//\r\n\t// internals\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tvar changeEvent = { type: 'change' };\r\n\tvar startEvent = { type: 'start' };\r\n\tvar endEvent = { type: 'end' };\r\n\r\n\tvar STATE = {\r\n\t\tNONE: - 1,\r\n\t\tROTATE: 0,\r\n\t\tDOLLY: 1,\r\n\t\tPAN: 2,\r\n\t\tTOUCH_ROTATE: 3,\r\n\t\tTOUCH_PAN: 4,\r\n\t\tTOUCH_DOLLY_PAN: 5,\r\n\t\tTOUCH_DOLLY_ROTATE: 6\r\n\t};\r\n\r\n\tvar state = STATE.NONE;\r\n\r\n\tvar EPS = 0.000001;\r\n\r\n\t// current position in spherical coordinates\r\n\tvar spherical = new Spherical();\r\n\tvar sphericalDelta = new Spherical();\r\n\r\n\tvar scale = 1;\r\n\tvar panOffset = new Vector3();\r\n\tvar zoomChanged = false;\r\n\r\n\tvar rotateStart = new Vector2();\r\n\tvar rotateEnd = new Vector2();\r\n\tvar rotateDelta = new Vector2();\r\n\r\n\tvar panStart = new Vector2();\r\n\tvar panEnd = new Vector2();\r\n\tvar panDelta = new Vector2();\r\n\r\n\tvar dollyStart = new Vector2();\r\n\tvar dollyEnd = new Vector2();\r\n\tvar dollyDelta = new Vector2();\r\n\r\n\tfunction getAutoRotationAngle() {\r\n\r\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n\t}\r\n\r\n\tfunction getZoomScale() {\r\n\r\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\r\n\r\n\t}\r\n\r\n\tfunction rotateLeft( angle ) {\r\n\r\n\t\tsphericalDelta.theta -= angle;\r\n\r\n\t}\r\n\r\n\tfunction rotateUp( angle ) {\r\n\r\n\t\tsphericalDelta.phi -= angle;\r\n\r\n\t}\r\n\r\n\tvar panLeft = function () {\r\n\r\n\t\tvar v = new Vector3();\r\n\r\n\t\treturn function panLeft( distance, objectMatrix ) {\r\n\r\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\r\n\t\t\tv.multiplyScalar( - distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tvar panUp = function () {\r\n\r\n\t\tvar v = new Vector3();\r\n\r\n\t\treturn function panUp( distance, objectMatrix ) {\r\n\r\n\t\t\tif ( scope.screenSpacePanning === true ) {\r\n\r\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\r\n\t\t\t\tv.crossVectors( scope.object.up, v );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tv.multiplyScalar( distance );\r\n\r\n\t\t\tpanOffset.add( v );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\t// deltaX and deltaY are in pixels; right and down are positive\r\n\tvar pan = function () {\r\n\r\n\t\tvar offset = new Vector3();\r\n\r\n\t\treturn function pan( deltaX, deltaY ) {\r\n\r\n\t\t\tvar element = scope.domElement;\r\n\r\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\t\t// perspective\r\n\t\t\t\tvar position = scope.object.position;\r\n\t\t\t\toffset.copy( position ).sub( scope.target );\r\n\t\t\t\tvar targetDistance = offset.length();\r\n\r\n\t\t\t\t// half of the fov is center to top of screen\r\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\r\n\r\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\r\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\r\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\t\t// orthographic\r\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\r\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// camera neither orthographic nor perspective\r\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\r\n\t\t\t\tscope.enablePan = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tfunction dollyOut( dollyScale ) {\r\n\r\n\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\tscale /= dollyScale;\r\n\r\n\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction dollyIn( dollyScale ) {\r\n\r\n\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\tscale *= dollyScale;\r\n\r\n\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\r\n\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\tzoomChanged = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\tscope.enableZoom = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event callbacks - update the object state\r\n\t//\r\n\r\n\tfunction handleMouseDownRotate( event ) {\r\n\r\n\t\trotateStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownDolly( event ) {\r\n\r\n\t\tdollyStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseDownPan( event ) {\r\n\r\n\t\tpanStart.set( event.clientX, event.clientY );\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveRotate( event ) {\r\n\r\n\t\trotateEnd.set( event.clientX, event.clientY );\r\n\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n\t\tvar element = scope.domElement;\r\n\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMoveDolly( event ) {\r\n\r\n\t\tdollyEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseMovePan( event ) {\r\n\r\n\t\tpanEnd.set( event.clientX, event.clientY );\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleMouseUp( /*event*/ ) {\r\n\r\n\t\t// no-op\r\n\r\n\t}\r\n\r\n\tfunction handleMouseWheel( event ) {\r\n\r\n\t\tif ( event.deltaY < 0 ) {\r\n\r\n\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t} else if ( event.deltaY > 0 ) {\r\n\r\n\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t}\r\n\r\n\t\tscope.update();\r\n\r\n\t}\r\n\r\n\tfunction handleKeyDown( event ) {\r\n\r\n\t\tvar needsUpdate = false;\r\n\r\n\t\tswitch ( event.keyCode ) {\r\n\r\n\t\t\tcase scope.keys.UP:\r\n\t\t\t\tpan( 0, scope.keyPanSpeed );\r\n\t\t\t\tneedsUpdate = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.BOTTOM:\r\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\r\n\t\t\t\tneedsUpdate = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.LEFT:\r\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\r\n\t\t\t\tneedsUpdate = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase scope.keys.RIGHT:\r\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\r\n\t\t\t\tneedsUpdate = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( needsUpdate ) {\r\n\r\n\t\t\t// prevent the browser from scrolling on cursor keys\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\tscope.update();\r\n\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartRotate( event ) {\r\n\r\n\t\tif ( event.touches.length == 1 ) {\r\n\r\n\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\trotateStart.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartPan( event ) {\r\n\r\n\t\tif ( event.touches.length == 1 ) {\r\n\r\n\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\tpanStart.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDolly( event ) {\r\n\r\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyStart.set( 0, distance );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDollyPan( event ) {\r\n\r\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\r\n\r\n\t\tif ( scope.enablePan ) handleTouchStartPan( event );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchStartDollyRotate( event ) {\r\n\r\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\r\n\r\n\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveRotate( event ) {\r\n\r\n\t\tif ( event.touches.length == 1 ) {\r\n\r\n\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\trotateEnd.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n\t\tvar element = scope.domElement;\r\n\r\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n\t\trotateStart.copy( rotateEnd );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMovePan( event ) {\r\n\r\n\t\tif ( event.touches.length == 1 ) {\r\n\r\n\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\r\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\r\n\r\n\t\t\tpanEnd.set( x, y );\r\n\r\n\t\t}\r\n\r\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\tpanStart.copy( panEnd );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDolly( event ) {\r\n\r\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\r\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\tdollyEnd.set( 0, distance );\r\n\r\n\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\r\n\r\n\t\tdollyOut( dollyDelta.y );\r\n\r\n\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDollyPan( event ) {\r\n\r\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\r\n\r\n\t\tif ( scope.enablePan ) handleTouchMovePan( event );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchMoveDollyRotate( event ) {\r\n\r\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\r\n\r\n\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\r\n\r\n\t}\r\n\r\n\tfunction handleTouchEnd( /*event*/ ) {\r\n\r\n\t\t// no-op\r\n\r\n\t}\r\n\r\n\t//\r\n\t// event handlers - FSM: listen for events and reset state\r\n\t//\r\n\r\n\tfunction onPointerDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tswitch ( event.pointerType ) {\r\n\r\n\t\t\tcase 'mouse':\r\n\t\t\tcase 'pen':\r\n\t\t\t\tonMouseDown( event );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t// TODO touch\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onPointerMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tswitch ( event.pointerType ) {\r\n\r\n\t\t\tcase 'mouse':\r\n\t\t\tcase 'pen':\r\n\t\t\t\tonMouseMove( event );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t// TODO touch\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onPointerUp( event ) {\r\n\r\n\t\tswitch ( event.pointerType ) {\r\n\r\n\t\t\tcase 'mouse':\r\n\t\t\tcase 'pen':\r\n\t\t\t\tonMouseUp( event );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t// TODO touch\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseDown( event ) {\r\n\r\n\t\t// Prevent the browser from scrolling.\r\n\t\tevent.preventDefault();\r\n\r\n\t\t// Manually set the focus since calling preventDefault above\r\n\t\t// prevents the browser from setting it automatically.\r\n\r\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\r\n\r\n\t\tvar mouseAction;\r\n\r\n\t\tswitch ( event.button ) {\r\n\r\n\t\t\tcase 0:\r\n\r\n\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 1:\r\n\r\n\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\r\n\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tmouseAction = - 1;\r\n\r\n\t\t}\r\n\r\n\t\tswitch ( mouseAction ) {\r\n\r\n\t\t\tcase MOUSE.DOLLY:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseDownDolly( event );\r\n\r\n\t\t\t\tstate = STATE.DOLLY;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MOUSE.ROTATE:\r\n\r\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\r\n\r\n\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MOUSE.PAN:\r\n\r\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\r\n\r\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointermove', onPointerMove );\r\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointerup', onPointerUp );\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tswitch ( state ) {\r\n\r\n\t\t\tcase STATE.ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveRotate( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.DOLLY:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\thandleMouseMoveDolly( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleMouseMovePan( event );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onMouseUp( event ) {\r\n\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove );\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp );\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleMouseUp( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onMouseWheel( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\thandleMouseWheel( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction onKeyDown( event ) {\r\n\r\n\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\r\n\r\n\t\thandleKeyDown( event );\r\n\r\n\t}\r\n\r\n\tfunction onTouchStart( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault(); // prevent scrolling\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1:\r\n\r\n\t\t\t\tswitch ( scope.touches.ONE ) {\r\n\r\n\t\t\t\t\tcase TOUCH.ROTATE:\r\n\r\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\thandleTouchStartRotate( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase TOUCH.PAN:\r\n\r\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\thandleTouchStartPan( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\r\n\t\t\t\tswitch ( scope.touches.TWO ) {\r\n\r\n\t\t\t\t\tcase TOUCH.DOLLY_PAN:\r\n\r\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\thandleTouchStartDollyPan( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\r\n\r\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\thandleTouchStartDollyRotate( event );\r\n\r\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\tscope.dispatchEvent( startEvent );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchMove( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault(); // prevent scrolling\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tswitch ( state ) {\r\n\r\n\t\t\tcase STATE.TOUCH_ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleTouchMoveRotate( event );\r\n\r\n\t\t\t\tscope.update();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.TOUCH_PAN:\r\n\r\n\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleTouchMovePan( event );\r\n\r\n\t\t\t\tscope.update();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.TOUCH_DOLLY_PAN:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\r\n\t\t\t\thandleTouchMoveDollyPan( event );\r\n\r\n\t\t\t\tscope.update();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\r\n\r\n\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\r\n\r\n\t\t\t\thandleTouchMoveDollyRotate( event );\r\n\r\n\t\t\t\tscope.update();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onTouchEnd( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\thandleTouchEnd( event );\r\n\r\n\t\tscope.dispatchEvent( endEvent );\r\n\r\n\t\tstate = STATE.NONE;\r\n\r\n\t}\r\n\r\n\tfunction onContextMenu( event ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\r\n\r\n\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\r\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel );\r\n\r\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart );\r\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd );\r\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove );\r\n\r\n\t// force an update at start\r\n\r\n\tthis.update();\r\n\r\n};\r\n/*\r\nOrbitControls.prototype = Object.create( EventDispatcher.prototype );\r\nOrbitControls.prototype.constructor = OrbitControls;\r\n*/\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n// This is very similar to OrbitControls, another set of touch behavior\r\n//\r\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\r\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n//    Pan - left mouse, or arrow keys / touch: one-finger move\r\n\r\nvar MapControls = function ( object, domElement ) {\r\n\r\n\tOrbitControls.call( this, object, domElement );\r\n\r\n\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\r\n\r\n\tthis.mouseButtons.LEFT = MOUSE.PAN;\r\n\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\r\n\r\n\tthis.touches.ONE = TOUCH.PAN;\r\n\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\r\n\r\n};\r\n/*\r\nMapControls.prototype = Object.create( EventDispatcher.prototype );\r\nMapControls.prototype.constructor = MapControls;\r\n*/\r\n\r\nvar createEventDispatcher = function () {\r\n\r\n\tOrbitControls.prototype = Object.create( three.THREE.EventDispatcher.prototype );\r\n\tOrbitControls.prototype.constructor = OrbitControls;\r\n\r\n\tMapControls.prototype = Object.create( three.THREE.EventDispatcher.prototype );\r\n\tMapControls.prototype.constructor = MapControls;\r\n\r\n};\r\nexport { OrbitControls, MapControls, createEventDispatcher };\r\n","/**\r\n * @module cookie\r\n * @description node.js version of the cookie.\r\n * Cookies let you store user information in web pages.\r\n * @see {@link https://www.w3schools.com/js/js_cookies.asp}\r\n *\r\n * @author Andrej Hristoliubov https://anhr.github.io/AboutMe/\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\nexport { isEnabled, set, setObject, get, getObject, copyObject, remove, defaultCookie };\r\n\r\n/**\r\n * Is the cookie enabled in your web browser?\r\n * @returns {boolean} true if cookie enabled\r\n * \r\n * @example\r\n\tvar isCookieEnabled = cookie.isEnabled('age', 25);\r\n */\r\nfunction isEnabled() {\r\n\r\n\treturn navigator.cookieEnabled;\r\n\t//Enable cookie\r\n\t//Chrome: Settings/Show advanced settings.../Privacy/Content settings.../Cookies/Allow local data to be set\r\n\r\n}\r\n\r\n/**\r\n * Set a cookie.\r\n * @param {string} name cookie name.\r\n * @param {any} value cookie value.\r\n * @param {Date} [cookie_date] expiry date (in UTC time). Optional.\r\n * @example\r\n\tcookie.set('age', 25);\r\n */\r\nfunction set( name, value, cookie_date ) {\r\n\r\n\tif ( !isEnabled() ) {\r\n\r\n\t\tconsoleCookieEnabled();\r\n\t\treturn;\r\n\r\n\t}\r\n\tvalue = value.toString();\r\n\t//http://ruseller.com/lessons.php?rub=28&id=593\r\n\tif ( cookie_date === undefined ) {\r\n\r\n\t\tcookie_date = new Date();  // Curent date and time\r\n\t\tcookie_date.setTime( cookie_date.getTime() + 1000 * 60 * 60 * 24 * 365 );//expiry date is one year\r\n\r\n\t}\r\n\tdocument.cookie = name + \"=\" + value + ( ( typeof settings == 'undefined' ) ? '' : settings ) + \"; expires=\" + cookie_date.toGMTString();\r\n\tif ( document.cookie === '' )\r\n\t\tconsole.error( 'document.cookie is empty' );\r\n\r\n}\r\n\r\n/**\r\n * sets an object into cookie.\r\n * @param {string} name cookie name.\r\n * @param {any} object an object for saving into cookie\r\n */\r\nfunction setObject( name, object ) {\r\n\r\n\tset( name, JSON.stringify( object ) );\r\n\r\n};\r\n\r\n/**\r\n * Get a cookie.\r\n * @param {string} name cookie name.\r\n * @param {any} [defaultValue] cookie default value. Optional.\r\n * @returns {string} cookie value or defaultValue if cookie was not found.\r\n * @example\r\n\tvar age = cookie.get('age', 25);\r\n */\r\nfunction get( name, defaultValue ) {\r\n\r\n\tif ( !isEnabled() ) {\r\n\r\n\t\tconsoleCookieEnabled();\r\n\t\treturn;\r\n\r\n\t}\r\n\t//http://ruseller.com/lessons.php?rub=28&id=593\r\n\tvar results = document.cookie.match( '(^|;) ?' + name + '=([^;]*)(;|$)' );\r\n\r\n\tif ( results )\r\n\t\treturn ( unescape( results[2] ) );\r\n\tif ( typeof defaultValue == 'undefined' )\r\n\t\treturn '';\r\n\treturn defaultValue;\r\n\r\n}\r\n\r\n/**\r\n * gets an object from cookie.\r\n * @param {string} name name of the object\r\n * @param {any} options load an object from cookie into options\r\n * @param {Object} optionsDefault copy to options this default object if named object is not exists in the cookie.\r\n */\r\nfunction getObject( name, options, optionsDefault ) {\r\n\r\n//\tnew defaultCookie().getObject( name, options, JSON.parse( get( name, JSON.stringify( optionsDefault ) ) ) );\r\n\tnew defaultCookie().getObject( name, options, copyObject( name, optionsDefault ) );\r\n\r\n};\r\n\r\n/**\r\n * gets an object from cookie and returns a copy of object.\r\n * @param {string} name name of the object\r\n * @param {Object} objectDefault copy to options this default object if named object is not exists in the cookie.\r\n * @returns copy of object from cookie\r\n */\r\nfunction copyObject( name, objectDefault ) {\r\n\r\n\treturn JSON.parse( get( name, JSON.stringify( objectDefault ) ) );\r\n\r\n}\r\n\r\n/**\r\n * Remove cookie\r\n * @param {string} name cookie name.\r\n */\r\nfunction remove( name ) {\r\n\r\n\tif ( !isEnabled() ) {\r\n\r\n\t\tconsoleCookieEnabled();\r\n\t\treturn;\r\n\r\n\t}\r\n\t//http://ruseller.com/lessons.php?rub=28&id=593\r\n\tvar cookie_date = new Date();  //    \r\n\tcookie_date.setTime( cookie_date.getTime() - 1 );\r\n\tdocument.cookie = name += \"=; expires=\" + cookie_date.toGMTString();\r\n\r\n}\r\n\r\nfunction consoleCookieEnabled() {\r\n\r\n\tconsole.error( 'navigator.cookieEnabled = ' + navigator.cookieEnabled );\r\n\r\n}\r\n\r\n/**\r\n * Default cookie is not saving settings\r\n * @param {any} name is not using\r\n */\r\nfunction defaultCookie( name ) {\r\n\r\n\t/**\r\n\t * Default cookie is not loading settings\r\n\t * @param {any} defaultValue\r\n\t * @returns defaultValue\r\n\t */\r\n\tthis.get = function ( defaultValue ) {\r\n\r\n\t\treturn defaultValue;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Default cookie is not saving settings\r\n\t */\r\n\tthis.set = function () {\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Default cookie is not loading objects\r\n\t * @param {string} name is not using\r\n\t * @param {any} options load an object from optionsDefault into options\r\n\t * @param {Object} optionsDefault source object\r\n\t */\r\n\tthis.getObject = function ( name, options, optionsDefault ) {\r\n\r\n\t\t// \r\n\t\tif ( !optionsDefault )\r\n\t\t\treturn;//object's settings is not saving\r\n\t\tObject.keys( optionsDefault ).forEach( function ( key ) {\r\n\r\n\t\t\t//I cannot modify options[key] if optionsDefault is read only and options[key] is not copy of optionsDefault[key]\r\n\t\t\t//options[key] = optionsDefault[key];\r\n\t\t\t//copy key\r\n\t\t\tvar option = optionsDefault[key];\r\n\t\t\tif ( ( option !== undefined ) && ( typeof option !== 'function' ) )\r\n\t\t\t\toptions[key] = JSON.parse( JSON.stringify( option ) );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * copy and returns an object from objectDefault\r\n\t * @param {string} name is not using\r\n\t * @param {any} objectDefault source object\r\n\t */\r\n\tthis.copyObject = function ( name, objectDefault ){\r\n\r\n\t\treturn JSON.parse( JSON.stringify( objectDefault ) );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Default cookie is not saving object's settings\r\n\t */\r\n\tthis.setObject = function () {\r\n\r\n\t};\r\n\r\n\tthis.isTrue = function ( defaultValue ) {\r\n\r\n\t\treturn defaultValue;\r\n\r\n\t};\r\n\r\n};\r\n","/**\r\n * node.js version of the cookie.\r\n *\r\n * @author Andrej Hristoliubov https://anhr.github.io/AboutMe/\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\nimport { set as setCookie, get as getCookie, getObject, copyObject, setObject, defaultCookie } from './index.js';\r\nvar cookie = {\r\n\r\n\tset: setCookie,\r\n\tsetObject: setObject,\r\n\tget: getCookie,\r\n\tgetObject: getObject,\r\n\tcopyObject: copyObject,\r\n\tdefaultCookie: defaultCookie,\r\n\r\n}\r\n\r\nexport default cookie;","/**\r\n * @module Localization.\r\n *\r\n * @author [Andrej Hristoliubov]{@link https://anhr.github.io/AboutMe/}\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\n/**\r\n * returns the \"primary language\" subtag of the version of the browser.\r\n * See the \"Syntax\" paragraph of RFC 4646 https://tools.ietf.org/html/rfc4646#section-2.1 for details.\r\n */\r\nexport function getLanguageCode() {\r\n\r\n\t//returns the language version of the browser.\r\n\tfunction _getLocale() {\r\n\r\n\t\tif ( !navigator ) {\r\n\r\n\t\t\tconsole.error( \"getLocale() failed! !navigator\" );\r\n\t\t\treturn \"\";\r\n\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\t( navigator.languages !== undefined )\r\n\t\t\t&& ( typeof navigator.languages !== 'unknown' )//for IE6\r\n\t\t\t&& ( navigator.languages.length > 0 )\r\n\t\t)\r\n\t\t\treturn navigator.languages[0];//Chrome\r\n\r\n\t\t//IE\r\n\t\tif ( navigator.language ) {\r\n\r\n\t\t\treturn navigator.language;\r\n\r\n\t\t} else if ( navigator.browserLanguage ) {\r\n\r\n\t\t\treturn navigator.browserLanguage;\r\n\r\n\t\t} else if ( navigator.systemLanguage ) {\r\n\r\n\t\t\treturn navigator.systemLanguage;\r\n\r\n\t\t} else if ( navigator.userLanguage ) {\r\n\r\n\t\t\treturn navigator.userLanguage;\r\n\r\n\t\t}\r\n\r\n\t\tconsole.error( \"getLocale() failed!\" );\r\n\t\treturn \"\";\r\n\r\n\t}\r\n\r\n\treturn _getLocale().toLowerCase().match( /([a-z]+)(?:-([a-z]+))?/ )[1];\r\n\r\n};\r\n\r\n","/**\r\n * options of the canvas\r\n *\r\n * @author Andrej Hristoliubov https://anhr.github.io/AboutMe/\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\n//  npm run build  \r\n//(babel plugin) ReferenceError: Unknown plugin \"external-helpers\" specified in \"base\" at 1, attempted to resolve relative to \"D:\\\\My documents\\\\MyProjects\\\\webgl\\\\three.js\\\\GitHub\\\\three.js\\\\dev\\\\examples\\\\jsm\"\r\n//import { WEBGL } from '../../three.js/dev/examples/jsm/WebGL.js';\r\n\r\nimport { WEBGL } from './WebGL.js';\r\n//import { WEBGL } from 'https://raw.githack.com/anhr/three.js/dev/examples/jsm/WebGL.js';\r\n\r\n//for testing open FireFox and read https://support.biodigital.com/hc/en-us/articles/218322977-How-to-turn-on-WebGL-in-my-browser#h_01EJW3MGDF7KH3PH6TG2DE13H6\r\nif ( WEBGL.isWebGLAvailable() === false ) {\r\n\r\n\tdocument.body.appendChild( WEBGL.getWebGLErrorMessage() );\r\n\talert( WEBGL.getWebGLErrorMessage().innerHTML );\r\n\r\n}\r\n\r\nimport ColorPicker from './colorpicker/colorpicker.js';\r\n//import ColorPicker from 'https://raw.githack.com/anhr/commonNodeJS/master/colorpicker/colorpicker.js';\r\n\r\nimport three from './three.js'\r\n\r\nimport { OrbitControls, createEventDispatcher } from './OrbitControls/OrbitControls.js';\r\n//import { OrbitControls } from '../../three.js/dev/examples/jsm/controls/OrbitControls.js';\r\n//import { OrbitControls } from 'http://localhost/anhr/three.js/dev/examples/jsm/controls/OrbitControls.js';\r\n//import { OrbitControls } from 'https://raw.githack.com/anhr/three.js/dev/examples/jsm/controls/OrbitControls.js';\r\n//import { OrbitControls } from 'https://threejs.org/examples/jsm/controls/OrbitControls.js';\r\n\r\n//   cookie    \r\nimport Cookie from './cookieNodeJS/cookie.js';\r\n//import Cookie from 'https://raw.githack.com/anhr/commonNodeJS/master/cookieNodeJS/cookie.js';\r\n\r\nimport cookie from './cookieNodeJS/cookie.js';\r\n//import cookie from 'https://raw.githack.com/anhr/commonNodeJS/master/cookieNodeJS/cookie.js';\r\n\r\n//import { dat } from './dat/dat.module.js';\r\n//import { dat } from 'https://raw.githack.com/anhr/commonNodeJS/master/dat/dat.module.js';\r\n\r\nimport { getLanguageCode } from './lang.js';\r\n//import { getLanguageCode } from 'https://raw.githack.com/anhr/commonNodeJS/master/lang.js';\r\n\r\nimport Player from './player/player.js';\r\n\r\nclass Options {\r\n\r\n\t/**\r\n\t * options of the canvas\r\n\t * @param {Object} options See the <b>options</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t */\r\n\tconstructor( options ) {\r\n\r\n\t\tconst _this = this;\r\n\t\toptions = options || {};\r\n\t\tif ( options.boOptions )\r\n\t\t\treturn options;//duplucate new Options\r\n//\t\toptions.boOptions = true;\r\n\r\n\t\tif ( options.a === undefined ) options.a = 1;\r\n\t\tif ( options.b === undefined ) options.b = 0;\r\n\r\n\t\t/* *\r\n\t\t * See the <b>options</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t * */\r\n//\t\tthis.options = options;\r\n\t\t/**\r\n\t\t * set the <b>scales.w</b> key of the <b>options</b>\r\n\t\t * @param {Object} options\r\n\t\t * @param {string} [options.scales.w.name=\"W\"] axis name.\r\n\t\t * @param {number} [options.scales.w.min=0] Minimum range of the <a href=\"../../colorpicker/jsdoc/index.html\" target=\"_blank\">color palette</a> index.\r\n\t\t * @param {number} [options.scales.w.max=1] Maximum range of the <a href=\"../../colorpicker/jsdoc/index.html\" target=\"_blank\">color palette</a> index.\r\n\t\t */\r\n\t\tthis.setW = function ( optionsCur ) {\r\n\r\n\t\t\toptionsCur = optionsCur || options;\r\n\t\t\tconst axisName = 'w';\r\n\t\t\toptionsCur.scales = optionsCur.scales || {};\r\n\t\t\toptionsCur.scales.w = optionsCur.scales.w || {};\r\n\t\t\tconst scale = optionsCur.scales.w;\r\n\t\t\tscale.name = scale.name || axisName;\r\n\t\t\tif ( !optionsCur.palette )\r\n\t\t\t\tthis.setPalette( optionsCur );\r\n\r\n\t\t\tscale.min = scale.min === undefined ? 0 : scale.min;\r\n\r\n\t\t\t//   w     THREE.Vector4\r\n\t\t\t//         ,   THREE.Vector4()\r\n\t\t\tscale.max = scale.max === undefined ? new three.THREE.Vector4().w : scale.max;\r\n\r\n\t\t}\r\n\t\toptions.scales = options.scales || {};\r\n\t\tconst boCreateScale = !options.scales.x && !options.scales.y && !options.scales.z;\r\n\t\tfunction setScale( axisName ) {\r\n\r\n\t\t\t//           ,                   \r\n\t\t\tif ( boCreateScale )\r\n\t\t\t\toptions.scales[axisName] = options.scales[axisName] || {};\r\n\r\n\t\t\tif ( !options.scales[axisName] )\r\n\t\t\t\treturn;\r\n\r\n\t\t\toptions.scales[axisName].name = options.scales[axisName].name || axisName;\r\n\t\t\toptions.scales[axisName].min = options.scales[axisName].min === undefined ? -1 : options.scales[axisName].min;\r\n\t\t\toptions.scales[axisName].max = options.scales[axisName].max === undefined ? 1 : options.scales[axisName].max;\r\n//\t\t\tif ( callBack ) callBack( options.scales[axisName] );\r\n\r\n\t\t}\r\n\t\tsetScale( 'x' );\r\n\t\tsetScale( 'y' );\r\n\t\tsetScale( 'z' );\r\n\t\toptions.scales.setW = function () { _this.setW(); }\r\n\t\toptions.point = options.point || {};\r\n\t\toptions.point.size = options.point.size || 5.0;\r\n\t\toptions.point.sizePointsMaterial = options.point.sizePointsMaterial || 100.0;\r\n\r\n\t\t/**\r\n\t\t * set the <b>palette</b> key of the <b>options</b>.\r\n\t\t * See <a href=\"../../colorpicker/jsdoc/module-ColorPicker-ColorPicker.html#palette\" target=\"_blank\">color palette</a>.\r\n\t\t */\r\n\t\tthis.setPalette = function () {\r\n\r\n\t\t\tif ( options.palette )\r\n\t\t\t\treturn;\r\n\t\t\toptions.palette = new ColorPicker.palette();//ColorPicker.paletteIndexes.BGRW \r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Create [OrbitControls]{@link https://threejs.org/docs/index.html#examples/en/controls/OrbitControls}\r\n\t\t * @param {THREE.PerspectiveCamera} camera [PerspectiveCamera]{@link https://threejs.org/docs/index.html#api/en/cameras/PerspectiveCamera}. Use the <b>camera</b> key if you want control cameras focus.\r\n\t\t * @param {THREE.WebGLRenderer} renderer [THREE.WebGLRenderer]{@link https://threejs.org/docs/index.html#api/en/renderers/WebGLRenderer}.\r\n\t\t * @param {THREE.Scene} scene [THREE.Scene]{@link https://threejs.org/docs/index.html?q=sce#api/en/scenes/Scene}.\r\n\t\t */\r\n\t\tthis.createOrbitControls = function ( camera, renderer, scene ) {\r\n\r\n/*\r\n\t\t\tif ( options.orbitControls !== false ) options.orbitControls = options.orbitControls || {};\r\n\t\t\tif ( !options.orbitControls )\r\n\t\t\t\treturn;\r\n*/\r\n\t\t\tif ( options.orbitControls === false )\r\n\t\t\t\treturn;\r\n/*\r\n\t\t\tif ( _this.orbitControls ) {\r\n\r\n\t\t\t\tconsole.error( 'Options.createOrbitControls: duplicate orbitControls.' );\r\n\t\t\t\treturn;\r\n\t\t\t\t\r\n\t\t\t}\r\n*/\t\t\t\r\n\r\n\t\t\tcreateEventDispatcher();\r\n\t\t\t_this.orbitControls = new OrbitControls( camera, renderer.domElement );\r\n/*  \r\n\t\t\tif ( _this.orbitControls.settings ) console.error( 'OrbitControls.settings = ' + controls.settings );\r\n\t\t\t_this.orbitControls.settings = options.orbitControls;\r\n*/\r\n\t\t\t_this.orbitControls.target.set( scene.position.x * 2, scene.position.y * 2, scene.position.z * 2 );\r\n\t\t\t_this.orbitControls.saveState();//For reset of the orbitControls settings in the CameraGui and OrbitControlsGui\r\n\t\t\t_this.orbitControls.update();\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Reset <a href=\"../../Player/jsdoc\" target=\"_blank\">Player</a> and restore [camera]{@link https://threejs.org/docs/index.html#api/en/cameras/PerspectiveCamera} position.\r\n\t\t * @param {THREE.PerspectiveCamera} camera [PerspectiveCamera]{@link https://threejs.org/docs/index.html#api/en/cameras/PerspectiveCamera}.\r\n\t\t * @param {THREE.Scene} scene [THREE.Scene]{@link https://threejs.org/docs/index.html?q=sce#api/en/scenes/Scene}.\r\n\t\t */\r\n\t\tthis.restoreSceneController = function ( camera, scene ) {\r\n\r\n\t\t\tif ( !three.dat )//options.dat.dat\r\n\t\t\t\treturn;\r\n\t\t\t\t\r\n\t\t\t//Localization\r\n\r\n\t\t\tconst lang = {\r\n\r\n\t\t\t\tdefaultButton: 'Default',\r\n\t\t\t\tdefaultTitle: 'Reset player and restore camera position.',\r\n\r\n\t\t\t};\r\n\r\n\t\t\tswitch ( this.getLanguageCode() ) {\r\n\r\n\t\t\t\tcase 'ru'://Russian language\r\n\r\n\t\t\t\t\tlang.defaultButton = '';\r\n\t\t\t\t\tlang.defaultTitle = '    .';\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst scenePosition = new three.THREE.Vector3().copy( scene.position ),\r\n\t\t\t\tcameraPosition = new three.THREE.Vector3().copy( camera.position );\r\n\r\n\t\t\tthree.dat.controllerNameAndTitle( options.dat.gui.add( {\r\n\t\t\t\tdefaultF: function ( value ) {\r\n\r\n\t\t\t\t\tif ( options.player ) options.player.setTime( options.playerOptions.min );\r\n\r\n//\t\t\t\t\tcamera.position.copy( camera.userData.default.options.position );\r\n\t\t\t\t\tcamera.position.copy( cameraPosition );\r\n\t\t\t\t\tscene.position.copy( scenePosition );\r\n\t\t\t\t\t//scene.position.add( options.axesHelper.position );\r\n\t\t\t\t\t//\t\t\t\t\t\tscene.position.add( options.scene.position );\r\n\t\t\t\t\t//scene.position.copy( options.scene.position );\r\n\t\t\t\t\tif ( options.orbitControls !== false ) {\r\n\r\n\t\t\t\t\t\toptions.orbitControls.target = new three.THREE.Vector3();\r\n\t\t\t\t\t\toptions.orbitControls.object.position.copy( camera.position );\r\n\t\t\t\t\t\toptions.orbitControls.update();\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/*\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tcontrols.target = new THREE.Vector3();\r\n\t\t\t\t\t\t\t\t\t\t\tcontrols.object.position.copy( camera.position );\r\n\t\t\t\t\t\t\t\t\t\t\tcontrols.update();\r\n\t\t\t\t\t*/\r\n\t\t\t\t\t/*\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\tPlayer.selectPlayScene( group, { options: options } );\r\n\t\t\t\t\t\t\t\t\t\t\t\tremoveTraceLines();\r\n\t\t\t\t\t*/\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t}, 'defaultF' ), lang.defaultButton, lang.defaultTitle );\r\n\r\n\t\t}\r\n\r\n\t\tObject.defineProperties( this, {\r\n\r\n\t\t\t/**\r\n\t\t\t * getter and setter\r\n\t\t\t * <pre>\r\n\t\t\t * \r\n\t\t\t * playerOptions = {\r\n\t\t\t * \r\n\t\t\t *\tmin: 0,// Minimum range of the axis.\r\n\t\t\t *\tmax: 1,// Maximum range of the axis.\r\n\t\t\t *\tmarks: 10,// Ticks count of the playing. Number of scenes of 3D objects animation.\r\n\t\t\t *\t\t//Have effect for <b>max</b> is not Infinity.\r\n\t\t\t *\tdt: 0.1,// Step of the animation. Have effect only if <b>max</b> is infinity.\r\n\t\t\t *\trepeat: false,// true - Infinitely repeating 3D objects animation.\r\n\t\t\t *\tinterval: 1,// Ticks per seconds.\r\n\t\t\t *\tzoomMultiplier: 1.1,// zoom multiplier of the time.\r\n\t\t\t *\toffset: 0.1,// offset of the time.\r\n\t\t\t *\tname: \"\",// name of the time.\r\n\t\t\t *\r\n\t\t\t * }\r\n\t\t\t * </pre>\r\n\t\t\t * @param {number} [playerOptions=0] Minimum range of the axis.\r\n\t\t\t */\r\n\t\t\tplayerOptions: {\r\n\r\n\t\t\t\tget: function () {\r\n\r\n//\t\t\t\t\tconst options = this.options;\r\n\t\t\t\t\toptions.playerOptions = options.playerOptions || {};\r\n\t\t\t\t\tconst playerOptions = options.playerOptions;\r\n\t\t\t\t\tplayerOptions.min = playerOptions.min || 0;\r\n\t\t\t\t\tif ( playerOptions.max === Infinity ) playerOptions.max = null;// Infinity  null    cockie Infinity   null\r\n\t\t\t\t\tif ( playerOptions.max !== null ) {\r\n\r\n\t\t\t\t\t\tif ( playerOptions.max === undefined ) playerOptions.max = 1;\r\n\t\t\t\t\t\tplayerOptions.marks = playerOptions.marks || 10;//2;\r\n\r\n\t\t\t\t\t} else playerOptions.marks = null;\r\n\t\t\t\t\tif ( playerOptions.max === null ) playerOptions.dt = playerOptions.dt || 0.1;\r\n\t\t\t\t\telse playerOptions.dt = ( playerOptions.max - playerOptions.min ) / ( playerOptions.marks - 1 );\r\n\t\t\t\t\tplayerOptions.repeat = playerOptions.repeat || false;\r\n\t\t\t\t\tplayerOptions.interval = playerOptions.interval || 1;//25;\r\n\t\t\t\t\tplayerOptions.zoomMultiplier = playerOptions.zoomMultiplier || 1.1;\r\n\t\t\t\t\tplayerOptions.offset = playerOptions.offset || 0.1;\r\n\t\t\t\t\tplayerOptions.name = playerOptions.name || '';\r\n\t\t\t\t\tif ( !playerOptions.cameraTarget ) {\r\n\r\n\t\t\t\t\t\tconst cameraTarget = new Player.cameraTarget();\r\n\t\t\t\t\t\tObject.defineProperties( playerOptions, {\r\n\r\n\t\t\t\t\t\t\tcameraTarget: {\r\n\r\n\t\t\t\t\t\t\t\tget: function () {\r\n\r\n\t\t\t\t\t\t\t\t\treturn cameraTarget;\r\n\r\n\t\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn options.playerOptions;\r\n\r\n\t\t\t\t},\r\n\t\t\t\tset: function ( playerOptions ) { options.playerOptions = playerOptions; },\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter\r\n\t\t\t * <pre>\r\n\t\t\t * See <b>options.a</b> parameter of the <a href=\"../../player/jsdoc/module-Player-Player.execFunc.html\" target=\"_blank\">Player.execFunc</a>.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\ta: {\r\n\r\n\t\t\t\tget: function () { return options.a; }\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter\r\n\t\t\t * <pre>\r\n\t\t\t * See <b>options.b</b> parameter of the <a href=\"../../player/jsdoc/module-Player-Player.execFunc.html\" target=\"_blank\">Player.execFunc</a>.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\tb: {\r\n\r\n\t\t\t\tget: function () { return options.b; }\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter and setter\r\n\t\t\t * <pre>\r\n\t\t\t * See the <b>options.dat</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t\t * dat = {\r\n\t\t\t * \r\n\t\t\t *\tgui: new [dat.GUI()]{@link https://github.com/dataarts/dat.gui} instance,\r\n\t\t\t *\t\tundefined - do not use dat-gui JavaScript Controller Library. [dat.gui]{@link https://github.com/dataarts/dat.gui}.\r\n\t\t\t *\tcookie: false,// do not save to cookie all user settings\r\n\t\t\t *\tcookieName:,// Name of the cookie.\r\n\t\t\t *\taxesHelperGui: false,// - do not adds a <a href=\"../../AxesHelper/jsdoc/module-AxesHelperGui.html\" target=\"_blank\">AxesHelperGui</a> into [dat.gui]{@link https://github.com/dataarts/dat.gui}.\r\n\t\t\t *\tstereoEffectsGui: false,// - do not adds <a href=\"../../StereoEffect/jsdoc/module-StereoEffect-StereoEffect.html#gui\" target=\"_blank\">Stereo Effects folder</a> into [dat.gui]{@link https://github.com/dataarts/dat.gui}.\r\n\t\t\t *\tplayerGui: true,// - adds a <a href=\"../../player/jsdoc/module-Player.html#~Player.gui\" target=\"_blank\">Player controllers</a> into [dat.gui]{@link https://github.com/dataarts/dat.gui}.\r\n\t\t\t *\tguiSelectPoint: true,// - displays the <a href=\"../../guiSelectPoint/jsdoc/module-GuiSelectPoint.html\" target=\"_blank\">Select Point</a>. [dat.gui]{@link https://github.com/dataarts/dat.gui} based graphical user interface for select a point from the mesh.\r\n\t\t\t *\tguiFrustumPoints: true,// - Adds <a href=\"../../FrustumPoints/jsdoc/FrustumPoints.html#gui\" target=\"_blank\">Frustum Points folder</a> into [dat.gui]{@link https://github.com/dataarts/dat.gui}.\r\n\t\t\t *\tcameraGui: true,// - Adds <a href=\"../../jsdoc/CameraGui/module-CameraGui-CameraGui.html\" target=\"_blank\">Camera folder</a> into [dat.gui]{@link https://github.com/dataarts/dat.gui}.\r\n\t\t\t *\tmoveScene: true,// - displays the <a href=\"../../jsdoc/MoveGroupGui/index.html\" target=\"_blank\">move group gui</a>.\r\n\t\t\t *\tspriteTextGui: true,// - displays the <a href=\"../../SpriteText/jsdoc/module-SpriteTextGui.html\" target=\"_blank\">SpriteTextGui</a>.\r\n\t\t\t *\r\n\t\t\t * }\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\tdat: {\r\n\r\n\t\t\t\tget: function () {\r\n\r\n\t\t\t\t\tclass Dat{\r\n\r\n\t\t\t\t\t\t/* *\r\n\t\t\t\t\t\t * dat options\r\n\t\t\t\t\t\t * @param {dat} dat [dat]{@link https://github.com/dataarts/dat.gui}\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tconstructor( dat ) {\r\n\r\n\t\t\t\t\t\t\tdat = dat || {};\r\n\t\t\t\t\t\t\tif ( dat.boDat )\r\n\t\t\t\t\t\t\t\treturn dat;//duplucate new Options\r\n\t\t\t\t\t\t\tObject.defineProperties( this, {\r\n\r\n\r\n\t\t\t\t\t\t\t\t/* *\r\n\t\t\t\t\t\t\t\t * getter\r\n\t\t\t\t\t\t\t\t * <pre>\r\n\t\t\t\t\t\t\t\t * returns true if <b>dat</b> was converted by <b>new Dat( options );</b>\r\n\t\t\t\t\t\t\t\t * </pre>\r\n\t\t\t\t\t\t\t\t **/\r\n\t\t\t\t\t\t\t\tboDat: {\r\n\r\n\t\t\t\t\t\t\t\t\tget: function () { return true; },\r\n\r\n\t\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\t\t/* *\r\n\t\t\t\t\t\t\t\t * getter and setter\r\n\t\t\t\t\t\t\t\t * <pre>\r\n\t\t\t\t\t\t\t\t * [dat]{@link https://github.com/dataarts/dat.gui}\r\n\t\t\t\t\t\t\t\t * </pre>\r\n\t\t\t\t\t\t\t\t **/\r\n\t\t\t\t\t\t\t\tdat: {\r\n\r\n\t\t\t\t\t\t\t\t\tget: function () {\r\n\r\n\t\t\t\t\t\t\t\t\t\tconsole.warn('get dat depreacated. Use three.dat = dat.');\r\n\t\t\t\t\t\t\t\t\t\treturn three.dat;\r\n//\t\t\t\t\t\t\t\t\t\treturn dat.dat;\r\n\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tset: function ( dat ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tconsole.warn('Set dat depreacated. Use three.dat = dat.');\r\n\t\t\t\t\t\t\t\t\t\tif (\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tdat.dat &&\r\n\t\t\t\t\t\t\t\t\t\t\t( dat.dat.constructor.name === dat.constructor.name ) &&\r\n\t\t\t\t\t\t\t\t\t\t\t( dat.dat.constructor.name !== 'Object' )\r\n\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.error( 'duplicate dat.' );\r\n\t\t\t\t\t\t\t\t\t\tdat.dat = dat;\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\t\t/* *\r\n\t\t\t\t\t\t\t\t * getter\r\n\t\t\t\t\t\t\t\t * <pre>\r\n\t\t\t\t\t\t\t\t * Name of the cookie.\r\n\t\t\t\t\t\t\t\t * </pre>\r\n\t\t\t\t\t\t\t\t **/\r\n\t\t\t\t\t\t\t\tcookieName : {\r\n\r\n\t\t\t\t\t\t\t\t\tget: function () { return dat.cookieName ; },\r\n\r\n\t\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\t\t/* *\r\n\t\t\t\t\t\t\t\t * getter\r\n\t\t\t\t\t\t\t\t * <pre>\r\n\t\t\t\t\t\t\t\t * [dat.GUI()]{@link https://github.com/dataarts/dat.gui} instance.\r\n\t\t\t\t\t\t\t\t * </pre>\r\n\t\t\t\t\t\t\t\t **/\r\n\t\t\t\t\t\t\t\tgui: {\r\n\r\n\t\t\t\t\t\t\t\t\tget: function () {\r\n\r\n\t\t\t\t\t\t\t\t\t\tif ( !dat.gui && three.dat ) dat.gui = new three.dat.GUI();\r\n\t\t\t\t\t\t\t\t\t\treturn dat.gui;\r\n\r\n\t\t\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcookie: {\r\n\r\n\t\t\t\t\t\t\t\t\tget: function () { return dat.cookie; },\r\n\t\t\t\t\t\t\t\t\tset: function ( cookie ) { dat.cookie = cookie; },\r\n\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tguiSelectPoint: {\r\n\r\n\t\t\t\t\t\t\t\t\tget: function () { return dat.guiSelectPoint; },\r\n\t\t\t\t\t\t\t\t\tset: function ( guiSelectPoint ) { dat.guiSelectPoint = guiSelectPoint; },\r\n\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tcameraGui: {\r\n\r\n\t\t\t\t\t\t\t\t\tget: function () { return dat.cameraGui; },\r\n\t\t\t\t\t\t\t\t\tset: function ( cameraGui ) { dat.cameraGui = cameraGui; },\r\n\r\n\t\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\t\t//For debugging. Find a hidden keys\r\n\t\t\t\t\t\t\tfor ( var propertyName in dat ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( this[propertyName] === undefined ) console.error( 'Dat: dat.' + propertyName + ' key is hidden' );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\toptions.dat = new Dat( options.dat );\r\n//\t\t\t\t\toptions.dat.gui = options.dat.gui || new dat.GUI();\r\n//\t\t\t\t\tif ( !options.dat.gui && options.dat.dat ) options.dat.gui = new options.dat.dat.GUI();\r\n\t\t\t\t\tif ( options.dat.gui ) {\r\n\r\n\t\t\t\t\t\tconst className = options.dat.gui.domElement.className;\r\n\t\t\t\t\t\tvar guiCount = 0;\r\n\t\t\t\t\t\toptions.dat.gui.domElement.parentElement.childNodes.forEach( function ( node ) {\r\n\r\n\t\t\t\t\t\t\tif ( node.className === className ) guiCount++;\r\n\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t\tif ( guiCount > 1 )\r\n\t\t\t\t\t\t\tconsole.error( 'Options: duplicate dat.GUI' );\r\n\r\n\t\t\t\t\t\toptions.dat.gui.domElement.addEventListener( 'mouseenter', function ( event ) { options.dat.mouseenter = true; } );\r\n\t\t\t\t\t\toptions.dat.gui.domElement.addEventListener( 'mouseleave', function ( event ) { options.dat.mouseenter = false; } );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( options.dat.cookie === false ) options.dat.cookie = new Cookie.defaultCookie();\r\n\t\t\t\t\telse if ( options.dat.cookie === undefined ) options.dat.cookie = cookie;\r\n//\t\t\t\t\toptions.dat.cookie = options.dat.cookie !== false ? cookie : new Cookie.defaultCookie();\r\n\t\t\t\t\toptions.dat.getCookieName = function ( cookieName = '' ) {\r\n\r\n\t\t\t\t\t\tconst name = options.dat.cookieName ||\r\n\t\t\t\t\t\t\t( options.elContainer ?\r\n\t\t\t\t\t\t\t\ttypeof options.elContainer === \"object\" ?\r\n\t\t\t\t\t\t\t\t\toptions.elContainer.id :\r\n\t\t\t\t\t\t\t\t\ttypeof options.elContainer === \"string\" ?\r\n\t\t\t\t\t\t\t\t\t\toptions.elContainer :\r\n\t\t\t\t\t\t\t\t\t\t'' :\r\n\t\t\t\t\t\t\t\t'' );\r\n\t\t\t\t\t\treturn cookieName + ( ( cookieName !== '' ) && ( name !== '' ) ? '_' : '' ) + name;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//axesHelperGui: false,\r\n\t\t\t\t\t//playerGui: false,\r\n\t\t\t\t\t//guiSelectPoint: false,\r\n\t\t\t\t\t//moveScene: false,\r\n\t\t\t\t\t//cameraGui: false,\r\n\t\t\t\t\t//stereoEffectsGui: false,\r\n\t\t\t\t\t//spriteTextGui: false,\r\n\t\t\t\t\t//folderPoint: false,\r\n\t\t\t\t\treturn options.dat;\r\n\r\n\t\t\t\t},\r\n\t\t\t\tset: function ( dat ) { options.dat = dat; },\r\n/*\r\n\t\t\t\tcookieName: {\r\n\r\n\t\t\t\t\tget: function ( cookieName = '' ) {\r\n\r\n\t\t\t\t\t\tconst name = options.dat.cookieName ||\r\n\t\t\t\t\t\t\t( options.elContainer ?\r\n\t\t\t\t\t\t\t\ttypeof options.elContainer === \"object\" ?\r\n\t\t\t\t\t\t\t\t\toptions.elContainer.id :\r\n\t\t\t\t\t\t\t\t\ttypeof options.elContainer === \"string\" ?\r\n\t\t\t\t\t\t\t\t\t\toptions.elContainer :\r\n\t\t\t\t\t\t\t\t\t\t'' :\r\n\t\t\t\t\t\t\t\t'' );\r\n\t\t\t\t\t\treturn cookieName + ( ( cookieName !== '' ) && ( name !== '' ) ? '_' : '' ) + name;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n*/\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter\r\n\t\t\t * <pre>\r\n\t\t\t * Your custom getLanguageCode() function.\r\n\t\t\t * returns the \"primary language\" subtag of the language version of the browser.\r\n\t\t\t * Examples: \"en\" - English language, \"ru\" Russian.\r\n\t\t\t * See the \"Syntax\" paragraph of RFC 4646 {@link https://tools.ietf.org/html/rfc4646#section-2.1|rfc4646 2.1 Syntax} for details.\r\n\t\t\t * Default returns the language code of your browser.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\tgetLanguageCode: {\r\n\r\n\t\t\t\tget: function () {\r\n\r\n\t\t\t\t\tif ( typeof options.getLanguageCode === \"string\" )\r\n\t\t\t\t\t\treturn function () {\r\n\r\n/*\r\n\t\t\t\t\t\t\tif ( !this || !this.options )\r\n\t\t\t\t\t\t\t\treturn 'en';//English language\r\n*/\r\n\t\t\t\t\t\t\treturn options.getLanguageCode;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\treturn options.getLanguageCode || getLanguageCode;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter and setter\r\n\t\t\t * <pre>\r\n\t\t\t * See <b>options.scales</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\tscales: {\r\n\r\n\t\t\t\tget: function () { return options.scales; },\r\n\t\t\t\tset: function ( scales ) { options.scales = scales; }\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter\r\n\t\t\t * <pre>\r\n\t\t\t * Points olor.\r\n\t\t\t * See <b>options.palette</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\tpalette: {\r\n\r\n\t\t\t\tget: function () {\r\n\r\n\t\t\t\t\tif ( options.palette !== undefined ) {\r\n\r\n\t\t\t\t\t\tswitch ( typeof options.palette ) {\r\n\r\n\t\t\t\t\t\t\tcase 'number':\r\n\t\t\t\t\t\t\t\toptions.palette = new ColorPicker.palette( { palette: options.palette } );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'boolean':\r\n\t\t\t\t\t\t\t\tif ( options.palette )\r\n\t\t\t\t\t\t\t\t\toptions.palette = new ColorPicker.palette();// { palette: ColorPicker.paletteIndexes.BGRW } );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tdefault: {\r\n\r\n\t\t\t\t\t\t\t\tif ( options.palette instanceof ColorPicker.palette === false )\r\n\t\t\t\t\t\t\t\t\tconsole.error( 'MyThree: invalid typeof options.palette: ' + typeof options.palette );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn options.palette;\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter\r\n\t\t\t * <pre>\r\n\t\t\t * returns true if <b>options</b> was converted by <b>new Options( options );</b>\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\tboOptions: {\r\n\r\n\t\t\t\tget: function () { return true;/*options.boOptions;*/ },\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter\r\n\t\t\t * <pre>\r\n\t\t\t * returns {\r\n\t\t\t *\r\n\t\t\t * \tsize = 5.0; point size\r\n\t\t\t * \tsizePointsMaterial = 100.0; The <b>size</b> property of the parameters of the [THREE.PointsMaterial]{@link https://threejs.org/docs/index.html?q=PointsMaterial#api/en/materials/PointsMaterial}.\r\n\t\t\t *\r\n\t\t\t * }\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\tpoint: {\r\n\r\n\t\t\t\tget: function () { return options.point; },\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter\r\n\t\t\t * <pre>\r\n\t\t\t * Followed [raycaster]{@link https://threejs.org/docs/index.html#api/en/core/Raycaster} options is available.\r\n\t\t\t * See <b>settings.options.raycaster</b> parameter of the <a href=\"../../MyPoints/jsdoc/module-MyPoints.html\" target=\"_blank\">MyPoints</a>.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\traycaster: {\r\n\r\n\t\t\t\tget: function () { return options.raycaster; }\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter and setter\r\n\t\t\t * <pre>\r\n\t\t\t * [PerspectiveCamera]{@link https://threejs.org/docs/index.html#api/en/cameras/PerspectiveCamera}.\r\n\t\t\t * See <b>options.camera</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\tcamera: {\r\n\r\n\t\t\t\tget: function () {\r\n\r\n\t\t\t\t\toptions.camera = options.camera || {};\r\n/*\t\t\t\t\t\r\n\t\t\t\t\toptions.camera.position = options.camera.position || new three.THREE.Vector3( 0.4, 0.4, 2 );\r\n\t\t\t\t\toptions.camera.scale = options.camera.scale || new three.THREE.Vector3( 1, 1, 1 );\r\n*/\t\t\t\t\t\r\n\t\t\t\t\tif ( !options.camera.position ) options.camera.position = new three.THREE.Vector3( 0.4, 0.4, 2 );\r\n\t\t\t\t\tif ( !options.camera.scale ) options.camera.scale = new three.THREE.Vector3( 1, 1, 1 );\r\n\t\t\t\t\treturn options.camera;\r\n\r\n\t\t\t\t},\r\n\t\t\t\tset: function ( camera ) { options.camera = camera; }\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter\r\n\t\t\t * <pre>\r\n\t\t\t * Camera looking at selected point during playing. See the <b>cameraTarget</b> parameter of the <a href=\"../../player/jsdoc/module-Player-Player.cameraTarget.html#init\" target=\"_blank\">Player.cameraTarget.init(...)</a> function for details.\r\n\t\t\t * See <b>options.cameraTarget</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\tcameraTarget: {\r\n\r\n\t\t\t\tget: function () { return options.cameraTarget; },\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter\r\n\t\t\t * <pre>\r\n\t\t\t * The <b>HTMLElement</b>, contains a <b>canvas</b>.\r\n\t\t\t * See <b>options.elContainer</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\telContainer: {\r\n\r\n\t\t\t\tget: function () { return options.elContainer; },\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter and setter\r\n\t\t\t * <pre>\r\n\t\t\t * true - use my <a href=\"../../canvasMenu/jsdoc/index.html\" target=\"_blank\">dropdown menu for canvas</a> in my version of [dat.gui]{@link https://github.com/anhr/dat.gui}.\r\n\t\t\t * See <b>options.canvasMenu</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\tcanvasMenu: {\r\n\r\n\t\t\t\tget: function () { return options.canvasMenu; },\r\n\t\t\t\tset: function ( canvasMenu ) {\r\n\r\n\t\t\t\t\tif ( options.canvasMenu && ( options.canvasMenu !== true ) && ( options.canvasMenu !== false ) ) console.warn( 'Duplicate canvasMenu' );\r\n\t\t\t\t\toptions.canvasMenu = canvasMenu;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter\r\n\t\t\t * <pre>\r\n\t\t\t * <b>canvas</b> properties.\r\n\t\t\t * See <b>options.canvas</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\tcanvas: {\r\n\r\n\t\t\t\tget: function () { return options.canvas; },\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter and setter\r\n\t\t\t * <pre>\r\n\t\t\t * Creates a <a href=\"../../frustumPoints/jsdoc/index.html\" target=\"_blank\">FrustumPoints</a> instance.\r\n\t\t\t * See <b>options.frustumPoints</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\tfrustumPoints: {\r\n\r\n\t\t\t\tget: function () { return options.frustumPoints; },\r\n\t\t\t\tset: function ( frustumPoints ) {\r\n\r\n\t\t\t\t\tif (\r\n\r\n\t\t\t\t\t\toptions.frustumPoints &&\r\n\t\t\t\t\t\t( options.frustumPoints.constructor.name === frustumPoints.constructor.name ) &&\r\n\t\t\t\t\t\t( options.frustumPoints.constructor.name !== 'Object' )\r\n\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\tconsole.error( 'duplicate frustumPoints.' );\r\n\t\t\t\t\toptions.frustumPoints = frustumPoints;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter and setter\r\n\t\t\t * <pre>\r\n\t\t\t * Use <a href=\"../../StereoEffect/jsdoc/index.html\" target=\"_blank\">StereoEffect</a>.\r\n\t\t\t * See <b>options.stereoEffect</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\tstereoEffect: {\r\n\r\n\t\t\t\tget: function () { return options.stereoEffect; },\r\n\t\t\t\tset: function ( stereoEffect ) {\r\n\r\n\t\t\t\t\tif (\r\n\r\n\t\t\t\t\t\toptions.stereoEffect &&\r\n\t\t\t\t\t\t( options.stereoEffect.constructor.name === stereoEffect.constructor.name ) &&\r\n\t\t\t\t\t\t( options.stereoEffect.constructor.name !== 'Object' )\r\n\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\tconsole.error( 'duplicate stereoEffect.' );\r\n\t\t\t\t\toptions.stereoEffect = stereoEffect;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter and setter\r\n\t\t\t * <pre>\r\n\t\t\t * Use <a href=\"../../player/jsdoc/index.html\" target=\"_blank\">Player</a>.\r\n\t\t\t * See <b>options.player</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\tplayer: {\r\n\r\n\t\t\t\tget: function () { return options.player; },\r\n\t\t\t\tset: function ( player ) {\r\n\r\n\t\t\t\t\tif ( options.player ) console.error( 'duplicate player.' );\r\n\t\t\t\t\toptions.player = player;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter and setter\r\n\t\t\t * <pre>\r\n\t\t\t * Use <a href=\"../../axesHelper/jsdoc/index.html\" target=\"_blank\">AxesHelper</a>.\r\n\t\t\t * See <b>options.axesHelper</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\taxesHelper: {\r\n\r\n\t\t\t\tget: function () { return options.axesHelper; },\r\n\t\t\t\tset: function ( axesHelper ) {\r\n\r\n\t\t\t\t\tif ( options.axesHelper ) console.error( 'duplicate axesHelper.' );\r\n\t\t\t\t\toptions.axesHelper = axesHelper;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter and setter\r\n\t\t\t * <pre>\r\n\t\t\t * Use <a href=\"../../canvasMenu/jsdoc/index.html\" target=\"_blank\">CanvasMenu</a>.\r\n\t\t\t * See <b>options.canvasMenu</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\tcanvasMenu: {\r\n\r\n\t\t\t\tget: function () { return options.canvasMenu; },\r\n\t\t\t\tset: function ( canvasMenu ) {\r\n\r\n\t\t\t\t\tif ( options.canvasMenu ) console.error( 'duplicate canvasMenu.' );\r\n\t\t\t\t\toptions.canvasMenu = canvasMenu;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter and setter\r\n\t\t\t * <pre>\r\n\t\t\t * Use [OrbitControls]{@link https://threejs.org/docs/index.html?q=orb#examples/en/controls/OrbitControls}.\r\n\t\t\t * See <b>options.orbitControls</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\torbitControls: {\r\n\r\n\t\t\t\tget: function () { return options.orbitControls; },\r\n\t\t\t\tset: function ( orbitControls ) {\r\n\r\n\t\t\t\t\tif (\r\n\r\n\t\t\t\t\t\toptions.orbitControls &&\r\n\t\t\t\t\t\t( options.orbitControls.constructor.name === orbitControls.constructor.name ) &&\r\n\t\t\t\t\t\t( options.orbitControls.constructor.name !== 'Object' )\r\n\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\tconsole.error( 'duplicate orbitControls.' );\r\n\t\t\t\t\toptions.orbitControls = orbitControls;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter returns 1\r\n\t\t\t **/\r\n\t\t\tscale: {\r\n\r\n\t\t\t\tget: function () { return 1; },\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter\r\n\t\t\t * <pre>\r\n\t\t\t * Use <a href=\"../../jsdoc/pointLight/index.html\" target=\"_blank\">pointLight</a>.\r\n\t\t\t * See <b>options.pointLight</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\tpointLight: {\r\n\r\n\t\t\t\tget: function () { return options.pointLight; },\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * getter\r\n\t\t\t * <pre>\r\n\t\t\t * <a href=\"../../player/jsdoc/module-Player-Player.cameraTarget.html\" target=\"_blank\">Player.cameraTarget</a> class instance. Functions for camera for looking at selected point.\r\n\t\t\t * </pre>\r\n\t\t\t **/\r\n\t\t\tcameraTarget: {\r\n\r\n\t\t\t\tget: function () { return options.cameraTarget; },\r\n\r\n\t\t\t},\r\n\r\n\t\t} );\r\n\r\n\t\t//For debugging. Find a hidden keys\r\n\t\tfor( var propertyName in options ) {\r\n\r\n\t\t   if ( this[propertyName] === undefined ) console.error( 'Options: options.' + propertyName + ' key is hidden' );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} \r\nexport default Options;","/**\r\n * @module Player\r\n * @description 3D objects animation.\r\n * @author [Andrej Hristoliubov]{@link https://anhr.github.io/AboutMe/}\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\n//import cookie from '../cookieNodeJS/cookie.js';\r\n//import cookie from 'https://raw.githack.com/anhr/commonNodeJS/master/cookieNodeJS/cookie.js';\r\n\r\nimport ScaleController from '../ScaleController.js';\r\nimport PositionController from '../PositionController.js';\r\n//import { dat } from '../dat/dat.module.js';\r\nimport { controllers } from '../dat.gui/CustomController/build/dat.gui.module.js';\r\n\r\n//import GuiSelectPoint from '../guiSelectPoint/guiSelectPoint.js';\r\n//import { GuiSelectPoint, getObjectPosition } from '../guiSelectPoint/guiSelectPoint.js';\r\n//import { GuiSelectPoint, getObjectPosition } from 'https://raw.githack.com/anhr/commonNodeJS/master/guiSelectPoint/guiSelectPoint.js';\r\n\r\n//import ColorPicker from '../colorpicker/colorpicker.js';\r\n//import ColorPicker from 'https://raw.githack.com/anhr/commonNodeJS/master/colorpicker/colorpicker.js';\r\n\r\n//import { lang } from '../controllerPlay/index.js';\r\n\r\n//import Cookie from '../cookieNodeJS/cookie.js';\r\n//import Cookie from 'https://raw.githack.com/anhr/cookieNodeJS/master/cookie.js';\r\n//import Cookie from 'https://raw.githack.com/anhr/commonNodeJS/master/cookieNodeJS/cookie.js';\r\n\r\n//import { getWorldPosition } from '../guiSelectPoint/guiSelectPoint.js';\r\nimport { getWorldPosition } from '../getPosition.js';\r\n//getPositionSetTHREE( THREE );\r\n\r\nimport three from '../three.js'\r\n//import setOptions from '../setOptions.js'\r\nimport Options from '../Options.js'\r\n\r\n//var _timeSettings,\r\n\r\n\t//        getShaderMaterialPoints  Player.selectMeshPlayScene\r\n\t//    . ..     .\r\n\t//   getShaderMaterialPoints      getShaderMaterialPoints     \r\n\t//    Shader .    setTimeout( function () { onSelectScene(); }, 0 );\r\n\t//         ,   getShaderMaterialPoints       .\r\n\t//     getShaderMaterialPoints   'ca'   'color'.\r\n//\tvar _options;\r\n\r\n/**\r\n * @callback onSelectScene\r\n * @description This function is called at each new step of the playing. See <b>settings.onSelectScene</b> parameter of the <a href=\"../../player/jsdoc/module-Player-Player.html\" target=\"_blank\">Player</a> class.\r\n * @param {number} index current index of the scene of the animation\r\n * @param {number} t current time\r\n */\r\n\r\n/**\r\n * @callback onChangeScaleT\r\n * @description User has updated the time settings. See <b>settings.onChangeScaleT</b> parameter of the <a href=\"../../player/jsdoc/module-Player-Player.html\" target=\"_blank\">Player</a> class.\r\n * @param {object} scale the updated time settings\r\n */\r\n\r\nclass Player {\r\n\r\n\t/**\r\n\t * 3D objects animation.\r\n\t * @class\r\n\t * @param {THREE.Group|THREE.Scene} group [THREE.Group]{@link https://threejs.org/docs/index.html?q=group#api/en/objects/Group} or [THREE.Scene]{@link https://threejs.org/docs/index.html?q=sce#api/en/scenes/Scene} of the meshes for playing.\r\n\t * @param {Object} [settings={}] the following settings are available\r\n\t * \r\n\t * @param {Options} [settings.options=new Options()] <a href=\"../../jsdoc/Options/Options.html\" target=\"_blank\">Options</a> instance. The following options are available.\r\n\t * See <b>options</b> parameter of <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t * @param {boolean} [settings.options.dat.playerGui] false - do not adds a <a href=\"../../player/jsdoc/module-Player-Player.html#gui\" target=\"_blank\">Player controllers</a> into [dat.gui]{@link https://github.com/dataarts/dat.gui}.\r\n\t * @param {boolean} [settings.options.dat.playController] false - do not adds a <a href=\"../../player/jsdoc/module-Player-Player_PlayController_PlayController.html\" target=\"_blank\">PlayController</a> into [dat.gui]{@link https://github.com/dataarts/dat.gui}.\r\n\t * @param {Object} [settings.options.playerOptions] Player settings.\r\n\t * @param {number} [settings.options.playerOptions.min=0] Minimum range of the axis.\r\n\t * @param {number} [settings.options.playerOptions.max=1] Maximum range of the axis.\r\n\t * @param {number} [settings.options.playerOptions.marks=10] Ticks count of the playing. Number of scenes of 3D objects animation.\r\n\t * Have effect for <b>max</b> is not Infinity.\r\n\t * @param {number} [settings.options.playerOptions.dt=0.1] Step of the animation. Have effect only if <b>max</b> is infinity.\r\n\t * @param {boolean} [settings.options.playerOptions.repeat=false] true - Infinitely repeating 3D objects animation.\r\n\t * @param {number} [settings.options.playerOptions.interval=1] Ticks per seconds.\r\n\t * @param {number} [settings.options.playerOptions.zoomMultiplier=1.1] zoom multiplier of the time.\r\n\t * @param {number} [settings.options.playerOptions.offset=0.1] offset of the time.\r\n\t * @param {number} [settings.options.playerOptions.name=\"\"] name of the time.\r\n\t * @param {boolean} [settings.options.player] false - do not create a <b>Player</b> instance.\r\n\t *\r\n\t * @param {onSelectScene} [settings.onSelectScene] This function is called at each new step of the playing. See <a href=\"../../player/jsdoc/module-Player.html#~onSelectScene\" target=\"_blank\">onSelectScene</a>.\r\n\t * @param {onChangeScaleT} [settings.onChangeScaleT] event. User has updated the time settings. See <a href=\"../../player/jsdoc/module-Player.html#~onChangeScaleT\" target=\"_blank\">onChangeScaleT</a>.\r\n\t * @param {FrustumPoints} [settings.frustumPoints] See <a href=\"../../frustumPoints/jsdoc/index.html\" target=\"_blank\">FrustumPoints</a>.\r\n\t * Have effect only if <b>settings.options</b> is not defined.\r\n\t * @param {THREE.PerspectiveCamera} settings.cameraTarget.camera [PerspectiveCamera]{@link https://threejs.org/docs/index.html#api/en/cameras/PerspectiveCamera}.\r\n\t */\r\n\tconstructor( group, settings={} ) {\r\n\r\n\t\tassign();\r\n/*\r\n\t\tif ( Player.isCreated() ) {\r\n\r\n\t\t\tconsole.error( 'Player: duplicate player.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n*/\r\n//\t\tsettings = settings || {};\r\n\r\n\t\tif ( !settings.options && settings.frustumPoints ) settings.options = settings.frustumPoints.getOptions();\r\n\t\tsettings.options = settings.options || new Options();\r\n\t\tconst options = settings.options;\r\n\t\tif ( !options.boOptions ) {\r\n\r\n\t\t\tconsole.error( 'Player: call options = new Options( options ) first' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n/*\r\n\t\tif ( options.playerOptions && settings.playerOptions ) {\r\n\r\n\t\t\tconsole.warn( 'Player: Duplicate options of the player. Sets priority of the options of the current player.' );\r\n\t\t\toptions.playerOptions = settings.playerOptions;//    \r\n\r\n\t\t}\r\n\t\toptions.playerOptions = options.playerOptions || settings.playerOptions;\r\n//\t\tsetOptions.setPlayerOptions( options );\r\n//\t\toptions.setPlayerOptions();\r\n\t\tsettings.playerOptions = options.playerOptions;\r\n*/\r\n\r\n//\t\tif ( options.playerOptions === false ) return;\r\n\t\tif ( options.player === false ) return;\r\n\r\n//Deprecated\r\nPlayer.player = this;\r\n\r\n\t\toptions.boPlayer = options.boPlayer || false;\r\n\r\n/*\r\n\t\toptions.a = settings.a || 1;\r\n\t\toptions.b = settings.b || 0;\r\n*/\t\t\r\n\r\n\t\t//           \r\n\t\t//palette = new palette();\r\n\r\n//\t\tassignSettings();\r\n\r\n\t\tif ( options.player ) {\r\n\r\n\t\t\tconsole.error( 'Player: duplicate player.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\t\toptions.player = this;\r\n\r\n\t\tsettings.cameraTarget = settings.cameraTarget || {};\r\n\r\n\t\t/**\r\n\t\t * @description This function is called at each new step of the playing.\r\n\t\t * @param {number} [index=0] current index of the scene of the animation\r\n\t\t */\r\n\t\tfunction onSelectScene( index ) {\r\n\r\n\t\t\tindex = index || 0;\r\n\t\t\tconst t = _this.getTime();\r\n\t\t\tPlayer.selectPlayScene( group, { t: t, index: index, options: settings.options } );\r\n//\t\t\t_this.setIndex( index, ( _timeSettings.name === '' ? '' : _timeSettings.name + ': ' ) + t );\r\n\t\t\t_this.setIndex( index, ( options.playerOptions.name === '' ? '' : options.playerOptions.name + ': ' ) + t );\r\n\t\t\tif ( settings.onSelectScene ) settings.onSelectScene( index, t );\r\n\t\t\tif ( options.frustumPoints ) options.frustumPoints.updateCloudPoints();\r\n\r\n\t\t}\r\n\r\n\t\t//    color attribute             \r\n\t\t//      \r\n\t\tsetTimeout( function () { onSelectScene(); }, 0 );\r\n\r\n\t\tvar selectSceneIndex = 0;\r\n\t\tconst _this = this;\r\n\r\n\t\t/**\r\n\t\t * get time\r\n\t\t */\r\n\t\tthis.getTime = function () {\r\n\r\n\t\t\tconst playerOptions = options.playerOptions, t = playerOptions.min + selectSceneIndex * playerOptions.dt;\r\n\t\t\tif ( isNaN( t ) ) console.error( 'Player.getTime(): t = ' + t );\r\n\t\t\tif ( ( playerOptions.max !== null ) && ( t > playerOptions.max ) )\r\n\t\t\t\tconsole.error( 'Player.getTime(): t = ' + t + ' playerOptions.max = ' + playerOptions.max );\r\n\t\t\tif ( ( t < playerOptions.min ) && ( playerOptions.max !== null ) )\r\n\t\t\t\tconsole.error( 'Player.getTime(): t = ' + t + ' playerOptions.min = ' + playerOptions.min );\r\n/*\r\n\t\t\tconst t = _timeSettings.min + selectSceneIndex * _timeSettings.dt;\r\n\t\t\tif ( isNaN( t ) ) console.error( 'Player.getTime(): t = ' + t );\r\n\t\t\tif ( ( _timeSettings.max !== null ) && ( t > _timeSettings.max ) )\r\n\t\t\t\tconsole.error( 'Player.getTime(): t = ' + t + ' _timeSettings.max = ' + _timeSettings.max );\r\n\t\t\tif ( ( t < _timeSettings.min ) && ( _timeSettings.max !== null ) )\r\n\t\t\t\tconsole.error( 'Player.getTime(): t = ' + t + ' _timeSettings.min = ' + _timeSettings.min );\r\n*/\r\n\t\t\treturn t;\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * set time\r\n\t\t * @param {number} t time\r\n\t\t */\r\n\t\tthis.setTime = function ( t ) {\r\n\r\n//\t\t\tthis.selectScene( parseInt( ( t - _timeSettings.min ) / _timeSettings.dt ) );\r\n\t\t\tthis.selectScene( parseInt( ( t - options.playerOptions.min ) / options.playerOptions.dt ) );\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * select scene for playing\r\n\t\t * @param {number} index Index of the scene. Range from 0 to options.playerOptions.marks - 1\r\n\t\t */\r\n\t\tthis.selectScene = function ( index ) {\r\n\r\n\t\t\tif ( index === undefined ) {\r\n\r\n\t\t\t\tonSelectScene( selectSceneIndex );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\t\t\tindex = parseInt( index );\r\n//\t\t\tif ( _timeSettings.max !== null )\r\n\t\t\tif ( options.playerOptions.max !== null ) {\r\n\r\n//\t\t\t\tif ( index >= _timeSettings.marks )\r\n\t\t\t\tif ( index >= options.playerOptions.marks )\r\n\t\t\t\t\tindex = 0;\r\n\t\t\t\telse if ( index < 0 )\r\n\t\t\t\t\tindex = options.playerOptions.marks - 1;\r\n//\t\t\t\t\tindex = _timeSettings.marks - 1;\r\n/*\t\t\t\t\t\r\n\t\t\t\tif ( selectSceneIndex > _timeSettings.marks )\r\n\t\t\t\t\tselectSceneIndex = _timeSettings.marks;\r\n*/\t\t\t\t\t\r\n\t\t\t\tif ( selectSceneIndex > options.playerOptions.marks )\r\n\t\t\t\t\tselectSceneIndex = options.playerOptions.marks;\r\n\r\n\t\t\t}\r\n\t\t\twhile ( selectSceneIndex !== index ) {\r\n\r\n\t\t\t\tif ( selectSceneIndex < index )\r\n\t\t\t\t\tselectSceneIndex++;\r\n\t\t\t\telse selectSceneIndex--;\r\n\t\t\t\tonSelectScene( selectSceneIndex );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Go to next object 3D\r\n\t\t */\r\n\t\tthis.next = function () {\r\n\r\n\t\t\t_this.selectScene( selectSceneIndex + 1 );\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Go to previous object 3D\r\n\t\t */\r\n\t\tthis.prev = function () {\r\n\r\n\t\t\t_this.selectScene( selectSceneIndex - 1 );\r\n\r\n\t\t}\r\n\t\t/**\r\n\t\t * Add controller into controllers array\r\n\t\t * @param {controller} controller\r\n\t\t */\r\n\t\tthis.pushController = function ( controller ) {\r\n\r\n\t\t\tif ( ( controller.object !== undefined ) && ( controller.object.playRate !== undefined ) )\r\n\t\t\t\tcontroller.object.playRate = options.playerOptions.min;\r\n//\t\t\t\tcontroller.object.playRate = _timeSettings.min;\r\n\t\t\tthis.controllers.push( controller );\r\n\r\n\t\t}\r\n\r\n\t\t//Play/Pause\r\n\r\n\t\tthis.controllers = [];\r\n\t\tvar playing = false, time, timeNext;\r\n\r\n\t\tfunction RenamePlayButtons() {\r\n\r\n//\t\t\tPlayer.player.controllers.forEach( function ( controller ) { if ( controller.onRenamePlayButtons ) controller.onRenamePlayButtons( playing ); } );\r\n\t\t\toptions.player.controllers.forEach( function ( controller ) { if ( controller.onRenamePlayButtons ) controller.onRenamePlayButtons( playing ); } );\r\n\r\n\t\t}\r\n\r\n\t\tfunction play() {\r\n\r\n//\t\t\tif ( ( selectSceneIndex === -1 ) || ( ( selectSceneIndex === _timeSettings.marks ) && ( _timeSettings.max !== null ) ) )\r\n\t\t\tif (\r\n\t\t\t\t( selectSceneIndex === -1 ) ||\r\n\t\t\t\t(\r\n\t\t\t\t\t( selectSceneIndex === options.playerOptions.marks ) &&\r\n\t\t\t\t\t( options.playerOptions.max !== null )\r\n\t\t\t\t)\r\n\t\t\t) {\r\n\r\n\t\t\t\tselectSceneIndex = 0;\r\n\r\n\t\t\t}\r\n\t\t\tonSelectScene( selectSceneIndex );\r\n\r\n\t\t}\r\n\r\n\t\tfunction pause() {\r\n\r\n\t\t\tplaying = false;\r\n\t\t\tRenamePlayButtons();\r\n\r\n\t\t\ttime = undefined;\r\n\r\n\t\t}\r\n\t\tfunction isRepeat() {\r\n\r\n//\t\t\treturn _timeSettings.repeat;\r\n\t\t\treturn options.playerOptions.repeat;\r\n\r\n\t\t}\r\n\r\n\t\tfunction playNext() {\r\n\r\n\t\t\tselectSceneIndex++;\r\n//\t\t\tif ( ( _timeSettings.max !== null ) && selectSceneIndex >= _timeSettings.marks )\r\n\t\t\tif ( ( options.playerOptions.max !== null ) && selectSceneIndex >= options.playerOptions.marks ) {\r\n\r\n\t\t\t\tif ( isRepeat() )\r\n\t\t\t\t\tselectSceneIndex = 0;\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\t//     :\r\n\t\t\t\t\t//1.           \r\n\t\t\t\t\t//2.  guiSelectPoint  ,     \r\n\t\t\t\t\t//    ,  selectSceneIndex       \r\n\t\t\t\t\t//    \r\n\t\t\t\t\tselectSceneIndex = options.playerOptions.marks - 1;\r\n//\t\t\t\t\tselectSceneIndex = _timeSettings.marks - 1;\r\n\r\n\t\t\t\t\tpause();\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tplay();\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * User has clicked the Play  / Pause  button\r\n\t\t */\r\n\t\tthis.play3DObject = function () {\r\n\r\n\t\t\tif ( playing ) {\r\n\r\n\t\t\t\tpause();\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tplaying = true;\r\n//\t\t\tif ( ( _timeSettings.max !== null ) && ( selectSceneIndex >= ( _timeSettings.marks - 1 ) ) )\r\n\t\t\tif ( ( options.playerOptions.max !== null ) && ( selectSceneIndex >= ( options.playerOptions.marks - 1 ) ) )\r\n\t\t\t\tselectSceneIndex = 0;//-1;\r\n\t\t\tplayNext();\r\n\t\t\tRenamePlayButtons();\r\n\r\n\t\t\tfunction step( timestamp ) {\r\n\r\n\t\t\t\tif ( playing )\r\n\t\t\t\t\twindow.requestAnimationFrame( step );\r\n\t\t\t\telse time = undefined;\r\n\r\n\t\t\t\tif ( time === undefined ) {\r\n\r\n\t\t\t\t\ttime = timestamp;\r\n//\t\t\t\t\ttimeNext = time + 1000 / _timeSettings.interval;\r\n\t\t\t\t\ttimeNext = time + 1000 / options.playerOptions.interval;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( isNaN( timeNext ) || ( timeNext === Infinity ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'Player.animate: timeNext = ' + timeNext );\r\n\t\t\t\t\tplaying = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( timestamp < timeNext )\r\n\t\t\t\t\treturn;\r\n\t\t\t\twhile ( timestamp > timeNext )\r\n\t\t\t\t\ttimeNext += 1000 / options.playerOptions.interval;\r\n//\t\t\t\t\ttimeNext += 1000 / _timeSettings.interval;\r\n\t\t\t\tplayNext();\r\n\r\n\t\t\t}\r\n\t\t\twindow.requestAnimationFrame( step );\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * User has clicked the repeat  button\r\n\t\t */\r\n\t\tthis.repeat = function () {\r\n\r\n\t\t\toptions.playerOptions.repeat = !options.playerOptions.repeat;\r\n\t\t\tthis.onChangeRepeat( options.playerOptions.repeat );\r\n/*\r\n\t\t\t_timeSettings.repeat = !_timeSettings.repeat;\r\n\t\t\tthis.onChangeRepeat( _timeSettings.repeat );\r\n*/\t\t\t\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * @returns Player settings.\r\n\t\t */\r\n\t\tthis.getSettings = function () { return settings; }\r\n\t\t/**\r\n\t\t * @returns selected scene index.\r\n\t\t */\r\n\t\tthis.getSelectSceneIndex = function () { return selectSceneIndex; }\r\n\r\n\t\t/**\r\n\t\t * User has pressed the <b>Repeat</b> button of the <a href=\"../../player/jsdoc/module-Player-Player_PlayController_PlayController.html\" target=\"_blank\">Player.PlayController</a>.\r\n\t\t * @event\r\n\t\t * @param {boolean} value true - repeat is off\r\n\t\t * <p>false - repeat is on</p>\r\n\t\t */\r\n\t\tthis.onChangeRepeat = function ( value ) {\r\n\r\n//\t\t\t_timeSettings.repeat = value;\r\n\t\t\toptions.playerOptions.repeat = value;\r\n\t\t\tthis.controllers.forEach( function ( controller ) { if ( controller.onChangeRepeat ) controller.onChangeRepeat(); } );\r\n\r\n\t\t}\r\n\r\n\t\t//Localization\r\n\t\tfunction getLang( params ) {\r\n\r\n\t\t\tparams = params || {};\r\n\t\t\tconst lang = {\r\n\r\n\t\t\t\tplayer: 'Player',\r\n\t\t\t\tplayerTitle: '3D objects animation.',\r\n\r\n\t\t\t\tmin: 'Min',\r\n\t\t\t\tmax: 'Max',\r\n\t\t\t\tdt: 'Step',\r\n\t\t\t\tdtTitle: 'Time between frames',\r\n\r\n\t\t\t\tmarks: 'Frames',\r\n\t\t\t\tmarksTitle: 'Player frames count',\r\n\r\n\t\t\t\tinterval: 'Rate',\r\n\t\t\t\tintervalTitle: 'Rate of changing of animation scenes per second.',\r\n\r\n\t\t\t\ttime: 'Time',\r\n\r\n\t\t\t\tdefaultButton: 'Default',\r\n\t\t\t\tdefaultTitle: 'Restore default player settings.',\r\n\r\n\t\t\t};\r\n\r\n\t\t\tconst _languageCode = params.getLanguageCode === undefined ? 'en'//Default language is English\r\n\t\t\t\t: params.getLanguageCode();\r\n\t\t\tswitch ( _languageCode ) {\r\n\r\n\t\t\t\tcase 'ru'://Russian language\r\n\r\n\t\t\t\t\tlang.player = '';\r\n\t\t\t\t\tlang.playerTitle = ' 3D .';\r\n\r\n\t\t\t\t\tlang.min = '';\r\n\t\t\t\t\tlang.max = '';\r\n\t\t\t\t\tlang.dt = '';\r\n\t\t\t\t\tlang.dtTitle = '  ';\r\n\r\n\t\t\t\t\tlang.marks = '';\r\n\t\t\t\t\tlang.marksTitle = '  ';\r\n\r\n\t\t\t\t\tlang.interval = '',\r\n\t\t\t\t\t\tlang.intervalTitle = '    .';\r\n\r\n\t\t\t\t\tlang.time = '';\r\n\r\n\t\t\t\t\tlang.defaultButton = '';\r\n\t\t\t\t\tlang.defaultTitle = '    .';\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault://Custom language\r\n\t\t\t\t\tif ( ( params.lang === undefined ) || ( params.lang._languageCode != _languageCode ) )\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tObject.keys( params.lang ).forEach( function ( key ) {\r\n\r\n\t\t\t\t\t\tif ( _lang[key] === undefined )\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t_lang[key] = params.lang[key];\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\t\t\treturn lang;\r\n\r\n\t\t}\r\n\r\n\t\t//PlayController localization\r\n\r\n\t\tconst lang = {\r\n\r\n\t\t\tprevSymbol: '',\r\n\t\t\tprevSymbolTitle: 'Go to previous animation scene',\r\n\t\t\tnextSymbol: '',\r\n\t\t\tnextSymbolTitle: 'Go to next animation scene',\r\n\t\t\tplaySymbol: '',\r\n\t\t\tplayTitle: 'Play',\r\n\t\t\tpause: '',\r\n\t\t\tpauseTitle: 'Pause',\r\n\t\t\trepeat: '',\r\n\t\t\trepeatOn: 'Turn repeat on',\r\n\t\t\trepeatOff: 'Turn repeat off',\r\n\t\t\tcontrollerTitle: 'Current time.',\r\n\t\t\tstereoEffects: 'Stereo effects',\r\n\t\t\tmono: 'Mono',\r\n\t\t\tsideBySide: 'Side by side',\r\n\t\t\ttopAndBottom: 'Top and bottom',\r\n\r\n\t\t};\r\n\t\tfunction localization( getLanguageCode ) {\r\n\t\t\tswitch ( getLanguageCode() ) {\r\n\r\n\t\t\t\tcase 'ru'://Russian language\r\n\t\t\t\t\tlang.prevSymbolTitle = ' ';//'Go to previous animation scene',\r\n\t\t\t\t\tlang.playTitle = '';//'Play'\r\n\t\t\t\t\tlang.nextSymbolTitle = ' ';//'Go to next animation scene';\r\n\t\t\t\t\tlang.pauseTitle = '';//'Pause',\r\n\t\t\t\t\tlang.repeatOn = ' ';\r\n\t\t\t\t\tlang.repeatOff = '  ';\r\n\t\t\t\t\tlang.controllerTitle = ' .';\r\n\t\t\t\t\tlang.stereoEffects = ' ';\r\n\t\t\t\t\tlang.mono = '';\r\n\t\t\t\t\tlang.sideBySide = ' ';\r\n\t\t\t\t\tlang.topAndBottom = ' ';\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t/** <a href=\"../../player/jsdoc/module-Player-Player_PlayController_PlayController.html\" target=\"_blank\">PlayController</a> localization\r\n\t\t* @param {Function} [getLanguageCode=\"en\"] Your custom getLanguageCode() function.\r\n\t\t* <pre>\r\n\t\t* returns the \"primary language\" subtag of the language version of the browser.\r\n\t\t* Examples: \"en\" - English language, \"ru\" Russian.\r\n\t\t* See the {@link https://tools.ietf.org/html/rfc4646#section-2.1|rfc4646 2.1 Syntax} for details.\r\n\t\t* Default returns the 'en' is English language.\r\n\t\t* You can import { getLanguageCode } from '../../commonNodeJS/master/lang.js';\r\n\t\t* </pre>\r\n\t    * @returns Names and titles of the <b>PlayController</b> controls\r\n\t\t*/\r\n\t\tthis.localization = function ( getLanguageCode = function() { return 'en' } ) {\r\n\r\n\t\t\tlocalization( getLanguageCode );\r\n\t\t\treturn lang;\r\n\r\n\t\t}\r\n\r\n\t\tthis.PlayController = class extends controllers.CustomController {\r\n\r\n\t\t\t/**\r\n\t\t\t * @class playController class for using in my version of [dat.gui]{@link https://github.com/anhr/dat.gui} for animate of 3D objects in my projects.\r\n\t\t\t * @extends dat.controllers.CustomController. See [CustomController.js]{@link https://github.com/anhr/commonNodeJS/blob/master/dat.gui/CustomController/src/dat/controllers/CustomController.js}\r\n\t\t\t * @param {GUI} [gui] [new dat.GUI(...)]{@link https://github.com/anhr/dat.gui}. Folder for controller\r\n\t\t\t */\r\n\t\t\tconstructor( gui ) {\r\n\r\n//\t\t\t\tconst player = Player.player;\r\n\t\t\t\tconst player = options.player, getLanguageCode = options.getLanguageCode;\r\n\r\n\t\t\t\tgui = gui || options.dat.gui;\r\n\t\t\t\tif ( !gui || options.dat.playController === false ) {\r\n\r\n\t\t\t\t\tsuper( {} );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlocalization( getLanguageCode );\r\n\r\n\t\t\t\tfunction addButton( innerHTML, title, onclick ) {\r\n\r\n\t\t\t\t\tconst button = document.createElement( 'span' );\r\n\t\t\t\t\tbutton.innerHTML = innerHTML;\r\n\t\t\t\t\tbutton.title = title;\r\n\t\t\t\t\tbutton.style.cursor = 'pointer';\r\n\t\t\t\t\tbutton.style.margin = '0px 2px';\r\n\t\t\t\t\tbutton.onclick = onclick;\r\n\t\t\t\t\treturn button;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar _getGroup, _selectScene, _renamePlayButtons, _renameRepeatButtons, _repeat;//,_playNext, timerId, _prev, _play, _next;\r\n\t\t\t\tconst colorOff = 'rgb(255,255,255)', colorOn = 'rgb(128,128,128)';//'rgb(200,200,200)';\r\n\r\n\t\t\t\tsuper( {\r\n\r\n\t\t\t\t\tplayRate: 1,//Default play rate is 1 changes per second\r\n\t\t\t\t\tproperty: function ( customController ) {\r\n\r\n\t\t\t\t\t\tvar buttons = {};\r\n\t\t\t\t\t\tfunction RenamePlayButtons( innerHTML, title ) {\r\n\r\n\t\t\t\t\t\t\tbuttons.buttonPlay.innerHTML = innerHTML;\r\n\t\t\t\t\t\t\tbuttons.buttonPlay.title = title;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_renamePlayButtons = RenamePlayButtons;\r\n\r\n\t\t\t\t\t\tbuttons.buttonPrev = addButton( lang.prevSymbol, lang.prevSymbolTitle, player.prev );\r\n\t\t\t\t\t\tbuttons.buttonPlay = addButton( lang.playSymbol, lang.playTitle, player.play3DObject );\r\n\r\n\t\t\t\t\t\tif ( player.getSettings().options.playerOptions.max !== null ) {\r\n\r\n\t\t\t\t\t\t\t//Repeat button\r\n\r\n\t\t\t\t\t\t\tfunction RenameRepeatButtons( isRepeat ) {\r\n\r\n\t\t\t\t\t\t\t\tvar title, color;\r\n\t\t\t\t\t\t\t\tif ( isRepeat ) {\r\n\r\n\t\t\t\t\t\t\t\t\ttitle = lang.repeatOff;\r\n\t\t\t\t\t\t\t\t\tcolor = colorOff;\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\ttitle = lang.repeatOn;\r\n\t\t\t\t\t\t\t\t\tcolor = colorOn;\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif ( buttons.buttonRepeat.title === title )\r\n\t\t\t\t\t\t\t\t\treturn;//stop of infinite recursive call\r\n\r\n\t\t\t\t\t\t\t\tbuttons.buttonRepeat.title = title;\r\n\t\t\t\t\t\t\t\tbuttons.buttonRepeat.style.color = color;\r\n\r\n\t\t\t\t\t\t\t\tplayer.onChangeRepeat( isRepeat );\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_renameRepeatButtons = RenameRepeatButtons;\r\n\t\t\t\t\t\t\tfunction repeat( value ) {\r\n\r\n\t\t\t\t\t\t\t\tRenameRepeatButtons( buttons.buttonRepeat.title === lang.repeatOn );\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_repeat = repeat;\r\n\t\t\t\t\t\t\tvar title, color;\r\n\t\t\t\t\t\t\tif ( player.getSettings().repeat ) {\r\n\r\n\t\t\t\t\t\t\t\ttitle = lang.repeatOff;\r\n\t\t\t\t\t\t\t\tcolor = colorOff;\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\ttitle = lang.repeatOn;\r\n\t\t\t\t\t\t\t\tcolor = colorOn;\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbuttons.buttonRepeat = addButton( lang.repeat, title, repeat );\r\n\t\t\t\t\t\t\tbuttons.buttonRepeat.style.color = color;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbuttons.buttonNext = addButton( lang.nextSymbol, lang.nextSymbolTitle, player.next );\r\n\t\t\t\t\t\tfunction getGroup() {\r\n\r\n\t\t\t\t\t\t\treturn group;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_getGroup = getGroup;\r\n\r\n\t\t\t\t\t\treturn buttons;\r\n\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t}, 'playRate' );//, 1, 25, 1 );\r\n\t\t\t\tplayer.PlayController = this;\r\n\t\t\t\tthis.lang = lang;\r\n\t\t\t\t\r\n\t\t\t\t/**\r\n\t\t\t\t * User has pressed the <b>Play</b> button. Rename the <b>Play</b> putton.\r\n\t\t\t\t * @event\r\n\t\t\t\t * @param {boolean} playing true - name is \"\"\r\n\t\t\t\t * <p>false = name is \"\"\r\n\t\t\t\t */\r\n\t\t\t\tthis.onRenamePlayButtons = function ( playing ) {\r\n\r\n\t\t\t\t\tvar name, title;\r\n\t\t\t\t\tif ( playing ) {\r\n\r\n\t\t\t\t\t\tname = lang.pause;\r\n\t\t\t\t\t\ttitle = lang.pauseTitle;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tname = lang.playSymbol;\r\n\t\t\t\t\t\ttitle = lang.playTitle;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_renamePlayButtons( name, title, true );\r\n\r\n\t\t\t\t}\r\n\t\t\t\t/**\r\n\t\t\t\t * User has pressed the <b>Repeat</b> button.\r\n\t\t\t\t * @event\r\n\t\t\t\t */\r\n\t\t\t\tthis.onChangeRepeat = function () {\r\n\r\n//\t\t\t\t\t_renameRepeatButtons( player.getSettings().timeSettings.repeat );\r\n\t\t\t\t\t_renameRepeatButtons( player.getSettings().options.playerOptions.repeat );\r\n\r\n\t\t\t\t}\r\n\t\t\t\tplayer.pushController( this );\r\n\t\t\t\t/**\r\n\t\t\t\t * @param {number} value current time of the playing\r\n\t\t\t\t */\r\n\t\t\t\tthis.setValue = function ( value ) {\r\n\r\n\t\t\t\t\tthis._controller.domElement.childNodes[0].value = value;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst controler = gui.add( this );\r\n\t\t\t\t//       \r\n\t\t\t\tcontroler.__truncationSuspended = true;\r\n\r\n\t\t\t}\r\n\t\t\tset controller( newController ) {\r\n\r\n\t\t\t\tthis._controller = newController;\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\tthis._controller.onChange( function ( value ) { options.player.setTime( value ); /*_this.onChange( value );*/ } );\r\n\t\t\t\tthis._controller.domElement.title = this.lang.controllerTitle;\r\n\r\n\t\t\t}\r\n\t\t\tget controller() { return this._controller; }\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Adds a Player's controllers into [dat.gui]{@link https://github.com/anhr/dat.gui}.\r\n\t\t * @param {GUI} [folder] Player's folder\r\n\t\t */\r\n\t\tthis.gui = function ( folder ) {\r\n\r\n/*\r\n\t\t\tguiParams.getLanguageCode = guiParams.getLanguageCode || function () { return \"en\"; };\r\n\t\t\tguiParams.cookie = guiParams.cookie || new Cookie.defaultCookie();\r\n\t\t\tguiParams.cookieName = guiParams.cookieName || '';\r\n\r\n\t\t\tconst cookie = guiParams.cookie, cookieName = 'Player' + guiParams.cookieName;\r\n*/\r\n\t\t\tconst cookie = options.dat.cookie,\r\n\t\t\t\tcookieName = options.dat.getCookieName( 'Player' ),\r\n\t\t\t\tgetLanguageCode = options.getLanguageCode,\r\n\t\t\t\tdat = three.dat;// options.dat.dat;\r\n\r\n\t\t\tfolder = folder || options.dat.gui;\r\n\t\t\tif ( !folder || options.dat.playerGui === false )\r\n\t\t\t\treturn;\r\n\r\n\t\t\tfunction setDT() {\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t\tif ( _timeSettings.max === null ) _timeSettings.dt = _timeSettings.dt || 0.1;\r\n\t\t\t\t\telse _timeSettings.dt = ( _timeSettings.max - _timeSettings.min ) / ( _timeSettings.marks - 1 );\r\n\t\t\t\t*/\r\n\t\t\t\tif ( options.playerOptions.max === null ) options.playerOptions.dt = options.playerOptions.dt || 0.1;\r\n\t\t\t\telse options.playerOptions.dt = ( options.playerOptions.max - options.playerOptions.min ) / ( options.playerOptions.marks - 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction setSettings() {\r\n\r\n\t\t\t\tsetDT();\r\n/*\r\n\t\t\t\tcookie.setObject( cookieName, _timeSettings );\r\n\t\t\t\tif ( settings.onChangeScaleT ) settings.onChangeScaleT( _timeSettings );\r\n*/\r\n\t\t\t\tcookie.setObject( cookieName, options.playerOptions );\r\n\t\t\t\tif ( settings.onChangeScaleT ) settings.onChangeScaleT( options.playerOptions );\r\n\r\n\t\t\t}\r\n\t\t\t//function setMax() { if ( _timeSettings.max !== null ) _timeSettings.max = _timeSettings.min + _timeSettings.dt * ( _timeSettings.marks - 1 ); }\r\n\t\t\tfunction setMax() {\r\n\r\n\t\t\t\tif ( options.playerOptions.max !== null )\r\n\t\t\t\t\toptions.playerOptions.max = options.playerOptions.min + options.playerOptions.dt * ( options.playerOptions.marks - 1 );\r\n\r\n\t\t\t}\r\n\t\t\tsetMax();\r\n//\t\t\tconst axesDefault = JSON.parse( JSON.stringify( _timeSettings ) ),\r\n\t\t\tconst axesDefault = JSON.parse( JSON.stringify( options.playerOptions ) ),\r\n\t\t\t\tlang = getLang( {\r\n\r\n\t\t\t\t\tgetLanguageCode: getLanguageCode,\r\n\r\n\t\t\t\t} );\r\n\t\t\tObject.freeze( axesDefault );\r\n/*\r\n\t\t\tconst max = _timeSettings.max, marks = _timeSettings.marks;\r\n\t\t\tcookie.getObject( cookieName, _timeSettings, _timeSettings );\r\n*/\r\n\t\t\tconst max = options.playerOptions.max, marks = options.playerOptions.marks;\r\n\t\t\tcookie.getObject( cookieName, options.playerOptions, options.playerOptions );\r\n\t\t\tif ( ( max === null ) || ( max === Infinity ) ||\r\n//\t\t\t\t( _timeSettings.max === null )//               \r\n\t\t\t\t( options.playerOptions.max === null )//               \r\n\t\t\t) {\r\n\r\n/*\r\n\t\t\t\t_timeSettings.max = max;\r\n\t\t\t\t_timeSettings.marks = marks;\r\n*/\r\n\t\t\t\toptions.playerOptions.max = max;\r\n\t\t\t\toptions.playerOptions.marks = marks;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst fPlayer = folder.addFolder( lang.player );\r\n\t\t\tdat.folderNameAndTitle( fPlayer, lang.player, lang.playerTitle );\r\n\r\n\t\t\tfunction scale() {\r\n\r\n//\t\t\t\tconst axes = _timeSettings,\r\n\t\t\t\tconst axes = options.playerOptions,\r\n\t\t\t\t\tscaleControllers = {};\r\n\t\t\t\tfunction onclick( customController, action ) {\r\n\r\n\t\t\t\t\tvar zoom = customController.controller.getValue();\r\n\r\n\t\t\t\t\taxes.min = action( axes.min, zoom );\r\n\t\t\t\t\tscaleControllers.min.setValue( axes.min );\r\n\t\t\t\t\tif ( axes.max ) {\r\n\r\n\t\t\t\t\t\taxes.max = action( axes.max, zoom );\r\n\t\t\t\t\t\tsetDT();\r\n\t\t\t\t\t\tscaleControllers.max.setValue( axes.max );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsetSettings();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscaleControllers.folder = fPlayer.addFolder( axes.name !== '' ? axes.name : lang.time );\r\n\r\n\t\t\t\tscaleControllers.scaleController = scaleControllers.folder.add( new ScaleController( onclick,\r\n\t\t\t\t\t{ settings: settings.options.playerOptions, getLanguageCode: getLanguageCode, } ) ).onChange( function ( value ) {\r\n\r\n\t\t\t\t\t\taxes.zoomMultiplier = value;\r\n\t\t\t\t\t\tsetSettings();\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\tconst positionController = new PositionController( function ( shift ) {\r\n\r\n\t\t\t\t\tonclick( positionController, function ( value, zoom ) {\r\n\r\n\t\t\t\t\t\tvalue += shift;//zoom;\r\n\t\t\t\t\t\treturn value;\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}, { settings: settings.options.playerOptions, getLanguageCode: getLanguageCode, } );\r\n\t\t\t\tscaleControllers.positionController = scaleControllers.folder.add( positionController ).onChange( function ( value ) {\r\n\r\n\t\t\t\t\taxes.offset = value;\r\n\t\t\t\t\tsetSettings();\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t\t//min\r\n\t\t\t\tscaleControllers.min = dat.controllerZeroStep( scaleControllers.folder, axes, 'min', function ( value ) { setSettings(); } );\r\n\t\t\t\tdat.controllerNameAndTitle( scaleControllers.min, lang.min );\r\n\r\n\t\t\t\t//max\r\n\t\t\t\t//axes.max       \r\n\t\t\t\t// axes.max  axes.dt\r\n\t\t\t\tsetMax();\r\n\t\t\t\tif ( axes.max !== null ) {\r\n\r\n\t\t\t\t\tscaleControllers.max = dat.controllerZeroStep( scaleControllers.folder, axes, 'max', function ( value ) { setSettings(); } );\r\n\t\t\t\t\tdat.controllerNameAndTitle( scaleControllers.max, lang.max );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t//dt\r\n\t\t\t\t\tscaleControllers.dt = dat.controllerZeroStep( scaleControllers.folder, axes, 'dt', function ( value ) { setSettings(); } );\r\n\t\t\t\t\tdat.controllerNameAndTitle( scaleControllers.dt, lang.dt, lang.dtTitle );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//marks\r\n\t\t\t\tif ( axes.marks ) {\r\n\r\n\t\t\t\t\tscaleControllers.marks = scaleControllers.folder.add( axes, 'marks' ).onChange( function ( value ) {\r\n\r\n\t\t\t\t\t\taxes.marks = parseInt( axes.marks );\r\n\t\t\t\t\t\tsetSettings();\r\n\t\t\t\t\t\tconst elSlider = getSliderElement();\r\n//\t\t\t\t\t\tif ( elSlider ) elSlider.max = _timeSettings.marks - 1;\r\n\t\t\t\t\t\tif ( elSlider ) elSlider.max = options.playerOptions.marks - 1;\r\n\r\n\t\t\t\t\t} );\r\n\t\t\t\t\tdat.controllerNameAndTitle( scaleControllers.marks, axes.marksName === undefined ? lang.marks : axes.marksName,\r\n\t\t\t\t\t\taxes.marksTitle === undefined ? lang.marksTitle : axes.marksTitle );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Ticks per seconds.\r\n\t\t\t\tscaleControllers.interval = scaleControllers.folder.add( settings.options.playerOptions/*timeSettings*/, 'interval', 1, 25, 1 ).onChange( function ( value ) {\r\n\r\n\t\t\t\t\tsetSettings();\r\n\r\n\t\t\t\t} );\r\n\t\t\t\tdat.controllerNameAndTitle( scaleControllers.interval, lang.interval, lang.intervalTitle );\r\n\r\n\t\t\t\t//Default button\r\n\t\t\t\tdat.controllerNameAndTitle( scaleControllers.folder.add( {\r\n\r\n\t\t\t\t\tdefaultF: function ( value ) {\r\n\r\n\t\t\t\t\t\taxes.zoomMultiplier = axesDefault.zoomMultiplier;\r\n\t\t\t\t\t\tscaleControllers.scaleController.setValue( axes.zoomMultiplier );\r\n\r\n\t\t\t\t\t\taxes.offset = axesDefault.offset;\r\n\t\t\t\t\t\tscaleControllers.positionController.setValue( axes.offset );\r\n\r\n\t\t\t\t\t\taxes.min = axesDefault.min;\r\n\t\t\t\t\t\tscaleControllers.min.setValue( axes.min );\r\n\r\n\t\t\t\t\t\tif ( scaleControllers.max ) {\r\n\r\n\t\t\t\t\t\t\taxes.max = axesDefault.max;\r\n\t\t\t\t\t\t\tsetDT();\r\n\t\t\t\t\t\t\tscaleControllers.max.setValue( axes.max );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( scaleControllers.dt ) {\r\n\r\n\t\t\t\t\t\t\taxes.dt = axesDefault.dt;\r\n\t\t\t\t\t\t\tscaleControllers.dt.setValue( axes.dt );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( axesDefault.marks ) {\r\n\r\n\t\t\t\t\t\t\taxes.marks = axesDefault.marks;\r\n\r\n\t\t\t\t\t\t\t//scaleControllers.marks is undefined     max: Infinity,\r\n\t\t\t\t\t\t\t// Player in cookie,   marks\r\n\t\t\t\t\t\t\t// max: Infinity,\r\n\t\t\t\t\t\t\t//  Default  \r\n\t\t\t\t\t\t\tif ( scaleControllers.marks )\r\n\t\t\t\t\t\t\t\tscaleControllers.marks.setValue( axes.marks );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\taxes.interval = axesDefault.interval;\r\n\t\t\t\t\t\tscaleControllers.interval.setValue( axes.interval );\r\n\r\n\t\t\t\t\t\tsetSettings();\r\n\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t}, 'defaultF' ), lang.defaultButton, lang.defaultTitle );\r\n\r\n\t\t\t}\r\n\t\t\tscale();\r\n\r\n\t\t}\r\n\r\n\t\tvar _canvasMenu;\r\n\t\t/**\r\n\t\t * Adds a Player's menu item into [CanvasMenu]{@link https://github.com/anhr/commonNodeJS/tree/master/canvasMenu}.\r\n\t\t * @param {CanvasMenu} canvasMenu [CanvasMenu]{@link https://github.com/anhr/commonNodeJS/tree/master/canvasMenu}.\r\n\t\t* @param {Function} [getLanguageCode=\"en\"] Your custom getLanguageCode() function.\r\n\t\t* <pre>\r\n\t\t* returns the \"primary language\" subtag of the language version of the browser.\r\n\t\t* Examples: \"en\" - English language, \"ru\" Russian.\r\n\t\t* See the {@link https://tools.ietf.org/html/rfc4646#section-2.1|rfc4646 2.1 Syntax} for details.\r\n\t\t* Default returns the 'en' is English language.\r\n\t\t* You can import { getLanguageCode } from '../../commonNodeJS/master/lang.js';\r\n\t\t* </pre>\r\n\t\t */\r\n\t\tthis.createCanvasMenuItem = function ( canvasMenu, getLanguageCode = function() { return 'en' } ) {\r\n\r\n\t\t\t_canvasMenu = canvasMenu;\r\n\r\n//\t\t\tconst player = this, menu = canvasMenu.menu, lang = Player.player.localization( getLanguageCode );//Player.player.PlayController.lang;\r\n\t\t\tconst player = this, menu = canvasMenu.menu, lang = player.localization( getLanguageCode );\r\n\r\n\t\t\t//Previous button\r\n\t\t\tmenu.push( {\r\n\r\n\t\t\t\tname: lang.prevSymbol,\r\n\t\t\t\ttitle: lang.prevSymbolTitle,\r\n\t\t\t\tonclick: function ( event ) { player.prev(); }\r\n\r\n\t\t\t} );\r\n\r\n\t\t\t//Play button\r\n\t\t\tmenu.push( {\r\n\r\n\t\t\t\tname: lang.playSymbol,\r\n\t\t\t\ttitle: lang.playTitle,\r\n\t\t\t\tid: \"menuButtonPlay\",\r\n\t\t\t\tonclick: function ( event ) {\r\n\r\n\t\t\t\t\tplayer.play3DObject();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n//\t\t\tif ( _timeSettings.max !== null )\r\n\t\t\tif ( options.playerOptions.max !== null ) {\r\n\r\n\t\t\t\t//Repeat button\r\n\t\t\t\tmenu.push( {\r\n\r\n\t\t\t\t\tname: lang.repeat,\r\n\t\t\t\t\ttitle: this.getSettings().repeat ? lang.repeatOff : lang.repeatOn,\r\n\t\t\t\t\tid: \"menuButtonRepeat\",\r\n\t\t\t\t\tonclick: function ( event ) { player.repeat(); }\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//Next button\r\n\t\t\tmenu.push( {\r\n\r\n\t\t\t\tname: lang.nextSymbol,\r\n\t\t\t\ttitle: lang.nextSymbolTitle,\r\n\t\t\t\tonclick: function ( event ) { player.next(); }\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tthis.controllers.push( {\r\n\r\n\t\t\t\t/* *\r\n\t\t\t\t * Renames the \"Play\" button of the player's menu.\r\n\t\t\t\t * @param {boolean} playing <b>true</b> - pause.\r\n\t\t\t\t * <p><b>false</b> - play</p>\r\n\t\t\t\t */\r\n\t\t\t\tonRenamePlayButtons: function ( playing ) {\r\n\r\n\t\t\t\t\tvar name, title;\r\n\t\t\t\t\tif ( playing ) {\r\n\r\n\t\t\t\t\t\tname = lang.pause;\r\n\t\t\t\t\t\ttitle = lang.pauseTitle;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tname = lang.playSymbol;\r\n\t\t\t\t\t\ttitle = lang.playTitle;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst elMenuButtonPlay = canvasMenu.querySelector( '#menuButtonPlay' );\r\n\t\t\t\t\telMenuButtonPlay.innerHTML = name;\r\n\t\t\t\t\telMenuButtonPlay.title = title;\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\t/* *\r\n\t\t\t\t * Changes \"Repeat\" button of the player's menu between <b>repeat Off</b> and <b>repeat On</b>.\r\n\t\t\t\t */\r\n\t\t\t\tonChangeRepeat: function () {\r\n\r\n//\t\t\t\t\tcanvasMenu.querySelector( '#menuButtonRepeat' ).title = _timeSettings.repeat ? lang.repeatOff : lang.repeatOn;\r\n\t\t\t\t\tcanvasMenu.querySelector( '#menuButtonRepeat' ).title = options.playerOptions.repeat ? lang.repeatOff : lang.repeatOn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Adds slider menu item into [CanvasMenu]{@link https://github.com/anhr/commonNodeJS/tree/master/canvasMenu}.\r\n\t\t */\r\n\t\tthis.addSlider = function () {\r\n\r\n//\t\t\tif ( _timeSettings.max === null )\r\n\t\t\tif ( options.playerOptions.max === null )\r\n\t\t\t\treturn;\r\n\r\n\t\t\t_canvasMenu.menu.push( {\r\n\r\n//\t\t\t\tname: '<input type=\"range\" min=\"0\" max=\"' + ( Player.getSettings().marks - 1 ) + '\" value=\"0\" class=\"slider\" id=\"sliderPosition\">',\r\n\t\t\t\tname: '<input type=\"range\" min=\"0\" max=\"' + ( options.playerOptions.marks - 1 ) + '\" value=\"0\" class=\"slider\" id=\"sliderPosition\">',\r\n\t\t\t\tstyle: 'float: right;',\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tfunction getSliderElement() { if ( _canvasMenu ) return _canvasMenu.querySelector( '#sliderPosition' ); }\r\n\r\n\t\t/**\r\n\t\t * Adds an events into slider menu item of the [CanvasMenu]{@link https://github.com/anhr/commonNodeJS/tree/master/canvasMenu}.\r\n\t\t * @returns slider element\r\n\t\t */\r\n\t\tthis.addSliderEvents = function () {\r\n\r\n\t\t\tconst elSlider = getSliderElement(), player = this;\r\n\t\t\tif ( elSlider ) {\r\n\r\n\t\t\t\telSlider.onchange = function ( event ) { player.selectScene( parseInt( elSlider.value ) ); };\r\n\t\t\t\telSlider.oninput = function ( event ) { player.selectScene( parseInt( elSlider.value ) ); };\r\n\r\n\t\t\t\tvar pointerdown;\r\n\t\t\t\tconst player = this;\r\n\t\t\t\telSlider.addEventListener( 'pointerdown', e => { pointerdown = true; } );\r\n\t\t\t\telSlider.addEventListener( 'pointerup', e => { pointerdown = false; } );\r\n\t\t\t\telSlider.addEventListener( 'mousemove', e => {\r\n\r\n\t\t\t\t\tif ( !pointerdown )\r\n\t\t\t\t\t\treturn;\r\n//\t\t\t\t\tplayer.selectScene( ( _timeSettings.marks - 1 ) * e.offsetX / elSlider.clientWidth );\r\n\t\t\t\t\tplayer.selectScene( ( options.playerOptions.marks - 1 ) * e.offsetX / elSlider.clientWidth );\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\t\t\treturn elSlider;\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Sets <b>index</b> and <b>title</b> of the slider element of the player's menu.\r\n\t\t * @param {string} index\r\n\t\t * @param {string} title\r\n\t\t */\r\n\t\tthis.setIndex = function ( index, title ) {\r\n\r\n\t\t\tif ( typeof this.PlayController === \"object\" ) this.PlayController.setValue( this.getTime() );\r\n\t\t\tconst elSlider = getSliderElement();\r\n\t\t\tif ( elSlider ) {\r\n\r\n\t\t\t\telSlider.value = index;\r\n\t\t\t\telSlider.title = title;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Changes the \"max\" value of the slider of the player's menu. Moves <b>Player</b> to the first scene.\r\n\t\t * @param {Object} scale See  <b>options.playerOptions</b> parameter of <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t */\r\n\t\tthis.onChangeScale = function ( scale ) {\r\n\r\n\t\t\tgetSliderElement().max = scale.marks - 1;\r\n\t\t\tthis.selectScene( 0 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/* * @namespace\r\n * @description Is player created?\r\n * @returns true if Player is created\r\n */\r\n//Player.isCreated = function () { return Player.player ? true : false; }\r\n\r\n\r\n/**\r\n * @class\r\n */\r\nPlayer.cameraTarget = class {\r\n\r\n\t/**\r\n\t * Functions for camera for looking at selected point.\r\n\t */\r\n\tconstructor() {\r\n\r\n\t\tconst cameraTargetDefault = { boLook: false, },//     \r\n\t\t\t_cameraTarget = {\r\n\r\n\t\t\t\tboLook: cameraTargetDefault.boLook,\r\n\t\t\t\tgetDistanceToCamera() {\r\n\r\n\t\t\t\t\tif ( typeof this.distanceToCameraCur !== 'undefined' ) return this.distanceToCameraCur;\r\n\t\t\t\t\treturn this.distanceToCamera;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\tvar _options;\r\n\t\t//\tcameraTargetDefault.boLook = false;\r\n\t\tcameraTargetDefault.rotation = {};\r\n\t\t_cameraTarget.rotation = {};\r\n\t\tvar boTarget = false,//true - target point was detected. For displaying of the console warning if duplicate target point was detected\r\n\t\t\tboPlayer = false;//true -    camera  _options.player.       \r\n\r\n\t\t//  ( boCameraTargetLook !== undefined ) ,          .\r\n\t\t//   ,     ( cameraTarget.bodefault === false )\r\n\t\t//           ( boCameraTargetLook === undefined ),\r\n\t\t//     ( cameraTargetDefault.boLook = true )\r\n\t\tvar boCameraTargetLook;\r\n\r\n\t\t/**\r\n\t\t * get camera target\r\n\t\t * @param {Object} [options] See the <b>options</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t * @param {Object} [options.player] <a href=\"../../player/jsdoc/index.html\" target=\"_blank\">Player</a> instance.\r\n\t\t */\r\n\t\tthis.get = function ( options ) {\r\n\r\n\t\t\tif ( !options && !_options )\r\n\t\t\t\tconsole.error( 'Player.cameraTarget.get: options = ' + options );\r\n\t\t\telse if ( _options && options && !Object.is( _options, options ) )\r\n\t\t\t\tconsole.error( 'Player.cameraTarget.get: options is ambiguous' );\r\n\t\t\t_options = _options || options;\r\n/*\r\n\t\t\tif ( !_cameraTarget.camera && !boPlayer && Player.player ) {\r\n\r\n\t\t\t\tcameraTargetDefault.camera = Player.player.getSettings().cameraTarget.camera;\r\n\t\t\t\tif ( cameraTargetDefault.camera ) setCameraTarget();\r\n\t\t\t\tboPlayer = true;\r\n\r\n\t\t\t}\r\n*/\t\t\t\r\n\t\t\tif ( !_cameraTarget.camera && !boPlayer && _options.player ) {\r\n\r\n\t\t\t\tcameraTargetDefault.camera = _options.player.getSettings().cameraTarget.camera;\r\n\t\t\t\tif ( cameraTargetDefault.camera ) setCameraTarget();\r\n\t\t\t\tboPlayer = true;\r\n\r\n\t\t\t}\r\n\t\t\tif ( _cameraTarget.camera )\r\n\t\t\t\treturn _cameraTarget;\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Create default camera target\r\n\t\t * @param {object} cameraTarget the following cameraTarget are available:\r\n\t\t * @param {THREE.PerspectiveCamera} [cameraTarget.camera] [PerspectiveCamera]{@link https://threejs.org/docs/index.html#api/en/cameras/PerspectiveCamera}\r\n\t\t * @param {boolean} [cameraTarget.boLook=false] true - camera look at the target.\r\n\t\t * @param {THREE.Vector3} [cameraTarget.distanceToCamera] Distance from target point to camera.\r\n\t\t   * You can set the distance to the camera depending on the time.\r\n\t\t * <pre>\r\n\t\t *\tExample 1: new THREE.Vector3( 0, 0, new Function( 't', 'return 2+t' ) )\r\n\t\t *\tExample 2: new THREE.Vector3( 0, 0,\r\n\t\t *\t\t[ { t: 0, v: 5 }, { t: 1, v: 2 }, { t: 10, v: 2 }, { t: 11, v: 5 } ] )\r\n\t\t *\tDefault is camera.position.\r\n\t\t * </pre>\r\n\t\t * @param {object} [cameraTarget.rotation] rotation camera around point specified by an axis and an angle. Default is undefined - no rotation\r\n\t\t * @param {number|function|array} [cameraTarget.rotation.angle=0] Angle of rotation in radians.\r\n\t\t * <pre>\r\n\t\t *   number. Example: Math.PI / 2 rotate to 90 degrees.\r\n\t\t *   function. Example: new Function( 't', 'return 5*t' ).\r\n\t\t *   array.\r\n\t\t *     Example 1: [0, Math.PI]\r\n\t\t *       0 is angle for t = min is start time of the playing.\r\n\t\t *       Math.PI is rotate to 180 degrees\r\n\t\t *         for t = max is time of the stopping of the playing.\r\n\t\t *       If max time is infinity, then angle is for t = min.\r\n\t\t *     Example 2: [{ t: 0, v: 0 }, { t: 1, v: Math.PI / 2 }\r\n\t\t *       t is time,\r\n\t\t *       v is angle for current t.\r\n\t\t * </pre>\r\n\t\t * @param {THREE.Vector3} [cameraTarget.rotation.axis] Axis of rotattion.\r\n\t\t * <pre>\r\n\t\t *   Example: new THREE.Vector3( 1, 0, 0 ) - rotate around x axis.\r\n\t\t *   Default is rotate around y axis\r\n\t\t * </pre>\r\n\t\t * @param {Object} options See the <b>options</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t */\r\n\t\tthis.init = function ( cameraTarget, options ) {\r\n\r\n\t\t\tif ( !options && !_options )\r\n\t\t\t\tconsole.error( 'Player.cameraTarget.init: options = ' + options );\r\n\t\t\telse if ( _options && options && !Object.is( _options, options ) )\r\n\t\t\t\tconsole.error( 'Player.cameraTarget.init: options is ambiguous' );\r\n\t\t\t_options = _options || options;\r\n\t\t\t\r\n\t\t\t//        \r\n\t\t\t//  ,    ,   OrbitControls,    OrbitControls.target https://threejs.org/docs/index.html?q=orbit#examples/en/controls/OrbitControls.target\r\n//\t\t\tif ( cameraTarget.boLook === undefined ) cameraTarget.boLook = true;\r\n\r\n\t\t\t//cameraTargetDefault.boLook = false         :\r\n\t\t\t// 1     init.    cameraTargetDefault    ,    \r\n\t\t\t// 2 cameraTarget.bodefault !== false  cameraTarget.boLook = false -      \r\n\r\n\t\t\t//    ,      cameraTarget.bodefault === false,\r\n\t\t\t//      playerCameraTarget.cameraTargetDefault\r\n\t\t\t//    ,     ,\r\n\t\t\t//            - playerCameraTarget.cameraTargetDefault = false\r\n\t\t\tif ( cameraTarget.bodefault !== false ) {\r\n\r\n\t\t\t\tif ( boTarget )\r\n\t\t\t\t\treturn;//   cameraTargetDefault  ,\r\n\t\t\t\t//    cameraTargetDefault  \r\n\t\t\t\t//     \r\n\r\n\t\t\t\tif ( cameraTarget.boLook !== undefined ) {\r\n\r\n\t\t\t\t\tcameraTargetDefault.boLook = cameraTarget.boLook;\r\n\t\t\t\t\tboCameraTargetLook = cameraTarget.boLook;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( cameraTarget.boLook === true ) {\r\n\r\n\t\t\t\t// ,    \r\n\r\n\t\t\t\tif ( boTarget ) console.warn( 'playerCameraTarget().init(...): duplicate target point' );\r\n\t\t\t\tboTarget = true;\r\n\r\n\t\t\t\tif ( boCameraTargetLook === undefined )\r\n\t\t\t\t\tcameraTargetDefault.boLook = true;//          ,    \r\n\r\n\t\t\t} else return;\r\n//\t\t\tcameraTargetDefault.camera = cameraTargetDefault.camera || cameraTarget.camera || ( Player.player ? Player.player.getSettings().cameraTarget.camera : undefined );\r\n\t\t\tcameraTargetDefault.camera = cameraTargetDefault.camera ||\r\n\t\t\t\tcameraTarget.camera ||\r\n\t\t\t\t( _options.player ? _options.player.getSettings().cameraTarget.camera : undefined );\r\n\t\t\tif ( !cameraTargetDefault.camera ) {\r\n\r\n\t\t\t\tconsole.error( 'playerCameraTarget().init(...): cameraTargetDefault.camera = ' + cameraTargetDefault.camera );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\t\t\tcameraTargetDefault.distanceToCamera = cameraTargetDefault.distanceToCamera || cameraTarget.distanceToCamera;\r\n\t\t\tcameraTarget.rotation = cameraTarget.rotation || {};\r\n\t\t\tcameraTargetDefault.rotation.angle = cameraTargetDefault.rotation.angle || cameraTarget.rotation.angle;\r\n\t\t\tcameraTargetDefault.rotation.axis = cameraTargetDefault.rotation.axis || cameraTarget.rotation.axis;\r\n\t\t\tsetCameraTarget( cameraTarget );\r\n\r\n\t\t}\r\n\t\tfunction setCameraTarget( cameraTarget ) {\r\n\r\n\t\t\tassign();\r\n\r\n\t\t\tif ( !cameraTarget )\r\n\t\t\t\tcameraTarget = cameraTargetDefault;//      cameraTarget\r\n\t\t\tif ( !_cameraTarget.boMaual ) {//    ,       _cameraTarget.boLook   ,    \r\n\r\n\t\t\t\tif ( cameraTarget.boLook !== undefined )\r\n\t\t\t\t\t_cameraTarget.boLook = cameraTarget.boLook;\r\n\t\t\t\telse _cameraTarget.boLook = cameraTargetDefault.boLook;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_cameraTarget.camera = cameraTarget.camera || cameraTargetDefault.camera;\r\n\r\n\t\t\t//      distanceToCamera ( cameraTarget.distanceToCamera === undefined  cameraTargetDefault.distanceToCamera === undefined),\r\n\t\t\t//     distanceToCamera   camera.position\r\n\t\t\t//\t\t_cameraTarget.distanceToCamera = cameraTarget.distanceToCamera || cameraTargetDefault.distanceToCamera || new THREE.Vector3().copy( cameraTargetDefault.camera.position );\r\n\r\n\t\t\t//      distanceToCamera ( cameraTarget.distanceToCamera === undefined  cameraTargetDefault.distanceToCamera === undefined),\r\n\t\t\t//  _cameraTarget.distanceToCamera   camera.position,       \r\n\t\t\t_cameraTarget.distanceToCamera =\r\n\t\t\t\tcameraTarget.distanceToCamera ||\r\n\t\t\t\tcameraTargetDefault.distanceToCamera ||\r\n\t\t\t\t_cameraTarget.distanceToCamera ||\r\n\t\t\t\tnew THREE.Vector3().copy( cameraTargetDefault.camera.position );\r\n\r\n\t\t\tif ( !cameraTarget.rotation ) cameraTarget.rotation = {};\r\n\t\t\t_cameraTarget.rotation.angle = cameraTarget.rotation.angle || cameraTargetDefault.rotation.angle || 0;\r\n\t\t\t_cameraTarget.rotation.axis = cameraTarget.rotation.axis || cameraTargetDefault.rotation.axis || new THREE.Vector3( 0, 1, 0 );//Rotate around y axis\r\n\r\n\t\t}\r\n\r\n\t\t/* *\r\n\t\t * Set a target point, what camera is look at.\r\n\t\t * @param {THREE.Mesh} mesh [Mech]{@link https://threejs.org/docs/index.html#api/en/objects/Mesh} with selected point as target for camera.\r\n\t\t*/\r\n/*\r\n\t\tthis.setTarget = function ( mesh ) {\r\n\r\n\t\t\tif ( !mesh.geometry )\r\n\t\t\t\treturn;\r\n\r\n\t\t\tconst arrayFuncs = mesh.userData.player.arrayFuncs;\r\n\t\t\tif ( arrayFuncs === undefined )\r\n\t\t\t\treturn;\r\n\t\t\tfor ( var i = 0; i < arrayFuncs.length; i++ ) {\r\n\r\n\t\t\t\tvar funcs = arrayFuncs[i];\r\n\t\t\t\tPlayer.cameraTarget.changeTarget( mesh, i );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n*/\r\n\t\t/**\r\n\t\t * Change target.\r\n\t\t * @param {THREE.Mesh} mesh [Mech]{@link https://threejs.org/docs/index.html#api/en/objects/Mesh} with selected point as target for camera.\r\n\t\t * @param {number} i index of the point.\r\n\t\t */\r\n\t\tthis.changeTarget = function ( mesh, i ) {\r\n\r\n\t\t\tassign();\r\n\r\n//\t\t\tconst cameraTarget = Player.cameraTarget.get();\r\n\t\t\tconst cameraTarget = _options.playerOptions.cameraTarget.get();\r\n\r\n\t\t\t//Update cameraTarget\r\n\t\t\tconst func = !mesh.userData.player || ( typeof mesh.userData.player.arrayFuncs === \"function\" ) ? {} : mesh.userData.player.arrayFuncs[i];\r\n\t\t\tif ( !func.cameraTarget )\r\n\t\t\t\tfunc.cameraTarget = { boLook: false };\r\n\t\t\tsetCameraTarget( func.cameraTarget );\r\n\r\n\t\t\tif ( cameraTarget && cameraTarget.boLook ) {\r\n\r\n\t\t\t\tconst target = getWorldPosition( mesh, new THREE.Vector3().fromArray( mesh.geometry.attributes.position.array, i * mesh.geometry.attributes.position.itemSize ) );\r\n\t\t\t\tcameraTarget.target = target;\r\n\r\n\t\t\t} else delete cameraTarget.target;\r\n\r\n\t\t}\r\n\t\t/**\r\n\t\t * Update camera settings.\r\n\t\t * @param {Object} options See the <b>options</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n\t\t */\r\n\t\tthis.setCameraTarget = function ( options ) {\r\n\r\n\t\t\tassign();\r\n\r\n//\t\t\tvar cameraTarget = Player.cameraTarget.get( options );\r\n\t\t\tvar cameraTarget = options.playerOptions.cameraTarget.get( options );\r\n\t\t\tif ( !cameraTarget ) cameraTarget = cameraTarget || {};\r\n\t\t\tconst camera = cameraTarget.camera;\r\n\r\n\t\t\tif ( !camera )\r\n\t\t\t\treturn;//      ,        Player.cameraTarget.init()\r\n\r\n\t\t\t//         cameraTarget      controllerCameraTarget\r\n\t\t\tif ( !cameraTarget.distanceToCamera )\r\n\t\t\t\tcameraTarget.distanceToCamera = new THREE.Vector3().copy( camera.position );\r\n\r\n\t\t\tif ( !cameraTarget.distanceToCameraCur )\r\n\t\t\t\tcameraTarget.distanceToCameraCur = new THREE.Vector3();\r\n\r\n\t\t\tconst t = Player.getTime(),\r\n\t\t\t\tdistanceToCamera = cameraTarget.distanceToCamera,\r\n\t\t\t\tdistanceToCameraCur = new THREE.Vector3().copy( cameraTarget.distanceToCameraCur );\r\n\t\t\tcameraTarget.distanceToCameraCur.set(\r\n\r\n\t\t\t\tPlayer.execFunc( distanceToCamera, 'x', t, options ),\r\n\t\t\t\tPlayer.execFunc( distanceToCamera, 'y', t, options ),\r\n\t\t\t\tPlayer.execFunc( distanceToCamera, 'z', t, options )\r\n\r\n\t\t\t);\r\n\r\n//\t\t\tif ( !cameraTarget.setCameraPosition || update )\r\n\t\t\tif ( !cameraTarget.setCameraPosition )\r\n\t\t\t\tcameraTarget.setCameraPosition = function ( /*setCameraDefault*/ ) {\r\n\r\n\t\t\t\t\tvar target = cameraTarget.target;\r\n\r\n\t\t\t\t\t//    \r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t!cameraTarget.boLook ||//   \r\n\t\t\t\t\t\t(//\r\n\t\t\t\t\t\t\t!target &&// ,    \r\n\t\t\t\t\t\t\tcameraTarget.distanceToCameraCur.equals( distanceToCameraCur )//      target\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t) {\r\n\r\n/*\r\n\t\t\t\t\t\tif ( camera.userData.default && camera.userData.default.setDefault && setCameraDefault )\r\n\t\t\t\t\t\t\tcamera.userData.default.setDefault();\r\n*/\r\n\t\t\t\t\t\treturn;//              target\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tdistanceToCameraCur.copy( cameraTarget.distanceToCameraCur );\r\n\t\t\t\t\tconst t = Player.getTime();\r\n\t\t\t\t\tcamera.position.copy( cameraTarget.distanceToCameraCur );\r\n\t\t\t\t\tcamera.position.applyAxisAngle( cameraTarget.rotation.axis, Player.execFunc( cameraTarget.rotation, 'angle', t, options ) );\r\n\t\t\t\t\tif ( !target ) {\r\n\r\n\t\t\t\t\t\tif ( Player.orbitControls ) target = Player.orbitControls.target;\r\n\t\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\t\t//console.warn( 'Under constaction' );\r\n\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcamera.position.add( target );\r\n\t\t\t\t\tcamera.lookAt( target );\r\n\t\t\t\t\tif ( options.orbitControls ) {\r\n\r\n\t\t\t\t\t\tif ( !options.orbitControls.target.equals( target ) ) {\r\n\r\n\t\t\t\t\t\t\toptions.orbitControls.target.copy( target );\r\n\t\t\t\t\t\t\tif ( options.orbitControlsGui )\r\n\t\t\t\t\t\t\t\toptions.orbitControlsGui.setTarget( target );\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( options.orbitControls._listeners )\r\n\t\t\t\t\t\t\toptions.orbitControls._listeners.change[0]();//move frustumpoints\r\n\r\n\t\t\t\t\t}\r\n/*\t\t\t\t\t\r\n\t\t\t\t\tif ( Player.orbitControls ) {\r\n\r\n\t\t\t\t\t\tif ( !Player.orbitControls.target.equals( target ) ) {\r\n\r\n\t\t\t\t\t\t\tPlayer.orbitControls.target.copy( target );\r\n\t\t\t\t\t\t\tif ( Player.orbitControlsGui )\r\n\t\t\t\t\t\t\t\tPlayer.orbitControlsGui.setTarget( target );\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tPlayer.orbitControls._listeners.change[0]();//move frustumpoints\r\n\r\n\t\t\t\t\t}\r\n*/\t\t\t\t\t\r\n//   ,     cameraGui        target\r\n//\t\t\t\t\tif ( options.cameraGui ) options.cameraGui.update();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\tif ( options.cameraGui ) options.cameraGui.update();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n//Player.cameraTarget = new Player.cameraTarget();\r\n\r\n/** @namespace\r\n * @description execute function\r\n * @param {THREE.Vector4} funcs vector of the functions for executing.\r\n * @param {string} axisName axis name of the function for executing. Can be as \"x\", \"y\", \"z\", \"w\".\r\n * @param {number} t time. First parameter of the function for executing.\r\n * @param {object} [options={}] the following options are available:\r\n * @param {number} [options.a=1] multiplier. Second parameter of the function for executing.\r\n * @param {number} [options.b=0] addendum. Third parameter of the function for executing.\r\n * @returns function execution value.\r\n */\r\nPlayer.execFunc = function ( funcs, axisName, t, options={} ) {\r\n\r\n//\tsetOptions.setPlayerOptions( options );\r\n//\toptions.setPlayerOptions();\r\n/*\r\n\tif ( options.a === undefined ) options.a = 1;\r\n\tif ( options.b === undefined ) options.b = 0;\r\n*/\t\r\n\tvar func = funcs[axisName];\r\n\tconst a = options.a, b = options.b, typeofFuncs = typeof func;\r\n\tif ( typeof t === \"undefined\" ) t = options.playerOptions ? options.playerOptions.min : 0;\r\n\tswitch ( typeofFuncs ) {\r\n\r\n\t\tcase \"undefined\":\r\n\t\t\treturn undefined;\r\n\t\tcase \"string\":\r\n\t\t\tfunc = new Function( 't', 'a', 'b', 'return ' + func );\r\n\t\tcase \"function\":\r\n\t\t\ttry {\r\n\r\n\t\t\t\tconst res = func( t, a, b );\r\n\t\t\t\tif ( res === undefined )\r\n\t\t\t\t\tthrow 'function returns ' + res;\r\n\t\t\t\treturn res;\r\n\r\n\t\t\t} catch( e ) {\r\n\r\n\t\t\t\tconsole.error( e );\r\n\t\t\t\tthrow e;\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\t\tcase \"number\":\r\n\t\t\treturn func;\r\n\t\tcase \"object\":\r\n\t\t\tif ( Array.isArray( func ) ) {\r\n\r\n\t\t\t\tif ( func.length === 0 ) {\r\n\r\n\t\t\t\t\tconsole.error( 'Player.execFunc: funcs[\"' + axisName + '\"] array is empty' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tconst a = func,\r\n\t\t\t\t\tl = func.length - 1,\r\n\t\t\t\t\tmax = options.playerOptions.max === null ? Infinity : options.playerOptions.max,\r\n\t\t\t\t\tmin = options.playerOptions.min,\r\n\t\t\t\t\ttStep = ( max - min ) / l;\r\n\t\t\t\tvar tStart = min, tStop = max,\r\n\t\t\t\t\tiStart = 0, iStop = l;\r\n\t\t\t\tfor ( var i = 0; i < func.length; i++ ) {\r\n\r\n\t\t\t\t\tif ( tStep * i + min < t ) {\r\n\r\n\t\t\t\t\t\tiStart = i;\r\n\t\t\t\t\t\tiStop = i + 1;\r\n\t\t\t\t\t\ttStart = tStep * iStart + min;\r\n\t\t\t\t\t\ttStop = tStep * iStop + min;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tfunction execW( i ) {\r\n\r\n\t\t\t\t\tif ( typeof a[i] === \"function\" )\r\n\t\t\t\t\t\treturn a[i]( t, a, b );\r\n\t\t\t\t\tif ( a[i] instanceof THREE.Color )\r\n\t\t\t\t\t\treturn a[i];\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( typeof a[iStart] !== \"number\" ) {\r\n\r\n\t\t\t\t\tif ( axisName === 'w' ) {\r\n\r\n\t\t\t\t\t\treturn execW( iStart );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( typeof a[iStart] === \"object\" ) {\r\n\r\n\t\t\t\t\t\tfor ( var i = 0; i < func.length; i++ ){\r\n\r\n\t\t\t\t\t\t\tif ( i === ( func.length - 1 ) ) return a[i].v;\r\n\r\n\t\t\t\t\t\t\tiStart = i; iStop = i + 1;\r\n\t\t\t\t\t\t\ttStart = a[iStart].t; tStop = a[iStop].t;\r\n\t\t\t\t\t\t\tif ( ( tStart <= t ) && ( tStop > t ) ) {\r\n\r\n\t\t\t\t\t\t\t\tvar x = ( a[iStop].v - a[iStart].v ) / ( tStop - tStart ),\r\n\t\t\t\t\t\t\t\t\ty = a[iStart].v - x * tStart;\r\n\t\t\t\t\t\t\t\treturn x * t + y;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.error( 'Player.execFunc: value is not detected' );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconsole.error( 'Player.execFunc: funcs[\"' + axisName + '\"] array item ' + iStart + ' typeof = ' + ( typeof a[iStart] ) + ' is not number' );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( iStop >= func.length ) iStop = iStart;\r\n\t\t\t\tif ( typeof a[iStop] !== \"number\" ) {\r\n\r\n\t\t\t\t\tif ( axisName === 'w' )\r\n\t\t\t\t\t\treturn execW( iStop );\r\n\t\t\t\t\tif ( typeof a[iStop] !== \"object\" ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'Player.execFunc: funcs[\"' + axisName + '\"] array item ' + iStop + ' typeof = ' + ( typeof a[iStop] ) + ' is not number' );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tvar x = ( a[iStop] - a[iStart] ) / ( tStop - tStart ),\r\n\t\t\t\t\ty = a[iStart] - x * tStart;\r\n\t\t\t\tif ( isNaN( x ) || isNaN( y ) ) console.error( 'Player.execFunc: invalid x = ' + x + ' or y = ' + y );\r\n\t\t\t\treturn x * t + y;\r\n\r\n\t\t\t}\r\n\t\t\tif ( func.func )\r\n\t\t\t\treturn func.func instanceof Function ? func.func( t, a, b ) : func.func;\r\n\t\t\tif ( axisName !== 'w' )\r\n\t\t\t\tconsole.error( 'Player.execFunc: funcs[\"' + axisName + '\"] object is not array' );\r\n\t\t\treturn func;\r\n\t\tdefault:\r\n\t\t\tconsole.error( 'Player.execFunc: Invalud typeof funcs[\"' + axisName + '\"]: ' + typeofFuncs );\r\n\t}\r\n\treturn;\r\n\r\n}\r\n/*\r\nfunction palette() {\r\n\r\n\tvar paletteDefault;\r\n\tthis.get = function() {\r\n\r\n\t\tif ( _options && _options.palette )\r\n\t\t\treturn _options.palette;\r\n\t\t\t\r\n\t\tif ( !paletteDefault )\r\n\t\t\tpaletteDefault = new ColorPicker.palette();\r\n\t\treturn paletteDefault;\r\n\r\n\t}\r\n\r\n}\r\npalette = new palette();\r\n*/\r\n\r\n/** @namespace\r\n * @description Select a scene for playing of the mesh\r\n * @param {THREE.Mesh} mesh [Mech]{@link https://threejs.org/docs/index.html#api/en/objects/Mesh} for playing.\r\n * @param {Object} [settings={}] the following settings are available\r\n * @param {number} [settings.t=0] time\r\n * @param {Object} [settings.options={ dat: false }] See the <b>options</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n * @param {boolean} [settings.options.boPlayer] true - is not select play scene for mesh.userData.boFrustumPoints = true. Default is false.\r\n * @param {object} [settings.options.playerOptions] The <b>settings.options.playerOptions</b> parameter of the <a href=\"./module-Player-Player.html\" target=\"_blank\">Player</a> .\r\n * @param {number} [settings.options.a] multiplier. Second parameter of the arrayFuncs item function. Default is 1.\r\n * @param {number} [settings.options.b] addendum. Third parameter of the arrayFuncs item function. Default is 0.\r\n * @param {object} [settings.options.scales] axes scales.\r\n * See <b>options.scales</b> of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> for details.\r\n * @param {object} [settings.options.palette=new ColorPicker.palette();//palette: ColorPicker.paletteIndexes.BGRW] See <a href=\"../../colorPicker/jsdoc/module-ColorPicker.html#~Palette\" target=\"_blank\">ColorPicker.palette</a>.\r\n * @param {object} [settings.options.point={}] point settings. Applies to points with ShaderMaterial.\r\n * <pre>\r\n * See [ShaderMaterial]{@link https://threejs.org/docs/index.html#api/en/materials/ShaderMaterial} for details.\r\n * The size of the point seems constant and does not depend on the distance to the camera.\r\n * </pre>\r\n * @param {number} [settings.options.point.size=0.02] The apparent angular size of a point in radians.\r\n*/\r\nPlayer.selectMeshPlayScene = function ( mesh, settings = {} ) {\r\n\r\n\tassign();\r\n\r\n\tvar t = settings.t, options = settings.options || { dat: false };//, index = settings.index\r\n\r\n//\toptions = options || {};\r\n//\tif ( !options ) options = { dat: false };//      new dat.GUI();\r\n//\toptions = new Options( options );\r\n//\tsetOptions.setPlayerOptions( options );\r\n//\toptions.setPlayerOptions();\r\n\tif ( t === undefined ) t = options.playerOptions.min;\r\n//\tindex = index || 0;\r\n//\tsetOptions.setScales( options );\r\n//\toptions.setScales();\r\n\toptions.scales.setW();\r\n\tif (\r\n\r\n\t\t!mesh.userData.player ||\r\n\t\t( options && options.boPlayer && mesh.userData.boFrustumPoints )\r\n\r\n\t)\r\n\t\treturn;\r\n\r\n\t//        ,     \r\n\t// ,         .\r\n\tif ( mesh.geometry ) {//scene do not have geometry\r\n\r\n\t\tdelete mesh.geometry.boundingSphere;\r\n\t\tmesh.geometry.boundingSphere = null;\r\n\r\n\t}\r\n\r\n\tif ( mesh.userData.player.selectPlayScene ) {\r\n\r\n\t\tmesh.userData.player.selectPlayScene( t );\r\n\r\n\t\t//       0 - 360 ,\r\n\t\t//       Math.PI * 2\r\n\t\t//   mesh  guiSelectPoint.js\r\n\t\t//          0 - 360 ,\r\n\t\t// \r\n\t\t//cRotations[name] = fRotation.add( new THREE.Vector3(), name, 0, Math.PI * 2, 1 / 360 ).\r\n\t\t// guiSelectPoint\r\n\t\tfunction setRotation( axisName ) {\r\n\r\n\t\t\twhile ( mesh.rotation[axisName] < 0 ) mesh.rotation[axisName] += Math.PI * 2;\r\n\t\t\twhile ( mesh.rotation[axisName] > Math.PI * 2 ) mesh.rotation[axisName] -= Math.PI * 2;\r\n\r\n\t\t}\r\n\t\tsetRotation( 'x' );\r\n\t\tsetRotation( 'y' );\r\n\t\tsetRotation( 'z' );\r\n\t\t\r\n\t}\r\n\r\n\tfunction setAttributes( a, b ) {\r\n\r\n\t\tif ( !mesh.geometry )\r\n\t\t\treturn;\r\n\t\t\t\r\n\t\tconst attributes = mesh.geometry.attributes,\r\n\t\t\tarrayFuncs = mesh.userData.player.arrayFuncs;\r\n\t\tif ( arrayFuncs === undefined )\r\n\t\t\treturn;\r\n\t\tif ( t === undefined )\r\n\t\t\tconsole.error( 'setPosition: t = ' + t );\r\n\r\n\t\tvar min, max;\r\n\t\tif ( options && ( options.scales.w !== undefined ) ) {\r\n\r\n\t\t\tmin = options.scales.w.min; max = options.scales.w.max;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmax = value;\r\n\t\t\tmin = max - 1;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < arrayFuncs.length; i++ ) {\r\n\r\n\t\t\tvar funcs = arrayFuncs[i], needsUpdate = false;\r\n\t\t\tfunction setPosition( axisName, fnName ) {\r\n\r\n\t\t\t\tvar value = Player.execFunc( funcs, axisName, t, options );// a, b );\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\tattributes.position[fnName]( i, value );\r\n\t\t\t\t\tneedsUpdate = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tsetPosition( 'x', 'setX' );\r\n\t\t\tsetPosition( 'y', 'setY' );\r\n\t\t\tsetPosition( 'z', 'setZ' );\r\n\r\n\t\t\t//   var   ,    THREE.Vector3     \r\n\t\t\t//    var    {}\r\n\t\t\tlet color;\r\n\r\n\t\t\tfunction getColor() {\r\n\r\n\t\t\t\tif ( mesh.userData.player.palette )\r\n\t\t\t\t\tcolor = mesh.userData.player.palette.toColor( value, min, max );\r\n\t\t\t\telse if ( options.palette )\r\n\t\t\t\t\tcolor = options.palette.toColor( value, min, max );\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\tconst c = { r: 255, g: 255, b: 255 };\r\n\t\t\t\t\tcolor = new THREE.Color( \"rgb(\" + c.r + \", \" + c.g + \", \" + c.b + \")\" );\r\n\t\t\t\t\treturn color;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( typeof funcs.w === \"function\" ) {\r\n\r\n\t\t\t\tvar value = funcs.w( t, a, b );\r\n\t\t\t\tif ( options.scales.w ) {\r\n\r\n\t\t\t\t\tmin = options.scales.w.min;\r\n\t\t\t\t\tmax = options.scales.w.max;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'Player.selectMeshPlayScene:     ' );\r\n\t\t\t\t\tmin = 0;\r\n\t\t\t\t\tmax = 100;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( attributes.position.itemSize >= 4 )\r\n\t\t\t\t\tattributes.position.setW( i, value );\r\n\t\t\t\tneedsUpdate = true;\r\n\r\n\t\t\t\tgetColor();\r\n\r\n\t\t\t} else if ( typeof funcs.w === \"object\" ) {\r\n\r\n\t\t\t\tif ( funcs.w instanceof THREE.Color )\r\n\t\t\t\t\tcolor = funcs.w;\r\n\t\t\t\telse {\r\n\r\n//\t\t\t\t\tvar value = funcs.w.func( t, a, b );\r\n\t\t\t\t\tvar value = Player.execFunc( funcs, 'w', t, options );\r\n\t\t\t\t\tif ( funcs.w.min !== undefined ) min = funcs.w.min;\r\n\t\t\t\t\tif ( funcs.w.max !== undefined ) max = funcs.w.max;\r\n\t\t\t\t\tgetColor();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( ( typeof funcs.w === \"number\" ) && options.palette )\r\n\t\t\t\tcolor = options.palette.toColor( funcs.w, min, max );\r\n\t\t\tif ( color ) {\r\n\r\n\t\t\t\tif ( !mesh.material instanceof THREE.ShaderMaterial && mesh.material.vertexColors !== THREE.VertexColors )\r\n\t\t\t\t\tconsole.error( 'Player.selectMeshPlayScene: Please set the vertexColors parameter of the THREE.PointsMaterial of your points to THREE.VertexColors. Example: vertexColors: THREE.VertexColors' );\r\n\t\t\t\tif ( !Player.setColorAttribute( attributes, i, color ) && funcs instanceof THREE.Vector4 ) {\r\n\r\n\t\t\t\t\tmesh.geometry.setAttribute( 'color',\r\n\t\t\t\t\t\tnew THREE.Float32BufferAttribute( Player.getColors( arrayFuncs,\r\n\t\t\t\t\t\t\t{\r\n\r\n\t\t\t\t\t\t\t\tpositions: mesh.geometry.attributes.position,\r\n\t\t\t\t\t\t\t\toptions: options,\r\n/*\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tscale: { min: min, max: max },\r\n\t\t\t\t\t\t\t\tpalette: options.palette,\r\n*/\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t} ), 4 ) );\r\n\t\t\t\t\tif ( !Player.setColorAttribute( attributes, i, color ) )\r\n\t\t\t\t\t\tconsole.error( 'Player.selectMeshPlayScene: the color attribute is not exists. Please use THREE.Vector3 instead THREE.Vector4 in the arrayFuncs or add \"color\" attribute' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tif ( needsUpdate )\r\n\t\t\t\tattributes.position.needsUpdate = true;\r\n\r\n\t\t\tif ( funcs.line && funcs.line.addPoint )\r\n\t\t\t\tfuncs.line.addPoint( mesh, i, color );\r\n\t\t\tif ( funcs.cameraTarget && ( funcs.cameraTarget.boLook === true ) )\r\n\t\t\t\toptions.playerOptions.cameraTarget.changeTarget( mesh, i );\r\n//\t\t\t\tPlayer.cameraTarget.changeTarget( mesh, i );\r\n\r\n\t\t};\r\n\r\n\t}\r\n\tsetAttributes( options ? options.a : 1, options ? options.b : 0 );\r\n\tconst message = 'Player.selectMeshPlayScene: invalid mesh.scale.';\r\n\tif ( mesh.scale.x <= 0 ) console.error( message + 'x = ' + mesh.scale.x );\r\n\tif ( mesh.scale.y <= 0 ) console.error( message + 'y = ' + mesh.scale.y );\r\n\tif ( mesh.scale.z <= 0 ) console.error( message + 'z = ' + mesh.scale.z );\r\n\r\n\tif ( !options || !options.guiSelectPoint )\r\n\t\treturn;\r\n\r\n\toptions.guiSelectPoint.setMesh();\r\n\r\n\tvar selectedPointIndex = options.guiSelectPoint.getSelectedPointIndex();\r\n\tif ( ( selectedPointIndex !== -1 ) && options.guiSelectPoint.isSelectedMesh( mesh ) ) {\r\n\r\n\t\toptions.guiSelectPoint.setPosition( /*getObjectPosition( mesh, selectedPointIndex ), */{\r\n\r\n\t\t\tobject: mesh,\r\n\t\t\tindex: selectedPointIndex,\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/** @namespace\r\n * @description set color attribute\r\n * @param {Object} attributes [geometry.attributes]{@link https://threejs.org/docs/index.html?q=geometry#api/en/core/BufferGeometry.attributes} of the mesh\r\n * @param {number} i index of the color in the color attribute array.\r\n * @param {THREE.Color} color color.\r\n * @returns true - success\r\n * <p>false - colorAttribute was not detected.</p>\r\n */\r\nPlayer.setColorAttribute = function ( attributes, i, color ) {\r\n\r\n\tif ( typeof color === \"string\" )\r\n\t\tcolor = new THREE.Color( color );\r\n\tconst colorAttribute = attributes.color || attributes.ca;\r\n\tif ( colorAttribute === undefined )\r\n\t\treturn false;\r\n\tcolorAttribute.setX( i, color.r );\r\n\tcolorAttribute.setY( i, color.g );\r\n\tcolorAttribute.setZ( i, color.b );\r\n\tcolorAttribute.needsUpdate = true;\r\n\treturn true;\r\n\r\n}\r\n\r\n/** @namespace\r\n * @description Get array of THREE.Vector4 points.\r\n * @param {THREE.Vector4|THREE.Vector3|THREE.Vector2|object|array} arrayFuncs <b>points.geometry.attributes.position</b> array\r\n * <pre>\r\n * THREE.Vector4: 4D point.\r\n * THREE.Vector3: 3D point. w = 1. Default is white color\r\n * THREE.Vector2: 2D point. w = 1, z = 0. Default is white color\r\n * Vector's x, y, z, w is position of the point.\r\n * Can be as:\r\n * <ul>\r\n * <li>float - position of the point.</li>\r\n * Example: 0.5\r\n * <li>[float] - array of positions of the point.</li>\r\n * Example 1: [0.6, 0, -0.5]\r\n * 0.6 is positon for t = min is start time of the playing.\r\n * 0 is position for t = ( max - min ) / 2\r\n * -0.5 is positon for t = max is stop time of the playing.\r\n * If stop time of the playing is infinity, then position is equal to the first item of the array or 0.6 in the example 1.\r\n * \r\n * Example 2: [{ t: 0, v: 0.6 }, { t: 1, v: -0.6 }]\r\n * Every item of array is object with:\r\n * t is time\r\n * v is position for current t.\r\n * <li>[Function]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function} - position of the point is function of the t.\r\n * Example: new Function( 't', 'a', 'b', 'return Math.sin(t*a*2*Math.PI)*0.5+b' )</li>\r\n * <li>string - text of the function.\r\n * Example: 'Math.sin(t*a*2*Math.PI)*0.5+b' )</li>\r\n * </ul>\r\n * <b>Vector.w</b> is index of the [palette]{@link https://github.com/anhr/commonNodeJS/tree/master/colorpicker}.\r\n * Default range of the <b>Vector.w</b> is from 0 to 100. You can change range by use an object:\r\n * {\r\n *   func: Vector.w\r\n *   max: new max value of tne Vector.w\r\n *   min: new min value of tne Vector.w\r\n * }\r\n * Example:\r\n * {\r\n *\r\n *   func: new Function( 't', 'return 1-2*t' ),\r\n *   min: -1,\r\n *   max: 1,\r\n *\r\n * }\r\n * <b>Vector.w</b> can be as [THREE.Color]{@link https://threejs.org/docs/index.html?q=colo#api/en/math/Color}. Example: new THREE.Color( \"rgb(255, 127, 0)\" )\r\n *\r\n * object: {\r\n *   vector: THREE.Vector4|THREE.Vector3|THREE.Vector2 - point position\r\n *   [name]: point name. Default is undefined.\r\n *   [trace]: true - displays the trace of the point movement. Default is undefined.\r\n *   \r\n *   //You can set the camera to look at a point. Use <b>cameraTarget</b> key for it.\r\n *   //ATTENTION!!! Only one point can have <b>cameraTarget</b> key!\r\n *   //   You will receive the \r\n *   \r\n *   //      Player.getPoints: duplicate cameraTarget\r\n *   \r\n *   //   console warning if two or more points have <b>cameraTarget</b> key.\r\n *   //   Then only last point with <b>cameraTarget</b> key will be have an effect.\r\n *   [cameraTarget]: {\r\n *\r\n *      camera: [camera]{@link https://threejs.org/docs/index.html#api/en/cameras/PerspectiveCamera},\r\n *      \r\n *      //rotation camera around point specified by an axis and an angle. Default is undefined - no rotation\r\n *      [rotation]: {\r\n *      \r\n *         [angle]: number|function|array. Angle of rotation in radians.\r\n *            number. Example: Math.PI / 2 rotate to 90 degrees.\r\n *            function. Example: new Function( 't', 'return 5*t' ).\r\n *            array. Example 1: [0, Math.PI]\r\n *                  0 is angle for t = min is start time of the playing.\r\n *                  Math.PI is rotate to 180 degrees for t = max is time of the stopping of the playing.\r\n *                  If max time is infinity, then angle is for t = min.\r\n *               Example 2: [{ t: 0, v: 0 }, { t: 1, v: Math.PI / 2 }\r\n *                  t is time,\r\n *                  v is angle for current t.\r\n *            \r\n *            Default is 0\r\n *\r\n *         [axis]: THREE.Vector3. Axis of rotattion. Example: new THREE.Vector3( 1, 0, 0 ) - rotate around x axis.\r\n *            Default is new THREE.Vector3( 0, 1, 0 );//Rotate around y axis\r\n *            \r\n *      },\r\n *      \r\n *      [distanceToCamera]: <b>THREE.Vector3</b>. Distance from point to camera.\r\n *         You can set the distance to the camera depending on the time.\r\n *         Example 1: new THREE.Vector3( 0, 0, new Function( 't', 'return 2+t' ) )\r\n *         Example 2: new THREE.Vector3( 0, 0, [{ t: 0, v: 5 }, { t: 1, v: 2 }, { t: 10, v: 2 }, { t: 11, v: 5 }] )\r\n *         Default is camera.position.\r\n *      [orbitControls]: [OrbitControls]{@link https://threejs.org/docs/index.html#examples/en/controls/OrbitControls}. Change the <b>OrbitControl</b> setting during playing.\r\n *      [orbitControlsGui]: <a href=\"../../OrbitControls/jsdoc/index.html\" target=\"_blank\">OrbitControlsGui</a> instance;\r\n *\r\n *   },\r\n *\r\n * }\r\n * or\r\n * object: {\r\n *   x: x axis. Defauilt is 0.\r\n *   y: y axis. Defauilt is 0.\r\n *   z: z axis. Defauilt is 0.\r\n *   w: w axis. Defauilt is 0.\r\n * }\r\n *\r\n * array: [\r\n *   0: x axis. Defauilt is 0.\r\n *   1: y axis. Defauilt is 0.\r\n *   2: z axis. Defauilt is 0.\r\n *   3: w axis. Defauilt is 0.\r\n * ]\r\n * </pre>\r\n * @param {object} [optionsPoints] followed optionsPoints is available\r\n * @param {THREE.Group} [optionsPoints.group] {@link https://threejs.org/docs/index.html#api/en/objects/Group|Group}\r\n * or {@link https://threejs.org/docs/index.html#api/en/scenes/Scene|Scene}.\r\n * Use only if you want trace lines during playing. See <b>trace</b> of the <b>arrayFuncs</b> param above.\r\n * @param {number} [optionsPoints.t=0] first parameter of the <b>arrayFuncs</b> item function. Start time of animation.\r\n * @param {object} [optionsPoints.options] the following options are available\r\n * @param {number} [optionsPoints.options.a=1] multiplier. Second parameter of the <b>arrayFuncs</b> item function.\r\n * @param {number} [optionsPoints.options.b=0] addendum. Third parameter of the <b>arrayFuncs</b> item function.\r\n * @param {object} [optionsPoints.options.playerOptions] See <b>settings.options.playerOptions</b> parameter of the <a href=\"../../player/jsdoc/module-Player-Player.html\" target=\"_blank\">Player</a> class.\r\n * @returns array of <b>THREE.Vector4</b> points.\r\n */\r\nPlayer.getPoints = function ( arrayFuncs, optionsPoints ) {\r\n\r\n\tassign();\r\n\t\r\n\tif ( !Array.isArray( arrayFuncs ) ) arrayFuncs = [ arrayFuncs ];\r\n\t\r\n\toptionsPoints = optionsPoints || {};\r\n\tif ( optionsPoints.t === undefined ) optionsPoints.t = optionsPoints.options && optionsPoints.options.player ? optionsPoints.options.player.getSettings().options.playerOptions.min : 0;\r\n\tconst options = optionsPoints.options || new Options(),\r\n\t\toptionsDefault = { palette: options.palette };\r\n/*\t\t\r\n\tif ( !options.boOptions ) {\r\n\r\n\t\tconsole.error( 'Player.getPoints: call options = new Options( options ) first' );\r\n\t\treturn;\r\n\r\n\t}\r\n*/\t\r\n\toptions.setW( optionsDefault );\r\n//\tsetOptions.setW( optionsDefault );\r\n\tconst wDefault = optionsDefault.scales.w.max;//new THREE.Vector4().w;//1;//          value,\r\n\t\t\t\t\t\t//    1    Options class.\r\n\t\t\t\t\t\t//   ColorPicker.paletteIndexes.BGRW\r\n\t\t\t\t\t\t//     value .\r\n\tfor ( var i = 0; i < arrayFuncs.length; i++ ) {\r\n\r\n\t\tvar item = arrayFuncs[i];\r\n\t\tif ( Array.isArray( item ) )\r\n\t\t\tarrayFuncs[i] = new THREE.Vector4(\r\n\r\n\t\t\t\titem[0] === undefined ? 0 : item[0],\r\n\t\t\t\titem[1] === undefined ? 0 : item[1],\r\n\t\t\t\titem[2] === undefined ? 0 : item[2],\r\n\t\t\t\titem[3] === undefined ? wDefault : item[3]\r\n\r\n\t\t\t);\r\n\t\telse if (\r\n\r\n\t\t\t( typeof item === \"object\" )\r\n\t\t\t&& ( item instanceof THREE.Vector2 === false )\r\n\t\t\t&& ( item instanceof THREE.Vector3 === false )\r\n\t\t\t&& ( item instanceof THREE.Vector4 === false )\r\n\r\n\t\t) {\r\n\r\n\t\t\tif ( ( item.vector === undefined ) )\r\n\t\t\t\tarrayFuncs[i] = new THREE.Vector4(\r\n\r\n\t\t\t\t\titem.x === undefined ? 0 : item.x,\r\n\t\t\t\t\titem.y === undefined ? 0 : item.y,\r\n\t\t\t\t\titem.z === undefined ? 0 : item.z,\r\n\t\t\t\t\titem.w === undefined ? 0 : item.w\r\n\r\n\t\t\t\t);\r\n\t\t\telse if (\r\n\r\n\t\t\t\t( item.vector instanceof THREE.Vector2 === true )\r\n\t\t\t\t|| ( item.vector instanceof THREE.Vector3 === true )\r\n\t\t\t\t|| ( item.vector instanceof THREE.Vector4 === true )\r\n\r\n\t\t\t) {\r\n\r\n\t\t\t\tif ( item.vector instanceof THREE.Vector2 === true )\r\n\t\t\t\t\tarrayFuncs[i].vector = new THREE.Vector3(\r\n\r\n\t\t\t\t\t\titem.vector.x === undefined ? 0 : item.vector.x,\r\n\t\t\t\t\t\titem.vector.y === undefined ? 0 : item.vector.y,\r\n\t\t\t\t\t\titem.vector.z === undefined ? 0 : item.vector.z,\r\n\r\n\t\t\t\t\t);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( item.vector.length === 4 )\r\n\t\t\t\t\tarrayFuncs[i].vector = new THREE.Vector4(\r\n\r\n\t\t\t\t\t\titem.vector[0] === undefined ? 0 : item.vector[0],\r\n\t\t\t\t\t\titem.vector[1] === undefined ? 0 : item.vector[1],\r\n\t\t\t\t\t\titem.vector[2] === undefined ? 0 : item.vector[2],\r\n\t\t\t\t\t\titem.vector[3] === undefined ? 0 : item.vector[3]\r\n\r\n\t\t\t\t\t);\r\n\t\t\t\telse if ( item.vector.length === 3 )\r\n\r\n\t\t\t\t\tarrayFuncs[i].vector = new THREE.Vector3(\r\n\r\n\t\t\t\t\t\titem.vector[0] === undefined ? 0 : item.vector[0],\r\n\t\t\t\t\t\titem.vector[1] === undefined ? 0 : item.vector[1],\r\n\t\t\t\t\t\titem.vector[2] === undefined ? 0 : item.vector[2],\r\n\r\n\t\t\t\t\t);\r\n\t\t\t\telse console.error( 'Player.getPoints(...) falied! item.vector.length = ' + item.vector.length );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\tconst points = [];\r\n\tfor ( var i = 0; i < arrayFuncs.length; i++ ) {\r\n\r\n\t\tvar funcs = arrayFuncs[i];\r\n\t\tfunction getAxis( axisName ) {\r\n\r\n\t\t\tif ( typeof funcs === \"number\" )\r\n\t\t\t\tfuncs = new THREE.Vector4( funcs, 0, 0, 0 );\r\n\t\t\tif ( ( funcs instanceof THREE.Vector2 ) || ( funcs instanceof THREE.Vector3 ) || ( funcs instanceof THREE.Vector4 ) ) {\r\n\r\n\t\t\t\tconst value = Player.execFunc( funcs, axisName, optionsPoints.t, options );\r\n\t\t\t\treturn value;\r\n\r\n\t\t\t}\r\n\t\t\tif ( funcs.vector === undefined ) {\r\n\r\n\t\t\t\tconsole.error( 'Player.getAxis().getPoints(): funcs.vector = ' + funcs.vector );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\t\t\tif ( funcs.name !== undefined )\r\n\t\t\t\tfuncs.vector.name = funcs.name;\r\n\t\t\tif ( funcs.trace && options.player ) funcs.vector.line = new Player.traceLine( options );\r\n\t\t\tif ( funcs.cameraTarget ) {\r\n\r\n\t\t\t\tfuncs.vector.cameraTarget = funcs.cameraTarget;\r\n\t\t\t\tdelete funcs.cameraTarget;\r\n\r\n\t\t\t}\r\n\t\t\tarrayFuncs[i] = funcs.vector;\r\n\t\t\tfuncs = funcs.vector;\r\n\t\t\treturn Player.execFunc( funcs, axisName, optionsPoints.t, options );\r\n\r\n\r\n\t\t}\r\n\t\tconst point = funcs.vector instanceof THREE.Vector3 === true ?\r\n\t\t\tnew THREE.Vector3( getAxis( 'x' ), getAxis( 'y' ), getAxis( 'z' ) ) :\r\n\t\t\tnew THREE.Vector4( getAxis( 'x' ), getAxis( 'y' ), getAxis( 'z' ), getAxis( 'w' ) );\r\n\r\n\t\tif ( funcs.cameraTarget ) {\r\n\r\n\t\t\tfuncs.cameraTarget.bodefault = false;\r\n\t\t\tif ( funcs.cameraTarget.boLook === undefined ) funcs.cameraTarget.boLook = true;\r\n\r\n/*\r\n\t\t\tif ( options.playerOptions.cameraTarget ) console.error( 'Player.getPoints: options.playerOptions.cameraTarget = ' + options.playerOptions.cameraTarget );\r\n\t\t\telse options.playerOptions.cameraTarget = new Player.cameraTarget();\r\n*/\t\t\t\r\n\t\t\toptions.playerOptions.cameraTarget.init( funcs.cameraTarget, options );\r\n//\t\t\tPlayer.cameraTarget.init( funcs.cameraTarget, options );\r\n\r\n\t\t}\r\n\t\tpoints.push( point );\r\n\r\n\t}\r\n\treturn points;\r\n\r\n}\r\nvar boColorWarning = true;\r\n/** @namespace\r\n * @description Get array of mesh colors.\r\n * @param {THREE.Vector4|THREE.Vector3|THREE.Vector2|object|array} arrayFuncs points.geometry.attributes.position array\r\n * <pre>\r\n * THREE.Vector4: 4D point.\r\n * THREE.Vector3: 3D point. w = 1. Default is white color\r\n * THREE.Vector2: 2D point. w = 1, z = 0. Default is white color\r\n * Vector's x, y, z, w is position of the point.\r\n * Can be as:\r\n * float - position of the point.\r\n * [float] - array of positions of the point.\r\n * [Function]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function} - position of the point is function of the t.\r\n * Example: new Function( 't', 'a', 'b', 'return Math.sin(t*a*2*Math.PI)*0.5+b' )\r\n *\r\n * Vector.w is index of the [palette]{@link https://github.com/anhr/commonNodeJS/tree/master/colorpicker}.\r\n * Default range of the Vector.w is from 0 to 100. You can change range by use an object:\r\n * {\r\n *   func: Vector.w\r\n *   max: new max value of tne Vector.w\r\n *   min: new min value of tne Vector.w\r\n * }\r\n * Example:\r\n * {\r\n *\r\n *   func: new Function( 't', 'return 1-2*t' ),\r\n *   min: -1,\r\n *   max: 1,\r\n *\r\n * }\r\n * Vector.w can be as THREE.Color. Example: new THREE.Color( \"rgb(255, 127, 0)\" )\r\n *\r\n * object: {\r\n *   vector: THREE.Vector4|THREE.Vector3|THREE.Vector2 - point position\r\n *   [name]: point name. Default is undefined.\r\n *   [trace]: true - displays the trace of the point movement. Default is undefined.\r\n * }\r\n * or\r\n * object: {\r\n *   x: x axis. Defauilt is 0.\r\n *   y: y axis. Defauilt is 0.\r\n *   z: z axis. Defauilt is 0.\r\n *   w: w axis. Defauilt is 0.\r\n * }\r\n *\r\n * array: [\r\n *   0: x axis. Defauilt is 0.\r\n *   1: y axis. Defauilt is 0.\r\n *   2: z axis. Defauilt is 0.\r\n *   3: w axis. Defauilt is 0.\r\n * ]\r\n * </pre>\r\n * @param {object} [optionsColor] the following options are available:\r\n * @param {object} [optionsColor.options] See the <b>options</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n * @param {THREE.BufferAttribute} [optionsColor.positions] geometry.attributes.position of the new mesh.\r\n * @param {array} [optionsColor.colors=[]] array for mesh colors.\r\n * @param {boolean} [optionsColor.opacity] if true then opacity of the point is depend from distance to all  meshes points from the group with defined mesh.userData.cloud.\r\n * @returns array of mesh colors.\r\n */\r\nPlayer.getColors = function ( arrayFuncs, optionsColor ) {\r\n\r\n\tassign();\r\n\t\r\n\tif ( !Array.isArray( arrayFuncs ) ) arrayFuncs = [ arrayFuncs ];\r\n\r\n\toptionsColor = optionsColor || {};\r\n\toptionsColor.options = optionsColor.options || {};\r\n\t\r\n\tif (\r\n\t\t( optionsColor.positions !== undefined ) &&\r\n\t\tArray.isArray( arrayFuncs ) &&\r\n\t\t( arrayFuncs.length !== optionsColor.positions.count )\r\n\t) {\r\n\r\n\t\tconsole.error( 'getColors failed! arrayFuncs.length: ' + arrayFuncs.length + ' != positions.count: ' + optionsColor.positions.count );\r\n\t\treturn optionsColor.colors;\r\n\r\n\t}\r\n\r\n\t//   const length.   \r\n\tconst length = Array.isArray( arrayFuncs ) ? arrayFuncs.length : optionsColor.positions.count;\r\n\r\n\toptionsColor.colors = optionsColor.colors || [];\r\n\tif ( !optionsColor.options.palette )\r\n\t\toptionsColor.options.setPalette();\r\n//\t\tsetOptions.setPalette( optionsColor.options );\r\n\r\n\tfor ( var i = 0; i < length; i++ ) {\r\n\r\n\t\tconst funcs = Array.isArray( arrayFuncs ) ? arrayFuncs[i] : undefined;\r\n\t\tvar vector;\r\n\t\tif (\r\n\t\t\t( funcs instanceof THREE.Vector4 ) ||//w of the funcs is color of the point\r\n\t\t\t( optionsColor.positions && ( optionsColor.positions.itemSize === 4 ) )//w position of the positions is color of the point\r\n\t\t\t) {\r\n\r\n\t\t\tlet min, max;\r\n\t\t\tvar w = funcs.w;\r\n\t\t\tif ( funcs.w instanceof Object && funcs.w.func ) {\r\n\r\n\t\t\t\tif ( funcs.w.max ) max = funcs.w.max;\r\n\t\t\t\tif ( funcs.w.min ) min = funcs.w.min;\r\n\t\t\t\tw = funcs.w.func;\r\n\r\n\t\t\t} else {\r\n\r\n//\t\t\t\tsetOptions.setW( optionsColor.options );\r\n\t\t\t\toptionsColor.options.setW();\r\n\t\t\t\tmin = optionsColor.options.scales.w.min; max = optionsColor.options.scales.w.max;\r\n\r\n\t\t\t}\r\n\t\t\tif ( w instanceof Function && !optionsColor.options.player && boColorWarning ) {\r\n/*\r\n\t\t\t\tconsole.warn( 'Player.getColors: remove all functions from all THREE.Vector4.w items of the arrayFuncs.' );\r\n\t\t\t\tconsole.warn( '\tOr call Player(...) https://raw.githack.com/anhr/commonNodeJS/master/player/jsdoc/module-Player.html' );\r\n\t\t\t\tconsole.warn( '\tIf you use MyPoints for create of the points, please add Player: Player into settings parameter of the MyPoints function after creating of the Player.' );\r\n\t\t\t\tconsole.warn( '\tIf you are using MyThree to create the scene, add the player key to the options parameter of the MyThree constructor. See https://raw.githack.com/anhr/commonNodeJS/master/myThree/jsdoc/module-MyThree-MyThree.html' );\r\n*/\t\t\t\t\r\n//\t\t\t\tsetOptions.setPlayerOptions( optionsColor.options );\r\n//\t\t\t\toptionsColor.options.setPlayerOptions();\r\n\t\t\t\tboColorWarning = false;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tvar color = optionsColor.options.palette.toColor(\r\n\t\t\t\tfuncs === undefined ?\r\n\t\t\t\t\tnew THREE.Vector4().fromBufferAttribute( optionsColor.positions, i ).w :\r\n\t\t\t\t\tw instanceof Function ?\r\n//\t\t\t\t\t\tw( _timeSettings ? _timeSettings.min : 0 ) :\r\n//\t\t\t\t\t\tw( _options.playerOptions ? _options.playerOptions.min : 0 ) :\r\n\t\t\t\t\t\tw( optionsColor.options.playerOptions ? optionsColor.options.playerOptions.min : 0 ) :\r\n\t\t\t\t\t\tw,\r\n\t\t\t\tmin, max );\r\n\t\t\toptionsColor.colors.push( color.r, color.g, color.b );\r\n\r\n\t\t} else if ( optionsColor.colors instanceof THREE.Float32BufferAttribute )\r\n\t\t\tvector = new THREE.Vector3( 1, 1, 1 );\r\n\t\telse optionsColor.colors.push( 1, 1, 1 );//white\r\n\r\n\t\t//opacity\r\n\t\tif ( optionsColor.opacity !== undefined ) {\r\n\r\n\t\t\tvar opacity = 0,\r\n\t\t\t\tstandardNormalDistributionZero = getStandardNormalDistribution( 0 );\r\n\t\t\tgroup.children.forEach( function ( mesh ) {\r\n\r\n\t\t\t\tif ( !mesh.userData.cloud )\r\n\t\t\t\t\treturn;\r\n\t\t\t\tfor ( var iMesh = 0; iMesh < mesh.geometry.attributes.position.count; iMesh++ ) {\r\n\r\n\t\t\t\t\tvar position = getObjectPosition( mesh, iMesh );\r\n\t\t\t\t\topacity += getStandardNormalDistribution(\r\n\t\t\t\t\t\tgetWorldPosition(\r\n\t\t\t\t\t\t\tcamera, new THREE.Vector3().fromBufferAttribute( optionsColor.positions, i )\r\n\t\t\t\t\t\t).distanceTo( position ) * 5\r\n\t\t\t\t\t) / standardNormalDistributionZero;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tif ( debug.opacity !== undefined )\r\n\t\t\t\topacity = debug.opacity;\r\n\r\n\t\t\tif ( optionsColor.colors instanceof THREE.Float32BufferAttribute ) {\r\n\r\n\t\t\t\toptionsColor.colors.setXYZW( i, vector.x, vector.y, vector.z, opacity );\r\n\r\n\t\t\t}\r\n\t\t\telse optionsColor.colors.push( opacity );\r\n\r\n\t\t} else optionsColor.colors.push( 1 );\r\n\r\n\t}\r\n\treturn optionsColor.colors;\r\n\r\n}\r\n\r\n/** @class */\r\nPlayer.traceLine = class traceLine\r\n{\r\n\r\n\r\n\t/**\r\n\t * trace line of moving of the point during playing\r\n\t * @param {object} options the following options are available\r\n\t * @param {object} options.player See <a href=\"../../player/jsdoc/module-Player.html\" target=\"_blank\">Player</a>.\r\n\t */\r\n\tconstructor( options ) {\r\n\r\n\t\tvar line;\r\n\t\tconst arrayLines = [];//    max: Infinity,\r\n\r\n\t\tassign();\r\n\r\n//\t\tif ( !Player.isCreated() )\r\n\t\tif ( !options.player ) {\r\n\r\n/*\r\n\t\t\tconsole.warn( 'Player.traceLine: Remove all trace: true from arrayFunc parameter of the MyPoints or getShaderMaterialPoints method.' );\r\n\t\t\tconsole.warn( '\tOr call ne Player(...) https://raw.githack.com/anhr/commonNodeJS/master/player/jsdoc/module-Player.html' );\r\n\t\t\tconsole.warn( '\tIf you use getShaderMaterialPoints or MyPoints for create of the points, please add Player: Player into settings parameter of the getShaderMaterialPoints or MyPoints method after creating of the Player.' );\r\n\t\t\tconsole.warn( '\tIf you are using MyThree to create the scene, add the player key to the options parameter of the MyThree constructor. See https://raw.githack.com/anhr/commonNodeJS/master/myThree/jsdoc/module-MyThree-MyThree.html' );\r\n*/\t\t\t\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\t\t/**\r\n\t\t * Is trace line visible?\r\n\t\t * @returns true - trace line is visible.\r\n\t\t * <p>false - trace line is not visible.</p>\r\n\t\t */\r\n\t\tthis.isVisible = function () {\r\n\r\n//\t\t\tif ( !Player.isCreated() )\r\n\t\t\tif ( !options.player )\r\n\t\t\t\treturn false;//  Player(...)\r\n\r\n\t\t\tif ( line ) return line.visible;\r\n\t\t\tif ( arrayLines.length === 0 ) return false;\r\n\t\t\t//   t max is Infinity ( options.playerOptions.max === null )       guiSelectPoint    \r\n\t\t\treturn arrayLines[0].visible;\r\n\r\n\t\t}\r\n\t\t/**\r\n\t\t * Show or hide trace line.\r\n\t\t * @param {boolean} visible true - show trace line.\r\n\t\t * <p>false - hide trace line.</p>\r\n\t\t */\r\n\t\tthis.visible = function ( visible ) {\r\n\r\n//\t\t\tif ( !Player.isCreated() )\r\n\t\t\tif ( !options.player )\r\n\t\t\t\treturn false;//  Player(...)\r\n\r\n\t\t\tif ( line ) {\r\n\r\n\t\t\t\tline.visible = visible;\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\t\t\t//   t max is Infinity (options.playerOptions.max === null)       guiSelectPoint     \r\n\t\t\tarrayLines.forEach( function ( line ) {\r\n\r\n\t\t\t\tline.visible = visible;\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * add point into trace line.\r\n\t\t * @param {THREE.Mesh} mesh. See [Mech]{@link https://threejs.org/docs/index.html#api/en/objects/Mesh} for tracing.\r\n\t\t * @param {number} index of the point for tracing.\r\n\t\t * @param {THREE.Color} color. Line color. See [Color]{@link https://threejs.org/docs/index.html#api/en/math/Color}.\r\n\t\t */\r\n\t\tthis.addPoint = function ( mesh, index, color ) {\r\n\r\n\t\t\tconst attributesPosition = mesh.geometry.attributes.position;\r\n\t\t\tvar point = attributesPosition.itemSize >= 4 ? new THREE.Vector4( 0, 0, 0, 0 ) : new THREE.Vector3();\r\n\t\t\tpoint.fromArray( attributesPosition.array, index * attributesPosition.itemSize );\r\n//\t\t\tconst sceneIndex = Player.getSelectSceneIndex();\r\n\r\n\t\t\t//  const    npm run build  \r\n\t\t\t// (babel plugin) SyntaxError: D:/My documents/MyProjects/webgl/three.js/GitHub/commonNodeJS/master/player/player.js: \"sceneIndex\" is read-only\r\n\t\t\tvar sceneIndex = options.player ? options.player.getSelectSceneIndex() : 0;\r\n\r\n\t\t\tif ( options.playerOptions.max === null ) {\r\n\r\n\t\t\t\tsceneIndex = Math.abs( sceneIndex );\r\n\t\t\t\tif ( sceneIndex < ( arrayLines.length - 1 ) ) {\r\n\r\n\t\t\t\t\twhile ( sceneIndex < ( arrayLines.length - 1 ) ) {\r\n\r\n\t\t\t\t\t\tmesh.remove( arrayLines[arrayLines.length - 1] );\r\n\t\t\t\t\t\tarrayLines.pop();\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// geometry\r\n\t\t\t\tconst geometry = new THREE.BufferGeometry(), MAX_POINTS = 2;\r\n\r\n\t\t\t\t// attributes\r\n\t\t\t\tconst positions = new Float32Array( MAX_POINTS * 3 ); // 3 coordinates per point\r\n\t\t\t\tgeometry.setAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\t\t\t\tconst colors = new Float32Array( MAX_POINTS * 3 ); // 3 coordinates per point\r\n\t\t\t\tgeometry.setAttribute( 'color', new THREE.Float32BufferAttribute( colors, 3 ) );\r\n\r\n\t\t\t\tconst line = new THREE.Line( geometry, new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } ) );\r\n\t\t\t\t//\t\t\tgroup.add( line );\r\n\t\t\t\tmesh.add( line );\r\n\r\n\t\t\t\t//      \r\n\t\t\t\t//  arrayLines[0]   visible = true          \r\n\t\t\t\t//    \r\n\t\t\t\tif ( arrayLines[0] ) line.visible = arrayLines[0].visible;\r\n\r\n\t\t\t\t//point position\r\n\t\t\t\tpoint = new THREE.Vector3().copy( point );\r\n\t\t\t\tconst itemSize = line.geometry.attributes.position.itemSize;\r\n\t\t\t\tpoint.toArray( line.geometry.attributes.position.array, 1 * itemSize );\r\n\t\t\t\tconst point0 = arrayLines.length === 0 ? point :\r\n\t\t\t\t\tnew THREE.Vector3().fromArray( arrayLines[arrayLines.length - 1].geometry.attributes.position.array, 1 * itemSize );\r\n\t\t\t\tpoint0.toArray( line.geometry.attributes.position.array, 0 * itemSize );\r\n\t\t\t\tline.geometry.attributes.position.needsUpdate = true;\r\n\r\n\t\t\t\t//point color\r\n\t\t\t\tif ( color === undefined )\r\n\t\t\t\t\tcolor = new THREE.Color( 1, 1, 1 );//White\r\n\t\t\t\tPlayer.setColorAttribute( line.geometry.attributes, 0, arrayLines.length === 0 ? color :\r\n\t\t\t\t\tnew THREE.Color().fromArray( arrayLines[arrayLines.length - 1].geometry.attributes.color.array, 1 * itemSize ) );\r\n\t\t\t\tPlayer.setColorAttribute( line.geometry.attributes, 1, color );\r\n\r\n\t\t\t\tarrayLines.push( line );\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\t\t\tif ( line === undefined ) {\r\n\r\n\t\t\t\t// geometry\r\n\t\t\t\tconst geometry = new THREE.BufferGeometry();\r\n\r\n\t\t\t\t//Thanks to https://stackoverflow.com/questions/31399856/drawing-a-line-with-three-js-dynamically/31411794#31411794\r\n\t\t\t\tvar MAX_POINTS;\r\n//\t\t\t\tif ( _timeSettings.max !== null )\r\n\t\t\t\tif ( options.playerOptions.max !== null ) {\r\n\r\n\t\t\t\t\tif ( options.playerOptions && options.playerOptions.marks )\r\n\t\t\t\t\t\tMAX_POINTS = options.playerOptions.marks;\r\n\t\t\t\t\telse if ( options.player && options.player.marks )\r\n\t\t\t\t\t\tMAX_POINTS = options.player.marks;\r\n\t\t\t\t\telse {\r\n\r\n\t\t\t\t\t\tconsole.error( 'Player.traceLine: MAX_POINTS = ' + MAX_POINTS + '. Create Player first or remove all trace = true from all items of the arrayFuncs' );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else MAX_POINTS = sceneIndex + 1;\r\n\r\n\t\t\t\t// attributes\r\n\t\t\t\tconst positions = new Float32Array( MAX_POINTS * 3 ); // 3 coordinates per point\r\n\t\t\t\tgeometry.setAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\t\t\t\tconst colors = new Float32Array( MAX_POINTS * 3 ); // 3 coordinates per point\r\n\t\t\t\tgeometry.setAttribute( 'color', new THREE.Float32BufferAttribute( colors, 3 ) );\r\n\r\n\t\t\t\t// draw range\r\n\t\t\t\tgeometry.setDrawRange( sceneIndex, sceneIndex );\r\n\r\n\t\t\t\tline = new THREE.Line( geometry, new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } ) );\r\n\t\t\t\tline.visible = true;\r\n\t\t\t\tmesh.add( line );\r\n\r\n\t\t\t}\r\n\t\t\t//   boundingSphere\r\n\t\t\t//         \r\n\t\t\t//               \r\n\t\t\t//      frustupoints\r\n\t\t\tif ( line.geometry ) {//scene do not have geometry\r\n\r\n\t\t\t\tdelete line.geometry.boundingSphere;\r\n\t\t\t\tline.geometry.boundingSphere = null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//point position\r\n\t\t\tpoint = new THREE.Vector3().copy( point );\r\n\t\t\tpoint.toArray( line.geometry.attributes.position.array, sceneIndex * line.geometry.attributes.position.itemSize );\r\n\t\t\tline.geometry.attributes.position.needsUpdate = true;\r\n\r\n\t\t\t//point color\r\n\t\t\tif ( color === undefined )\r\n\t\t\t\tcolor = new THREE.Color( 1, 1, 1 );//White\r\n\t\t\tPlayer.setColorAttribute( line.geometry.attributes, sceneIndex, color );\r\n\r\n\t\t\t//set draw range\r\n\t\t\tvar start = line.geometry.drawRange.start, count = sceneIndex + 1 - start;\r\n\t\t\tif ( start > sceneIndex ) {\r\n\r\n\t\t\t\tvar stop = start + line.geometry.drawRange.count;\r\n\t\t\t\tstart = sceneIndex;\r\n\t\t\t\tcount = stop - start;\r\n\r\n\t\t\t}\r\n\t\t\tline.geometry.setDrawRange( start, count );\r\n\r\n\t\t}\r\n\t\t/**\r\n\t\t * Remove trace line.\r\n\t\t */\r\n\t\tthis.remove = function () {\r\n\r\n\t\t\tif ( line === undefined )\r\n\t\t\t\treturn;\r\n\t\t\tline.geometry.dispose();\r\n\t\t\tline.material.dispose();\r\n\t\t\tline.parent.remove( line );\r\n\t\t\t//\t\tgroup.remove( line );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/* * @namespace\r\n * @returns selected scene index.\r\n */\r\n/*\r\nPlayer.getSelectSceneIndex = function () {\r\n\r\n\tif ( Player.player )\r\n\t\treturn Player.player.getSelectSceneIndex();\r\n\treturn 0;\r\n\r\n}\r\n*/\r\n/** @namespace\r\n * @returns current time of the player.\r\n */\r\nPlayer.getTime = function () {\r\n\r\n\tif ( Player.player )\r\n\t\treturn Player.player.getTime();\r\n\treturn 0;\r\n\r\n}\r\n\r\n/** @namespace\r\n * @description get item size of the attribute of the mesh geometry\r\n * @param {array} arrayFuncs points.geometry.attributes.position array.\r\n * See arrayFuncs parametr of the <a href=\"../../player/jsdoc/module-Player-Player.getPoints.html\" target=\"_blank\">Player.getPoints(...)</a> for details.\r\n */\r\nPlayer.getItemSize = function ( arrayFuncs ) {\r\n\r\n\tassign();\r\n\r\n\tfor ( var i = 0; i < arrayFuncs.length; i++ ) {\r\n\r\n\t\tvar func = arrayFuncs[i];\r\n\t\tif ( func instanceof THREE.Vector4 )\r\n\t\t\treturn 4;\r\n\r\n\t}\r\n\treturn 3;\r\n\r\n}\r\n/** @namespace\r\n * @description Select a scene for playing\r\n * @param {THREE.Group} group [THREE.Group]{@link https://threejs.org/docs/index.html#api/en/objects/Group}\r\n * @param {Object} [settings={}] the following settings are available.\r\n * @param {number} [settings.t=0] time\r\n * @param {number} [settings.index] index of the time.\r\n * @param {Object} [settings.options={}] See the <b>options</b> parameter of the <a href=\"../../myThree/jsdoc/module-MyThree-MyThree.html\" target=\"_blank\">MyThree</a> class.\r\n */\r\nPlayer.selectPlayScene = function ( group, settings = {} ) {\r\n\r\n\t//       3D     color.\r\n\t//     Player.getColors\r\n//\tColorPicker.palette.setTHREE( THREE );\r\n//\tsettings = settings || {};\r\n\tconst t = settings.t !== undefined ? settings.t : 0,\r\n\t\tindex = settings.index !== undefined ? settings.index : undefined,\r\n\t\toptions = settings.options || new Options();\r\n\tgroup.userData.t = t;\r\n//\tPlayer.selectMeshPlayScene( group, t, index, options );\r\n\tPlayer.selectMeshPlayScene( group, { t: t, options: options } );\r\n\tgroup.children.forEach( function ( mesh ) {\r\n\r\n//\t\tPlayer.selectMeshPlayScene( mesh, t, index, options );\r\n\t\tPlayer.selectMeshPlayScene( mesh, { t: t, options: options } );\r\n\r\n\t} );\r\n/*\t\r\n\tPlayer.cameraTarget.setCameraTarget( options );\r\n\tconst cameraTarget = Player.cameraTarget.get();\r\n*/\t\r\n\toptions.playerOptions.cameraTarget.setCameraTarget( options );\r\n\tconst cameraTarget = options.playerOptions.cameraTarget.get();\r\n\r\n\t// index === undefined     'Default'    .\r\n\t//   camera.userData.default.setDefault()\r\n\t//\r\n\t// index !== undefined             \r\n\t//        cameraTarget\r\n\tif ( cameraTarget && cameraTarget.setCameraPosition ) cameraTarget.setCameraPosition( index === undefined );\r\n\r\n}\r\nvar THREE;\r\n/* * @namespace\r\n * @description assign some THREE methods\r\n */\r\nfunction assign( ) {\r\n\r\n\tif ( !three.isThree() ) {\r\n\r\n\t\tconsole.warn( 'Player: can not assign. Set THREE first.' )\r\n\t\treturn;\r\n\r\n\t}\r\n\tTHREE = three.THREE;\r\n\tObject.assign( THREE.BufferGeometry.prototype, {\r\n\r\n\t\tsetFromPoints: function ( points, itemSize ) {\r\n\r\n\t\t\titemSize = itemSize || 3;\r\n\t\t\tvar position = [];\r\n\r\n\t\t\tfor ( var i = 0, l = points.length; i < l; i++ ) {\r\n\r\n\t\t\t\tvar point = points[i];\r\n\t\t\t\tposition.push( point.x, point.y, point.z || 0 );\r\n\t\t\t\tif ( itemSize >= 4 )\r\n\t\t\t\t\tposition.push( point.w || 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.setAttribute( 'position', new THREE.Float32BufferAttribute( position, itemSize ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t} );\r\n\r\n\t//three.js\\dev\\src\\math\\Vector4.js\r\n\tObject.assign( THREE.Vector4.prototype, {\r\n\r\n\t\tmultiply: function ( v ) {\r\n\r\n\t\t\tthis.x *= v.x;\r\n\t\t\tthis.y *= v.y;\r\n\t\t\tthis.z *= v.z;\r\n\t\t\t//\t\tthis.w *= v.w || 1;\r\n\t\t\tif ( v.w !== undefined )\r\n\t\t\t\tthis.w *= v.w;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t} );\r\n\t//three.js\\dev\\src\\math\\Vector4.js\r\n\tObject.assign( THREE.Vector4.prototype, {\r\n\r\n\t\tadd: function ( v, w ) {\r\n\r\n\t\t\tif ( w !== undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.x += v.x;\r\n\t\t\tthis.y += v.y;\r\n\t\t\tthis.z += v.z;\r\n\t\t\tif ( v.w !== undefined )\r\n\t\t\t\tthis.w += v.w;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t},\r\n\r\n\t} );\r\n\t//three.js\\dev\\src\\objects\\Points.js\r\n\tObject.assign( THREE.Points.prototype, {\r\n\r\n\t\traycast: function ( raycaster, intersects ) {\r\n\r\n\t\t\tconst _inverseMatrix = new THREE.Matrix4();\r\n\t\t\tconst _ray = new THREE.Ray();\r\n\t\t\tconst _sphere = new THREE.Sphere();\r\n\t\t\tconst _position = new THREE.Vector3();\r\n\t\t\tfunction testPoint( point, index, localThresholdSq, matrixWorld, raycaster, intersects, object ) {\r\n\r\n\t\t\t\tconst rayPointDistanceSq = _ray.distanceSqToPoint( point );\r\n\r\n\t\t\t\tif ( rayPointDistanceSq < localThresholdSq ) {\r\n\r\n\t\t\t\t\tconst intersectPoint = new THREE.Vector3();\r\n\r\n\t\t\t\t\t_ray.closestPointToPoint( point, intersectPoint );\r\n\t\t\t\t\tintersectPoint.applyMatrix4( matrixWorld );\r\n\r\n\t\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( intersectPoint );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\r\n\t\t\t\t\t\tpoint: intersectPoint,\r\n\t\t\t\t\t\tindex: index,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tobject: object\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst geometry = this.geometry;\r\n\t\t\tconst matrixWorld = this.matrixWorld;\r\n\t\t\tconst threshold = raycaster.params.Points.threshold;\r\n\r\n\t\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t\t_sphere.copy( geometry.boundingSphere );\r\n\t\t\t_sphere.applyMatrix4( matrixWorld );\r\n\t\t\t_sphere.radius += threshold;\r\n\r\n\t\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\r\n\r\n\t\t\t//\r\n\r\n\t\t\t_inverseMatrix.copy( matrixWorld ).invert();\r\n\t\t\t\r\n\t\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\r\n\r\n\t\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n\t\t\tconst localThresholdSq = localThreshold * localThreshold;\r\n\r\n\t\t\tif ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\t\tconst index = geometry.index;\r\n\t\t\t\tconst attributes = geometry.attributes;\r\n\t\t\t\tconst positions = attributes.position.array;\r\n\t\t\t\tconst itemSize = attributes.position.itemSize;\r\n\r\n\t\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\t\tconst indices = index.array;\r\n\r\n\t\t\t\t\tfor ( let i = 0, il = indices.length; i < il; i++ ) {\r\n\r\n\t\t\t\t\t\tconst a = indices[i];\r\n\r\n\t\t\t\t\t\t_position.fromArray( positions, a * itemSize );\r\n\r\n\t\t\t\t\t\ttestPoint( _position, a, localThresholdSq, matrixWorld, raycaster, intersects, this );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor ( let i = 0, l = positions.length / itemSize; i < l; i++ ) {\r\n\r\n\t\t\t\t\t\t_position.fromArray( positions, i * itemSize );\r\n\r\n\t\t\t\t\t\ttestPoint( _position, i, localThresholdSq, matrixWorld, raycaster, intersects, this );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst vertices = geometry.vertices;\r\n\r\n\t\t\t\tfor ( let i = 0, l = vertices.length; i < l; i++ ) {\r\n\r\n\t\t\t\t\ttestPoint( vertices[i], i, localThresholdSq, matrixWorld, raycaster, intersects, this );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t} );\r\n\r\n}\r\n//assign();\r\n/**\r\n * @namespace\r\n * @description assign some THREE methods\r\n * */\r\nPlayer.assign = function () { assign(); }\r\n\r\nexport default Player;\r\n"],"names":["___$insertStyle","css","window","style","document","createElement","setAttribute","innerHTML","head","appendChild","colorToString","color","forceCSSHex","colorFormat","__state","conversionName","toString","r","Math","round","g","b","a","h","s","toFixed","v","str","hex","length","ARR_EACH","Array","prototype","forEach","ARR_SLICE","slice","Common","extend","target","each","call","arguments","obj","keys","isObject","Object","key","isUndefined","bind","defaults","compose","toCall","args","i","apply","itr","scope","l","BREAK","_key","defer","fnc","debounce","func","threshold","callImmediately","timeout","delayed","callNow","setTimeout","toArray","undefined","isNull","_isNaN","isNaN","_x","isArray","constructor","isNumber","isString","isBoolean","isFunction","INTERPRETATIONS","read","original","test","match","parseInt","parseFloat","write","result","toReturn","interpret","family","litmus","conversions","conversion","tmpComponent","ColorMath","hsv_to_rgb","hi","floor","f","p","q","t","c","rgb_to_hsv","min","max","delta","NaN","rgb_to_hex","hex_with_component","component_from_hex","componentIndex","value","_typeof","Symbol","babelHelpers.typeof","iterator","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","inherits","subClass","superClass","create","setPrototypeOf","__proto__","possibleConstructorReturn","self","ReferenceError","Color","Error","toHexString","toOriginal","defineRGBComponent","component","componentHexIndex","get$$1","space","recalculateRGB","set$$1","defineHSVComponent","recalculateHSV","COMPONENTS","Controller","initialValue","domElement","__onChange","__onFinishChange","onChange","onFinishChange","setValue","newValue","updateDisplay","getValue","isModified","EVENT_MAP","EVENT_MAP_INV","k","e","CSS_VALUE_PIXELS","cssValueToPixels","val","dom","makeSelectable","elem","selectable","onselectstart","MozUserSelect","KhtmlUserSelect","unselectable","makeFullscreen","hor","vert","vertical","horizontal","position","left","right","top","bottom","fakeEvent","eventType","pars","aux","params","className","evt","createEvent","clientX","x","clientY","y","initMouseEvent","bubbles","cancelable","clickCount","init","initKeyboardEvent","initKeyEvent","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode","initEvent","dispatchEvent","event","newBool","bool","addEventListener","attachEvent","unbind","removeEventListener","detachEvent","addClass","classes","split","indexOf","push","join","replace","removeClass","removeAttribute","index","splice","hasClass","RegExp","getWidth","getComputedStyle","width","getHeight","height","getOffset","el","offset","offsetParent","offsetLeft","offsetTop","isActive","activeElement","type","href","BooleanController","_Controller","_this2","_this","__prev","__checkbox","checked","OptionController","opts","options","__select","map","element","opt","desiredValue","selectedIndex","StringController","__input","onBlur","blur","numDecimals","NumberController","_params","__min","__max","__step","step","__impliedStep","pow","log","abs","LN10","__precision","_v","minValue","maxValue","stepValue","roundToDecimal","decimals","tenTo","NumberControllerBox","_NumberController","__truncationSuspended","prevY","attempted","onFinish","onMouseDrag","diff","onMouseUp","onMouseDown","i1","i2","o1","o2","NumberControllerSlider","__background","__foreground","onTouchStart","preventDefault","bgRect","getBoundingClientRect","touches","onTouchMove","onTouchEnd","pct","FunctionController","text","__button","fire","ColorController","__color","__temp","__selector","__saturation_field","__field_knob","__field_knob_border","__hue_knob","__hue_field","__input_textShadow","valueField","fieldDown","fieldDownH","setSV","fieldUpSV","setH","fieldUpH","fieldRect","_ref","_ref2","mismatch","flip","_flip","marginTop","vendors","linearGradient","background","vendor","cssText","hueGradient","ControllerFactory","CustomController","newController","_controller","load","url","indoc","doc","link","rel","getElementsByTagName","inject","cssContent","injected","saveDialogContents","requestAnimationFrame","callback","requestAnimationFrame$1","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","CenteredDiv","backgroundElement","body","hide","show","display","opacity","webkitTransform","layout","innerWidth","innerHeight","styleSheet","CSS_NAMESPACE","HIDE_KEY_CODE","CLOSE_BUTTON_HEIGHT","DEFAULT_DEFAULT_PRESET_NAME","SUPPORTS_LOCAL_STORAGE","localStorage","SAVE_DIALOGUE","autoPlaceVirgin","autoPlaceContainer","hideableGuis","GUI","__ul","__folders","__controllers","__rememberedObjects","__rememberedObjectIndecesToControllers","__listening","DEFAULT_WIDTH","autoPlace","preset","hideable","resizable","scrollable","useLocalStorage","getItem","getLocalStorageHash","saveToLocalStorage","titleRow","closeOnTop","getRoot","revert","name","closed","CLASS_CLOSED","onResize","__closeButton","TEXT_OPEN","TEXT_CLOSED","setItem","CLASS_MAIN","savedGui","JSON","parse","CLASS_CLOSE_BUTTON","CLASS_CLOSE_TOP","insertBefore","childNodes","CLASS_CLOSE_BOTTOM","titleRowName","createTextNode","addRow","onClickTitle","CLASS_AUTO_PLACE_CONTAINER","CLASS_AUTO_PLACE","__resizeHandler","onResizeDebounced","stringify","getSaveObject","saveToLocalStorageIfPossible","resetWidth","root","toggleHide","gui","CLASS_CONTROLLER_ROW","CLASS_TOO_TALL","CLASS_DRAG","_keydownHandler","which","add","_add","addColor","remove","controller","removeChild","__li","destroy","subfolder","removeFolder","addFolder","newGuiParams","folders","li","folder","parentElement","open","close","node","__save_row","__resize_handle","offsetHeight","remember","remembered","getCurrentPreset","save","saveAs","presetName","listen","newDom","liBefore","removeListeners","markPresetModified","modified","__preset_select","augmentController","__gui","_options","nextSibling","nextElementSibling","_nextSibling","_name","firstElementChild","box","method","pc","pb","returned","oldName","wasListening","stopPropagation","borderLeftColor","recallSavedValue","matchedIndex","controllerMap","presetMap","customObject","factoryArgs","concat","before","propertyName","container","location","addPresetOption","setSelected","showHideExplain","explain","addSaveMenu","div","firstChild","gears","button","button2","button3","select","getElementById","localStorageCheckBox","saveLocally","newConstructorTextArea","focus","prompt","addResizeHandle","pmouseX","drag","dragStop","dragStart","setWidth","w","useInitialValues","savedValues","setPresetSelectIndex","updateDisplays","controllerArray","controllers","UpDownController","title","onclick","cursor","onwheel","onWheel","deltaY","detail","wheelDelta","margin","_THREE","_dat","three","THREE","is","console","error","dat","__myThree__","boThree","isThree","ScaleController","settings","zoomMultiplier","customController","lang","_languageCode","getLanguageCode","zoom","in","out","wheelZoom","languageCode","buttons","addButton","zoomLabel","PositionController","onclickController","subtract","wheelPosition","Label","shift","getWorldPosition","pos","clone","getPosition","Vector3","positionAngle","multiply","scale","copy","applyEuler","rotation","z","WEBGL","canvas","WebGLRenderingContext","getContext","WebGL2RenderingContext","getErrorMessage","version","names","contexts","message","id","fontFamily","fontSize","fontWeight","textAlign","padding","myRequest","loadXMLDoc","req","XMLHttpRequest","ActiveXObject","NewActiveXObject","XMLHttpRequestStart","onreadystatechange","async","XMLHttpRequestStop","onerror","XMLHttpRequestReStart","getUrl","ontimeout","timeout_id_SendReq","send","abort","ProcessReqChange","processStatus200","readyState","status","processStatus200Error","GetElementText","tagName","noDisplayErrorMessage","xmlhttp","responseXML","ErrorMessage","responseText","textContent","data","navigator","appName","appVersion","sync","onload","response","request","src","appendTo","isScriptExists","optionsItem","tag","item","script","loadFileSync","loadScriptBase","isrc","srcAsync","next","_onload","attribute","elParent","scripts","querySelectorAll","child","loadScript","optionsStyle","getCurrentScript","currentScript","stack","getCurrentScriptPath","path","substring","lastIndexOf","currentScriptPath","SVGAngle","implementation","hasFeature","svgNS","uniqID","ColorPicker","paletteIndexes","CreateSVGElement","attrs","children","createElementNS","len","elSliderWrapper","orientation","isHorizontal","direction","onError","HTMLElement","classList","palette","slide","getSlideHeight","getSlideWidth","clientWidth","slideIndicator","hsv2rgb","percent","sliderIndicator","pointerEvents","positionIndicators","offsetWidth","getPalette","fill","mouseMove","mouse","size","slideListener","mouseout","mousePosition","contentOverflow","offsetX","offsetY","wrapper","parentNode","layerX","layerY","listener","enableDragging","ctx","rect","srcElement","mouseup","mousemove","paletteitem","BGRW","getPaletteIndex","arrayPalette","monochrome","bidirectional","rainbow","unshift","Number","toUpperCase","stringPercent","lastPalette","lastItem","itemPrev","percentPrev","prev","percentItem","percentD","toColor","OrbitControls","EventDispatcher","MOUSE","Quaternion","Spherical","TOUCH","Vector2","warn","enabled","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ROTATE","MIDDLE","DOLLY","PAN","ONE","TWO","DOLLY_PAN","target0","position0","zoom0","_domElementKeyEvents","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","listenToKeyEvents","onKeyDown","saveState","reset","updateProjectionMatrix","changeEvent","update","STATE","NONE","quat","setFromUnitVectors","up","quatInverse","invert","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","state","getAutoRotationAngle","sphericalDelta","isFinite","makeSafe","radius","addScaledVector","panOffset","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","onContextMenu","onPointerDown","onMouseWheel","ownerDocument","onPointerMove","onPointerUp","startEvent","endEvent","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","rotateLeft","angle","rotateUp","panLeft","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","handleMouseMoveDolly","handleMouseMovePan","handleMouseWheel","handleKeyDown","needsUpdate","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartDollyPan","handleTouchStartDollyRotate","handleTouchMoveRotate","handleTouchMovePan","handleTouchMoveDolly","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","pointerType","mouseAction","onMouseMove","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","DOLLY_ROTATE","TOUCH_DOLLY_ROTATE","MapControls","createEventDispatcher","isEnabled","cookieEnabled","cookie_date","Date","setTime","getTime","cookie","toGMTString","setObject","defaultValue","results","unescape","getObject","optionsDefault","defaultCookie","copyObject","objectDefault","consoleCookieEnabled","option","isTrue","setCookie","getCookie","_getLocale","languages","language","browserLanguage","systemLanguage","userLanguage","toLowerCase","isWebGLAvailable","getWebGLErrorMessage","Options","boOptions","setW","optionsCur","axisName","scales","setPalette","Vector4","boCreateScale","setScale","point","sizePointsMaterial","createOrbitControls","camera","renderer","scene","orbitControls","restoreSceneController","defaultButton","defaultTitle","scenePosition","cameraPosition","controllerNameAndTitle","player","playerOptions","marks","dt","repeat","interval","cameraTarget","Player","Dat","boDat","cookieName","guiSelectPoint","cameraGui","guiCount","mouseenter","Cookie","getCookieName","elContainer","raycaster","canvasMenu","frustumPoints","stereoEffect","axesHelper","pointLight","group","getOptions","boPlayer","onSelectScene","selectPlayScene","setIndex","updateCloudPoints","selectSceneIndex","selectScene","pushController","playRate","playing","time","timeNext","RenamePlayButtons","onRenamePlayButtons","play","pause","isRepeat","playNext","play3DObject","timestamp","onChangeRepeat","getSettings","getSelectSceneIndex","getLang","playerTitle","dtTitle","marksTitle","intervalTitle","_lang","localization","prevSymbolTitle","playTitle","nextSymbolTitle","pauseTitle","repeatOn","repeatOff","controllerTitle","stereoEffects","mono","sideBySide","topAndBottom","PlayController","playController","_getGroup","_selectScene","_renamePlayButtons","_renameRepeatButtons","colorOff","colorOn","buttonPlay","buttonPrev","prevSymbol","playSymbol","RenameRepeatButtons","buttonRepeat","buttonNext","nextSymbol","controler","playerGui","setDT","setSettings","onChangeScaleT","setMax","axesDefault","freeze","fPlayer","folderNameAndTitle","axes","scaleControllers","action","scaleController","positionController","controllerZeroStep","elSlider","getSliderElement","marksName","_canvasMenu","createCanvasMenuItem","menu","elMenuButtonPlay","querySelector","addSlider","addSliderEvents","onchange","oninput","pointerdown","onChangeScale","cameraTargetDefault","boLook","distanceToCameraCur","distanceToCamera","boTarget","boCameraTargetLook","_cameraTarget","setCameraTarget","bodefault","axis","boMaual","changeTarget","mesh","userData","arrayFuncs","fromArray","geometry","attributes","array","itemSize","execFunc","setCameraPosition","equals","applyAxisAngle","orbitControlsGui","setTarget","_listeners","change","funcs","typeofFuncs","res","execW","tStep","tStart","tStop","iStart","iStop","selectMeshPlayScene","boFrustumPoints","boundingSphere","setRotation","setAttributes","setPosition","fnName","getColor","material","ShaderMaterial","vertexColors","VertexColors","setColorAttribute","Float32BufferAttribute","getColors","line","addPoint","setMesh","selectedPointIndex","getSelectedPointIndex","isSelectedMesh","colorAttribute","ca","setX","setY","setZ","getPoints","optionsPoints","wDefault","vector","points","getAxis","trace","traceLine","boColorWarning","optionsColor","positions","count","colors","fromBufferAttribute","standardNormalDistributionZero","getStandardNormalDistribution","cloud","iMesh","getObjectPosition","distanceTo","debug","setXYZW","arrayLines","isVisible","visible","attributesPosition","sceneIndex","pop","BufferGeometry","MAX_POINTS","Float32Array","BufferAttribute","Line","LineBasicMaterial","point0","setDrawRange","start","drawRange","stop","getItemSize","assign","addVectors","Points","intersects","_inverseMatrix","Matrix4","_ray","Ray","_sphere","Sphere","_position","testPoint","localThresholdSq","matrixWorld","rayPointDistanceSq","distanceSqToPoint","intersectPoint","closestPointToPoint","applyMatrix4","ray","origin","near","far","computeBoundingSphere","intersectsSphere","localThreshold","isBufferGeometry","indices","il","vertices"],"mappings":"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"}