{"version":3,"file":"cookie.js","sources":["../index.js"],"sourcesContent":["/**\r\n * @module cookie\r\n * @description node.js version of the cookie.\r\n * Cookies let you store user information in web pages.\r\n * @see {@link https://www.w3schools.com/js/js_cookies.asp}\r\n *\r\n * @author [Andrej Hristoliubov]{@link https://github.com/anhr}\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\nexport { isEnabled, set, setObject, get, getObject, copyObject, remove, defaultCookie };\r\n\r\n/**\r\n * Is the cookie enabled in your web browser?\r\n * @returns {boolean} true if cookie enabled\r\n * \r\n * @example\r\n\tvar isCookieEnabled = cookie.isEnabled('age', 25);\r\n */\r\nfunction isEnabled() {\r\n\r\n\treturn navigator.cookieEnabled;\r\n\t//Enable cookie\r\n\t//Chrome: Settings/Show advanced settings.../Privacy/Content settings.../Cookies/Allow local data to be set\r\n\r\n}\r\n\r\n/**\r\n * Set a cookie.\r\n * @param {string} name cookie name.\r\n * @param {any} value cookie value.\r\n * @param {Date} [cookie_date] expiry date (in UTC time). Optional.\r\n * @example\r\n\tcookie.set('age', 25);\r\n */\r\nfunction set( name, value, cookie_date ) {\r\n\r\n\tif ( !isEnabled() ) {\r\n\r\n\t\tconsoleCookieEnabled();\r\n\t\treturn;\r\n\r\n\t}\r\n\tvalue = value.toString();\r\n\t//http://ruseller.com/lessons.php?rub=28&id=593\r\n\tif ( cookie_date === undefined ) {\r\n\r\n\t\tcookie_date = new Date();  // Curent date and time\r\n\t\tcookie_date.setTime( cookie_date.getTime() + 1000 * 60 * 60 * 24 * 365 );//expiry date is one year\r\n\r\n\t}\r\n\tdocument.cookie = name + \"=\" + value + ( ( typeof settings == 'undefined' ) ? '' : settings ) + \"; expires=\" + cookie_date.toGMTString();\r\n\tif ( document.cookie === '' )\r\n\t\tconsole.error( 'document.cookie is empty' );\r\n\r\n}\r\n\r\n/**\r\n * sets an object into cookie.\r\n * @param {string} name cookie name.\r\n * @param {any} object an object for saving into cookie.\r\n */\r\nfunction setObject( name, object ) {\r\n\r\n\tset( name, JSON.stringify( object ) );\r\n\r\n};\r\n\r\n/**\r\n * Get a cookie.\r\n * @param {string} name cookie name.\r\n * @param {any} [defaultValue] cookie default value. Optional.\r\n * @returns {string} cookie value or defaultValue if cookie was not found.\r\n * @example\r\n\tvar age = cookie.get('age', 25);\r\n */\r\nfunction get( name, defaultValue ) {\r\n\r\n\tif ( !isEnabled() ) {\r\n\r\n\t\tconsoleCookieEnabled();\r\n\t\treturn;\r\n\r\n\t}\r\n\t//http://ruseller.com/lessons.php?rub=28&id=593\r\n\tvar results = document.cookie.match( '(^|;) ?' + name + '=([^;]*)(;|$)' );\r\n\r\n\tif ( results )\r\n\t\treturn ( unescape( results[2] ) );\r\n\tif ( typeof defaultValue == 'undefined' )\r\n\t\treturn '';\r\n\treturn defaultValue;\r\n\r\n}\r\n\r\n/**\r\n * gets an object from cookie.\r\n * @param {string} name name of the object.\r\n * @param {any} options load an object from cookie into options.\r\n * @param {Object} optionsDefault copy to options this default object if named object is not exists in the cookie.\r\n */\r\nfunction getObject( name, options, optionsDefault ) {\r\n\r\n\tnew defaultCookie().getObject( name, options, copyObject( name, optionsDefault ) );\r\n\r\n};\r\n\r\n/**\r\n * gets an object from cookie and returns a copy of object.\r\n * @param {string} name name of the object.\r\n * @param {Object} objectDefault copy to options this default object if named object is not exists in the cookie.\r\n * @returns copy of object from cookie.\r\n */\r\nfunction copyObject( name, objectDefault ) {\r\n\r\n\treturn JSON.parse( get( name, JSON.stringify( objectDefault ) ) );\r\n\r\n}\r\n\r\n/**\r\n * Remove cookie\r\n * @param {string} name cookie name.\r\n */\r\nfunction remove( name ) {\r\n\r\n\tif ( !isEnabled() ) {\r\n\r\n\t\tconsoleCookieEnabled();\r\n\t\treturn;\r\n\r\n\t}\r\n\t//http://ruseller.com/lessons.php?rub=28&id=593\r\n\tvar cookie_date = new Date();  // ������� ���� � �����\r\n\tcookie_date.setTime( cookie_date.getTime() - 1 );\r\n\tdocument.cookie = name += \"=; expires=\" + cookie_date.toGMTString();\r\n\r\n}\r\n\r\nfunction consoleCookieEnabled() {\r\n\r\n\tconsole.error( 'navigator.cookieEnabled = ' + navigator.cookieEnabled );\r\n\r\n}\r\n\r\n/**\r\n * Default cookie is not saving settings\r\n * @param {any} name is not using\r\n */\r\nfunction defaultCookie( name ) {\r\n\r\n\t/**\r\n\t * Default cookie is not loading settings\r\n\t * @param {any} defaultValue\r\n\t * @returns defaultValue\r\n\t */\r\n\tthis.get = function ( defaultValue ) {\r\n\r\n\t\treturn defaultValue;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Default cookie is not saving settings\r\n\t */\r\n\tthis.set = function () {\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Default cookie is not loading objects\r\n\t * @param {string} name is not using\r\n\t * @param {any} options load an object from optionsDefault into options\r\n\t * @param {Object} optionsDefault source object\r\n\t */\r\n\tthis.getObject = function ( name, options, optionsDefault ) {\r\n\r\n\t\tif ( !optionsDefault )\r\n\t\t\treturn;//object's settings is not saving\r\n\t\tObject.keys( optionsDefault ).forEach( function ( key ) {\r\n\r\n\t\t\t//I cannot modify options[key] if optionsDefault is read only and options[key] is not copy of optionsDefault[key]\r\n\t\t\t//options[key] = optionsDefault[key];\r\n\t\t\t//copy key\r\n\t\t\tvar option = optionsDefault[key];\r\n\t\t\tif ( ( option !== undefined ) && ( typeof option !== 'function' ) )\r\n\t\t\t\toptions[key] = JSON.parse( JSON.stringify( option ) );\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * copy and returns an object from objectDefault\r\n\t * @param {string} name is not using\r\n\t * @param {any} objectDefault source object\r\n\t */\r\n\tthis.copyObject = function ( name, objectDefault ){\r\n\r\n\t\treturn JSON.parse( JSON.stringify( objectDefault ) );\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Default cookie is not saving object's settings\r\n\t */\r\n\tthis.setObject = function () {\r\n\r\n\t};\r\n\r\n\tthis.isTrue = function ( defaultValue ) {\r\n\r\n\t\treturn defaultValue;\r\n\r\n\t};\r\n\r\n};\r\n"],"names":["isEnabled","navigator","cookieEnabled","set","name","value","cookie_date","toString","undefined","Date","setTime","getTime","cookie","settings","toGMTString","document","console","error","setObject","object","JSON","stringify","get","defaultValue","results","match","unescape","getObject","options","optionsDefault","defaultCookie","copyObject","objectDefault","parse","remove","consoleCookieEnabled","keys","forEach","key","option","isTrue"],"mappings":"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"}