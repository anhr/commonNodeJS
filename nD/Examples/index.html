<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="utf-8" />
	<title>nD</title>

	<!--for mobile devices-->
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

	<meta name="author" content="Andrej Hristoliubov https://anhr.github.io/AboutMe/">
	<!--
	<script src="../../myThree/build/myThree.js"></script>
	<script src="../../myThree/build/myThree.min.js"></script>
	<script src="../../../../../three.js/dev/build/three.js"></script>
	<script src="../../../../../three.js/dev/build/three.min.js"></script>
	<script src="https://raw.githack.com/anhr/three.js/dev/build/three.js"></script>
	<script src="https://raw.githack.com/anhr/three.js/dev/build/three.min.js"></script>
	<script src="https://threejs.org/build/three.js"></script>
	<script src="https://threejs.org/build/three.min.js"></script>
	-->
</head>
<body>
	<p>
		<a href='https://github.com/anhr' target="_blank">About me</a>
	</p>
	<h1>nD.</h1>
	<h2>2D.</h2>
	Click the "►" button in the lower left corner of the canvas to intersect the blue line with the green triangle.
	<div id="2D">
		<img src="../../img/wait.gif">
	</div>
	<h2>1D.</h2>
	Click the "►" button in the lower left corner of the canvas to intersect the blue point with the green line.
	<div id="1D">
		<img src="../../img/wait.gif">
	</div>
	<h2>0D.</h2>You can see a white point in the center of 0D canvas if the blue point in 1D canvas intersects with the green line.
	<div id="0D">
		<img src="../../img/wait.gif">
	</div>
	<script nomodule>alert( 'Fatal error: Your browser do not support modular JavaScript code.' );</script>
	<script type="module">

		import * as THREE from '../../../../three.js/dev/build/three.module.js';
		//import * as THREE from 'https://threejs.org/build/three.module.js';
		//import * as THREE from 'https://raw.githack.com/anhr/three.js/dev/build/three.module.js';

		import MyThree from '../../myThree/myThree.js';
		//import MyThree from '../../myThree/build/myThree.module.js';
		//import MyThree from '../../myThree/build/myThree.module.min.js';
		if ( MyThree.default ) MyThree = MyThree.default;
		MyThree.three.THREE = THREE;

		import ND from '../nD.js';

		//2D
		new MyThree( function ( scene, options ) {

			const vectorsObject = [new ND.Vector( [-0.5, 0.5] ), new ND.Vector( [0.5, 0.5] )];

			const vectorPlane = new ND.Vector( [0, 0] );
			var point0D;

			new ND( vectorsObject, vectorPlane, options, {

				scene: scene,
				onIntersection: function ( nDgeometry ) {

					if ( !canvas0D.scene ) return;
					if ( nDgeometry ) {

						if ( !point0D )
							MyThree.MyPoints( [], canvas0D.scene, {

								pointsOptions: {

									onReady: function ( points ) {

										point0D = points;
										//console.log( 'MyPoints.onReady' );
										if ( canvas0D.options.guiSelectPoint )
											canvas0D.options.guiSelectPoint.addMesh( points );

									},

								},
								name: 'intersection',

							} );

					} else {

						if ( point0D ) {

							//console.log( 'remove point' );
							canvas0D.scene.remove( point0D );
							if ( canvas0D.options.guiSelectPoint )
								canvas0D.options.guiSelectPoint.removeMesh( point0D );
							point0D = undefined;

						}

					}

				}

			} );

			//new time of the player event
			options.onSelectScene = function ( t ) {

				vectorPlane[1] = options.scales.y.min + t * ( options.scales.y.max - options.scales.y.min );

			}

		}, {

			elContainer: "2D",

			//axesHelper: false,
			playerOptions: {

				marks: 110,//Number of scenes of 3D objects animation.
				interval: 25,//Ticks per seconds.

			},
			//player: false,
			dat: {},
			//dat: false,
			camera: {

				position: new THREE.Vector3( 0, 0, 5 ),
				fov: 45,
				near: 1,
				far: 1000,

			},
			orbitControls: false,
			stereoEffect: false,
			//scales: { x: {} },

		} );

		//1D
		new MyThree( function ( scene, options ) {

			const vectorsObject = [new ND.Vector( [-0.5] ), new ND.Vector( 0.5 )];

			//ND.Vector test
			/*
			{

				const vector = new ND.Vector( [-5, 7.8] );
				const n_dimension = vector.length//2
				const point = vector.point;//THREE.Vector3( -5, 7.8, 0 )
				const vector0 = vector[0]//-5
				const vector1 = vector[1]//7.8

			}
			vectorsObject[0][0] = -4;
			var arr = new Proxy(vectorsObject[0], {
			  set: function(target, name, value) {
					target[name] = value;
				return target[name];
			  }
			});
			const w = arr[0];
			arr[0] = -4;
			vectorsObject[0].push( 56 );
			vectorsObject[0].pop();
			*/

			const vectorPlane = new ND.Vector();
			var point0D;

			new ND( vectorsObject, vectorPlane, options, {

				scene: scene,
				onIntersection: function ( nDgeometry ) {

					if ( !canvas0D.scene ) return;
					if ( nDgeometry ) {

						if ( !point0D )
							MyThree.MyPoints( [], canvas0D.scene, {

								pointsOptions: {

									onReady: function ( points ) {

										point0D = points;
										//console.log( 'MyPoints.onReady' );
										if ( canvas0D.options.guiSelectPoint )
											canvas0D.options.guiSelectPoint.addMesh( points );

									},

								},
								name: 'intersection',

							} );

					} else {

						if ( point0D ) {

							//console.log( 'remove point' );
							canvas0D.scene.remove( point0D );
							if ( canvas0D.options.guiSelectPoint )
								canvas0D.options.guiSelectPoint.removeMesh( point0D );
							point0D = undefined;

						}

					}

				}

			} );

			//new time of the player event
			options.onSelectScene = function ( t ) {

				vectorPlane[0] = options.scales.x.min + t * ( options.scales.x.max - options.scales.x.min );

			}

		}, {

			elContainer: "1D",
			//point: { size: 100 },

			//axesHelper: false,
			playerOptions: {

				marks: 110,//Number of scenes of 3D objects animation.
				interval: 25,//Ticks per seconds.

			},
			//player: false,
			dat: { },
			//dat: false,
			camera: {

				position: new THREE.Vector3( 0, 0, 5 ),
				fov: 45,
				near: 1,
				far: 1000,

			},
			orbitControls: false,
			stereoEffect: false,
			//scales: { x: {} },

		} );

		//0D

		const canvas0D = {};
		new MyThree( function ( scene, options ) {

			canvas0D.scene = scene;
			canvas0D.options = options;

		}, {

			elContainer: "0D",
			//scales: scales,
			player: false,
			dat: false,
			axesHelper: false,
			orbitControls: false,
			stereoEffect: false,

		} );

	</script>
</body>
</html >
