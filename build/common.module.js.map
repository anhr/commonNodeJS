{"version":3,"file":"common.module.js","sources":["../lang.js","../three.js","../index.js"],"sourcesContent":["/**\r\n * @module Localization.\r\n *\r\n * @author [Andrej Hristoliubov]{@link https://github.com/anhr}\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\n/**\r\n * returns the \"primary language\" subtag of the version of the browser.\r\n * See the \"Syntax\" paragraph of RFC 4646 https://tools.ietf.org/html/rfc4646#section-2.1 for details.\r\n */\r\nexport function getLanguageCode() {\r\n\r\n\t//returns the language version of the browser.\r\n\tfunction _getLocale() {\r\n\r\n\t\tif ( !navigator ) {\r\n\r\n\t\t\tconsole.error( \"getLocale() failed! !navigator\" );\r\n\t\t\treturn \"\";\r\n\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\t( navigator.languages !== undefined )\r\n\t\t\t&& ( typeof navigator.languages !== 'unknown' )//for IE6\r\n\t\t\t&& ( navigator.languages.length > 0 )\r\n\t\t)\r\n\t\t\treturn navigator.languages[0];//Chrome\r\n\r\n\t\t//IE\r\n\t\tif ( navigator.language ) {\r\n\r\n\t\t\treturn navigator.language;\r\n\r\n\t\t} else if ( navigator.browserLanguage ) {\r\n\r\n\t\t\treturn navigator.browserLanguage;\r\n\r\n\t\t} else if ( navigator.systemLanguage ) {\r\n\r\n\t\t\treturn navigator.systemLanguage;\r\n\r\n\t\t} else if ( navigator.userLanguage ) {\r\n\r\n\t\t\treturn navigator.userLanguage;\r\n\r\n\t\t}\r\n\r\n\t\tconsole.error( \"getLocale() failed!\" );\r\n\t\treturn \"\";\r\n\r\n\t}\r\n\r\n\treturn _getLocale().toLowerCase().match( /([a-z]+)(?:-([a-z]+))?/ )[1];\r\n\r\n};\r\n\r\n","/**\r\n * three class for [THREE]{@link https://github.com/anhr/three.js} and [dat.GUI(...)]{@link https://github.com/anhr/dat.gui} variables.\r\n *\r\n * @author [Andrej Hristoliubov]{@link https://github.com/anhr}\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\n/*если импортировать THREE, то при \"npm run build\" получу ошибку\r\n * (babel plugin) ReferenceError: Unknown plugin \"external-helpers\" specified in \"base\" at 1, attempted to resolve relative to \r\n//import * as THREE from 'https://threejs.org/build/three.module.js';\r\n//import * as THREE from '../../../../../three.js/dev/build/three.module.min.js';\r\n//import * as THREE from '../../three.js/dev/build/three.module.js';\r\n//import * as THREE from '../../three.js/dev/src/Three.js';\r\n//import * as THREE from 'https://raw.githack.com/anhr/three.js/dev/build/three.module.js';\r\n//import * as THREE from 'https://raw.githack.com/anhr/three.js/dev/build/three.module.min.js';\r\n*/\r\n\r\nvar _THREE, _dat, _Three;\r\n\r\nclass Three {\r\n\r\n\t/**\r\n\t * class for [THREE]{@link https://github.com/anhr/three.js} and [dat]{@link https://github.com/dataarts/dat.gui} instances.\r\n\t * */\r\n\tconstructor() {}\r\n\t/**\r\n\t * set [THREE]{@link https://github.com/anhr/three.js}\r\n\t */\r\n\tset THREE( THREE ) {\r\n\r\n\t\tif ( _THREE ) {\r\n\r\n\t\t\tif ( !Object.is( THREE, _THREE ) )\r\n\t\t\t\tconsole.error( 'three: duplicate THREE. Please use one instance of the THREE library.' )\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\t\t_THREE = THREE;\r\n\t\t_Three = this;\r\n\r\n\t\tconst //BufferGeometry = THREE.BufferGeometry,\r\n\t\t\tFloat32BufferAttribute = THREE.Float32BufferAttribute,\r\n\t\t\tLine3 = THREE.Line3,\r\n\t\t\tPlane = THREE.Plane,\r\n\t\t\tTriangle = THREE.Triangle,\r\n\t\t\tVector3 = THREE.Vector3;\r\n\r\n\t\tfunction ConvexHull() {\r\n\r\n\t\t\tconst Visible = 0;\r\n\t\t\tconst Deleted = 1;\r\n\r\n\t\t\tconst _v1 = new Vector3();\r\n\t\t\tconst _line3 = new Line3();\r\n\t\t\tconst _plane = new Plane();\r\n\t\t\tconst _closestPoint = new Vector3();\r\n\t\t\tconst _triangle = new Triangle();\r\n\r\n\t\t\tclass ConvexHull {\r\n\r\n\t\t\t\tconstructor() {\r\n\r\n\t\t\t\t\tthis.tolerance = - 1;\r\n\r\n\t\t\t\t\tthis.faces = []; // the generated faces of the convex hull\r\n\t\t\t\t\tthis.newFaces = []; // this array holds the faces that are generated within a single iteration\r\n\r\n\t\t\t\t\t// the vertex lists work as follows:\r\n\t\t\t\t\t//\r\n\t\t\t\t\t// let 'a' and 'b' be 'Face' instances\r\n\t\t\t\t\t// let 'v' be points wrapped as instance of 'Vertex'\r\n\t\t\t\t\t//\r\n\t\t\t\t\t//     [v, v, ..., v, v, v, ...]\r\n\t\t\t\t\t//      ^             ^\r\n\t\t\t\t\t//      |             |\r\n\t\t\t\t\t//  a.outside     b.outside\r\n\t\t\t\t\t//\r\n\t\t\t\t\tthis.assigned = new VertexList();\r\n\t\t\t\t\tthis.unassigned = new VertexList();\r\n\r\n\t\t\t\t\tthis.vertices = []; \t// vertices of the hull (internal representation of given geometry data)\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetFromPoints( points ) {\r\n\r\n\t\t\t\t\tif ( Array.isArray( points ) !== true ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.ConvexHull: Points parameter is not an array.' );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( points.length < 4 ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.ConvexHull: The algorithm needs at least four points.' );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.makeEmpty();\r\n\r\n\t\t\t\t\tfor ( let i = 0, l = points.length; i < l; i++ ) {\r\n\r\n\t\t\t\t\t\tthis.vertices.push( new VertexNode( points[i] ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.compute();\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetFromObject( object ) {\r\n\r\n\t\t\t\t\tconst points = [];\r\n\r\n\t\t\t\t\tobject.updateMatrixWorld( true );\r\n\r\n\t\t\t\t\tobject.traverse( function ( node ) {\r\n\r\n\t\t\t\t\t\tconst geometry = node.geometry;\r\n\r\n\t\t\t\t\t\tif ( geometry !== undefined ) {\r\n\r\n\t\t\t\t\t\t\tif ( geometry.isGeometry ) {\r\n\r\n\t\t\t\t\t\t\t\tconsole.error( 'THREE.ConvexHull no longer supports Geometry. Use THREE.BufferGeometry instead.' );\r\n\t\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\t\t} else if ( geometry.isBufferGeometry ) {\r\n\r\n\t\t\t\t\t\t\t\tconst attribute = geometry.attributes.position;\r\n\r\n\t\t\t\t\t\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\t\t\t\t\t\tfor ( let i = 0, l = attribute.count; i < l; i++ ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst point = new Vector3();\r\n\r\n\t\t\t\t\t\t\t\t\t\tpoint.fromBufferAttribute( attribute, i ).applyMatrix4( node.matrixWorld );\r\n\r\n\t\t\t\t\t\t\t\t\t\tpoints.push( point );\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t\treturn this.setFromPoints( points );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontainsPoint( point ) {\r\n\r\n\t\t\t\t\tconst faces = this.faces;\r\n\r\n\t\t\t\t\tfor ( let i = 0, l = faces.length; i < l; i++ ) {\r\n\r\n\t\t\t\t\t\tconst face = faces[i];\r\n\r\n\t\t\t\t\t\t// compute signed distance and check on what half space the point lies\r\n\r\n\t\t\t\t\t\tif ( face.distanceToPoint( point ) > this.tolerance ) return false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tintersectRay( ray, target ) {\r\n\r\n\t\t\t\t\t// based on \"Fast Ray-Convex Polyhedron Intersection\"  by Eric Haines, GRAPHICS GEMS II\r\n\r\n\t\t\t\t\tconst faces = this.faces;\r\n\r\n\t\t\t\t\tlet tNear = - Infinity;\r\n\t\t\t\t\tlet tFar = Infinity;\r\n\r\n\t\t\t\t\tfor ( let i = 0, l = faces.length; i < l; i++ ) {\r\n\r\n\t\t\t\t\t\tconst face = faces[i];\r\n\r\n\t\t\t\t\t\t// interpret faces as planes for the further computation\r\n\r\n\t\t\t\t\t\tconst vN = face.distanceToPoint( ray.origin );\r\n\t\t\t\t\t\tconst vD = face.normal.dot( ray.direction );\r\n\r\n\t\t\t\t\t\t// if the origin is on the positive side of a plane (so the plane can \"see\" the origin) and\r\n\t\t\t\t\t\t// the ray is turned away or parallel to the plane, there is no intersection\r\n\r\n\t\t\t\t\t\tif ( vN > 0 && vD >= 0 ) return null;\r\n\r\n\t\t\t\t\t\t// compute the distance from the ray’s origin to the intersection with the plane\r\n\r\n\t\t\t\t\t\tconst t = ( vD !== 0 ) ? ( - vN / vD ) : 0;\r\n\r\n\t\t\t\t\t\t// only proceed if the distance is positive. a negative distance means the intersection point\r\n\t\t\t\t\t\t// lies \"behind\" the origin\r\n\r\n\t\t\t\t\t\tif ( t <= 0 ) continue;\r\n\r\n\t\t\t\t\t\t// now categorized plane as front-facing or back-facing\r\n\r\n\t\t\t\t\t\tif ( vD > 0 ) {\r\n\r\n\t\t\t\t\t\t\t//  plane faces away from the ray, so this plane is a back-face\r\n\r\n\t\t\t\t\t\t\ttFar = Math.min( t, tFar );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t// front-face\r\n\r\n\t\t\t\t\t\t\ttNear = Math.max( t, tNear );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( tNear > tFar ) {\r\n\r\n\t\t\t\t\t\t\t// if tNear ever is greater than tFar, the ray must miss the convex hull\r\n\r\n\t\t\t\t\t\t\treturn null;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// evaluate intersection point\r\n\r\n\t\t\t\t\t// always try tNear first since its the closer intersection point\r\n\r\n\t\t\t\t\tif ( tNear !== - Infinity ) {\r\n\r\n\t\t\t\t\t\tray.at( tNear, target );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tray.at( tFar, target );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn target;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tintersectsRay( ray ) {\r\n\r\n\t\t\t\t\treturn this.intersectRay( ray, _v1 ) !== null;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmakeEmpty() {\r\n\r\n\t\t\t\t\tthis.faces = [];\r\n\t\t\t\t\tthis.vertices = [];\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Adds a vertex to the 'assigned' list of vertices and assigns it to the given face\r\n\r\n\t\t\t\taddVertexToFace( vertex, face ) {\r\n\r\n\t\t\t\t\tvertex.face = face;\r\n\r\n\t\t\t\t\tif ( face.outside === null ) {\r\n\r\n\t\t\t\t\t\tthis.assigned.append( vertex );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthis.assigned.insertBefore( face.outside, vertex );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tface.outside = vertex;\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Removes a vertex from the 'assigned' list of vertices and from the given face\r\n\r\n\t\t\t\tremoveVertexFromFace( vertex, face ) {\r\n\r\n\t\t\t\t\tif ( vertex === face.outside ) {\r\n\r\n\t\t\t\t\t\t// fix face.outside link\r\n\r\n\t\t\t\t\t\tif ( vertex.next !== null && vertex.next.face === face ) {\r\n\r\n\t\t\t\t\t\t\t// face has at least 2 outside vertices, move the 'outside' reference\r\n\r\n\t\t\t\t\t\t\tface.outside = vertex.next;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t// vertex was the only outside vertex that face had\r\n\r\n\t\t\t\t\t\t\tface.outside = null;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.assigned.remove( vertex );\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Removes all the visible vertices that a given face is able to see which are stored in the 'assigned' vertext list\r\n\r\n\t\t\t\tremoveAllVerticesFromFace( face ) {\r\n\r\n\t\t\t\t\tif ( face.outside !== null ) {\r\n\r\n\t\t\t\t\t\t// reference to the first and last vertex of this face\r\n\r\n\t\t\t\t\t\tconst start = face.outside;\r\n\t\t\t\t\t\tlet end = face.outside;\r\n\r\n\t\t\t\t\t\twhile ( end.next !== null && end.next.face === face ) {\r\n\r\n\t\t\t\t\t\t\tend = end.next;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.assigned.removeSubList( start, end );\r\n\r\n\t\t\t\t\t\t// fix references\r\n\r\n\t\t\t\t\t\tstart.prev = end.next = null;\r\n\t\t\t\t\t\tface.outside = null;\r\n\r\n\t\t\t\t\t\treturn start;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Removes all the visible vertices that 'face' is able to see\r\n\r\n\t\t\t\tdeleteFaceVertices( face, absorbingFace ) {\r\n\r\n\t\t\t\t\tconst faceVertices = this.removeAllVerticesFromFace( face );\r\n\r\n\t\t\t\t\tif ( faceVertices !== undefined ) {\r\n\r\n\t\t\t\t\t\tif ( absorbingFace === undefined ) {\r\n\r\n\t\t\t\t\t\t\t// mark the vertices to be reassigned to some other face\r\n\r\n\t\t\t\t\t\t\tthis.unassigned.appendChain( faceVertices );\r\n\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t// if there's an absorbing face try to assign as many vertices as possible to it\r\n\r\n\t\t\t\t\t\t\tlet vertex = faceVertices;\r\n\r\n\t\t\t\t\t\t\tdo {\r\n\r\n\t\t\t\t\t\t\t\t// we need to buffer the subsequent vertex at this point because the 'vertex.next' reference\r\n\t\t\t\t\t\t\t\t// will be changed by upcoming method calls\r\n\r\n\t\t\t\t\t\t\t\tconst nextVertex = vertex.next;\r\n\r\n\t\t\t\t\t\t\t\tconst distance = absorbingFace.distanceToPoint( vertex.point );\r\n\r\n\t\t\t\t\t\t\t\t// check if 'vertex' is able to see 'absorbingFace'\r\n\r\n\t\t\t\t\t\t\t\tif ( distance > this.tolerance ) {\r\n\r\n\t\t\t\t\t\t\t\t\tthis.addVertexToFace( vertex, absorbingFace );\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tthis.unassigned.append( vertex );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// now assign next vertex\r\n\r\n\t\t\t\t\t\t\t\tvertex = nextVertex;\r\n\r\n\t\t\t\t\t\t\t} while ( vertex !== null );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Reassigns as many vertices as possible from the unassigned list to the new faces\r\n\r\n\t\t\t\tresolveUnassignedPoints( newFaces ) {\r\n\r\n\t\t\t\t\tif ( this.unassigned.isEmpty() === false ) {\r\n\r\n\t\t\t\t\t\tlet vertex = this.unassigned.first();\r\n\r\n\t\t\t\t\t\tdo {\r\n\r\n\t\t\t\t\t\t\t// buffer 'next' reference, see .deleteFaceVertices()\r\n\r\n\t\t\t\t\t\t\tconst nextVertex = vertex.next;\r\n\r\n\t\t\t\t\t\t\tlet maxDistance = this.tolerance;\r\n\r\n\t\t\t\t\t\t\tlet maxFace = null;\r\n\r\n\t\t\t\t\t\t\tfor ( let i = 0; i < newFaces.length; i++ ) {\r\n\r\n\t\t\t\t\t\t\t\tconst face = newFaces[i];\r\n\r\n\t\t\t\t\t\t\t\tif ( face.mark === Visible ) {\r\n\r\n\t\t\t\t\t\t\t\t\tconst distance = face.distanceToPoint( vertex.point );\r\n\r\n\t\t\t\t\t\t\t\t\tif ( distance > maxDistance ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tmaxDistance = distance;\r\n\t\t\t\t\t\t\t\t\t\tmaxFace = face;\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tif ( maxDistance > 1000 * this.tolerance ) break;\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// 'maxFace' can be null e.g. if there are identical vertices\r\n\r\n\t\t\t\t\t\t\tif ( maxFace !== null ) {\r\n\r\n\t\t\t\t\t\t\t\tthis.addVertexToFace( vertex, maxFace );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvertex = nextVertex;\r\n\r\n\t\t\t\t\t\t} while ( vertex !== null );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Computes the extremes of a simplex which will be the initial hull\r\n\r\n\t\t\t\tcomputeExtremes() {\r\n\r\n\t\t\t\t\tconst min = new Vector3();\r\n\t\t\t\t\tconst max = new Vector3();\r\n\r\n\t\t\t\t\tconst minVertices = [];\r\n\t\t\t\t\tconst maxVertices = [];\r\n\r\n\t\t\t\t\t// initially assume that the first vertex is the min/max\r\n\r\n\t\t\t\t\tfor ( let i = 0; i < 3; i++ ) {\r\n\r\n\t\t\t\t\t\tminVertices[i] = maxVertices[i] = this.vertices[0];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tmin.copy( this.vertices[0].point );\r\n\t\t\t\t\tmax.copy( this.vertices[0].point );\r\n\r\n\t\t\t\t\t// compute the min/max vertex on all six directions\r\n\r\n\t\t\t\t\tfor ( let i = 0, l = this.vertices.length; i < l; i++ ) {\r\n\r\n\t\t\t\t\t\tconst vertex = this.vertices[i];\r\n\t\t\t\t\t\tconst point = vertex.point;\r\n\r\n\t\t\t\t\t\t// update the min coordinates\r\n\r\n\t\t\t\t\t\tfor ( let j = 0; j < 3; j++ ) {\r\n\r\n\t\t\t\t\t\t\tif ( point.getComponent( j ) < min.getComponent( j ) ) {\r\n\r\n\t\t\t\t\t\t\t\tmin.setComponent( j, point.getComponent( j ) );\r\n\t\t\t\t\t\t\t\tminVertices[j] = vertex;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// update the max coordinates\r\n\r\n\t\t\t\t\t\tfor ( let j = 0; j < 3; j++ ) {\r\n\r\n\t\t\t\t\t\t\tif ( point.getComponent( j ) > max.getComponent( j ) ) {\r\n\r\n\t\t\t\t\t\t\t\tmax.setComponent( j, point.getComponent( j ) );\r\n\t\t\t\t\t\t\t\tmaxVertices[j] = vertex;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// use min/max vectors to compute an optimal epsilon\r\n\r\n\t\t\t\t\tthis.tolerance = 3 * Number.EPSILON * (\r\n\t\t\t\t\t\tMath.max( Math.abs( min.x ), Math.abs( max.x ) ) +\r\n\t\t\t\t\t\tMath.max( Math.abs( min.y ), Math.abs( max.y ) ) +\r\n\t\t\t\t\t\tMath.max( Math.abs( min.z ), Math.abs( max.z ) )\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\treturn { min: minVertices, max: maxVertices };\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Computes the initial simplex assigning to its faces all the points\r\n\t\t\t\t// that are candidates to form part of the hull\r\n\r\n\t\t\t\tcomputeInitialHull() {\r\n\r\n\t\t\t\t\tconst vertices = this.vertices;\r\n\t\t\t\t\tconst extremes = this.computeExtremes();\r\n\t\t\t\t\tconst min = extremes.min;\r\n\t\t\t\t\tconst max = extremes.max;\r\n\r\n\t\t\t\t\t// 1. Find the two vertices 'v0' and 'v1' with the greatest 1d separation\r\n\t\t\t\t\t// (max.x - min.x)\r\n\t\t\t\t\t// (max.y - min.y)\r\n\t\t\t\t\t// (max.z - min.z)\r\n\r\n\t\t\t\t\tlet maxDistance = 0;\r\n\t\t\t\t\tlet index = 0;\r\n\r\n\t\t\t\t\tfor ( let i = 0; i < 3; i++ ) {\r\n\r\n\t\t\t\t\t\tconst distance = max[i].point.getComponent( i ) - min[i].point.getComponent( i );\r\n\r\n\t\t\t\t\t\tif ( distance > maxDistance ) {\r\n\r\n\t\t\t\t\t\t\tmaxDistance = distance;\r\n\t\t\t\t\t\t\tindex = i;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst v0 = min[index];\r\n\t\t\t\t\tconst v1 = max[index];\r\n\t\t\t\t\tlet v2;\r\n\t\t\t\t\tlet v3;\r\n\r\n\t\t\t\t\t// 2. The next vertex 'v2' is the one farthest to the line formed by 'v0' and 'v1'\r\n\r\n\t\t\t\t\tmaxDistance = 0;\r\n\t\t\t\t\t_line3.set( v0.point, v1.point );\r\n\r\n\t\t\t\t\tfor ( let i = 0, l = this.vertices.length; i < l; i++ ) {\r\n\r\n\t\t\t\t\t\tconst vertex = vertices[i];\r\n\r\n\t\t\t\t\t\tif ( vertex !== v0 && vertex !== v1 ) {\r\n\r\n\t\t\t\t\t\t\t_line3.closestPointToPoint( vertex.point, true, _closestPoint );\r\n\r\n\t\t\t\t\t\t\tconst distance = _closestPoint.distanceToSquared( vertex.point );\r\n\r\n\t\t\t\t\t\t\tif ( distance > maxDistance ) {\r\n\r\n\t\t\t\t\t\t\t\tmaxDistance = distance;\r\n\t\t\t\t\t\t\t\tv2 = vertex;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 3. The next vertex 'v3' is the one farthest to the plane 'v0', 'v1', 'v2'\r\n\r\n\t\t\t\t\tmaxDistance = - 1;\r\n\t\t\t\t\t_plane.setFromCoplanarPoints( v0.point, v1.point, v2.point );\r\n\r\n\t\t\t\t\tfor ( let i = 0, l = this.vertices.length; i < l; i++ ) {\r\n\r\n\t\t\t\t\t\tconst vertex = vertices[i];\r\n\r\n\t\t\t\t\t\tif ( vertex !== v0 && vertex !== v1 && vertex !== v2 ) {\r\n\r\n\t\t\t\t\t\t\tconst distance = Math.abs( _plane.distanceToPoint( vertex.point ) );\r\n\r\n\t\t\t\t\t\t\tif ( distance > maxDistance ) {\r\n\r\n\t\t\t\t\t\t\t\tmaxDistance = distance;\r\n\t\t\t\t\t\t\t\tv3 = vertex;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst faces = [];\r\n\r\n\t\t\t\t\tif ( _plane.distanceToPoint( v3.point ) < 0 ) {\r\n\r\n\t\t\t\t\t\t// the face is not able to see the point so 'plane.normal' is pointing outside the tetrahedron\r\n\r\n\t\t\t\t\t\tfaces.push(\r\n\t\t\t\t\t\t\tFace.create( v0, v1, v2 ),\r\n\t\t\t\t\t\t\tFace.create( v3, v1, v0 ),\r\n\t\t\t\t\t\t\tFace.create( v3, v2, v1 ),\r\n\t\t\t\t\t\t\tFace.create( v3, v0, v2 )\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t// set the twin edge\r\n\r\n\t\t\t\t\t\tfor ( let i = 0; i < 3; i++ ) {\r\n\r\n\t\t\t\t\t\t\tconst j = ( i + 1 ) % 3;\r\n\r\n\t\t\t\t\t\t\t// join face[ i ] i > 0, with the first face\r\n\r\n\t\t\t\t\t\t\tfaces[i + 1].getEdge( 2 ).setTwin( faces[0].getEdge( j ) );\r\n\r\n\t\t\t\t\t\t\t// join face[ i ] with face[ i + 1 ], 1 <= i <= 3\r\n\r\n\t\t\t\t\t\t\tfaces[i + 1].getEdge( 1 ).setTwin( faces[j + 1].getEdge( 0 ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// the face is able to see the point so 'plane.normal' is pointing inside the tetrahedron\r\n\r\n\t\t\t\t\t\tfaces.push(\r\n\t\t\t\t\t\t\tFace.create( v0, v2, v1 ),\r\n\t\t\t\t\t\t\tFace.create( v3, v0, v1 ),\r\n\t\t\t\t\t\t\tFace.create( v3, v1, v2 ),\r\n\t\t\t\t\t\t\tFace.create( v3, v2, v0 )\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t// set the twin edge\r\n\r\n\t\t\t\t\t\tfor ( let i = 0; i < 3; i++ ) {\r\n\r\n\t\t\t\t\t\t\tconst j = ( i + 1 ) % 3;\r\n\r\n\t\t\t\t\t\t\t// join face[ i ] i > 0, with the first face\r\n\r\n\t\t\t\t\t\t\tfaces[i + 1].getEdge( 2 ).setTwin( faces[0].getEdge( ( 3 - i ) % 3 ) );\r\n\r\n\t\t\t\t\t\t\t// join face[ i ] with face[ i + 1 ]\r\n\r\n\t\t\t\t\t\t\tfaces[i + 1].getEdge( 0 ).setTwin( faces[j + 1].getEdge( 1 ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// the initial hull is the tetrahedron\r\n\r\n\t\t\t\t\tfor ( let i = 0; i < 4; i++ ) {\r\n\r\n\t\t\t\t\t\tthis.faces.push( faces[i] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// initial assignment of vertices to the faces of the tetrahedron\r\n\r\n\t\t\t\t\tfor ( let i = 0, l = vertices.length; i < l; i++ ) {\r\n\r\n\t\t\t\t\t\tconst vertex = vertices[i];\r\n\r\n\t\t\t\t\t\tif ( vertex !== v0 && vertex !== v1 && vertex !== v2 && vertex !== v3 ) {\r\n\r\n\t\t\t\t\t\t\tmaxDistance = this.tolerance;\r\n\t\t\t\t\t\t\tlet maxFace = null;\r\n\r\n\t\t\t\t\t\t\tfor ( let j = 0; j < 4; j++ ) {\r\n\r\n\t\t\t\t\t\t\t\tconst distance = this.faces[j].distanceToPoint( vertex.point );\r\n\r\n\t\t\t\t\t\t\t\tif ( distance > maxDistance ) {\r\n\r\n\t\t\t\t\t\t\t\t\tmaxDistance = distance;\r\n\t\t\t\t\t\t\t\t\tmaxFace = this.faces[j];\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( maxFace !== null ) {\r\n\r\n\t\t\t\t\t\t\t\tthis.addVertexToFace( vertex, maxFace );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Removes inactive faces\r\n\r\n\t\t\t\treindexFaces() {\r\n\r\n\t\t\t\t\tconst activeFaces = [];\r\n\r\n\t\t\t\t\tfor ( let i = 0; i < this.faces.length; i++ ) {\r\n\r\n\t\t\t\t\t\tconst face = this.faces[i];\r\n\r\n\t\t\t\t\t\tif ( face.mark === Visible ) {\r\n\r\n\t\t\t\t\t\t\tactiveFaces.push( face );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.faces = activeFaces;\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Finds the next vertex to create faces with the current hull\r\n\r\n\t\t\t\tnextVertexToAdd() {\r\n\r\n\t\t\t\t\t// if the 'assigned' list of vertices is empty, no vertices are left. return with 'undefined'\r\n\r\n\t\t\t\t\tif ( this.assigned.isEmpty() === false ) {\r\n\r\n\t\t\t\t\t\tlet eyeVertex, maxDistance = 0;\r\n\r\n\t\t\t\t\t\t// grap the first available face and start with the first visible vertex of that face\r\n\r\n\t\t\t\t\t\tconst eyeFace = this.assigned.first().face;\r\n\t\t\t\t\t\tlet vertex = eyeFace.outside;\r\n\r\n\t\t\t\t\t\t// now calculate the farthest vertex that face can see\r\n\r\n\t\t\t\t\t\tdo {\r\n\r\n\t\t\t\t\t\t\tconst distance = eyeFace.distanceToPoint( vertex.point );\r\n\r\n\t\t\t\t\t\t\tif ( distance > maxDistance ) {\r\n\r\n\t\t\t\t\t\t\t\tmaxDistance = distance;\r\n\t\t\t\t\t\t\t\teyeVertex = vertex;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvertex = vertex.next;\r\n\r\n\t\t\t\t\t\t} while ( vertex !== null && vertex.face === eyeFace );\r\n\r\n\t\t\t\t\t\treturn eyeVertex;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Computes a chain of half edges in CCW order called the 'horizon'.\r\n\t\t\t\t// For an edge to be part of the horizon it must join a face that can see\r\n\t\t\t\t// 'eyePoint' and a face that cannot see 'eyePoint'.\r\n\r\n\t\t\t\tcomputeHorizon( eyePoint, crossEdge, face, horizon ) {\r\n\r\n\t\t\t\t\t// moves face's vertices to the 'unassigned' vertex list\r\n\r\n\t\t\t\t\tthis.deleteFaceVertices( face );\r\n\r\n\t\t\t\t\tface.mark = Deleted;\r\n\r\n\t\t\t\t\tlet edge;\r\n\r\n\t\t\t\t\tif ( crossEdge === null ) {\r\n\r\n\t\t\t\t\t\tedge = crossEdge = face.getEdge( 0 );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// start from the next edge since 'crossEdge' was already analyzed\r\n\t\t\t\t\t\t// (actually 'crossEdge.twin' was the edge who called this method recursively)\r\n\r\n\t\t\t\t\t\tedge = crossEdge.next;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdo {\r\n\r\n\t\t\t\t\t\tconst twinEdge = edge.twin;\r\n\t\t\t\t\t\tconst oppositeFace = twinEdge.face;\r\n\r\n\t\t\t\t\t\tif ( oppositeFace.mark === Visible ) {\r\n\r\n\t\t\t\t\t\t\tif ( oppositeFace.distanceToPoint( eyePoint ) > this.tolerance ) {\r\n\r\n\t\t\t\t\t\t\t\t// the opposite face can see the vertex, so proceed with next edge\r\n\r\n\t\t\t\t\t\t\t\tthis.computeHorizon( eyePoint, twinEdge, oppositeFace, horizon );\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t// the opposite face can't see the vertex, so this edge is part of the horizon\r\n\r\n\t\t\t\t\t\t\t\thorizon.push( edge );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tedge = edge.next;\r\n\r\n\t\t\t\t\t} while ( edge !== crossEdge );\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Creates a face with the vertices 'eyeVertex.point', 'horizonEdge.tail' and 'horizonEdge.head' in CCW order\r\n\r\n\t\t\t\taddAdjoiningFace( eyeVertex, horizonEdge ) {\r\n\r\n\t\t\t\t\t// all the half edges are created in ccw order thus the face is always pointing outside the hull\r\n\r\n\t\t\t\t\tconst face = Face.create( eyeVertex, horizonEdge.tail(), horizonEdge.head() );\r\n\r\n\t\t\t\t\tthis.faces.push( face );\r\n\r\n\t\t\t\t\t// join face.getEdge( - 1 ) with the horizon's opposite edge face.getEdge( - 1 ) = face.getEdge( 2 )\r\n\r\n\t\t\t\t\tface.getEdge( - 1 ).setTwin( horizonEdge.twin );\r\n\r\n\t\t\t\t\treturn face.getEdge( 0 ); // the half edge whose vertex is the eyeVertex\r\n\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//  Adds 'horizon.length' faces to the hull, each face will be linked with the\r\n\t\t\t\t//  horizon opposite face and the face on the left/right\r\n\r\n\t\t\t\taddNewFaces( eyeVertex, horizon ) {\r\n\r\n\t\t\t\t\tthis.newFaces = [];\r\n\r\n\t\t\t\t\tlet firstSideEdge = null;\r\n\t\t\t\t\tlet previousSideEdge = null;\r\n\r\n\t\t\t\t\tfor ( let i = 0; i < horizon.length; i++ ) {\r\n\r\n\t\t\t\t\t\tconst horizonEdge = horizon[i];\r\n\r\n\t\t\t\t\t\t// returns the right side edge\r\n\r\n\t\t\t\t\t\tconst sideEdge = this.addAdjoiningFace( eyeVertex, horizonEdge );\r\n\r\n\t\t\t\t\t\tif ( firstSideEdge === null ) {\r\n\r\n\t\t\t\t\t\t\tfirstSideEdge = sideEdge;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t// joins face.getEdge( 1 ) with previousFace.getEdge( 0 )\r\n\r\n\t\t\t\t\t\t\tsideEdge.next.setTwin( previousSideEdge );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.newFaces.push( sideEdge.face );\r\n\t\t\t\t\t\tpreviousSideEdge = sideEdge;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// perform final join of new faces\r\n\r\n\t\t\t\t\tfirstSideEdge.next.setTwin( previousSideEdge );\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Adds a vertex to the hull\r\n\r\n\t\t\t\taddVertexToHull( eyeVertex ) {\r\n\r\n\t\t\t\t\tconst horizon = [];\r\n\r\n\t\t\t\t\tthis.unassigned.clear();\r\n\r\n\t\t\t\t\t// remove 'eyeVertex' from 'eyeVertex.face' so that it can't be added to the 'unassigned' vertex list\r\n\r\n\t\t\t\t\tthis.removeVertexFromFace( eyeVertex, eyeVertex.face );\r\n\r\n\t\t\t\t\tthis.computeHorizon( eyeVertex.point, null, eyeVertex.face, horizon );\r\n\r\n\t\t\t\t\tthis.addNewFaces( eyeVertex, horizon );\r\n\r\n\t\t\t\t\t// reassign 'unassigned' vertices to the new faces\r\n\r\n\t\t\t\t\tthis.resolveUnassignedPoints( this.newFaces );\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcleanup() {\r\n\r\n\t\t\t\t\tthis.assigned.clear();\r\n\t\t\t\t\tthis.unassigned.clear();\r\n\t\t\t\t\tthis.newFaces = [];\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcompute() {\r\n\r\n\t\t\t\t\tlet vertex;\r\n\r\n\t\t\t\t\tthis.computeInitialHull();\r\n\r\n\t\t\t\t\t// add all available vertices gradually to the hull\r\n\r\n\t\t\t\t\twhile ( ( vertex = this.nextVertexToAdd() ) !== undefined ) {\r\n\r\n\t\t\t\t\t\tthis.addVertexToHull( vertex );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.reindexFaces();\r\n\r\n\t\t\t\t\tthis.cleanup();\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis.ConvexHull = ConvexHull;\r\n\r\n\t\t\t//\r\n\r\n\t\t\tclass Face {\r\n\r\n\t\t\t\tconstructor() {\r\n\r\n\t\t\t\t\tthis.normal = new Vector3();\r\n\t\t\t\t\tthis.midpoint = new Vector3();\r\n\t\t\t\t\tthis.area = 0;\r\n\r\n\t\t\t\t\tthis.constant = 0; // signed distance from face to the origin\r\n\t\t\t\t\tthis.outside = null; // reference to a vertex in a vertex list this face can see\r\n\t\t\t\t\tthis.mark = Visible;\r\n\t\t\t\t\tthis.edge = null;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstatic create( a, b, c ) {\r\n\r\n\t\t\t\t\tconst face = new Face();\r\n\r\n\t\t\t\t\tconst e0 = new HalfEdge( a, face );\r\n\t\t\t\t\tconst e1 = new HalfEdge( b, face );\r\n\t\t\t\t\tconst e2 = new HalfEdge( c, face );\r\n\r\n\t\t\t\t\t// join edges\r\n\r\n\t\t\t\t\te0.next = e2.prev = e1;\r\n\t\t\t\t\te1.next = e0.prev = e2;\r\n\t\t\t\t\te2.next = e1.prev = e0;\r\n\r\n\t\t\t\t\t// main half edge reference\r\n\r\n\t\t\t\t\tface.edge = e0;\r\n\r\n\t\t\t\t\treturn face.compute();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgetEdge( i ) {\r\n\r\n\t\t\t\t\tlet edge = this.edge;\r\n\r\n\t\t\t\t\twhile ( i > 0 ) {\r\n\r\n\t\t\t\t\t\tedge = edge.next;\r\n\t\t\t\t\t\ti--;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\twhile ( i < 0 ) {\r\n\r\n\t\t\t\t\t\tedge = edge.prev;\r\n\t\t\t\t\t\ti++;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn edge;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcompute() {\r\n\r\n\t\t\t\t\tconst a = this.edge.tail();\r\n\t\t\t\t\tconst b = this.edge.head();\r\n\t\t\t\t\tconst c = this.edge.next.head();\r\n\r\n\t\t\t\t\t_triangle.set( a.point, b.point, c.point );\r\n\r\n\t\t\t\t\t_triangle.getNormal( this.normal );\r\n\t\t\t\t\t_triangle.getMidpoint( this.midpoint );\r\n\t\t\t\t\tthis.area = _triangle.getArea();\r\n\r\n\t\t\t\t\tthis.constant = this.normal.dot( this.midpoint );\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdistanceToPoint( point ) {\r\n\r\n\t\t\t\t\treturn this.normal.dot( point ) - this.constant;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Entity for a Doubly-Connected Edge List (DCEL).\r\n\r\n\t\t\tclass HalfEdge {\r\n\r\n\r\n\t\t\t\tconstructor( vertex, face ) {\r\n\r\n\t\t\t\t\tthis.vertex = vertex;\r\n\t\t\t\t\tthis.prev = null;\r\n\t\t\t\t\tthis.next = null;\r\n\t\t\t\t\tthis.twin = null;\r\n\t\t\t\t\tthis.face = face;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\thead() {\r\n\r\n\t\t\t\t\treturn this.vertex;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttail() {\r\n\r\n\t\t\t\t\treturn this.prev ? this.prev.vertex : null;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlength() {\r\n\r\n\t\t\t\t\tconst head = this.head();\r\n\t\t\t\t\tconst tail = this.tail();\r\n\r\n\t\t\t\t\tif ( tail !== null ) {\r\n\r\n\t\t\t\t\t\treturn tail.point.distanceTo( head.point );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn - 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlengthSquared() {\r\n\r\n\t\t\t\t\tconst head = this.head();\r\n\t\t\t\t\tconst tail = this.tail();\r\n\r\n\t\t\t\t\tif ( tail !== null ) {\r\n\r\n\t\t\t\t\t\treturn tail.point.distanceToSquared( head.point );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn - 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetTwin( edge ) {\r\n\r\n\t\t\t\t\tthis.twin = edge;\r\n\t\t\t\t\tedge.twin = this;\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// A vertex as a double linked list node.\r\n\r\n\t\t\tclass VertexNode {\r\n\r\n\t\t\t\tconstructor( point ) {\r\n\r\n\t\t\t\t\tthis.point = point;\r\n\t\t\t\t\tthis.prev = null;\r\n\t\t\t\t\tthis.next = null;\r\n\t\t\t\t\tthis.face = null; // the face that is able to see this vertex\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// A double linked list that contains vertex nodes.\r\n\r\n\t\t\tclass VertexList {\r\n\r\n\t\t\t\tconstructor() {\r\n\r\n\t\t\t\t\tthis.head = null;\r\n\t\t\t\t\tthis.tail = null;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfirst() {\r\n\r\n\t\t\t\t\treturn this.head;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlast() {\r\n\r\n\t\t\t\t\treturn this.tail;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tclear() {\r\n\r\n\t\t\t\t\tthis.head = this.tail = null;\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Inserts a vertex before the target vertex\r\n\r\n\t\t\t\tinsertBefore( target, vertex ) {\r\n\r\n\t\t\t\t\tvertex.prev = target.prev;\r\n\t\t\t\t\tvertex.next = target;\r\n\r\n\t\t\t\t\tif ( vertex.prev === null ) {\r\n\r\n\t\t\t\t\t\tthis.head = vertex;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvertex.prev.next = vertex;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttarget.prev = vertex;\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Inserts a vertex after the target vertex\r\n\r\n\t\t\t\tinsertAfter( target, vertex ) {\r\n\r\n\t\t\t\t\tvertex.prev = target;\r\n\t\t\t\t\tvertex.next = target.next;\r\n\r\n\t\t\t\t\tif ( vertex.next === null ) {\r\n\r\n\t\t\t\t\t\tthis.tail = vertex;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvertex.next.prev = vertex;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttarget.next = vertex;\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Appends a vertex to the end of the linked list\r\n\r\n\t\t\t\tappend( vertex ) {\r\n\r\n\t\t\t\t\tif ( this.head === null ) {\r\n\r\n\t\t\t\t\t\tthis.head = vertex;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthis.tail.next = vertex;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvertex.prev = this.tail;\r\n\t\t\t\t\tvertex.next = null; // the tail has no subsequent vertex\r\n\r\n\t\t\t\t\tthis.tail = vertex;\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Appends a chain of vertices where 'vertex' is the head.\r\n\r\n\t\t\t\tappendChain( vertex ) {\r\n\r\n\t\t\t\t\tif ( this.head === null ) {\r\n\r\n\t\t\t\t\t\tthis.head = vertex;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthis.tail.next = vertex;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvertex.prev = this.tail;\r\n\r\n\t\t\t\t\t// ensure that the 'tail' reference points to the last vertex of the chain\r\n\r\n\t\t\t\t\twhile ( vertex.next !== null ) {\r\n\r\n\t\t\t\t\t\tvertex = vertex.next;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.tail = vertex;\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Removes a vertex from the linked list\r\n\r\n\t\t\t\tremove( vertex ) {\r\n\r\n\t\t\t\t\tif ( vertex.prev === null ) {\r\n\r\n\t\t\t\t\t\tthis.head = vertex.next;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvertex.prev.next = vertex.next;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( vertex.next === null ) {\r\n\r\n\t\t\t\t\t\tthis.tail = vertex.prev;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvertex.next.prev = vertex.prev;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Removes a list of vertices whose 'head' is 'a' and whose 'tail' is b\r\n\r\n\t\t\t\tremoveSubList( a, b ) {\r\n\r\n\t\t\t\t\tif ( a.prev === null ) {\r\n\r\n\t\t\t\t\t\tthis.head = b.next;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\ta.prev.next = b.next;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( b.next === null ) {\r\n\r\n\t\t\t\t\t\tthis.tail = a.prev;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tb.next.prev = a.prev;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tisEmpty() {\r\n\r\n\t\t\t\t\treturn this.head === null;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tthis.ConvexHull = new ConvexHull().ConvexHull;\r\n\r\n/*\r\n\t\timport { Vector3 } from '../math/Vector3.js';\r\n\t\timport { Vector2 } from '../math/Vector2.js';\r\n\t\timport { Box3 } from '../math/Box3.js';\r\n\t\timport { EventDispatcher } from './EventDispatcher.js';\r\n\t\timport { BufferAttribute, Float32BufferAttribute, Uint16BufferAttribute, Uint32BufferAttribute } from './BufferAttribute.js';\r\n\t\timport { Sphere } from '../math/Sphere.js';\r\n\t\timport { Object3D } from './Object3D.js';\r\n\t\timport { Matrix4 } from '../math/Matrix4.js';\r\n\t\timport { Matrix3 } from '../math/Matrix3.js';\r\n\t\timport * as MathUtils from '../math/MathUtils.js';\r\n\t\timport { arrayMax } from '../utils.js';\r\n*/\r\n\t\tconst Vector2 = three.THREE.Vector2,\r\n\t\t\tBox3 = three.THREE.Box3,\r\n\r\n\t\t\tBufferAttribute = three.THREE.BufferAttribute,\r\n\t\t\tUint16BufferAttribute = three.THREE.Uint16BufferAttribute,\r\n\t\t\tUint32BufferAttribute = three.THREE.Uint32BufferAttribute,\r\n\r\n\t\t\tSphere = three.THREE.Sphere,\r\n\t\t\tObject3D = three.THREE.Object3D,\r\n\t\t\tMatrix4 = three.THREE.Matrix4,\r\n\t\t\tMatrix3 = three.THREE.Matrix3,\r\n\t\t\tarrayMax = three.THREE.arrayMax,\r\n\t\t\tMathUtils = three.THREE.MathUtils;\r\n\r\n\t\t/**\r\n\t\t * https://github.com/mrdoob/eventdispatcher.js/\r\n\t\t */\r\n\r\n\t\tclass EventDispatcher {\r\n\r\n\t\t\taddEventListener( type, listener ) {\r\n\r\n\t\t\t\tif ( this._listeners === undefined ) this._listeners = {};\r\n\r\n\t\t\t\tconst listeners = this._listeners;\r\n\r\n\t\t\t\tif ( listeners[type] === undefined ) {\r\n\r\n\t\t\t\t\tlisteners[type] = [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( listeners[type].indexOf( listener ) === - 1 ) {\r\n\r\n\t\t\t\t\tlisteners[type].push( listener );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\thasEventListener( type, listener ) {\r\n\r\n\t\t\t\tif ( this._listeners === undefined ) return false;\r\n\r\n\t\t\t\tconst listeners = this._listeners;\r\n\r\n\t\t\t\treturn listeners[type] !== undefined && listeners[type].indexOf( listener ) !== - 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tremoveEventListener( type, listener ) {\r\n\r\n\t\t\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\t\t\tconst listeners = this._listeners;\r\n\t\t\t\tconst listenerArray = listeners[type];\r\n\r\n\t\t\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\t\t\tconst index = listenerArray.indexOf( listener );\r\n\r\n\t\t\t\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\t\t\t\tlistenerArray.splice( index, 1 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdispatchEvent( event ) {\r\n\r\n\t\t\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\t\t\tconst listeners = this._listeners;\r\n\t\t\t\tconst listenerArray = listeners[event.type];\r\n\r\n\t\t\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\t\t\tevent.target = this;\r\n\r\n\t\t\t\t\t// Make a copy, in case listeners are removed while iterating.\r\n\t\t\t\t\tconst array = listenerArray.slice( 0 );\r\n\r\n\t\t\t\t\tfor ( let i = 0, l = array.length; i < l; i++ ) {\r\n\r\n\t\t\t\t\t\tarray[i].call( this, event );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tevent.target = null;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlet _id = 0;\r\n\r\n\t\tconst _m1 = /*@__PURE__*/ new Matrix4();\r\n\t\tconst _obj = /*@__PURE__*/ new Object3D();\r\n\t\tconst _offset = /*@__PURE__*/ new Vector3();\r\n\t\tconst _box = /*@__PURE__*/ new Box3();\r\n\t\tconst _boxMorphTargets = /*@__PURE__*/ new Box3();\r\n\t\tconst _vector = /*@__PURE__*/ new Vector3();\r\n\r\n\t\t//Не могу брать BufferGeometry из three.THREE потому что тогда получу ошибку\r\n\t\t//Uncaught TypeError: Class constructor BufferGeometry cannot be invoked without 'new'\r\n\t\t//если буду использовать библиотеку 'myThree/build/myThree.module.js'\r\n\t\tclass BufferGeometry extends EventDispatcher {\r\n\r\n\t\t\tconstructor() {\r\n\r\n\t\t\t\tsuper();\r\n\r\n\t\t\t\tObject.defineProperty( this, 'id', { value: _id++ } );\r\n\r\n\t\t\t\tthis.uuid = MathUtils.generateUUID();\r\n\r\n\t\t\t\tthis.name = '';\r\n\t\t\t\tthis.type = 'BufferGeometry';\r\n\r\n\t\t\t\tthis.index = null;\r\n\t\t\t\tthis.attributes = {};\r\n\r\n\t\t\t\tthis.morphAttributes = {};\r\n\t\t\t\tthis.morphTargetsRelative = false;\r\n\r\n\t\t\t\tthis.groups = [];\r\n\r\n\t\t\t\tthis.boundingBox = null;\r\n\t\t\t\tthis.boundingSphere = null;\r\n\r\n\t\t\t\tthis.drawRange = { start: 0, count: Infinity };\r\n\r\n\t\t\t\tthis.userData = {};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgetIndex() {\r\n\r\n\t\t\t\treturn this.index;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tsetIndex( index ) {\r\n\r\n\t\t\t\tif ( Array.isArray( index ) ) {\r\n\r\n\t\t\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis.index = index;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgetAttribute( name ) {\r\n\r\n\t\t\t\treturn this.attributes[name];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tsetAttribute( name, attribute ) {\r\n\r\n\t\t\t\tthis.attributes[name] = attribute;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdeleteAttribute( name ) {\r\n\r\n\t\t\t\tdelete this.attributes[name];\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t\thasAttribute( name ) {\r\n\r\n\t\t\t\treturn this.attributes[name] !== undefined;\r\n\r\n\t\t\t}\r\n\r\n\t\t\taddGroup( start, count, materialIndex = 0 ) {\r\n\r\n\t\t\t\tthis.groups.push( {\r\n\r\n\t\t\t\t\tstart: start,\r\n\t\t\t\t\tcount: count,\r\n\t\t\t\t\tmaterialIndex: materialIndex\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tclearGroups() {\r\n\r\n\t\t\t\tthis.groups = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tsetDrawRange( start, count ) {\r\n\r\n\t\t\t\tthis.drawRange.start = start;\r\n\t\t\t\tthis.drawRange.count = count;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tapplyMatrix4( matrix ) {\r\n\r\n\t\t\t\tconst position = this.attributes.position;\r\n\r\n\t\t\t\tif ( position !== undefined ) {\r\n\r\n\t\t\t\t\tposition.applyMatrix4( matrix );\r\n\r\n\t\t\t\t\tposition.needsUpdate = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst normal = this.attributes.normal;\r\n\r\n\t\t\t\tif ( normal !== undefined ) {\r\n\r\n\t\t\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t\t\t\tnormal.applyNormalMatrix( normalMatrix );\r\n\r\n\t\t\t\t\tnormal.needsUpdate = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst tangent = this.attributes.tangent;\r\n\r\n\t\t\t\tif ( tangent !== undefined ) {\r\n\r\n\t\t\t\t\ttangent.transformDirection( matrix );\r\n\r\n\t\t\t\t\ttangent.needsUpdate = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tapplyQuaternion( q ) {\r\n\r\n\t\t\t\t_m1.makeRotationFromQuaternion( q );\r\n\r\n\t\t\t\tthis.applyMatrix4( _m1 );\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t\trotateX( angle ) {\r\n\r\n\t\t\t\t// rotate geometry around world x-axis\r\n\r\n\t\t\t\t_m1.makeRotationX( angle );\r\n\r\n\t\t\t\tthis.applyMatrix4( _m1 );\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t\trotateY( angle ) {\r\n\r\n\t\t\t\t// rotate geometry around world y-axis\r\n\r\n\t\t\t\t_m1.makeRotationY( angle );\r\n\r\n\t\t\t\tthis.applyMatrix4( _m1 );\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t\trotateZ( angle ) {\r\n\r\n\t\t\t\t// rotate geometry around world z-axis\r\n\r\n\t\t\t\t_m1.makeRotationZ( angle );\r\n\r\n\t\t\t\tthis.applyMatrix4( _m1 );\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttranslate( x, y, z ) {\r\n\r\n\t\t\t\t// translate geometry\r\n\r\n\t\t\t\t_m1.makeTranslation( x, y, z );\r\n\r\n\t\t\t\tthis.applyMatrix4( _m1 );\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscale( x, y, z ) {\r\n\r\n\t\t\t\t// scale geometry\r\n\r\n\t\t\t\t_m1.makeScale( x, y, z );\r\n\r\n\t\t\t\tthis.applyMatrix4( _m1 );\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlookAt( vector ) {\r\n\r\n\t\t\t\t_obj.lookAt( vector );\r\n\r\n\t\t\t\t_obj.updateMatrix();\r\n\r\n\t\t\t\tthis.applyMatrix4( _obj.matrix );\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcenter() {\r\n\r\n\t\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t\t\tthis.boundingBox.getCenter( _offset ).negate();\r\n\r\n\t\t\t\tthis.translate( _offset.x, _offset.y, _offset.z );\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tsetFromPoints( points ) {\r\n\r\n\t\t\t\tconst position = [];\r\n\r\n\t\t\t\tfor ( let i = 0, l = points.length; i < l; i++ ) {\r\n\r\n\t\t\t\t\tconst point = points[i];\r\n\t\t\t\t\tposition.push( point.x, point.y, point.z || 0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcomputeBoundingBox() {\r\n\r\n\t\t\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\t\t\tthis.boundingBox = new Box3();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst position = this.attributes.position;\r\n\t\t\t\tconst morphAttributesPosition = this.morphAttributes.position;\r\n\r\n\t\t\t\tif ( position && position.isGLBufferAttribute ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\r\n\r\n\t\t\t\t\tthis.boundingBox.set(\r\n\t\t\t\t\t\tnew Vector3( - Infinity, - Infinity, - Infinity ),\r\n\t\t\t\t\t\tnew Vector3( + Infinity, + Infinity, + Infinity )\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( position !== undefined ) {\r\n\r\n\t\t\t\t\tthis.boundingBox.setFromBufferAttribute( position );\r\n\r\n\t\t\t\t\t// process morph attributes if present\r\n\r\n\t\t\t\t\tif ( morphAttributesPosition ) {\r\n\r\n\t\t\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i++ ) {\r\n\r\n\t\t\t\t\t\t\tconst morphAttribute = morphAttributesPosition[i];\r\n\t\t\t\t\t\t\t_box.setFromBufferAttribute( morphAttribute );\r\n\r\n\t\t\t\t\t\t\tif ( this.morphTargetsRelative ) {\r\n\r\n\t\t\t\t\t\t\t\t_vector.addVectors( this.boundingBox.min, _box.min );\r\n\t\t\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector );\r\n\r\n\t\t\t\t\t\t\t\t_vector.addVectors( this.boundingBox.max, _box.max );\r\n\t\t\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector );\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box.min );\r\n\t\t\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box.max );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis.boundingBox.makeEmpty();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcomputeBoundingSphere() {\r\n\r\n\t\t\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\t\t\tthis.boundingSphere = new Sphere();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst position = this.attributes.position;\r\n\t\t\t\tconst morphAttributesPosition = this.morphAttributes.position;\r\n\r\n\t\t\t\tif ( position && position.isGLBufferAttribute ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\r\n\r\n\t\t\t\t\tthis.boundingSphere.set( new Vector3(), Infinity );\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( position ) {\r\n\r\n\t\t\t\t\t// first, find the center of the bounding sphere\r\n\r\n\t\t\t\t\tconst center = this.boundingSphere.center;\r\n\r\n\t\t\t\t\t_box.setFromBufferAttribute( position );\r\n\r\n\t\t\t\t\t// process morph attributes if present\r\n\r\n\t\t\t\t\tif ( morphAttributesPosition ) {\r\n\r\n\t\t\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i++ ) {\r\n\r\n\t\t\t\t\t\t\tconst morphAttribute = morphAttributesPosition[i];\r\n\t\t\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\r\n\r\n\t\t\t\t\t\t\tif ( this.morphTargetsRelative ) {\r\n\r\n\t\t\t\t\t\t\t\t_vector.addVectors( _box.min, _boxMorphTargets.min );\r\n\t\t\t\t\t\t\t\t_box.expandByPoint( _vector );\r\n\r\n\t\t\t\t\t\t\t\t_vector.addVectors( _box.max, _boxMorphTargets.max );\r\n\t\t\t\t\t\t\t\t_box.expandByPoint( _vector );\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t_box.expandByPoint( _boxMorphTargets.min );\r\n\t\t\t\t\t\t\t\t_box.expandByPoint( _boxMorphTargets.max );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_box.getCenter( center );\r\n\r\n\t\t\t\t\t// second, try to find a boundingSphere with a radius smaller than the\r\n\t\t\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\r\n\r\n\t\t\t\t\tlet maxRadiusSq = 0;\r\n\r\n\t\t\t\t\tfor ( let i = 0, il = position.count; i < il; i++ ) {\r\n\r\n\t\t\t\t\t\t_vector.fromBufferAttribute( position, i );\r\n\r\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// process morph attributes if present\r\n\r\n\t\t\t\t\tif ( morphAttributesPosition ) {\r\n\r\n\t\t\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i++ ) {\r\n\r\n\t\t\t\t\t\t\tconst morphAttribute = morphAttributesPosition[i];\r\n\t\t\t\t\t\t\tconst morphTargetsRelative = this.morphTargetsRelative;\r\n\r\n\t\t\t\t\t\t\tfor ( let j = 0, jl = morphAttribute.count; j < jl; j++ ) {\r\n\r\n\t\t\t\t\t\t\t\t_vector.fromBufferAttribute( morphAttribute, j );\r\n\r\n\t\t\t\t\t\t\t\tif ( morphTargetsRelative ) {\r\n\r\n\t\t\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\r\n\t\t\t\t\t\t\t\t\t_vector.add( _offset );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector ) );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcomputeTangents() {\r\n\r\n\t\t\t\tconst index = this.index;\r\n\t\t\t\tconst attributes = this.attributes;\r\n\r\n\t\t\t\t// based on http://www.terathon.com/code/tangent.html\r\n\t\t\t\t// (per vertex tangents)\r\n\r\n\t\t\t\tif ( index === null ||\r\n\t\t\t\t\tattributes.position === undefined ||\r\n\t\t\t\t\tattributes.normal === undefined ||\r\n\t\t\t\t\tattributes.uv === undefined ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst indices = index.array;\r\n\t\t\t\tconst positions = attributes.position.array;\r\n\t\t\t\tconst normals = attributes.normal.array;\r\n\t\t\t\tconst uvs = attributes.uv.array;\r\n\r\n\t\t\t\tconst nVertices = positions.length / 3;\r\n\r\n\t\t\t\tif ( attributes.tangent === undefined ) {\r\n\r\n\t\t\t\t\tthis.setAttribute( 'tangent', new BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst tangents = attributes.tangent.array;\r\n\r\n\t\t\t\tconst tan1 = [], tan2 = [];\r\n\r\n\t\t\t\tfor ( let i = 0; i < nVertices; i++ ) {\r\n\r\n\t\t\t\t\ttan1[i] = new Vector3();\r\n\t\t\t\t\ttan2[i] = new Vector3();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst vA = new Vector3(),\r\n\t\t\t\t\tvB = new Vector3(),\r\n\t\t\t\t\tvC = new Vector3(),\r\n\r\n\t\t\t\t\tuvA = new Vector2(),\r\n\t\t\t\t\tuvB = new Vector2(),\r\n\t\t\t\t\tuvC = new Vector2(),\r\n\r\n\t\t\t\t\tsdir = new Vector3(),\r\n\t\t\t\t\ttdir = new Vector3();\r\n\r\n\t\t\t\tfunction handleTriangle( a, b, c ) {\r\n\r\n\t\t\t\t\tvA.fromArray( positions, a * 3 );\r\n\t\t\t\t\tvB.fromArray( positions, b * 3 );\r\n\t\t\t\t\tvC.fromArray( positions, c * 3 );\r\n\r\n\t\t\t\t\tuvA.fromArray( uvs, a * 2 );\r\n\t\t\t\t\tuvB.fromArray( uvs, b * 2 );\r\n\t\t\t\t\tuvC.fromArray( uvs, c * 2 );\r\n\r\n\t\t\t\t\tvB.sub( vA );\r\n\t\t\t\t\tvC.sub( vA );\r\n\r\n\t\t\t\t\tuvB.sub( uvA );\r\n\t\t\t\t\tuvC.sub( uvA );\r\n\r\n\t\t\t\t\tconst r = 1.0 / ( uvB.x * uvC.y - uvC.x * uvB.y );\r\n\r\n\t\t\t\t\t// silently ignore degenerate uv triangles having coincident or colinear vertices\r\n\r\n\t\t\t\t\tif ( !isFinite( r ) ) return;\r\n\r\n\t\t\t\t\tsdir.copy( vB ).multiplyScalar( uvC.y ).addScaledVector( vC, - uvB.y ).multiplyScalar( r );\r\n\t\t\t\t\ttdir.copy( vC ).multiplyScalar( uvB.x ).addScaledVector( vB, - uvC.x ).multiplyScalar( r );\r\n\r\n\t\t\t\t\ttan1[a].add( sdir );\r\n\t\t\t\t\ttan1[b].add( sdir );\r\n\t\t\t\t\ttan1[c].add( sdir );\r\n\r\n\t\t\t\t\ttan2[a].add( tdir );\r\n\t\t\t\t\ttan2[b].add( tdir );\r\n\t\t\t\t\ttan2[c].add( tdir );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet groups = this.groups;\r\n\r\n\t\t\t\tif ( groups.length === 0 ) {\r\n\r\n\t\t\t\t\tgroups = [{\r\n\t\t\t\t\t\tstart: 0,\r\n\t\t\t\t\t\tcount: indices.length\r\n\t\t\t\t\t}];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( let i = 0, il = groups.length; i < il; ++i ) {\r\n\r\n\t\t\t\t\tconst group = groups[i];\r\n\r\n\t\t\t\t\tconst start = group.start;\r\n\t\t\t\t\tconst count = group.count;\r\n\r\n\t\t\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\t\thandleTriangle(\r\n\t\t\t\t\t\t\tindices[j + 0],\r\n\t\t\t\t\t\t\tindices[j + 1],\r\n\t\t\t\t\t\t\tindices[j + 2]\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst tmp = new Vector3(), tmp2 = new Vector3();\r\n\t\t\t\tconst n = new Vector3(), n2 = new Vector3();\r\n\r\n\t\t\t\tfunction handleVertex( v ) {\r\n\r\n\t\t\t\t\tn.fromArray( normals, v * 3 );\r\n\t\t\t\t\tn2.copy( n );\r\n\r\n\t\t\t\t\tconst t = tan1[v];\r\n\r\n\t\t\t\t\t// Gram-Schmidt orthogonalize\r\n\r\n\t\t\t\t\ttmp.copy( t );\r\n\t\t\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\r\n\r\n\t\t\t\t\t// Calculate handedness\r\n\r\n\t\t\t\t\ttmp2.crossVectors( n2, t );\r\n\t\t\t\t\tconst test = tmp2.dot( tan2[v] );\r\n\t\t\t\t\tconst w = ( test < 0.0 ) ? - 1.0 : 1.0;\r\n\r\n\t\t\t\t\ttangents[v * 4] = tmp.x;\r\n\t\t\t\t\ttangents[v * 4 + 1] = tmp.y;\r\n\t\t\t\t\ttangents[v * 4 + 2] = tmp.z;\r\n\t\t\t\t\ttangents[v * 4 + 3] = w;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( let i = 0, il = groups.length; i < il; ++i ) {\r\n\r\n\t\t\t\t\tconst group = groups[i];\r\n\r\n\t\t\t\t\tconst start = group.start;\r\n\t\t\t\t\tconst count = group.count;\r\n\r\n\t\t\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\t\thandleVertex( indices[j + 0] );\r\n\t\t\t\t\t\thandleVertex( indices[j + 1] );\r\n\t\t\t\t\t\thandleVertex( indices[j + 2] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcomputeVertexNormals() {\r\n\r\n\t\t\t\tconst index = this.index;\r\n\t\t\t\tconst positionAttribute = this.getAttribute( 'position' );\r\n\r\n\t\t\t\tif ( positionAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tlet normalAttribute = this.getAttribute( 'normal' );\r\n\r\n\t\t\t\t\tif ( normalAttribute === undefined ) {\r\n\r\n\t\t\t\t\t\tnormalAttribute = new BufferAttribute( new Float32Array( positionAttribute.count * 3 ), 3 );\r\n\t\t\t\t\t\tthis.setAttribute( 'normal', normalAttribute );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// reset existing normals to zero\r\n\r\n\t\t\t\t\t\tfor ( let i = 0, il = normalAttribute.count; i < il; i++ ) {\r\n\r\n\t\t\t\t\t\t\tnormalAttribute.setXYZ( i, 0, 0, 0 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\r\n\t\t\t\t\tconst nA = new Vector3(), nB = new Vector3(), nC = new Vector3();\r\n\t\t\t\t\tconst cb = new Vector3(), ab = new Vector3();\r\n\r\n\t\t\t\t\t// indexed elements\r\n\r\n\t\t\t\t\tif ( index ) {\r\n\r\n\t\t\t\t\t\tfor ( let i = 0, il = index.count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\tconst vA = index.getX( i + 0 );\r\n\t\t\t\t\t\t\tconst vB = index.getX( i + 1 );\r\n\t\t\t\t\t\t\tconst vC = index.getX( i + 2 );\r\n\r\n\t\t\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, vA );\r\n\t\t\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, vB );\r\n\t\t\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, vC );\r\n\r\n\t\t\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\t\t\tnA.fromBufferAttribute( normalAttribute, vA );\r\n\t\t\t\t\t\t\tnB.fromBufferAttribute( normalAttribute, vB );\r\n\t\t\t\t\t\t\tnC.fromBufferAttribute( normalAttribute, vC );\r\n\r\n\t\t\t\t\t\t\tnA.add( cb );\r\n\t\t\t\t\t\t\tnB.add( cb );\r\n\t\t\t\t\t\t\tnC.add( cb );\r\n\r\n\t\t\t\t\t\t\tnormalAttribute.setXYZ( vA, nA.x, nA.y, nA.z );\r\n\t\t\t\t\t\t\tnormalAttribute.setXYZ( vB, nB.x, nB.y, nB.z );\r\n\t\t\t\t\t\t\tnormalAttribute.setXYZ( vC, nC.x, nC.y, nC.z );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// non-indexed elements (unconnected triangle soup)\r\n\r\n\t\t\t\t\t\tfor ( let i = 0, il = positionAttribute.count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, i + 0 );\r\n\t\t\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, i + 1 );\r\n\t\t\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, i + 2 );\r\n\r\n\t\t\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\t\t\tnormalAttribute.setXYZ( i + 0, cb.x, cb.y, cb.z );\r\n\t\t\t\t\t\t\tnormalAttribute.setXYZ( i + 1, cb.x, cb.y, cb.z );\r\n\t\t\t\t\t\t\tnormalAttribute.setXYZ( i + 2, cb.x, cb.y, cb.z );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.normalizeNormals();\r\n\r\n\t\t\t\t\tnormalAttribute.needsUpdate = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmerge( geometry, offset ) {\r\n\r\n\t\t\t\tif ( !( geometry && geometry.isBufferGeometry ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( offset === undefined ) {\r\n\r\n\t\t\t\t\toffset = 0;\r\n\r\n\t\t\t\t\tconsole.warn(\r\n\t\t\t\t\t\t'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\r\n\t\t\t\t\t\t+ 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst attributes = this.attributes;\r\n\r\n\t\t\t\tfor ( const key in attributes ) {\r\n\r\n\t\t\t\t\tif ( geometry.attributes[key] === undefined ) continue;\r\n\r\n\t\t\t\t\tconst attribute1 = attributes[key];\r\n\t\t\t\t\tconst attributeArray1 = attribute1.array;\r\n\r\n\t\t\t\t\tconst attribute2 = geometry.attributes[key];\r\n\t\t\t\t\tconst attributeArray2 = attribute2.array;\r\n\r\n\t\t\t\t\tconst attributeOffset = attribute2.itemSize * offset;\r\n\t\t\t\t\tconst length = Math.min( attributeArray2.length, attributeArray1.length - attributeOffset );\r\n\r\n\t\t\t\t\tfor ( let i = 0, j = attributeOffset; i < length; i++ , j++ ) {\r\n\r\n\t\t\t\t\t\tattributeArray1[j] = attributeArray2[i];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnormalizeNormals() {\r\n\r\n\t\t\t\tconst normals = this.attributes.normal;\r\n\r\n\t\t\t\tfor ( let i = 0, il = normals.count; i < il; i++ ) {\r\n\r\n\t\t\t\t\t_vector.fromBufferAttribute( normals, i );\r\n\r\n\t\t\t\t\t_vector.normalize();\r\n\r\n\t\t\t\t\tnormals.setXYZ( i, _vector.x, _vector.y, _vector.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttoNonIndexed() {\r\n\r\n\t\t\t\tfunction convertBufferAttribute( attribute, indices ) {\r\n\r\n\t\t\t\t\tconst array = attribute.array;\r\n\t\t\t\t\tconst itemSize = attribute.itemSize;\r\n\t\t\t\t\tconst normalized = attribute.normalized;\r\n\r\n\t\t\t\t\tconst array2 = new array.constructor( indices.length * itemSize );\r\n\r\n\t\t\t\t\tlet index = 0, index2 = 0;\r\n\r\n\t\t\t\t\tfor ( let i = 0, l = indices.length; i < l; i++ ) {\r\n\r\n\t\t\t\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\t\tindex = indices[i] * attribute.data.stride + attribute.offset;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tindex = indices[i] * itemSize;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor ( let j = 0; j < itemSize; j++ ) {\r\n\r\n\t\t\t\t\t\t\tarray2[index2++] = array[index++];\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn new BufferAttribute( array2, itemSize, normalized );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\r\n\t\t\t\tif ( this.index === null ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.' );\r\n\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst geometry2 = new BufferGeometry();\r\n\r\n\t\t\t\tconst indices = this.index.array;\r\n\t\t\t\tconst attributes = this.attributes;\r\n\r\n\t\t\t\t// attributes\r\n\r\n\t\t\t\tfor ( const name in attributes ) {\r\n\r\n\t\t\t\t\tconst attribute = attributes[name];\r\n\r\n\t\t\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\r\n\r\n\t\t\t\t\tgeometry2.setAttribute( name, newAttribute );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// morph attributes\r\n\r\n\t\t\t\tconst morphAttributes = this.morphAttributes;\r\n\r\n\t\t\t\tfor ( const name in morphAttributes ) {\r\n\r\n\t\t\t\t\tconst morphArray = [];\r\n\t\t\t\t\tconst morphAttribute = morphAttributes[name]; // morphAttribute: array of Float32BufferAttributes\r\n\r\n\t\t\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i++ ) {\r\n\r\n\t\t\t\t\t\tconst attribute = morphAttribute[i];\r\n\r\n\t\t\t\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\r\n\r\n\t\t\t\t\t\tmorphArray.push( newAttribute );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgeometry2.morphAttributes[name] = morphArray;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\r\n\r\n\t\t\t\t// groups\r\n\r\n\t\t\t\tconst groups = this.groups;\r\n\r\n\t\t\t\tfor ( let i = 0, l = groups.length; i < l; i++ ) {\r\n\r\n\t\t\t\t\tconst group = groups[i];\r\n\t\t\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn geometry2;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttoJSON() {\r\n\r\n\t\t\t\tconst data = {\r\n\t\t\t\t\tmetadata: {\r\n\t\t\t\t\t\tversion: 4.5,\r\n\t\t\t\t\t\ttype: 'BufferGeometry',\r\n\t\t\t\t\t\tgenerator: 'BufferGeometry.toJSON'\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// standard BufferGeometry serialization\r\n\r\n\t\t\t\tdata.uuid = this.uuid;\r\n\t\t\t\tdata.type = this.type;\r\n\t\t\t\tif ( this.name !== '' ) data.name = this.name;\r\n\t\t\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\r\n\r\n\t\t\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\t\t\tconst parameters = this.parameters;\r\n\r\n\t\t\t\t\tfor ( const key in parameters ) {\r\n\r\n\t\t\t\t\t\tif ( parameters[key] !== undefined ) data[key] = parameters[key];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn data;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// for simplicity the code assumes attributes are not shared across geometries, see #15811\r\n\r\n\t\t\t\tdata.data = { attributes: {} };\r\n\r\n\t\t\t\tconst index = this.index;\r\n\r\n\t\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\t\tdata.data.index = {\r\n\t\t\t\t\t\ttype: index.array.constructor.name,\r\n\t\t\t\t\t\tarray: Array.prototype.slice.call( index.array )\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst attributes = this.attributes;\r\n\r\n\t\t\t\tfor ( const key in attributes ) {\r\n\r\n\t\t\t\t\tconst attribute = attributes[key];\r\n\r\n\t\t\t\t\tdata.data.attributes[key] = attribute.toJSON( data.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst morphAttributes = {};\r\n\t\t\t\tlet hasMorphAttributes = false;\r\n\r\n\t\t\t\tfor ( const key in this.morphAttributes ) {\r\n\r\n\t\t\t\t\tconst attributeArray = this.morphAttributes[key];\r\n\r\n\t\t\t\t\tconst array = [];\r\n\r\n\t\t\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i++ ) {\r\n\r\n\t\t\t\t\t\tconst attribute = attributeArray[i];\r\n\r\n\t\t\t\t\t\tarray.push( attribute.toJSON( data.data ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( array.length > 0 ) {\r\n\r\n\t\t\t\t\t\tmorphAttributes[key] = array;\r\n\r\n\t\t\t\t\t\thasMorphAttributes = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( hasMorphAttributes ) {\r\n\r\n\t\t\t\t\tdata.data.morphAttributes = morphAttributes;\r\n\t\t\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst groups = this.groups;\r\n\r\n\t\t\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst boundingSphere = this.boundingSphere;\r\n\r\n\t\t\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\t\t\tdata.data.boundingSphere = {\r\n\t\t\t\t\t\tcenter: boundingSphere.center.toArray(),\r\n\t\t\t\t\t\tradius: boundingSphere.radius\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn data;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tclone() {\r\n\r\n\t\t\t\treturn new this.constructor().copy( this );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcopy( source ) {\r\n\r\n\t\t\t\t// reset\r\n\r\n\t\t\t\tthis.index = null;\r\n\t\t\t\tthis.attributes = {};\r\n\t\t\t\tthis.morphAttributes = {};\r\n\t\t\t\tthis.groups = [];\r\n\t\t\t\tthis.boundingBox = null;\r\n\t\t\t\tthis.boundingSphere = null;\r\n\r\n\t\t\t\t// used for storing cloned, shared data\r\n\r\n\t\t\t\tconst data = {};\r\n\r\n\t\t\t\t// name\r\n\r\n\t\t\t\tthis.name = source.name;\r\n\r\n\t\t\t\t// index\r\n\r\n\t\t\t\tconst index = source.index;\r\n\r\n\t\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\t\tthis.setIndex( index.clone( data ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// attributes\r\n\r\n\t\t\t\tconst attributes = source.attributes;\r\n\r\n\t\t\t\tfor ( const name in attributes ) {\r\n\r\n\t\t\t\t\tconst attribute = attributes[name];\r\n\t\t\t\t\tthis.setAttribute( name, attribute.clone( data ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// morph attributes\r\n\r\n\t\t\t\tconst morphAttributes = source.morphAttributes;\r\n\r\n\t\t\t\tfor ( const name in morphAttributes ) {\r\n\r\n\t\t\t\t\tconst array = [];\r\n\t\t\t\t\tconst morphAttribute = morphAttributes[name]; // morphAttribute: array of Float32BufferAttributes\r\n\r\n\t\t\t\t\tfor ( let i = 0, l = morphAttribute.length; i < l; i++ ) {\r\n\r\n\t\t\t\t\t\tarray.push( morphAttribute[i].clone( data ) );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.morphAttributes[name] = array;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\r\n\r\n\t\t\t\t// groups\r\n\r\n\t\t\t\tconst groups = source.groups;\r\n\r\n\t\t\t\tfor ( let i = 0, l = groups.length; i < l; i++ ) {\r\n\r\n\t\t\t\t\tconst group = groups[i];\r\n\t\t\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// bounding box\r\n\r\n\t\t\t\tconst boundingBox = source.boundingBox;\r\n\r\n\t\t\t\tif ( boundingBox !== null ) {\r\n\r\n\t\t\t\t\tthis.boundingBox = boundingBox.clone();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// bounding sphere\r\n\r\n\t\t\t\tconst boundingSphere = source.boundingSphere;\r\n\r\n\t\t\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\t\t\tthis.boundingSphere = boundingSphere.clone();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// draw range\r\n\r\n\t\t\t\tthis.drawRange.start = source.drawRange.start;\r\n\t\t\t\tthis.drawRange.count = source.drawRange.count;\r\n\r\n\t\t\t\t// user data\r\n\r\n\t\t\t\tthis.userData = source.userData;\r\n\r\n\t\t\t\t// geometry generator parameters\r\n\r\n\t\t\t\tif ( source.parameters !== undefined ) this.parameters = Object.assign( {}, source.parameters );\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdispose() {\r\n\r\n\t\t\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tBufferGeometry.prototype.isBufferGeometry = true;\r\n\t\t/*\r\n\t\timport {\r\n\t\t\tBufferGeometry,\r\n\t\t\tFloat32BufferAttribute\r\n\t\t} from '../../../build/three.module.js';\r\n\t\t*/\r\n\t\t//import { ConvexHull } from '../math/ConvexHull.js';\r\n\t\t//ConvexGeometry\r\n\r\n\t\tclass ConvexGeometry extends BufferGeometry {\r\n\r\n\t\t\tconstructor( points ) {\r\n\r\n\t\t\t\tsuper();\r\n\r\n\t\t\t\t// buffers\r\n\r\n\t\t\t\tconst vertices = [];\r\n\t\t\t\tconst normals = [];\r\n\r\n\t\t\t\tif ( ConvexHull === undefined ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.ConvexBufferGeometry: ConvexBufferGeometry relies on ConvexHull' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst convexHull = new _Three.ConvexHull().setFromPoints( points );\r\n\r\n\t\t\t\t// generate vertices and normals\r\n\r\n\t\t\t\tconst faces = convexHull.faces;\r\n\r\n\t\t\t\tfor ( let i = 0; i < faces.length; i++ ) {\r\n\r\n\t\t\t\t\tconst face = faces[i];\r\n\t\t\t\t\tlet edge = face.edge;\r\n\r\n\t\t\t\t\t// we move along a doubly-connected edge list to access all face points (see HalfEdge docs)\r\n\r\n\t\t\t\t\tdo {\r\n\r\n\t\t\t\t\t\tconst point = edge.head().point;\r\n\r\n\t\t\t\t\t\tvertices.push( point.x, point.y, point.z );\r\n\t\t\t\t\t\tnormals.push( face.normal.x, face.normal.y, face.normal.z );\r\n\r\n\t\t\t\t\t\tedge = edge.next;\r\n\r\n\t\t\t\t\t} while ( edge !== face.edge );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// build geometry\r\n\r\n\t\t\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\t\t\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tthis.ConvexGeometry = ConvexGeometry;\r\n\r\n\t\tconst //EventDispatcher = three.THREE.EventDispatcher,\r\n\t\t\tMOUSE = three.THREE.MOUSE,\r\n\t\t\tQuaternion = three.THREE.Quaternion,\r\n\t\t\tSpherical = three.THREE.Spherical,\r\n\t\t\tTOUCH = three.THREE.TOUCH;\r\n//\t\t\tVector2 = three.THREE.Vector2,\r\n//\t\t\tVector3 = three.THREE.Vector3;\r\n\r\n\t\t// This set of controls performs orbiting, dollying (zooming), and panning.\r\n\t\t// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n\t\t//\r\n\t\t//    Orbit - left mouse / touch: one-finger move\r\n\t\t//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n\t\t//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\r\n\r\n\t\tconst _changeEvent = { type: 'change' };\r\n\t\tconst _startEvent = { type: 'start' };\r\n\t\tconst _endEvent = { type: 'end' };\r\n\r\n\t\tclass OrbitControls extends EventDispatcher {\r\n\r\n\t\t\tconstructor( object, domElement ) {\r\n\r\n\t\t\t\tsuper();\r\n\r\n\t\t\t\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\r\n\t\t\t\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\r\n\r\n\t\t\t\tthis.object = object;\r\n\t\t\t\tthis.domElement = domElement;\r\n\t\t\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\r\n\r\n\t\t\t\t// Set to false to disable this control\r\n\t\t\t\tthis.enabled = true;\r\n\r\n\t\t\t\t// \"target\" sets the location of focus, where the object orbits around\r\n\t\t\t\tthis.target = new Vector3();\r\n\r\n\t\t\t\t// How far you can dolly in and out ( PerspectiveCamera only )\r\n\t\t\t\tthis.minDistance = 0;\r\n\t\t\t\tthis.maxDistance = Infinity;\r\n\r\n\t\t\t\t// How far you can zoom in and out ( OrthographicCamera only )\r\n\t\t\t\tthis.minZoom = 0;\r\n\t\t\t\tthis.maxZoom = Infinity;\r\n\r\n\t\t\t\t// How far you can orbit vertically, upper and lower limits.\r\n\t\t\t\t// Range is 0 to Math.PI radians.\r\n\t\t\t\tthis.minPolarAngle = 0; // radians\r\n\t\t\t\tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n\t\t\t\t// How far you can orbit horizontally, upper and lower limits.\r\n\t\t\t\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\r\n\t\t\t\tthis.minAzimuthAngle = - Infinity; // radians\r\n\t\t\t\tthis.maxAzimuthAngle = Infinity; // radians\r\n\r\n\t\t\t\t// Set to true to enable damping (inertia)\r\n\t\t\t\t// If damping is enabled, you must call controls.update() in your animation loop\r\n\t\t\t\tthis.enableDamping = false;\r\n\t\t\t\tthis.dampingFactor = 0.05;\r\n\r\n\t\t\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n\t\t\t\t// Set to false to disable zooming\r\n\t\t\t\tthis.enableZoom = true;\r\n\t\t\t\tthis.zoomSpeed = 1.0;\r\n\r\n\t\t\t\t// Set to false to disable rotating\r\n\t\t\t\tthis.enableRotate = true;\r\n\t\t\t\tthis.rotateSpeed = 1.0;\r\n\r\n\t\t\t\t// Set to false to disable panning\r\n\t\t\t\tthis.enablePan = true;\r\n\t\t\t\tthis.panSpeed = 1.0;\r\n\t\t\t\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\r\n\t\t\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n\t\t\t\t// Set to true to automatically rotate around the target\r\n\t\t\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n\t\t\t\tthis.autoRotate = false;\r\n\t\t\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\r\n\r\n\t\t\t\t// The four arrow keys\r\n\t\t\t\tthis.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\r\n\r\n\t\t\t\t// Mouse buttons\r\n\t\t\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\r\n\r\n\t\t\t\t// Touch fingers\r\n\t\t\t\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\r\n\r\n\t\t\t\t// for reset\r\n\t\t\t\tthis.target0 = this.target.clone();\r\n\t\t\t\tthis.position0 = this.object.position.clone();\r\n\t\t\t\tthis.zoom0 = this.object.zoom;\r\n\r\n\t\t\t\t// the target DOM element for key events\r\n\t\t\t\tthis._domElementKeyEvents = null;\r\n\r\n\t\t\t\t//\r\n\t\t\t\t// public methods\r\n\t\t\t\t//\r\n\r\n\t\t\t\tthis.getPolarAngle = function () {\r\n\r\n\t\t\t\t\treturn spherical.phi;\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.getAzimuthalAngle = function () {\r\n\r\n\t\t\t\t\treturn spherical.theta;\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.getDistance = function () {\r\n\r\n\t\t\t\t\treturn this.object.position.distanceTo( this.target );\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.listenToKeyEvents = function ( domElement ) {\r\n\r\n\t\t\t\t\tdomElement.addEventListener( 'keydown', onKeyDown );\r\n\t\t\t\t\tthis._domElementKeyEvents = domElement;\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.saveState = function () {\r\n\r\n\t\t\t\t\tscope.target0.copy( scope.target );\r\n\t\t\t\t\tscope.position0.copy( scope.object.position );\r\n\t\t\t\t\tscope.zoom0 = scope.object.zoom;\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.reset = function () {\r\n\r\n\t\t\t\t\tscope.target.copy( scope.target0 );\r\n\t\t\t\t\tscope.object.position.copy( scope.position0 );\r\n\t\t\t\t\tscope.object.zoom = scope.zoom0;\r\n\r\n\t\t\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\t\t\tscope.dispatchEvent( _changeEvent );\r\n\r\n\t\t\t\t\tscope.update();\r\n\r\n\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// this method is exposed, but perhaps it would be better if we can make it private...\r\n\t\t\t\tthis.update = function () {\r\n\r\n\t\t\t\t\tconst offset = new Vector3();\r\n\r\n\t\t\t\t\t// so camera.up is the orbit axis\r\n\t\t\t\t\tconst quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\r\n\t\t\t\t\tconst quatInverse = quat.clone().invert();\r\n\r\n\t\t\t\t\tconst lastPosition = new Vector3();\r\n\t\t\t\t\tconst lastQuaternion = new Quaternion();\r\n\r\n\t\t\t\t\tconst twoPI = 2 * Math.PI;\r\n\r\n\t\t\t\t\treturn function update() {\r\n\r\n\t\t\t\t\t\tconst position = scope.object.position;\r\n\r\n\t\t\t\t\t\toffset.copy( position ).sub( scope.target );\r\n\r\n\t\t\t\t\t\t// rotate offset to \"y-axis-is-up\" space\r\n\t\t\t\t\t\toffset.applyQuaternion( quat );\r\n\r\n\t\t\t\t\t\t// angle from z-axis around y-axis\r\n\t\t\t\t\t\tspherical.setFromVector3( offset );\r\n\r\n\t\t\t\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\r\n\r\n\t\t\t\t\t\t\trotateLeft( getAutoRotationAngle() );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( scope.enableDamping ) {\r\n\r\n\t\t\t\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\r\n\t\t\t\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tspherical.theta += sphericalDelta.theta;\r\n\t\t\t\t\t\t\tspherical.phi += sphericalDelta.phi;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// restrict theta to be between desired limits\r\n\r\n\t\t\t\t\t\tlet min = scope.minAzimuthAngle;\r\n\t\t\t\t\t\tlet max = scope.maxAzimuthAngle;\r\n\r\n\t\t\t\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\r\n\r\n\t\t\t\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\r\n\r\n\t\t\t\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\r\n\r\n\t\t\t\t\t\t\tif ( min <= max ) {\r\n\r\n\t\t\t\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\r\n\t\t\t\t\t\t\t\t\tMath.max( min, spherical.theta ) :\r\n\t\t\t\t\t\t\t\t\tMath.min( max, spherical.theta );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// restrict phi to be between desired limits\r\n\t\t\t\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\r\n\r\n\t\t\t\t\t\tspherical.makeSafe();\r\n\r\n\r\n\t\t\t\t\t\tspherical.radius *= scale;\r\n\r\n\t\t\t\t\t\t// restrict radius to be between desired limits\r\n\t\t\t\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\r\n\r\n\t\t\t\t\t\t// move target to panned location\r\n\r\n\t\t\t\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tscope.target.add( panOffset );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\toffset.setFromSpherical( spherical );\r\n\r\n\t\t\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\r\n\t\t\t\t\t\toffset.applyQuaternion( quatInverse );\r\n\r\n\t\t\t\t\t\tposition.copy( scope.target ).add( offset );\r\n\r\n\t\t\t\t\t\tscope.object.lookAt( scope.target );\r\n\r\n\t\t\t\t\t\tif ( scope.enableDamping === true ) {\r\n\r\n\t\t\t\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\r\n\t\t\t\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\r\n\r\n\t\t\t\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tsphericalDelta.set( 0, 0, 0 );\r\n\r\n\t\t\t\t\t\t\tpanOffset.set( 0, 0, 0 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tscale = 1;\r\n\r\n\t\t\t\t\t\t// update condition is:\r\n\t\t\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\r\n\t\t\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n\t\t\t\t\t\tif ( zoomChanged ||\r\n\t\t\t\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\r\n\t\t\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\r\n\r\n\t\t\t\t\t\t\tscope.dispatchEvent( _changeEvent );\r\n\r\n\t\t\t\t\t\t\tlastPosition.copy( scope.object.position );\r\n\t\t\t\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\r\n\t\t\t\t\t\t\tzoomChanged = false;\r\n\r\n\t\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}();\r\n\r\n\t\t\t\tthis.dispose = function () {\r\n\r\n\t\t\t\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\r\n\r\n\t\t\t\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\r\n\t\t\t\t\tscope.domElement.removeEventListener( 'pointercancel', onPointerCancel );\r\n\t\t\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\r\n\r\n\t\t\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\r\n\t\t\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\r\n\r\n\r\n\t\t\t\t\tif ( scope._domElementKeyEvents !== null ) {\r\n\r\n\t\t\t\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\t//\r\n\t\t\t\t// internals\r\n\t\t\t\t//\r\n\r\n\t\t\t\tconst scope = this;\r\n\r\n\t\t\t\tconst STATE = {\r\n\t\t\t\t\tNONE: - 1,\r\n\t\t\t\t\tROTATE: 0,\r\n\t\t\t\t\tDOLLY: 1,\r\n\t\t\t\t\tPAN: 2,\r\n\t\t\t\t\tTOUCH_ROTATE: 3,\r\n\t\t\t\t\tTOUCH_PAN: 4,\r\n\t\t\t\t\tTOUCH_DOLLY_PAN: 5,\r\n\t\t\t\t\tTOUCH_DOLLY_ROTATE: 6\r\n\t\t\t\t};\r\n\r\n\t\t\t\tlet state = STATE.NONE;\r\n\r\n\t\t\t\tconst EPS = 0.000001;\r\n\r\n\t\t\t\t// current position in spherical coordinates\r\n\t\t\t\tconst spherical = new Spherical();\r\n\t\t\t\tconst sphericalDelta = new Spherical();\r\n\r\n\t\t\t\tlet scale = 1;\r\n\t\t\t\tconst panOffset = new Vector3();\r\n\t\t\t\tlet zoomChanged = false;\r\n\r\n\t\t\t\tconst rotateStart = new Vector2();\r\n\t\t\t\tconst rotateEnd = new Vector2();\r\n\t\t\t\tconst rotateDelta = new Vector2();\r\n\r\n\t\t\t\tconst panStart = new Vector2();\r\n\t\t\t\tconst panEnd = new Vector2();\r\n\t\t\t\tconst panDelta = new Vector2();\r\n\r\n\t\t\t\tconst dollyStart = new Vector2();\r\n\t\t\t\tconst dollyEnd = new Vector2();\r\n\t\t\t\tconst dollyDelta = new Vector2();\r\n\r\n\t\t\t\tconst pointers = [];\r\n\t\t\t\tconst pointerPositions = {};\r\n\r\n\t\t\t\tfunction getAutoRotationAngle() {\r\n\r\n\t\t\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getZoomScale() {\r\n\r\n\t\t\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rotateLeft( angle ) {\r\n\r\n\t\t\t\t\tsphericalDelta.theta -= angle;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction rotateUp( angle ) {\r\n\r\n\t\t\t\t\tsphericalDelta.phi -= angle;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst panLeft = function () {\r\n\r\n\t\t\t\t\tconst v = new Vector3();\r\n\r\n\t\t\t\t\treturn function panLeft( distance, objectMatrix ) {\r\n\r\n\t\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\r\n\t\t\t\t\t\tv.multiplyScalar( - distance );\r\n\r\n\t\t\t\t\t\tpanOffset.add( v );\r\n\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}();\r\n\r\n\t\t\t\tconst panUp = function () {\r\n\r\n\t\t\t\t\tconst v = new Vector3();\r\n\r\n\t\t\t\t\treturn function panUp( distance, objectMatrix ) {\r\n\r\n\t\t\t\t\t\tif ( scope.screenSpacePanning === true ) {\r\n\r\n\t\t\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\r\n\t\t\t\t\t\t\tv.crossVectors( scope.object.up, v );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tv.multiplyScalar( distance );\r\n\r\n\t\t\t\t\t\tpanOffset.add( v );\r\n\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}();\r\n\r\n\t\t\t\t// deltaX and deltaY are in pixels; right and down are positive\r\n\t\t\t\tconst pan = function () {\r\n\r\n\t\t\t\t\tconst offset = new Vector3();\r\n\r\n\t\t\t\t\treturn function pan( deltaX, deltaY ) {\r\n\r\n\t\t\t\t\t\tconst element = scope.domElement;\r\n\r\n\t\t\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\t\t\t\t\t// perspective\r\n\t\t\t\t\t\t\tconst position = scope.object.position;\r\n\t\t\t\t\t\t\toffset.copy( position ).sub( scope.target );\r\n\t\t\t\t\t\t\tlet targetDistance = offset.length();\r\n\r\n\t\t\t\t\t\t\t// half of the fov is center to top of screen\r\n\t\t\t\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\r\n\r\n\t\t\t\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\r\n\t\t\t\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\r\n\t\t\t\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\t\t\t\t\t// orthographic\r\n\t\t\t\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\r\n\t\t\t\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t// camera neither orthographic nor perspective\r\n\t\t\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\r\n\t\t\t\t\t\t\tscope.enablePan = false;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}();\r\n\r\n\t\t\t\tfunction dollyOut( dollyScale ) {\r\n\r\n\t\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\t\t\t\tscale /= dollyScale;\r\n\r\n\t\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\r\n\t\t\t\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\t\t\t\tzoomChanged = true;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\t\t\t\tscope.enableZoom = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction dollyIn( dollyScale ) {\r\n\r\n\t\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\r\n\r\n\t\t\t\t\t\tscale *= dollyScale;\r\n\r\n\t\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\r\n\r\n\t\t\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\r\n\t\t\t\t\t\tscope.object.updateProjectionMatrix();\r\n\t\t\t\t\t\tzoomChanged = true;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\r\n\t\t\t\t\t\tscope.enableZoom = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\t\t\t\t// event callbacks - update the object state\r\n\t\t\t\t//\r\n\r\n\t\t\t\tfunction handleMouseDownRotate( event ) {\r\n\r\n\t\t\t\t\trotateStart.set( event.clientX, event.clientY );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleMouseDownDolly( event ) {\r\n\r\n\t\t\t\t\tdollyStart.set( event.clientX, event.clientY );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleMouseDownPan( event ) {\r\n\r\n\t\t\t\t\tpanStart.set( event.clientX, event.clientY );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleMouseMoveRotate( event ) {\r\n\r\n\t\t\t\t\trotateEnd.set( event.clientX, event.clientY );\r\n\r\n\t\t\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n\t\t\t\t\tconst element = scope.domElement;\r\n\r\n\t\t\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n\t\t\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n\t\t\t\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\t\t\t\tscope.update();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleMouseMoveDolly( event ) {\r\n\r\n\t\t\t\t\tdollyEnd.set( event.clientX, event.clientY );\r\n\r\n\t\t\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\r\n\r\n\t\t\t\t\tif ( dollyDelta.y > 0 ) {\r\n\r\n\t\t\t\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t\t\t\t} else if ( dollyDelta.y < 0 ) {\r\n\r\n\t\t\t\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\t\t\t\tscope.update();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleMouseMovePan( event ) {\r\n\r\n\t\t\t\t\tpanEnd.set( event.clientX, event.clientY );\r\n\r\n\t\t\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n\t\t\t\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\t\t\t\tpanStart.copy( panEnd );\r\n\r\n\t\t\t\t\tscope.update();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleMouseUp( /*event*/ ) {\r\n\r\n\t\t\t\t\t// no-op\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleMouseWheel( event ) {\r\n\r\n\t\t\t\t\tif ( event.deltaY < 0 ) {\r\n\r\n\t\t\t\t\t\tdollyIn( getZoomScale() );\r\n\r\n\t\t\t\t\t} else if ( event.deltaY > 0 ) {\r\n\r\n\t\t\t\t\t\tdollyOut( getZoomScale() );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tscope.update();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleKeyDown( event ) {\r\n\r\n\t\t\t\t\tlet needsUpdate = false;\r\n\r\n\t\t\t\t\tswitch ( event.code ) {\r\n\r\n\t\t\t\t\t\tcase scope.keys.UP:\r\n\t\t\t\t\t\t\tpan( 0, scope.keyPanSpeed );\r\n\t\t\t\t\t\t\tneedsUpdate = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase scope.keys.BOTTOM:\r\n\t\t\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\r\n\t\t\t\t\t\t\tneedsUpdate = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase scope.keys.LEFT:\r\n\t\t\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\r\n\t\t\t\t\t\t\tneedsUpdate = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase scope.keys.RIGHT:\r\n\t\t\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\r\n\t\t\t\t\t\t\tneedsUpdate = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( needsUpdate ) {\r\n\r\n\t\t\t\t\t\t// prevent the browser from scrolling on cursor keys\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tscope.update();\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleTouchStartRotate() {\r\n\r\n\t\t\t\t\tif ( pointers.length === 1 ) {\r\n\r\n\t\t\t\t\t\trotateStart.set( pointers[0].pageX, pointers[0].pageY );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconst x = 0.5 * ( pointers[0].pageX + pointers[1].pageX );\r\n\t\t\t\t\t\tconst y = 0.5 * ( pointers[0].pageY + pointers[1].pageY );\r\n\r\n\t\t\t\t\t\trotateStart.set( x, y );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleTouchStartPan() {\r\n\r\n\t\t\t\t\tif ( pointers.length === 1 ) {\r\n\r\n\t\t\t\t\t\tpanStart.set( pointers[0].pageX, pointers[0].pageY );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconst x = 0.5 * ( pointers[0].pageX + pointers[1].pageX );\r\n\t\t\t\t\t\tconst y = 0.5 * ( pointers[0].pageY + pointers[1].pageY );\r\n\r\n\t\t\t\t\t\tpanStart.set( x, y );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleTouchStartDolly() {\r\n\r\n\t\t\t\t\tconst dx = pointers[0].pageX - pointers[1].pageX;\r\n\t\t\t\t\tconst dy = pointers[0].pageY - pointers[1].pageY;\r\n\r\n\t\t\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\t\t\t\tdollyStart.set( 0, distance );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleTouchStartDollyPan() {\r\n\r\n\t\t\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\r\n\r\n\t\t\t\t\tif ( scope.enablePan ) handleTouchStartPan();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleTouchStartDollyRotate() {\r\n\r\n\t\t\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\r\n\r\n\t\t\t\t\tif ( scope.enableRotate ) handleTouchStartRotate();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleTouchMoveRotate( event ) {\r\n\r\n\t\t\t\t\tif ( pointers.length == 1 ) {\r\n\r\n\t\t\t\t\t\trotateEnd.set( event.pageX, event.pageY );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconst position = getSecondPointerPosition( event );\r\n\r\n\t\t\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\r\n\t\t\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\r\n\r\n\t\t\t\t\t\trotateEnd.set( x, y );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\r\n\r\n\t\t\t\t\tconst element = scope.domElement;\r\n\r\n\t\t\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\r\n\r\n\t\t\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\r\n\r\n\t\t\t\t\trotateStart.copy( rotateEnd );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleTouchMovePan( event ) {\r\n\r\n\t\t\t\t\tif ( pointers.length === 1 ) {\r\n\r\n\t\t\t\t\t\tpanEnd.set( event.pageX, event.pageY );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconst position = getSecondPointerPosition( event );\r\n\r\n\t\t\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\r\n\t\t\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\r\n\r\n\t\t\t\t\t\tpanEnd.set( x, y );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\r\n\r\n\t\t\t\t\tpan( panDelta.x, panDelta.y );\r\n\r\n\t\t\t\t\tpanStart.copy( panEnd );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleTouchMoveDolly( event ) {\r\n\r\n\t\t\t\t\tconst position = getSecondPointerPosition( event );\r\n\r\n\t\t\t\t\tconst dx = event.pageX - position.x;\r\n\t\t\t\t\tconst dy = event.pageY - position.y;\r\n\r\n\t\t\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\t\t\t\tdollyEnd.set( 0, distance );\r\n\r\n\t\t\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\r\n\r\n\t\t\t\t\tdollyOut( dollyDelta.y );\r\n\r\n\t\t\t\t\tdollyStart.copy( dollyEnd );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleTouchMoveDollyPan( event ) {\r\n\r\n\t\t\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\r\n\r\n\t\t\t\t\tif ( scope.enablePan ) handleTouchMovePan( event );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleTouchMoveDollyRotate( event ) {\r\n\r\n\t\t\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\r\n\r\n\t\t\t\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction handleTouchEnd( /*event*/ ) {\r\n\r\n\t\t\t\t\t// no-op\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\t\t\t\t// event handlers - FSM: listen for events and reset state\r\n\t\t\t\t//\r\n\r\n\t\t\t\tfunction onPointerDown( event ) {\r\n\r\n\t\t\t\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\t\t\t\tif ( pointers.length === 0 ) {\r\n\r\n\t\t\t\t\t\tscope.domElement.setPointerCapture( event.pointerId );\r\n\r\n\t\t\t\t\t\tscope.domElement.addEventListener( 'pointermove', onPointerMove );\r\n\t\t\t\t\t\tscope.domElement.addEventListener( 'pointerup', onPointerUp );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//\r\n\r\n\t\t\t\t\taddPointer( event );\r\n\r\n\t\t\t\t\tif ( event.pointerType === 'touch' ) {\r\n\r\n\t\t\t\t\t\tonTouchStart( event );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tonMouseDown( event );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction onPointerMove( event ) {\r\n\r\n\t\t\t\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\t\t\t\tif ( event.pointerType === 'touch' ) {\r\n\r\n\t\t\t\t\t\tonTouchMove( event );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tonMouseMove( event );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction onPointerUp( event ) {\r\n\r\n\t\t\t\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\t\t\t\tif ( event.pointerType === 'touch' ) {\r\n\r\n\t\t\t\t\t\tonTouchEnd();\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tonMouseUp( event );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tremovePointer( event );\r\n\r\n\t\t\t\t\t//\r\n\r\n\t\t\t\t\tif ( pointers.length === 0 ) {\r\n\r\n\t\t\t\t\t\tscope.domElement.releasePointerCapture( event.pointerId );\r\n\r\n\t\t\t\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\r\n\t\t\t\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction onPointerCancel( event ) {\r\n\r\n\t\t\t\t\tremovePointer( event );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction onMouseDown( event ) {\r\n\r\n\t\t\t\t\tlet mouseAction;\r\n\r\n\t\t\t\t\tswitch ( event.button ) {\r\n\r\n\t\t\t\t\t\tcase 0:\r\n\r\n\t\t\t\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 1:\r\n\r\n\t\t\t\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 2:\r\n\r\n\t\t\t\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\tmouseAction = - 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tswitch ( mouseAction ) {\r\n\r\n\t\t\t\t\t\tcase MOUSE.DOLLY:\r\n\r\n\t\t\t\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\t\t\t\thandleMouseDownDolly( event );\r\n\r\n\t\t\t\t\t\t\tstate = STATE.DOLLY;\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase MOUSE.ROTATE:\r\n\r\n\t\t\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\t\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\t\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase MOUSE.PAN:\r\n\r\n\t\t\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\t\t\thandleMouseDownRotate( event );\r\n\r\n\t\t\t\t\t\t\t\tstate = STATE.ROTATE;\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\t\t\thandleMouseDownPan( event );\r\n\r\n\t\t\t\t\t\t\t\tstate = STATE.PAN;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\t\t\t\tscope.dispatchEvent( _startEvent );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction onMouseMove( event ) {\r\n\r\n\t\t\t\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\t\t\t\tswitch ( state ) {\r\n\r\n\t\t\t\t\t\tcase STATE.ROTATE:\r\n\r\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\t\thandleMouseMoveRotate( event );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase STATE.DOLLY:\r\n\r\n\t\t\t\t\t\t\tif ( scope.enableZoom === false ) return;\r\n\r\n\t\t\t\t\t\t\thandleMouseMoveDolly( event );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase STATE.PAN:\r\n\r\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\t\thandleMouseMovePan( event );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction onMouseUp( event ) {\r\n\r\n\t\t\t\t\thandleMouseUp( event );\r\n\r\n\t\t\t\t\tscope.dispatchEvent( _endEvent );\r\n\r\n\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction onMouseWheel( event ) {\r\n\r\n\t\t\t\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\r\n\r\n\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\tscope.dispatchEvent( _startEvent );\r\n\r\n\t\t\t\t\thandleMouseWheel( event );\r\n\r\n\t\t\t\t\tscope.dispatchEvent( _endEvent );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction onKeyDown( event ) {\r\n\r\n\t\t\t\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\thandleKeyDown( event );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction onTouchStart( event ) {\r\n\r\n\t\t\t\t\ttrackPointer( event );\r\n\r\n\t\t\t\t\tswitch ( pointers.length ) {\r\n\r\n\t\t\t\t\t\tcase 1:\r\n\r\n\t\t\t\t\t\t\tswitch ( scope.touches.ONE ) {\r\n\r\n\t\t\t\t\t\t\t\tcase TOUCH.ROTATE:\r\n\r\n\t\t\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\t\t\t\thandleTouchStartRotate();\r\n\r\n\t\t\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\r\n\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase TOUCH.PAN:\r\n\r\n\t\t\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\t\t\t\thandleTouchStartPan();\r\n\r\n\t\t\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\r\n\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 2:\r\n\r\n\t\t\t\t\t\t\tswitch ( scope.touches.TWO ) {\r\n\r\n\t\t\t\t\t\t\t\tcase TOUCH.DOLLY_PAN:\r\n\r\n\t\t\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\t\t\t\thandleTouchStartDollyPan();\r\n\r\n\t\t\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\r\n\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\r\n\r\n\t\t\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\t\t\t\thandleTouchStartDollyRotate();\r\n\r\n\t\t\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\r\n\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( state !== STATE.NONE ) {\r\n\r\n\t\t\t\t\t\tscope.dispatchEvent( _startEvent );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction onTouchMove( event ) {\r\n\r\n\t\t\t\t\ttrackPointer( event );\r\n\r\n\t\t\t\t\tswitch ( state ) {\r\n\r\n\t\t\t\t\t\tcase STATE.TOUCH_ROTATE:\r\n\r\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\t\thandleTouchMoveRotate( event );\r\n\r\n\t\t\t\t\t\t\tscope.update();\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase STATE.TOUCH_PAN:\r\n\r\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\t\thandleTouchMovePan( event );\r\n\r\n\t\t\t\t\t\t\tscope.update();\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase STATE.TOUCH_DOLLY_PAN:\r\n\r\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\r\n\r\n\t\t\t\t\t\t\thandleTouchMoveDollyPan( event );\r\n\r\n\t\t\t\t\t\t\tscope.update();\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\r\n\r\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\r\n\r\n\t\t\t\t\t\t\thandleTouchMoveDollyRotate( event );\r\n\r\n\t\t\t\t\t\t\tscope.update();\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction onTouchEnd( event ) {\r\n\r\n\t\t\t\t\thandleTouchEnd( event );\r\n\r\n\t\t\t\t\tscope.dispatchEvent( _endEvent );\r\n\r\n\t\t\t\t\tstate = STATE.NONE;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction onContextMenu( event ) {\r\n\r\n\t\t\t\t\tif ( scope.enabled === false ) return;\r\n\r\n\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction addPointer( event ) {\r\n\r\n\t\t\t\t\tpointers.push( event );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction removePointer( event ) {\r\n\r\n\t\t\t\t\tdelete pointerPositions[event.pointerId];\r\n\r\n\t\t\t\t\tfor ( let i = 0; i < pointers.length; i++ ) {\r\n\r\n\t\t\t\t\t\tif ( pointers[i].pointerId == event.pointerId ) {\r\n\r\n\t\t\t\t\t\t\tpointers.splice( i, 1 );\r\n\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction trackPointer( event ) {\r\n\r\n\t\t\t\t\tlet position = pointerPositions[event.pointerId];\r\n\r\n\t\t\t\t\tif ( position === undefined ) {\r\n\r\n\t\t\t\t\t\tposition = new Vector2();\r\n\t\t\t\t\t\tpointerPositions[event.pointerId] = position;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tposition.set( event.pageX, event.pageY );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getSecondPointerPosition( event ) {\r\n\r\n\t\t\t\t\tconst pointer = ( event.pointerId === pointers[0].pointerId ) ? pointers[1] : pointers[0];\r\n\r\n\t\t\t\t\treturn pointerPositions[pointer.pointerId];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//\r\n\r\n\t\t\t\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\r\n\r\n\t\t\t\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\r\n\t\t\t\tscope.domElement.addEventListener( 'pointercancel', onPointerCancel );\r\n\t\t\t\tscope.domElement.addEventListener( 'wheel', onMouseWheel, { passive: false } );\r\n\r\n\t\t\t\t// force an update at start\r\n\r\n\t\t\t\tthis.update();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tthis.OrbitControls = OrbitControls;\r\n\r\n/*\r\n\t\t// This set of controls performs orbiting, dollying (zooming), and panning.\r\n\t\t// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n\t\t// This is very similar to OrbitControls, another set of touch behavior\r\n\t\t//\r\n\t\t//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\r\n\t\t//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\r\n\t\t//    Pan - left mouse, or arrow keys / touch: one-finger move\r\n\t\r\n\t\tclass MapControls extends OrbitControls {\r\n\t\r\n\t\t\tconstructor( object, domElement ) {\r\n\t\r\n\t\t\t\tsuper( object, domElement );\r\n\t\r\n\t\t\t\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\r\n\t\r\n\t\t\t\tthis.mouseButtons.LEFT = MOUSE.PAN;\r\n\t\t\t\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\r\n\t\r\n\t\t\t\tthis.touches.ONE = TOUCH.PAN;\r\n\t\t\t\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n*/\r\n\r\n\t}\r\n\t/**\r\n\t * get [THREE]{@link https://github.com/anhr/three.js}\r\n\t */\r\n\tget THREE() {\r\n\r\n\t\tif ( _THREE === undefined )\r\n\t\t\tconsole.error( 'three: invalid _THREE = ' + _THREE + '. Call three.THREE = THREE first.' );\r\n\t\treturn _THREE;\r\n\r\n\t}\r\n\t/**\r\n\t * set [dat]{@link https://github.com/dataarts/dat.gui}\r\n\t */\r\n\tset dat( dat ) {\r\n\r\n\t\tif ( _dat ) {\r\n\r\n\t\t\tif ( !Object.is( dat, _dat ) )\r\n\t\t\t\tconsole.error( 'three: duplicate dat. Please use one instance of the dat library.' )\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\t\t_dat = dat;\r\n\r\n\t}\r\n\t/**\r\n\t * get [dat]{@link https://github.com/dataarts/dat.gui}\r\n\t */\r\n\tget dat() {\r\n\r\n/*Неверно срабатывает когда dat не импортирован\r\n\t\tif ( _dat === undefined && !boSetDat )\r\n\t\t\tconsole.error( 'three: invalid _dat = ' + _dat + '. Call three.dat = dat first.' );\r\n*/\t\t\t\r\n\t\treturn _dat;\r\n\r\n\t}\r\n\r\n}\r\n\r\nvar three;\r\nwindow.__myThree__ = window.__myThree__ || {};\r\nif ( window.__myThree__.three ) {\r\n\r\n\t//сюда попадает если использовать './commonNodeJS/master/player/build/player.module.js'\r\n\tthree = window.__myThree__.three;\r\n\r\n} else {\r\n\r\n\tthree = new Three();\r\n\tthree.isThree = function(){ return _THREE; }\r\n\twindow.__myThree__.three = three;\r\n\r\n}\r\n\r\nexport default three;","/**\r\n * node.js version of my common functions.\r\n *\r\n * @author [Andrej Hristoliubov]{@link https://github.com/anhr}\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\nimport { getLanguageCode } from './lang.js';\r\nimport three from './three.js';\r\nconst common = {\r\n\r\n    getLanguageCode: getLanguageCode,\r\n    three: three,\r\n\r\n}\r\n\r\nexport default common;\r\n"],"names":["getLanguageCode","_getLocale","navigator","error","languages","undefined","length","language","browserLanguage","systemLanguage","userLanguage","toLowerCase","match","_THREE","_dat","_Three","Three","THREE","Object","is","console","Float32BufferAttribute","Line3","Plane","Triangle","Vector3","ConvexHull","Visible","Deleted","_v1","_line3","_plane","_closestPoint","_triangle","tolerance","faces","newFaces","assigned","VertexList","unassigned","vertices","points","Array","isArray","makeEmpty","i","l","push","VertexNode","compute","object","updateMatrixWorld","traverse","node","geometry","isGeometry","isBufferGeometry","attribute","attributes","position","count","point","fromBufferAttribute","applyMatrix4","matrixWorld","setFromPoints","face","distanceToPoint","ray","target","tNear","Infinity","tFar","vN","origin","vD","normal","dot","direction","t","Math","min","max","at","intersectRay","vertex","outside","append","insertBefore","next","remove","start","end","removeSubList","prev","absorbingFace","faceVertices","removeAllVerticesFromFace","appendChain","nextVertex","distance","addVertexToFace","isEmpty","first","maxDistance","maxFace","mark","minVertices","maxVertices","copy","j","getComponent","setComponent","Number","EPSILON","abs","x","y","z","extremes","computeExtremes","index","v0","v1","v2","v3","set","closestPointToPoint","distanceToSquared","setFromCoplanarPoints","Face","create","getEdge","setTwin","activeFaces","eyeVertex","eyeFace","eyePoint","crossEdge","horizon","deleteFaceVertices","edge","twinEdge","twin","oppositeFace","computeHorizon","horizonEdge","tail","head","firstSideEdge","previousSideEdge","sideEdge","addAdjoiningFace","clear","removeVertexFromFace","addNewFaces","resolveUnassignedPoints","computeInitialHull","nextVertexToAdd","addVertexToHull","reindexFaces","cleanup","midpoint","area","constant","a","b","c","getNormal","getMidpoint","getArea","e0","HalfEdge","e1","e2","distanceTo","Vector2","three","Box3","BufferAttribute","Uint16BufferAttribute","Uint32BufferAttribute","Sphere","Object3D","Matrix4","Matrix3","arrayMax","MathUtils","EventDispatcher","type","listener","_listeners","listeners","indexOf","listenerArray","splice","event","array","slice","call","_id","_m1","_obj","_offset","_box","_boxMorphTargets","_vector","BufferGeometry","defineProperty","value","uuid","generateUUID","name","morphAttributes","morphTargetsRelative","groups","boundingBox","boundingSphere","drawRange","userData","materialIndex","matrix","needsUpdate","normalMatrix","getNormalMatrix","applyNormalMatrix","tangent","transformDirection","computeBoundingBox","computeBoundingSphere","q","makeRotationFromQuaternion","angle","makeRotationX","makeRotationY","makeRotationZ","makeTranslation","makeScale","vector","lookAt","updateMatrix","getCenter","negate","translate","setAttribute","morphAttributesPosition","isGLBufferAttribute","setFromBufferAttribute","il","morphAttribute","addVectors","expandByPoint","isNaN","center","maxRadiusSq","jl","add","radius","sqrt","uv","indices","positions","normals","uvs","nVertices","Float32Array","tangents","tan1","tan2","vA","vB","vC","uvA","uvB","uvC","sdir","tdir","handleTriangle","fromArray","sub","r","isFinite","multiplyScalar","addScaledVector","group","tmp","tmp2","n","n2","handleVertex","v","normalize","crossVectors","test","w","positionAttribute","getAttribute","normalAttribute","setXYZ","pA","pB","pC","nA","nB","nC","cb","ab","getX","subVectors","cross","normalizeNormals","offset","warn","key","attribute1","attributeArray1","attribute2","attributeArray2","attributeOffset","itemSize","convertBufferAttribute","normalized","array2","constructor","index2","isInterleavedBufferAttribute","data","stride","geometry2","newAttribute","morphArray","addGroup","keys","parameters","prototype","toJSON","hasMorphAttributes","attributeArray","JSON","parse","stringify","toArray","source","setIndex","clone","assign","dispatchEvent","ConvexGeometry","convexHull","MOUSE","Quaternion","Spherical","TOUCH","_changeEvent","_startEvent","_endEvent","OrbitControls","domElement","document","style","touchAction","enabled","minDistance","minZoom","maxZoom","minPolarAngle","maxPolarAngle","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TWO","DOLLY_PAN","target0","position0","zoom0","zoom","_domElementKeyEvents","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","getDistance","listenToKeyEvents","addEventListener","onKeyDown","saveState","scope","reset","updateProjectionMatrix","update","STATE","NONE","quat","setFromUnitVectors","up","quatInverse","invert","lastPosition","lastQuaternion","twoPI","applyQuaternion","setFromVector3","state","getAutoRotationAngle","sphericalDelta","makeSafe","scale","panOffset","setFromSpherical","zoomChanged","EPS","quaternion","dispose","removeEventListener","onContextMenu","onPointerDown","onPointerCancel","onMouseWheel","onPointerMove","onPointerUp","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","pointers","pointerPositions","getZoomScale","pow","rotateLeft","rotateUp","panLeft","objectMatrix","setFromMatrixColumn","panUp","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","handleMouseWheel","handleKeyDown","code","preventDefault","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","handleTouchStartDollyPan","handleTouchStartDollyRotate","handleTouchMoveRotate","getSecondPointerPosition","handleTouchMovePan","handleTouchMoveDolly","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","setPointerCapture","pointerId","pointerType","releasePointerCapture","onMouseDown","mouseAction","button","ctrlKey","metaKey","shiftKey","onMouseMove","onMouseUp","onTouchStart","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","DOLLY_ROTATE","TOUCH_DOLLY_ROTATE","onTouchMove","onTouchEnd","addPointer","removePointer","trackPointer","pointer","passive","dat","window","__myThree__","isThree","common"],"mappings":"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"}