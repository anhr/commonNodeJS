{"version":3,"file":"menuPlay.js","sources":["../../dat.gui/CustomController/build/dat.gui.module.js","../../lang.js","../../controllerPlay/index.js","../../loadFileNodeJS/index.js","../../loadScriptNodeJS/index.js","../../loadScriptNodeJS/loadScript.js","../../DropdownMenu/index.js","../index.js"],"sourcesContent":["/**\r\n * dat-gui JavaScript Controller Library\r\n * http://code.google.com/p/dat-gui\r\n *\r\n * Copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\nfunction ___$insertStyle(css) {\n  if (!css) {\n    return;\n  }\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  var style = document.createElement('style');\n\n  style.setAttribute('type', 'text/css');\n  style.innerHTML = css;\n  document.head.appendChild(style);\n\n  return css;\n}\n\nfunction colorToString (color, forceCSSHex) {\n  var colorFormat = color.__state.conversionName.toString();\n  var r = Math.round(color.r);\n  var g = Math.round(color.g);\n  var b = Math.round(color.b);\n  var a = color.a;\n  var h = Math.round(color.h);\n  var s = color.s.toFixed(1);\n  var v = color.v.toFixed(1);\n  if (forceCSSHex || colorFormat === 'THREE_CHAR_HEX' || colorFormat === 'SIX_CHAR_HEX') {\n    var str = color.hex.toString(16);\n    while (str.length < 6) {\n      str = '0' + str;\n    }\n    return '#' + str;\n  } else if (colorFormat === 'CSS_RGB') {\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\n  } else if (colorFormat === 'CSS_RGBA') {\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n  } else if (colorFormat === 'HEX') {\n    return '0x' + color.hex.toString(16);\n  } else if (colorFormat === 'RGB_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ']';\n  } else if (colorFormat === 'RGBA_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ',' + a + ']';\n  } else if (colorFormat === 'RGB_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + '}';\n  } else if (colorFormat === 'RGBA_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + ',a:' + a + '}';\n  } else if (colorFormat === 'HSV_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + '}';\n  } else if (colorFormat === 'HSVA_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + ',a:' + a + '}';\n  }\n  return 'unknown format';\n}\n\nvar ARR_EACH = Array.prototype.forEach;\nvar ARR_SLICE = Array.prototype.slice;\nvar Common = {\n  BREAK: {},\n  extend: function extend(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function (obj) {\n      var keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function (key) {\n        if (!this.isUndefined(obj[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n    return target;\n  },\n  defaults: function defaults(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function (obj) {\n      var keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function (key) {\n        if (this.isUndefined(target[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n    return target;\n  },\n  compose: function compose() {\n    var toCall = ARR_SLICE.call(arguments);\n    return function () {\n      var args = ARR_SLICE.call(arguments);\n      for (var i = toCall.length - 1; i >= 0; i--) {\n        args = [toCall[i].apply(this, args)];\n      }\n      return args[0];\n    };\n  },\n  each: function each(obj, itr, scope) {\n    if (!obj) {\n      return;\n    }\n    if (ARR_EACH && obj.forEach && obj.forEach === ARR_EACH) {\n      obj.forEach(itr, scope);\n    } else if (obj.length === obj.length + 0) {\n      var key = void 0;\n      var l = void 0;\n      for (key = 0, l = obj.length; key < l; key++) {\n        if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) {\n          return;\n        }\n      }\n    } else {\n      for (var _key in obj) {\n        if (itr.call(scope, obj[_key], _key) === this.BREAK) {\n          return;\n        }\n      }\n    }\n  },\n  defer: function defer(fnc) {\n    setTimeout(fnc, 0);\n  },\n  debounce: function debounce(func, threshold, callImmediately) {\n    var timeout = void 0;\n    return function () {\n      var obj = this;\n      var args = arguments;\n      function delayed() {\n        timeout = null;\n        if (!callImmediately) func.apply(obj, args);\n      }\n      var callNow = callImmediately || !timeout;\n      clearTimeout(timeout);\n      timeout = setTimeout(delayed, threshold);\n      if (callNow) {\n        func.apply(obj, args);\n      }\n    };\n  },\n  toArray: function toArray(obj) {\n    if (obj.toArray) return obj.toArray();\n    return ARR_SLICE.call(obj);\n  },\n  isUndefined: function isUndefined(obj) {\n    return obj === undefined;\n  },\n  isNull: function isNull(obj) {\n    return obj === null;\n  },\n  isNaN: function (_isNaN) {\n    function isNaN(_x) {\n      return _isNaN.apply(this, arguments);\n    }\n    isNaN.toString = function () {\n      return _isNaN.toString();\n    };\n    return isNaN;\n  }(function (obj) {\n    return isNaN(obj);\n  }),\n  isArray: Array.isArray || function (obj) {\n    return obj.constructor === Array;\n  },\n  isObject: function isObject(obj) {\n    return obj === Object(obj);\n  },\n  isNumber: function isNumber(obj) {\n    return obj === obj + 0;\n  },\n  isString: function isString(obj) {\n    return obj === obj + '';\n  },\n  isBoolean: function isBoolean(obj) {\n    return obj === false || obj === true;\n  },\n  isFunction: function isFunction(obj) {\n    return Object.prototype.toString.call(obj) === '[object Function]';\n  }\n};\n\nvar INTERPRETATIONS = [\n{\n  litmus: Common.isString,\n  conversions: {\n    THREE_CHAR_HEX: {\n      read: function read(original) {\n        var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'HEX',\n          hex: parseInt('0x' + test[1].toString() + test[1].toString() + test[2].toString() + test[2].toString() + test[3].toString() + test[3].toString(), 0)\n        };\n      },\n      write: colorToString\n    },\n    SIX_CHAR_HEX: {\n      read: function read(original) {\n        var test = original.match(/^#([A-F0-9]{6})$/i);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'HEX',\n          hex: parseInt('0x' + test[1].toString(), 0)\n        };\n      },\n      write: colorToString\n    },\n    CSS_RGB: {\n      read: function read(original) {\n        var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'RGB',\n          r: parseFloat(test[1]),\n          g: parseFloat(test[2]),\n          b: parseFloat(test[3])\n        };\n      },\n      write: colorToString\n    },\n    CSS_RGBA: {\n      read: function read(original) {\n        var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n        if (test === null) {\n          return false;\n        }\n        return {\n          space: 'RGB',\n          r: parseFloat(test[1]),\n          g: parseFloat(test[2]),\n          b: parseFloat(test[3]),\n          a: parseFloat(test[4])\n        };\n      },\n      write: colorToString\n    }\n  }\n},\n{\n  litmus: Common.isNumber,\n  conversions: {\n    HEX: {\n      read: function read(original) {\n        return {\n          space: 'HEX',\n          hex: original,\n          conversionName: 'HEX'\n        };\n      },\n      write: function write(color) {\n        return color.hex;\n      }\n    }\n  }\n},\n{\n  litmus: Common.isArray,\n  conversions: {\n    RGB_ARRAY: {\n      read: function read(original) {\n        if (original.length !== 3) {\n          return false;\n        }\n        return {\n          space: 'RGB',\n          r: original[0],\n          g: original[1],\n          b: original[2]\n        };\n      },\n      write: function write(color) {\n        return [color.r, color.g, color.b];\n      }\n    },\n    RGBA_ARRAY: {\n      read: function read(original) {\n        if (original.length !== 4) return false;\n        return {\n          space: 'RGB',\n          r: original[0],\n          g: original[1],\n          b: original[2],\n          a: original[3]\n        };\n      },\n      write: function write(color) {\n        return [color.r, color.g, color.b, color.a];\n      }\n    }\n  }\n},\n{\n  litmus: Common.isObject,\n  conversions: {\n    RGBA_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.r) && Common.isNumber(original.g) && Common.isNumber(original.b) && Common.isNumber(original.a)) {\n          return {\n            space: 'RGB',\n            r: original.r,\n            g: original.g,\n            b: original.b,\n            a: original.a\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          r: color.r,\n          g: color.g,\n          b: color.b,\n          a: color.a\n        };\n      }\n    },\n    RGB_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.r) && Common.isNumber(original.g) && Common.isNumber(original.b)) {\n          return {\n            space: 'RGB',\n            r: original.r,\n            g: original.g,\n            b: original.b\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          r: color.r,\n          g: color.g,\n          b: color.b\n        };\n      }\n    },\n    HSVA_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.h) && Common.isNumber(original.s) && Common.isNumber(original.v) && Common.isNumber(original.a)) {\n          return {\n            space: 'HSV',\n            h: original.h,\n            s: original.s,\n            v: original.v,\n            a: original.a\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          h: color.h,\n          s: color.s,\n          v: color.v,\n          a: color.a\n        };\n      }\n    },\n    HSV_OBJ: {\n      read: function read(original) {\n        if (Common.isNumber(original.h) && Common.isNumber(original.s) && Common.isNumber(original.v)) {\n          return {\n            space: 'HSV',\n            h: original.h,\n            s: original.s,\n            v: original.v\n          };\n        }\n        return false;\n      },\n      write: function write(color) {\n        return {\n          h: color.h,\n          s: color.s,\n          v: color.v\n        };\n      }\n    }\n  }\n}];\nvar result = void 0;\nvar toReturn = void 0;\nvar interpret = function interpret() {\n  toReturn = false;\n  var original = arguments.length > 1 ? Common.toArray(arguments) : arguments[0];\n  Common.each(INTERPRETATIONS, function (family) {\n    if (family.litmus(original)) {\n      Common.each(family.conversions, function (conversion, conversionName) {\n        result = conversion.read(original);\n        if (toReturn === false && result !== false) {\n          toReturn = result;\n          result.conversionName = conversionName;\n          result.conversion = conversion;\n          return Common.BREAK;\n        }\n      });\n      return Common.BREAK;\n    }\n  });\n  return toReturn;\n};\n\nvar tmpComponent = void 0;\nvar ColorMath = {\n  hsv_to_rgb: function hsv_to_rgb(h, s, v) {\n    var hi = Math.floor(h / 60) % 6;\n    var f = h / 60 - Math.floor(h / 60);\n    var p = v * (1.0 - s);\n    var q = v * (1.0 - f * s);\n    var t = v * (1.0 - (1.0 - f) * s);\n    var c = [[v, t, p], [q, v, p], [p, v, t], [p, q, v], [t, p, v], [v, p, q]][hi];\n    return {\n      r: c[0] * 255,\n      g: c[1] * 255,\n      b: c[2] * 255\n    };\n  },\n  rgb_to_hsv: function rgb_to_hsv(r, g, b) {\n    var min = Math.min(r, g, b);\n    var max = Math.max(r, g, b);\n    var delta = max - min;\n    var h = void 0;\n    var s = void 0;\n    if (max !== 0) {\n      s = delta / max;\n    } else {\n      return {\n        h: NaN,\n        s: 0,\n        v: 0\n      };\n    }\n    if (r === max) {\n      h = (g - b) / delta;\n    } else if (g === max) {\n      h = 2 + (b - r) / delta;\n    } else {\n      h = 4 + (r - g) / delta;\n    }\n    h /= 6;\n    if (h < 0) {\n      h += 1;\n    }\n    return {\n      h: h * 360,\n      s: s,\n      v: max / 255\n    };\n  },\n  rgb_to_hex: function rgb_to_hex(r, g, b) {\n    var hex = this.hex_with_component(0, 2, r);\n    hex = this.hex_with_component(hex, 1, g);\n    hex = this.hex_with_component(hex, 0, b);\n    return hex;\n  },\n  component_from_hex: function component_from_hex(hex, componentIndex) {\n    return hex >> componentIndex * 8 & 0xFF;\n  },\n  hex_with_component: function hex_with_component(hex, componentIndex, value) {\n    return value << (tmpComponent = componentIndex * 8) | hex & ~(0xFF << tmpComponent);\n  }\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar Color = function () {\n  function Color() {\n    classCallCheck(this, Color);\n    this.__state = interpret.apply(this, arguments);\n    if (this.__state === false) {\n      throw new Error('Failed to interpret color arguments');\n    }\n    this.__state.a = this.__state.a || 1;\n  }\n  createClass(Color, [{\n    key: 'toString',\n    value: function toString() {\n      return colorToString(this);\n    }\n  }, {\n    key: 'toHexString',\n    value: function toHexString() {\n      return colorToString(this, true);\n    }\n  }, {\n    key: 'toOriginal',\n    value: function toOriginal() {\n      return this.__state.conversion.write(this);\n    }\n  }]);\n  return Color;\n}();\nfunction defineRGBComponent(target, component, componentHexIndex) {\n  Object.defineProperty(target, component, {\n    get: function get$$1() {\n      if (this.__state.space === 'RGB') {\n        return this.__state[component];\n      }\n      Color.recalculateRGB(this, component, componentHexIndex);\n      return this.__state[component];\n    },\n    set: function set$$1(v) {\n      if (this.__state.space !== 'RGB') {\n        Color.recalculateRGB(this, component, componentHexIndex);\n        this.__state.space = 'RGB';\n      }\n      this.__state[component] = v;\n    }\n  });\n}\nfunction defineHSVComponent(target, component) {\n  Object.defineProperty(target, component, {\n    get: function get$$1() {\n      if (this.__state.space === 'HSV') {\n        return this.__state[component];\n      }\n      Color.recalculateHSV(this);\n      return this.__state[component];\n    },\n    set: function set$$1(v) {\n      if (this.__state.space !== 'HSV') {\n        Color.recalculateHSV(this);\n        this.__state.space = 'HSV';\n      }\n      this.__state[component] = v;\n    }\n  });\n}\nColor.recalculateRGB = function (color, component, componentHexIndex) {\n  if (color.__state.space === 'HEX') {\n    color.__state[component] = ColorMath.component_from_hex(color.__state.hex, componentHexIndex);\n  } else if (color.__state.space === 'HSV') {\n    Common.extend(color.__state, ColorMath.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n  } else {\n    throw new Error('Corrupted color state');\n  }\n};\nColor.recalculateHSV = function (color) {\n  var result = ColorMath.rgb_to_hsv(color.r, color.g, color.b);\n  Common.extend(color.__state, {\n    s: result.s,\n    v: result.v\n  });\n  if (!Common.isNaN(result.h)) {\n    color.__state.h = result.h;\n  } else if (Common.isUndefined(color.__state.h)) {\n    color.__state.h = 0;\n  }\n};\nColor.COMPONENTS = ['r', 'g', 'b', 'h', 's', 'v', 'hex', 'a'];\ndefineRGBComponent(Color.prototype, 'r', 2);\ndefineRGBComponent(Color.prototype, 'g', 1);\ndefineRGBComponent(Color.prototype, 'b', 0);\ndefineHSVComponent(Color.prototype, 'h');\ndefineHSVComponent(Color.prototype, 's');\ndefineHSVComponent(Color.prototype, 'v');\nObject.defineProperty(Color.prototype, 'a', {\n  get: function get$$1() {\n    return this.__state.a;\n  },\n  set: function set$$1(v) {\n    this.__state.a = v;\n  }\n});\nObject.defineProperty(Color.prototype, 'hex', {\n  get: function get$$1() {\n    if (!this.__state.space !== 'HEX') {\n      this.__state.hex = ColorMath.rgb_to_hex(this.r, this.g, this.b);\n    }\n    return this.__state.hex;\n  },\n  set: function set$$1(v) {\n    this.__state.space = 'HEX';\n    this.__state.hex = v;\n  }\n});\n\nvar Controller = function () {\n  function Controller(object, property) {\n    classCallCheck(this, Controller);\n    this.initialValue = object[property];\n    this.domElement = document.createElement('div');\n    this.object = object;\n    this.property = property;\n    this.__onChange = undefined;\n    this.__onFinishChange = undefined;\n  }\n  createClass(Controller, [{\n    key: 'onChange',\n    value: function onChange(fnc) {\n      this.__onChange = fnc;\n      return this;\n    }\n  }, {\n    key: 'onFinishChange',\n    value: function onFinishChange(fnc) {\n      this.__onFinishChange = fnc;\n      return this;\n    }\n  }, {\n    key: 'setValue',\n    value: function setValue(newValue) {\n      this.object[this.property] = newValue;\n      if (this.__onChange) {\n        this.__onChange.call(this, newValue);\n      }\n      this.updateDisplay();\n      return this;\n    }\n  }, {\n    key: 'getValue',\n    value: function getValue() {\n      return this.object[this.property];\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      return this;\n    }\n  }, {\n    key: 'isModified',\n    value: function isModified() {\n      return this.initialValue !== this.getValue();\n    }\n  }]);\n  return Controller;\n}();\n\nvar EVENT_MAP = {\n  HTMLEvents: ['change'],\n  MouseEvents: ['click', 'mousemove', 'mousedown', 'mouseup', 'mouseover'],\n  KeyboardEvents: ['keydown']\n};\nvar EVENT_MAP_INV = {};\nCommon.each(EVENT_MAP, function (v, k) {\n  Common.each(v, function (e) {\n    EVENT_MAP_INV[e] = k;\n  });\n});\nvar CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\nfunction cssValueToPixels(val) {\n  if (val === '0' || Common.isUndefined(val)) {\n    return 0;\n  }\n  var match = val.match(CSS_VALUE_PIXELS);\n  if (!Common.isNull(match)) {\n    return parseFloat(match[1]);\n  }\n  return 0;\n}\nvar dom = {\n  makeSelectable: function makeSelectable(elem, selectable) {\n    if (elem === undefined || elem.style === undefined) return;\n    elem.onselectstart = selectable ? function () {\n      return false;\n    } : function () {};\n    elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n    elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n    elem.unselectable = selectable ? 'on' : 'off';\n  },\n  makeFullscreen: function makeFullscreen(elem, hor, vert) {\n    var vertical = vert;\n    var horizontal = hor;\n    if (Common.isUndefined(horizontal)) {\n      horizontal = true;\n    }\n    if (Common.isUndefined(vertical)) {\n      vertical = true;\n    }\n    elem.style.position = 'absolute';\n    if (horizontal) {\n      elem.style.left = 0;\n      elem.style.right = 0;\n    }\n    if (vertical) {\n      elem.style.top = 0;\n      elem.style.bottom = 0;\n    }\n  },\n  fakeEvent: function fakeEvent(elem, eventType, pars, aux) {\n    var params = pars || {};\n    var className = EVENT_MAP_INV[eventType];\n    if (!className) {\n      throw new Error('Event type ' + eventType + ' not supported.');\n    }\n    var evt = document.createEvent(className);\n    switch (className) {\n      case 'MouseEvents':\n        {\n          var clientX = params.x || params.clientX || 0;\n          var clientY = params.y || params.clientY || 0;\n          evt.initMouseEvent(eventType, params.bubbles || false, params.cancelable || true, window, params.clickCount || 1, 0,\n          0,\n          clientX,\n          clientY,\n          false, false, false, false, 0, null);\n          break;\n        }\n      case 'KeyboardEvents':\n        {\n          var init = evt.initKeyboardEvent || evt.initKeyEvent;\n          Common.defaults(params, {\n            cancelable: true,\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            metaKey: false,\n            keyCode: undefined,\n            charCode: undefined\n          });\n          init(eventType, params.bubbles || false, params.cancelable, window, params.ctrlKey, params.altKey, params.shiftKey, params.metaKey, params.keyCode, params.charCode);\n          break;\n        }\n      default:\n        {\n          evt.initEvent(eventType, params.bubbles || false, params.cancelable || true);\n          break;\n        }\n    }\n    Common.defaults(evt, aux);\n    elem.dispatchEvent(evt);\n  },\n  bind: function bind(elem, event, func, newBool) {\n    var bool = newBool || false;\n    if (elem.addEventListener) {\n      elem.addEventListener(event, func, bool);\n    } else if (elem.attachEvent) {\n      elem.attachEvent('on' + event, func);\n    }\n    return dom;\n  },\n  unbind: function unbind(elem, event, func, newBool) {\n    var bool = newBool || false;\n    if (elem.removeEventListener) {\n      elem.removeEventListener(event, func, bool);\n    } else if (elem.detachEvent) {\n      elem.detachEvent('on' + event, func);\n    }\n    return dom;\n  },\n  addClass: function addClass(elem, className) {\n    if (elem.className === undefined) {\n      elem.className = className;\n    } else if (elem.className !== className) {\n      var classes = elem.className.split(/ +/);\n      if (classes.indexOf(className) === -1) {\n        classes.push(className);\n        elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n      }\n    }\n    return dom;\n  },\n  removeClass: function removeClass(elem, className) {\n    if (className) {\n      if (elem.className === className) {\n        elem.removeAttribute('class');\n      } else {\n        var classes = elem.className.split(/ +/);\n        var index = classes.indexOf(className);\n        if (index !== -1) {\n          classes.splice(index, 1);\n          elem.className = classes.join(' ');\n        }\n      }\n    } else {\n      elem.className = undefined;\n    }\n    return dom;\n  },\n  hasClass: function hasClass(elem, className) {\n    return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n  },\n  getWidth: function getWidth(elem) {\n    var style = getComputedStyle(elem);\n    return cssValueToPixels(style['border-left-width']) + cssValueToPixels(style['border-right-width']) + cssValueToPixels(style['padding-left']) + cssValueToPixels(style['padding-right']) + cssValueToPixels(style.width);\n  },\n  getHeight: function getHeight(elem) {\n    var style = getComputedStyle(elem);\n    return cssValueToPixels(style['border-top-width']) + cssValueToPixels(style['border-bottom-width']) + cssValueToPixels(style['padding-top']) + cssValueToPixels(style['padding-bottom']) + cssValueToPixels(style.height);\n  },\n  getOffset: function getOffset(el) {\n    var elem = el;\n    var offset = { left: 0, top: 0 };\n    if (elem.offsetParent) {\n      do {\n        offset.left += elem.offsetLeft;\n        offset.top += elem.offsetTop;\n        elem = elem.offsetParent;\n      } while (elem);\n    }\n    return offset;\n  },\n  isActive: function isActive(elem) {\n    return elem === document.activeElement && (elem.type || elem.href);\n  }\n};\n\nvar BooleanController = function (_Controller) {\n  inherits(BooleanController, _Controller);\n  function BooleanController(object, property) {\n    classCallCheck(this, BooleanController);\n    var _this2 = possibleConstructorReturn(this, (BooleanController.__proto__ || Object.getPrototypeOf(BooleanController)).call(this, object, property));\n    var _this = _this2;\n    _this2.__prev = _this2.getValue();\n    _this2.__checkbox = document.createElement('input');\n    _this2.__checkbox.setAttribute('type', 'checkbox');\n    function onChange() {\n      _this.setValue(!_this.__prev);\n    }\n    dom.bind(_this2.__checkbox, 'change', onChange, false);\n    _this2.domElement.appendChild(_this2.__checkbox);\n    _this2.updateDisplay();\n    return _this2;\n  }\n  createClass(BooleanController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var toReturn = get(BooleanController.prototype.__proto__ || Object.getPrototypeOf(BooleanController.prototype), 'setValue', this).call(this, v);\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n      this.__prev = this.getValue();\n      return toReturn;\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (this.getValue() === true) {\n        this.__checkbox.setAttribute('checked', 'checked');\n        this.__checkbox.checked = true;\n        this.__prev = true;\n      } else {\n        this.__checkbox.checked = false;\n        this.__prev = false;\n      }\n      return get(BooleanController.prototype.__proto__ || Object.getPrototypeOf(BooleanController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return BooleanController;\n}(Controller);\n\nvar OptionController = function (_Controller) {\n  inherits(OptionController, _Controller);\n  function OptionController(object, property, opts) {\n    classCallCheck(this, OptionController);\n    var _this2 = possibleConstructorReturn(this, (OptionController.__proto__ || Object.getPrototypeOf(OptionController)).call(this, object, property));\n    var options = opts;\n    var _this = _this2;\n    _this2.__select = document.createElement('select');\n    if (Common.isArray(options)) {\n      var map = {};\n      Common.each(options, function (element) {\n        map[element] = element;\n      });\n      options = map;\n    }\n    Common.each(options, function (value, key) {\n      var opt = document.createElement('option');\n      opt.innerHTML = key;\n      opt.setAttribute('value', value);\n      _this.__select.appendChild(opt);\n    });\n    _this2.updateDisplay();\n    dom.bind(_this2.__select, 'change', function () {\n      var desiredValue = this.options[this.selectedIndex].value;\n      _this.setValue(desiredValue);\n    });\n    _this2.domElement.appendChild(_this2.__select);\n    return _this2;\n  }\n  createClass(OptionController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var toReturn = get(OptionController.prototype.__proto__ || Object.getPrototypeOf(OptionController.prototype), 'setValue', this).call(this, v);\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n      return toReturn;\n    }\n  }, {\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (dom.isActive(this.__select)) return this;\n      this.__select.value = this.getValue();\n      return get(OptionController.prototype.__proto__ || Object.getPrototypeOf(OptionController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return OptionController;\n}(Controller);\n\nvar StringController = function (_Controller) {\n  inherits(StringController, _Controller);\n  function StringController(object, property) {\n    classCallCheck(this, StringController);\n    var _this2 = possibleConstructorReturn(this, (StringController.__proto__ || Object.getPrototypeOf(StringController)).call(this, object, property));\n    var _this = _this2;\n    function onChange() {\n      _this.setValue(_this.__input.value);\n    }\n    function onBlur() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    _this2.__input = document.createElement('input');\n    _this2.__input.setAttribute('type', 'text');\n    dom.bind(_this2.__input, 'keyup', onChange);\n    dom.bind(_this2.__input, 'change', onChange);\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        this.blur();\n      }\n    });\n    _this2.updateDisplay();\n    _this2.domElement.appendChild(_this2.__input);\n    return _this2;\n  }\n  createClass(StringController, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      if (!dom.isActive(this.__input)) {\n        this.__input.value = this.getValue();\n      }\n      return get(StringController.prototype.__proto__ || Object.getPrototypeOf(StringController.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return StringController;\n}(Controller);\n\nfunction numDecimals(x) {\n  var _x = x.toString();\n  if (_x.indexOf('.') > -1) {\n    return _x.length - _x.indexOf('.') - 1;\n  }\n  return 0;\n}\nvar NumberController = function (_Controller) {\n  inherits(NumberController, _Controller);\n  function NumberController(object, property, params) {\n    classCallCheck(this, NumberController);\n    var _this = possibleConstructorReturn(this, (NumberController.__proto__ || Object.getPrototypeOf(NumberController)).call(this, object, property));\n    var _params = params || {};\n    _this.__min = _params.min;\n    _this.__max = _params.max;\n    _this.__step = _params.step;\n    if (Common.isUndefined(_this.__step)) {\n      if (_this.initialValue === 0) {\n        _this.__impliedStep = 1;\n      } else {\n        _this.__impliedStep = Math.pow(10, Math.floor(Math.log(Math.abs(_this.initialValue)) / Math.LN10)) / 10;\n      }\n    } else {\n      _this.__impliedStep = _this.__step;\n    }\n    _this.__precision = numDecimals(_this.__impliedStep);\n    return _this;\n  }\n  createClass(NumberController, [{\n    key: 'setValue',\n    value: function setValue(v) {\n      var _v = v;\n      if (this.__min !== undefined && _v < this.__min) {\n        _v = this.__min;\n      } else if (this.__max !== undefined && _v > this.__max) {\n        _v = this.__max;\n      }\n      if (this.__step !== undefined && _v % this.__step !== 0) {\n        _v = Math.round(_v / this.__step) * this.__step;\n      }\n      return get(NumberController.prototype.__proto__ || Object.getPrototypeOf(NumberController.prototype), 'setValue', this).call(this, _v);\n    }\n  }, {\n    key: 'min',\n    value: function min(minValue) {\n      this.__min = minValue;\n      return this;\n    }\n  }, {\n    key: 'max',\n    value: function max(maxValue) {\n      this.__max = maxValue;\n      return this;\n    }\n  }, {\n    key: 'step',\n    value: function step(stepValue) {\n      this.__step = stepValue;\n      this.__impliedStep = stepValue;\n      this.__precision = numDecimals(stepValue);\n      return this;\n    }\n  }]);\n  return NumberController;\n}(Controller);\n\nfunction roundToDecimal(value, decimals) {\n  var tenTo = Math.pow(10, decimals);\n  return Math.round(value * tenTo) / tenTo;\n}\nvar NumberControllerBox = function (_NumberController) {\n  inherits(NumberControllerBox, _NumberController);\n  function NumberControllerBox(object, property, params) {\n    classCallCheck(this, NumberControllerBox);\n    var _this2 = possibleConstructorReturn(this, (NumberControllerBox.__proto__ || Object.getPrototypeOf(NumberControllerBox)).call(this, object, property, params));\n    _this2.__truncationSuspended = false;\n    var _this = _this2;\n    var prevY = void 0;\n    function onChange() {\n      var attempted = parseFloat(_this.__input.value);\n      if (!Common.isNaN(attempted)) {\n        _this.setValue(attempted);\n      }\n    }\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    function onBlur() {\n      onFinish();\n    }\n    function onMouseDrag(e) {\n      var diff = prevY - e.clientY;\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n      prevY = e.clientY;\n    }\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      onFinish();\n    }\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      prevY = e.clientY;\n    }\n    _this2.__input = document.createElement('input');\n    _this2.__input.setAttribute('type', 'text');\n    dom.bind(_this2.__input, 'change', onChange);\n    dom.bind(_this2.__input, 'blur', onBlur);\n    dom.bind(_this2.__input, 'mousedown', onMouseDown);\n    dom.bind(_this2.__input, 'keydown', function (e) {\n      if (e.keyCode === 13) {\n        _this.__truncationSuspended = true;\n        this.blur();\n        _this.__truncationSuspended = false;\n        onFinish();\n      }\n    });\n    _this2.updateDisplay();\n    _this2.domElement.appendChild(_this2.__input);\n    return _this2;\n  }\n  createClass(NumberControllerBox, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\n      return get(NumberControllerBox.prototype.__proto__ || Object.getPrototypeOf(NumberControllerBox.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return NumberControllerBox;\n}(NumberController);\n\nfunction map(v, i1, i2, o1, o2) {\n  return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n}\nvar NumberControllerSlider = function (_NumberController) {\n  inherits(NumberControllerSlider, _NumberController);\n  function NumberControllerSlider(object, property, min, max, step) {\n    classCallCheck(this, NumberControllerSlider);\n    var _this2 = possibleConstructorReturn(this, (NumberControllerSlider.__proto__ || Object.getPrototypeOf(NumberControllerSlider)).call(this, object, property, { min: min, max: max, step: step }));\n    var _this = _this2;\n    _this2.__background = document.createElement('div');\n    _this2.__foreground = document.createElement('div');\n    dom.bind(_this2.__background, 'mousedown', onMouseDown);\n    dom.bind(_this2.__background, 'touchstart', onTouchStart);\n    dom.addClass(_this2.__background, 'slider');\n    dom.addClass(_this2.__foreground, 'slider-fg');\n    function onMouseDown(e) {\n      document.activeElement.blur();\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      onMouseDrag(e);\n    }\n    function onMouseDrag(e) {\n      e.preventDefault();\n      var bgRect = _this.__background.getBoundingClientRect();\n      _this.setValue(map(e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\n      return false;\n    }\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    function onTouchStart(e) {\n      if (e.touches.length !== 1) {\n        return;\n      }\n      dom.bind(window, 'touchmove', onTouchMove);\n      dom.bind(window, 'touchend', onTouchEnd);\n      onTouchMove(e);\n    }\n    function onTouchMove(e) {\n      var clientX = e.touches[0].clientX;\n      var bgRect = _this.__background.getBoundingClientRect();\n      _this.setValue(map(clientX, bgRect.left, bgRect.right, _this.__min, _this.__max));\n    }\n    function onTouchEnd() {\n      dom.unbind(window, 'touchmove', onTouchMove);\n      dom.unbind(window, 'touchend', onTouchEnd);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n    _this2.updateDisplay();\n    _this2.__background.appendChild(_this2.__foreground);\n    _this2.domElement.appendChild(_this2.__background);\n    return _this2;\n  }\n  createClass(NumberControllerSlider, [{\n    key: 'updateDisplay',\n    value: function updateDisplay() {\n      var pct = (this.getValue() - this.__min) / (this.__max - this.__min);\n      this.__foreground.style.width = pct * 100 + '%';\n      return get(NumberControllerSlider.prototype.__proto__ || Object.getPrototypeOf(NumberControllerSlider.prototype), 'updateDisplay', this).call(this);\n    }\n  }]);\n  return NumberControllerSlider;\n}(NumberController);\n\nvar FunctionController = function (_Controller) {\n  inherits(FunctionController, _Controller);\n  function FunctionController(object, property, text) {\n    classCallCheck(this, FunctionController);\n    var _this2 = possibleConstructorReturn(this, (FunctionController.__proto__ || Object.getPrototypeOf(FunctionController)).call(this, object, property));\n    var _this = _this2;\n    _this2.__button = document.createElement('div');\n    _this2.__button.innerHTML = text === undefined ? 'Fire' : text;\n    dom.bind(_this2.__button, 'click', function (e) {\n      e.preventDefault();\n      _this.fire();\n      return false;\n    });\n    dom.addClass(_this2.__button, 'button');\n    _this2.domElement.appendChild(_this2.__button);\n    return _this2;\n  }\n  createClass(FunctionController, [{\n    key: 'fire',\n    value: function fire() {\n      if (this.__onChange) {\n        this.__onChange.call(this);\n      }\n      this.getValue().call(this.object);\n      if (this.__onFinishChange) {\n        this.__onFinishChange.call(this, this.getValue());\n      }\n    }\n  }]);\n  return FunctionController;\n}(Controller);\n\nvar ColorController = function (_Controller) {\n    inherits(ColorController, _Controller);\n    function ColorController(object, property) {\n        classCallCheck(this, ColorController);\n        var _this2 = possibleConstructorReturn(this, (ColorController.__proto__ || Object.getPrototypeOf(ColorController)).call(this, object, property));\n        _this2.__color = new Color(_this2.getValue());\n        _this2.__temp = new Color(0);\n        var _this = _this2;\n        _this2.domElement = document.createElement('div');\n        dom.makeSelectable(_this2.domElement, false);\n        _this2.__selector = document.createElement('div');\n        _this2.__selector.className = 'selector';\n        _this2.__saturation_field = document.createElement('div');\n        _this2.__saturation_field.className = 'saturation-field';\n        _this2.__field_knob = document.createElement('div');\n        _this2.__field_knob.className = 'field-knob';\n        _this2.__field_knob_border = '2px solid ';\n        _this2.__hue_knob = document.createElement('div');\n        _this2.__hue_knob.className = 'hue-knob';\n        _this2.__hue_field = document.createElement('div');\n        _this2.__hue_field.className = 'hue-field';\n        _this2.__input = document.createElement('input');\n        _this2.__input.type = 'text';\n        _this2.__input_textShadow = '0 1px 1px ';\n        dom.bind(_this2.__input, 'keydown', function (e) {\n            if (e.keyCode === 13) {\n                onBlur.call(this);\n            }\n        });\n        dom.bind(_this2.__input, 'blur', onBlur);\n        dom.bind(_this2.__selector, 'mousedown', function ()        {\n            dom.addClass(this, 'drag').bind(window, 'mouseup', function ()        {\n                dom.removeClass(_this.__selector, 'drag');\n            });\n        });\n        dom.bind(_this2.__selector, 'touchstart', function ()        {\n            dom.addClass(this, 'drag').bind(window, 'touchend', function ()        {\n                dom.removeClass(_this.__selector, 'drag');\n            });\n        });\n        var valueField = document.createElement('div');\n        Common.extend(_this2.__selector.style, {\n            width: '122px',\n            height: '102px',\n            padding: '3px',\n            backgroundColor: '#222',\n            boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n        });\n        Common.extend(_this2.__field_knob.style, {\n            position: 'absolute',\n            width: '12px',\n            height: '12px',\n            border: _this2.__field_knob_border + (_this2.__color.v < 0.5 ? '#fff' : '#000'),\n            boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n            borderRadius: '12px',\n            zIndex: 1\n        });\n        Common.extend(_this2.__hue_knob.style, {\n            position: 'absolute',\n            width: '15px',\n            height: '2px',\n            borderRight: '4px solid #fff',\n            zIndex: 1\n        });\n        Common.extend(_this2.__saturation_field.style, {\n            width: '100px',\n            height: '100px',\n            border: '1px solid #555',\n            marginRight: '3px',\n            display: 'inline-block',\n            cursor: 'pointer'\n        });\n        Common.extend(valueField.style, {\n            width: '100%',\n            height: '100%',\n            background: 'none'\n        });\n        linearGradient(valueField, 'top', 'rgba(0,0,0,0)', '#000');\n        Common.extend(_this2.__hue_field.style, {\n            width: '15px',\n            height: '100px',\n            border: '1px solid #555',\n            cursor: 'ns-resize',\n            position: 'absolute',\n            top: '3px',\n            right: '3px'\n        });\n        hueGradient(_this2.__hue_field);\n        Common.extend(_this2.__input.style, {\n            outline: 'none',\n            textAlign: 'center',\n            color: '#fff',\n            border: 0,\n            fontWeight: 'bold',\n            textShadow: _this2.__input_textShadow + 'rgba(0,0,0,0.7)'\n        });\n        dom.bind(_this2.__saturation_field, 'mousedown', fieldDown);\n        dom.bind(_this2.__saturation_field, 'touchstart', fieldDown);\n        dom.bind(_this2.__field_knob, 'mousedown', fieldDown);\n        dom.bind(_this2.__field_knob, 'touchstart', fieldDown);\n        dom.bind(_this2.__hue_field, 'mousedown', fieldDownH);\n        dom.bind(_this2.__hue_field, 'touchstart', fieldDownH);\n        function fieldDown(e) {\n            setSV(e);\n            dom.bind(window, 'mousemove', setSV);\n            dom.bind(window, 'touchmove', setSV);\n            dom.bind(window, 'mouseup', fieldUpSV);\n            dom.bind(window, 'touchend', fieldUpSV);\n        }\n        function fieldDownH(e) {\n            setH(e);\n            dom.bind(window, 'mousemove', setH);\n            dom.bind(window, 'touchmove', setH);\n            dom.bind(window, 'mouseup', fieldUpH);\n            dom.bind(window, 'touchend', fieldUpH);\n        }\n        function fieldUpSV() {\n            dom.unbind(window, 'mousemove', setSV);\n            dom.unbind(window, 'touchmove', setSV);\n            dom.unbind(window, 'mouseup', fieldUpSV);\n            dom.unbind(window, 'touchend', fieldUpSV);\n            onFinish();\n        }\n        function fieldUpH() {\n            dom.unbind(window, 'mousemove', setH);\n            dom.unbind(window, 'touchmove', setH);\n            dom.unbind(window, 'mouseup', fieldUpH);\n            dom.unbind(window, 'touchend', fieldUpH);\n            onFinish();\n        }\n        function onBlur() {\n            var i = interpret(this.value);\n            if (i !== false) {\n                _this.__color.__state = i;\n                _this.setValue(_this.__color.toOriginal());\n            } else {\n                this.value = _this.__color.toString();\n            }\n        }\n        function onFinish() {\n            if (_this.__onFinishChange) {\n                _this.__onFinishChange.call(_this, _this.__color.toOriginal());\n            }\n        }\n        _this2.__saturation_field.appendChild(valueField);\n        _this2.__selector.appendChild(_this2.__field_knob);\n        _this2.__selector.appendChild(_this2.__saturation_field);\n        _this2.__selector.appendChild(_this2.__hue_field);\n        _this2.__hue_field.appendChild(_this2.__hue_knob);\n        _this2.domElement.appendChild(_this2.__input);\n        _this2.domElement.appendChild(_this2.__selector);\n        _this2.updateDisplay();\n        function setSV(e) {\n            if (e.type.indexOf('touch') === -1) {\n                e.preventDefault();\n            }\n            var fieldRect = _this.__saturation_field.getBoundingClientRect();\n            var _ref = e.touches && e.touches[0] || e,\n                clientX = _ref.clientX,\n                clientY = _ref.clientY;\n            var s = (clientX - fieldRect.left) / (fieldRect.right - fieldRect.left);\n            var v = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n            if (v > 1) {\n                v = 1;\n            } else if (v < 0) {\n                v = 0;\n            }\n            if (s > 1) {\n                s = 1;\n            } else if (s < 0) {\n                s = 0;\n            }\n            _this.__color.v = v;\n            _this.__color.s = s;\n            _this.setValue(_this.__color.toOriginal());\n            return false;\n        }\n        function setH(e) {\n            if (e.type.indexOf('touch') === -1) {\n                e.preventDefault();\n            }\n            var fieldRect = _this.__hue_field.getBoundingClientRect();\n            var _ref2 = e.touches && e.touches[0] || e,\n                clientY = _ref2.clientY;\n            var h = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n            if (h > 1) {\n                h = 1;\n            } else if (h < 0) {\n                h = 0;\n            }\n            _this.__color.h = h * 360;\n            _this.setValue(_this.__color.toOriginal());\n            return false;\n        }\n        return _this2;\n    }\n    createClass(ColorController, [{\n        key: 'updateDisplay',\n        value: function updateDisplay() {\n            var i = interpret(this.getValue());\n            if (i !== false) {\n                var mismatch = false;\n                Common.each(Color.COMPONENTS, function (component) {\n                    if (!Common.isUndefined(i[component]) && !Common.isUndefined(this.__color.__state[component]) && i[component] !== this.__color.__state[component]) {\n                        mismatch = true;\n                        return {};\n                    }\n                }, this);\n                if (mismatch) {\n                    Common.extend(this.__color.__state, i);\n                }\n            }\n            Common.extend(this.__temp.__state, this.__color.__state);\n            this.__temp.a = 1;\n            var flip = this.__color.v < 0.5 || this.__color.s > 0.5 ? 255 : 0;\n            var _flip = 255 - flip;\n            Common.extend(this.__field_knob.style, {\n                marginLeft: 100 * this.__color.s - 7 + 'px',\n                marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\n                backgroundColor: this.__temp.toHexString(),\n                border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip + ')'\n            });\n            this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px';\n            this.__temp.s = 1;\n            this.__temp.v = 1;\n            linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toHexString());\n            this.__input.value = this.__color.toString();\n            Common.extend(this.__input.style, {\n                backgroundColor: this.__color.toHexString(),\n                color: 'rgb(' + flip + ',' + flip + ',' + flip + ')',\n                textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip + ',.7)'\n            });\n        }\n    }]);\n    return ColorController;\n}(Controller);\nvar vendors = ['-moz-', '-o-', '-webkit-', '-ms-', ''];\nfunction linearGradient(elem, x, a, b) {\n    elem.style.background = '';\n    Common.each(vendors, function (vendor) {\n        elem.style.cssText += 'background: ' + vendor + 'linear-gradient(' + x + ', ' + a + ' 0%, ' + b + ' 100%); ';\n    });\n}\nfunction hueGradient(elem) {\n    elem.style.background = '';\n    elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);';\n    elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n    elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n    elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n    elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n}\n\nvar ControllerFactory = function ControllerFactory(object, property) {\n  var initialValue = object[property];\n  if (Common.isArray(arguments[2]) || Common.isObject(arguments[2])) {\n    return new OptionController(object, property, arguments[2]);\n  }\n  if (Common.isNumber(initialValue)) {\n    if (Common.isNumber(arguments[2]) && Common.isNumber(arguments[3])) {\n      if (Common.isNumber(arguments[4])) {\n        return new NumberControllerSlider(object, property, arguments[2], arguments[3], arguments[4]);\n      }\n      return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\n    }\n    if (Common.isNumber(arguments[4])) {\n      return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3], step: arguments[4] });\n    }\n    return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3] });\n  }\n  if (Common.isString(initialValue)) {\n    return new StringController(object, property);\n  }\n  if (Common.isFunction(initialValue)) {\n    return new FunctionController(object, property, '');\n  }\n  if (Common.isBoolean(initialValue)) {\n    return new BooleanController(object, property);\n  }\n  return null;\n};\n\nvar CustomController = function (_Controller) {\n  inherits(CustomController, _Controller);\n  function CustomController(object, property) {\n    classCallCheck(this, CustomController);\n    var _this = possibleConstructorReturn(this, (CustomController.__proto__ || Object.getPrototypeOf(CustomController)).call(this, object, property));\n    _this.arguments = {\n      object: object, property: property, opts: Array.prototype.slice.call(arguments, 2)\n    };\n    if (object.property) _this.property = object.property(_this);\n    return _this;\n  }\n  createClass(CustomController, [{\n    key: 'controller',\n    set: function set$$1(newController) {\n      this._controller = newController;\n    },\n    get: function get$$1() {\n      return this._controller;\n    }\n  }]);\n  return CustomController;\n}(Controller);\n\nvar css = {\n  load: function load(url, indoc) {\n    var doc = indoc || document;\n    var link = doc.createElement('link');\n    link.type = 'text/css';\n    link.rel = 'stylesheet';\n    link.href = url;\n    doc.getElementsByTagName('head')[0].appendChild(link);\n  },\n  inject: function inject(cssContent, indoc) {\n    var doc = indoc || document;\n    var injected = document.createElement('style');\n    injected.type = 'text/css';\n    injected.innerHTML = cssContent;\n    var head = doc.getElementsByTagName('head')[0];\n    try {\n      head.appendChild(injected);\n    } catch (e) {\n    }\n  }\n};\n\nvar saveDialogContents = \"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n\\n    </div>\\n\\n  </div>\\n\\n</div>\";\n\nfunction requestAnimationFrame(callback) {\n  setTimeout(callback, 1000 / 60);\n}\nvar requestAnimationFrame$1 = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || requestAnimationFrame;\n\nvar CenteredDiv = function () {\n  function CenteredDiv() {\n    classCallCheck(this, CenteredDiv);\n    this.backgroundElement = document.createElement('div');\n    Common.extend(this.backgroundElement.style, {\n      backgroundColor: 'rgba(0,0,0,0.8)',\n      top: 0,\n      left: 0,\n      display: 'none',\n      zIndex: '1000',\n      opacity: 0,\n      WebkitTransition: 'opacity 0.2s linear',\n      transition: 'opacity 0.2s linear'\n    });\n    dom.makeFullscreen(this.backgroundElement);\n    this.backgroundElement.style.position = 'fixed';\n    this.domElement = document.createElement('div');\n    Common.extend(this.domElement.style, {\n      position: 'fixed',\n      display: 'none',\n      zIndex: '1001',\n      opacity: 0,\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\n      transition: 'transform 0.2s ease-out, opacity 0.2s linear'\n    });\n    document.body.appendChild(this.backgroundElement);\n    document.body.appendChild(this.domElement);\n    var _this = this;\n    dom.bind(this.backgroundElement, 'click', function () {\n      _this.hide();\n    });\n  }\n  createClass(CenteredDiv, [{\n    key: 'show',\n    value: function show() {\n      var _this = this;\n      this.backgroundElement.style.display = 'block';\n      this.domElement.style.display = 'block';\n      this.domElement.style.opacity = 0;\n      this.domElement.style.webkitTransform = 'scale(1.1)';\n      this.layout();\n      Common.defer(function () {\n        _this.backgroundElement.style.opacity = 1;\n        _this.domElement.style.opacity = 1;\n        _this.domElement.style.webkitTransform = 'scale(1)';\n      });\n    }\n  }, {\n    key: 'hide',\n    value: function hide() {\n      var _this = this;\n      var hide = function hide() {\n        _this.domElement.style.display = 'none';\n        _this.backgroundElement.style.display = 'none';\n        dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\n        dom.unbind(_this.domElement, 'transitionend', hide);\n        dom.unbind(_this.domElement, 'oTransitionEnd', hide);\n      };\n      dom.bind(this.domElement, 'webkitTransitionEnd', hide);\n      dom.bind(this.domElement, 'transitionend', hide);\n      dom.bind(this.domElement, 'oTransitionEnd', hide);\n      this.backgroundElement.style.opacity = 0;\n      this.domElement.style.opacity = 0;\n      this.domElement.style.webkitTransform = 'scale(1.1)';\n    }\n  }, {\n    key: 'layout',\n    value: function layout() {\n      this.domElement.style.left = window.innerWidth / 2 - dom.getWidth(this.domElement) / 2 + 'px';\n      this.domElement.style.top = window.innerHeight / 2 - dom.getHeight(this.domElement) / 2 + 'px';\n    }\n  }]);\n  return CenteredDiv;\n}();\n\nvar styleSheet = ___$insertStyle(\".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\");\n\ncss.inject(styleSheet);\nvar CSS_NAMESPACE = 'dg';\nvar HIDE_KEY_CODE = 72;\nvar CLOSE_BUTTON_HEIGHT = 20;\nvar DEFAULT_DEFAULT_PRESET_NAME = 'Default';\nvar SUPPORTS_LOCAL_STORAGE = function () {\n  try {\n    return !!window.localStorage;\n  } catch (e) {\n    return false;\n  }\n}();\nvar SAVE_DIALOGUE = void 0;\nvar autoPlaceVirgin = true;\nvar autoPlaceContainer = void 0;\nvar hide = false;\nvar hideableGuis = [];\nvar GUI = function GUI(pars) {\n  var _this = this;\n  var params = pars || {};\n  this.domElement = document.createElement('div');\n  this.__ul = document.createElement('ul');\n  this.domElement.appendChild(this.__ul);\n  dom.addClass(this.domElement, CSS_NAMESPACE);\n  this.__folders = {};\n  this.__controllers = [];\n  this.__rememberedObjects = [];\n  this.__rememberedObjectIndecesToControllers = [];\n  this.__listening = [];\n  params = Common.defaults(params, {\n    closeOnTop: false,\n    autoPlace: true,\n    width: GUI.DEFAULT_WIDTH\n  });\n  params = Common.defaults(params, {\n    resizable: params.autoPlace,\n    hideable: params.autoPlace\n  });\n  if (!Common.isUndefined(params.load)) {\n    if (params.preset) {\n      params.load.preset = params.preset;\n    }\n  } else {\n    params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n  }\n  if (Common.isUndefined(params.parent) && params.hideable) {\n    hideableGuis.push(this);\n  }\n  params.resizable = Common.isUndefined(params.parent) && params.resizable;\n  if (params.autoPlace && Common.isUndefined(params.scrollable)) {\n    params.scrollable = true;\n  }\n  var useLocalStorage = SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n  var saveToLocalStorage = void 0;\n  var titleRow = void 0;\n  Object.defineProperties(this,\n  {\n    parent: {\n      get: function get$$1() {\n        return params.parent;\n      }\n    },\n    scrollable: {\n      get: function get$$1() {\n        return params.scrollable;\n      }\n    },\n    autoPlace: {\n      get: function get$$1() {\n        return params.autoPlace;\n      }\n    },\n    closeOnTop: {\n      get: function get$$1() {\n        return params.closeOnTop;\n      }\n    },\n    preset: {\n      get: function get$$1() {\n        if (_this.parent) {\n          return _this.getRoot().preset;\n        }\n        return params.load.preset;\n      },\n      set: function set$$1(v) {\n        if (_this.parent) {\n          _this.getRoot().preset = v;\n        } else {\n          params.load.preset = v;\n        }\n        setPresetSelectIndex(this);\n        _this.revert();\n      }\n    },\n    width: {\n      get: function get$$1() {\n        return params.width;\n      },\n      set: function set$$1(v) {\n        params.width = v;\n        setWidth(_this, v);\n      }\n    },\n    name: {\n      get: function get$$1() {\n        return params.name;\n      },\n      set: function set$$1(v) {\n        params.name = v;\n        if (titleRow) {\n          titleRow.innerHTML = params.name;\n        }\n      }\n    },\n    closed: {\n      get: function get$$1() {\n        return params.closed;\n      },\n      set: function set$$1(v) {\n        params.closed = v;\n        if (params.closed) {\n          dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n        } else {\n          dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n        }\n        this.onResize();\n        if (_this.__closeButton) {\n          _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n        }\n      }\n    },\n    load: {\n      get: function get$$1() {\n        return params.load;\n      }\n    },\n    useLocalStorage: {\n      get: function get$$1() {\n        return useLocalStorage;\n      },\n      set: function set$$1(bool) {\n        if (SUPPORTS_LOCAL_STORAGE) {\n          useLocalStorage = bool;\n          if (bool) {\n            dom.bind(window, 'unload', saveToLocalStorage);\n          } else {\n            dom.unbind(window, 'unload', saveToLocalStorage);\n          }\n          localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n        }\n      }\n    }\n  });\n  if (Common.isUndefined(params.parent)) {\n    this.closed = params.closed || false;\n    dom.addClass(this.domElement, GUI.CLASS_MAIN);\n    dom.makeSelectable(this.domElement, false);\n    if (SUPPORTS_LOCAL_STORAGE) {\n      if (useLocalStorage) {\n        _this.useLocalStorage = true;\n        var savedGui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n        if (savedGui) {\n          params.load = JSON.parse(savedGui);\n        }\n      }\n    }\n    this.__closeButton = document.createElement('div');\n    this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n    dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n    if (params.closeOnTop) {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_TOP);\n      this.domElement.insertBefore(this.__closeButton, this.domElement.childNodes[0]);\n    } else {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BOTTOM);\n      this.domElement.appendChild(this.__closeButton);\n    }\n    dom.bind(this.__closeButton, 'click', function () {\n      _this.closed = !_this.closed;\n    });\n  } else {\n    if (params.closed === undefined) {\n      params.closed = true;\n    }\n    var titleRowName = document.createTextNode(params.name);\n    dom.addClass(titleRowName, 'controller-name');\n    titleRow = addRow(_this, titleRowName);\n    var onClickTitle = function onClickTitle(e) {\n      e.preventDefault();\n      _this.closed = !_this.closed;\n      return false;\n    };\n    dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n    dom.addClass(titleRow, 'title');\n    dom.bind(titleRow, 'click', onClickTitle);\n    if (!params.closed) {\n      this.closed = false;\n    }\n  }\n  if (params.autoPlace) {\n    if (Common.isUndefined(params.parent)) {\n      if (autoPlaceVirgin) {\n        autoPlaceContainer = document.createElement('div');\n        dom.addClass(autoPlaceContainer, CSS_NAMESPACE);\n        dom.addClass(autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER);\n        document.body.appendChild(autoPlaceContainer);\n        autoPlaceVirgin = false;\n      }\n      autoPlaceContainer.appendChild(this.domElement);\n      dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n    }\n    if (!this.parent) {\n      setWidth(_this, params.width);\n    }\n  }\n  this.__resizeHandler = function () {\n    _this.onResizeDebounced();\n  };\n  dom.bind(window, 'resize', this.__resizeHandler);\n  dom.bind(this.__ul, 'webkitTransitionEnd', this.__resizeHandler);\n  dom.bind(this.__ul, 'transitionend', this.__resizeHandler);\n  dom.bind(this.__ul, 'oTransitionEnd', this.__resizeHandler);\n  this.onResize();\n  if (params.resizable) {\n    addResizeHandle(this);\n  }\n  saveToLocalStorage = function saveToLocalStorage() {\n    if (SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(_this, 'isLocal')) === 'true') {\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\n    }\n  };\n  this.saveToLocalStorageIfPossible = saveToLocalStorage;\n  function resetWidth() {\n    var root = _this.getRoot();\n    root.width += 1;\n    Common.defer(function () {\n      root.width -= 1;\n    });\n  }\n  if (!params.parent) {\n    resetWidth();\n  }\n};\nGUI.toggleHide = function () {\n  hide = !hide;\n  Common.each(hideableGuis, function (gui) {\n    gui.domElement.style.display = hide ? 'none' : '';\n  });\n};\nGUI.CLASS_AUTO_PLACE = 'a';\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\nGUI.CLASS_MAIN = 'main';\nGUI.CLASS_CONTROLLER_ROW = 'cr';\nGUI.CLASS_TOO_TALL = 'taller-than-window';\nGUI.CLASS_CLOSED = 'closed';\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\nGUI.CLASS_CLOSE_TOP = 'close-top';\nGUI.CLASS_CLOSE_BOTTOM = 'close-bottom';\nGUI.CLASS_DRAG = 'drag';\nGUI.DEFAULT_WIDTH = 245;\nGUI.TEXT_CLOSED = 'Close Controls';\nGUI.TEXT_OPEN = 'Open Controls';\nGUI._keydownHandler = function (e) {\n  if (document.activeElement.type !== 'text' && (e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE)) {\n    GUI.toggleHide();\n  }\n};\ndom.bind(window, 'keydown', GUI._keydownHandler, false);\nCommon.extend(GUI.prototype,\n{\n  add: function add(object, property) {\n    return _add(this, object, property, {\n      factoryArgs: Array.prototype.slice.call(arguments, 2)\n    });\n  },\n  addColor: function addColor(object, property) {\n    return _add(this, object, property, {\n      color: true\n    });\n  },\n  remove: function remove(controller) {\n    this.__ul.removeChild(controller.__li);\n    this.__controllers.splice(this.__controllers.indexOf(controller), 1);\n    var _this = this;\n    Common.defer(function () {\n      _this.onResize();\n    });\n  },\n  destroy: function destroy() {\n    if (this.parent) {\n      throw new Error('Only the root GUI should be removed with .destroy(). ' + 'For subfolders, use gui.removeFolder(folder) instead.');\n    }\n    if (this.autoPlace) {\n      autoPlaceContainer.removeChild(this.domElement);\n    }\n    var _this = this;\n    Common.each(this.__folders, function (subfolder) {\n      _this.removeFolder(subfolder);\n    });\n    dom.unbind(window, 'keydown', GUI._keydownHandler, false);\n    removeListeners(this);\n  },\n  addFolder: function addFolder(name) {\n    if (this.__folders[name] !== undefined) {\n      throw new Error('You already have a folder in this GUI by the' + ' name \"' + name + '\"');\n    }\n    var newGuiParams = { name: name, parent: this };\n    newGuiParams.autoPlace = this.autoPlace;\n    if (this.load &&\n    this.load.folders &&\n    this.load.folders[name]) {\n      newGuiParams.closed = this.load.folders[name].closed;\n      newGuiParams.load = this.load.folders[name];\n    }\n    var gui = new GUI(newGuiParams);\n    this.__folders[name] = gui;\n    var li = addRow(this, gui.domElement);\n    dom.addClass(li, 'folder');\n    return gui;\n  },\n  removeFolder: function removeFolder(folder) {\n    this.__ul.removeChild(folder.domElement.parentElement);\n    delete this.__folders[folder.name];\n    if (this.load &&\n    this.load.folders &&\n    this.load.folders[folder.name]) {\n      delete this.load.folders[folder.name];\n    }\n    removeListeners(folder);\n    var _this = this;\n    Common.each(folder.__folders, function (subfolder) {\n      folder.removeFolder(subfolder);\n    });\n    Common.defer(function () {\n      _this.onResize();\n    });\n  },\n  open: function open() {\n    this.closed = false;\n  },\n  close: function close() {\n    this.closed = true;\n  },\n  hide: function hide() {\n    this.domElement.style.display = 'none';\n  },\n  show: function show() {\n    this.domElement.style.display = '';\n  },\n  onResize: function onResize() {\n    var root = this.getRoot();\n    if (root.scrollable) {\n      var top = dom.getOffset(root.__ul).top;\n      var h = 0;\n      Common.each(root.__ul.childNodes, function (node) {\n        if (!(root.autoPlace && node === root.__save_row)) {\n          h += dom.getHeight(node);\n        }\n      });\n      if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n        dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n        root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n      } else {\n        dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n        root.__ul.style.height = 'auto';\n      }\n    }\n    if (root.__resize_handle) {\n      Common.defer(function () {\n        root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n      });\n    }\n    if (root.__closeButton) {\n      root.__closeButton.style.width = root.width + 'px';\n    }\n  },\n  onResizeDebounced: Common.debounce(function () {\n    this.onResize();\n  }, 50),\n  remember: function remember() {\n    if (Common.isUndefined(SAVE_DIALOGUE)) {\n      SAVE_DIALOGUE = new CenteredDiv();\n      SAVE_DIALOGUE.domElement.innerHTML = saveDialogContents;\n    }\n    if (this.parent) {\n      throw new Error('You can only call remember on a top level GUI.');\n    }\n    var _this = this;\n    Common.each(Array.prototype.slice.call(arguments), function (object) {\n      if (_this.__rememberedObjects.length === 0) {\n        addSaveMenu(_this);\n      }\n      if (_this.__rememberedObjects.indexOf(object) === -1) {\n        _this.__rememberedObjects.push(object);\n      }\n    });\n    if (this.autoPlace) {\n      setWidth(this, this.width);\n    }\n  },\n  getRoot: function getRoot() {\n    var gui = this;\n    while (gui.parent) {\n      gui = gui.parent;\n    }\n    return gui;\n  },\n  getSaveObject: function getSaveObject() {\n    var toReturn = this.load;\n    toReturn.closed = this.closed;\n    if (this.__rememberedObjects.length > 0) {\n      toReturn.preset = this.preset;\n      if (!toReturn.remembered) {\n        toReturn.remembered = {};\n      }\n      toReturn.remembered[this.preset] = getCurrentPreset(this);\n    }\n    toReturn.folders = {};\n    Common.each(this.__folders, function (element, key) {\n      toReturn.folders[key] = element.getSaveObject();\n    });\n    return toReturn;\n  },\n  save: function save() {\n    if (!this.load.remembered) {\n      this.load.remembered = {};\n    }\n    this.load.remembered[this.preset] = getCurrentPreset(this);\n    markPresetModified(this, false);\n    this.saveToLocalStorageIfPossible();\n  },\n  saveAs: function saveAs(presetName) {\n    if (!this.load.remembered) {\n      this.load.remembered = {};\n      this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n    }\n    this.load.remembered[presetName] = getCurrentPreset(this);\n    this.preset = presetName;\n    addPresetOption(this, presetName, true);\n    this.saveToLocalStorageIfPossible();\n  },\n  revert: function revert(gui) {\n    Common.each(this.__controllers, function (controller) {\n      if (!this.getRoot().load.remembered) {\n        controller.setValue(controller.initialValue);\n      } else {\n        recallSavedValue(gui || this.getRoot(), controller);\n      }\n      if (controller.__onFinishChange) {\n        controller.__onFinishChange.call(controller, controller.getValue());\n      }\n    }, this);\n    Common.each(this.__folders, function (folder) {\n      folder.revert(folder);\n    });\n    if (!gui) {\n      markPresetModified(this.getRoot(), false);\n    }\n  },\n  listen: function listen(controller) {\n    var init = this.__listening.length === 0;\n    this.__listening.push(controller);\n    if (init) {\n      updateDisplays(this.__listening);\n    }\n  },\n  updateDisplay: function updateDisplay() {\n    Common.each(this.__controllers, function (controller) {\n      controller.updateDisplay();\n    });\n    Common.each(this.__folders, function (folder) {\n      folder.updateDisplay();\n    });\n  }\n});\nfunction addRow(gui, newDom, liBefore) {\n  var li = document.createElement('li');\n  if (newDom) {\n    li.appendChild(newDom);\n  }\n  if (liBefore) {\n    gui.__ul.insertBefore(li, liBefore);\n  } else {\n    gui.__ul.appendChild(li);\n  }\n  gui.onResize();\n  return li;\n}\nfunction removeListeners(gui) {\n  dom.unbind(window, 'resize', gui.__resizeHandler);\n  if (gui.saveToLocalStorageIfPossible) {\n    dom.unbind(window, 'unload', gui.saveToLocalStorageIfPossible);\n  }\n}\nfunction markPresetModified(gui, modified) {\n  var opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n  if (modified) {\n    opt.innerHTML = opt.value + '*';\n  } else {\n    opt.innerHTML = opt.value;\n  }\n}\nfunction augmentController(gui, li, controller) {\n  controller.__li = li;\n  controller.__gui = gui;\n  Common.extend(controller,                                   {\n    options: function options(_options) {\n      if (arguments.length > 1) {\n        var nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n        return _add(gui, controller.object, controller.property, {\n          before: nextSibling,\n          factoryArgs: [Common.toArray(arguments)]\n        });\n      }\n      if (Common.isArray(_options) || Common.isObject(_options)) {\n        var _nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n        return _add(gui, controller.object, controller.property, {\n          before: _nextSibling,\n          factoryArgs: [_options]\n        });\n      }\n    },\n    name: function name(_name) {\n      controller.__li.firstElementChild.firstElementChild.innerHTML = _name;\n      return controller;\n    },\n    listen: function listen() {\n      controller.__gui.listen(controller);\n      return controller;\n    },\n    remove: function remove() {\n      controller.__gui.remove(controller);\n      return controller;\n    }\n  });\n  if (controller instanceof NumberControllerSlider) {\n    var box = new NumberControllerBox(controller.object, controller.property, { min: controller.__min, max: controller.__max, step: controller.__step });\n    Common.each(['updateDisplay', 'onChange', 'onFinishChange', 'step', 'min', 'max'], function (method) {\n      var pc = controller[method];\n      var pb = box[method];\n      controller[method] = box[method] = function () {\n        var args = Array.prototype.slice.call(arguments);\n        pb.apply(box, args);\n        return pc.apply(controller, args);\n      };\n    });\n    dom.addClass(li, 'has-slider');\n    controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n  } else if (controller instanceof NumberControllerBox) {\n    var r = function r(returned) {\n      if (Common.isNumber(controller.__min) && Common.isNumber(controller.__max)) {\n        var oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\n        var wasListening = controller.__gui.__listening.indexOf(controller) > -1;\n        controller.remove();\n        var newController = _add(gui, controller.object, controller.property, {\n          before: controller.__li.nextElementSibling,\n          factoryArgs: [controller.__min, controller.__max, controller.__step]\n        });\n        newController.name(oldName);\n        if (wasListening) newController.listen();\n        return newController;\n      }\n      return returned;\n    };\n    controller.min = Common.compose(r, controller.min);\n    controller.max = Common.compose(r, controller.max);\n  } else if (controller instanceof BooleanController) {\n    dom.bind(li, 'click', function () {\n      dom.fakeEvent(controller.__checkbox, 'click');\n    });\n    dom.bind(controller.__checkbox, 'click', function (e) {\n      e.stopPropagation();\n    });\n  } else if (controller instanceof FunctionController) {\n    dom.bind(li, 'click', function () {\n      dom.fakeEvent(controller.__button, 'click');\n    });\n    dom.bind(li, 'mouseover', function () {\n      dom.addClass(controller.__button, 'hover');\n    });\n    dom.bind(li, 'mouseout', function () {\n      dom.removeClass(controller.__button, 'hover');\n    });\n  } else if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n    controller.updateDisplay = Common.compose(function (val) {\n      li.style.borderLeftColor = controller.__color.toString();\n      return val;\n    }, controller.updateDisplay);\n    controller.updateDisplay();\n  }\n  controller.setValue = Common.compose(function (val) {\n    if (gui.getRoot().__preset_select && controller.isModified()) {\n      markPresetModified(gui.getRoot(), true);\n    }\n    return val;\n  }, controller.setValue);\n}\nfunction recallSavedValue(gui, controller) {\n  var root = gui.getRoot();\n  var matchedIndex = root.__rememberedObjects.indexOf(controller.object);\n  if (matchedIndex !== -1) {\n    var controllerMap = root.__rememberedObjectIndecesToControllers[matchedIndex];\n    if (controllerMap === undefined) {\n      controllerMap = {};\n      root.__rememberedObjectIndecesToControllers[matchedIndex] = controllerMap;\n    }\n    controllerMap[controller.property] = controller;\n    if (root.load && root.load.remembered) {\n      var presetMap = root.load.remembered;\n      var preset = void 0;\n      if (presetMap[gui.preset]) {\n        preset = presetMap[gui.preset];\n      } else if (presetMap[DEFAULT_DEFAULT_PRESET_NAME]) {\n        preset = presetMap[DEFAULT_DEFAULT_PRESET_NAME];\n      } else {\n        return;\n      }\n      if (preset[matchedIndex] && preset[matchedIndex][controller.property] !== undefined) {\n        var value = preset[matchedIndex][controller.property];\n        controller.initialValue = value;\n        controller.setValue(value);\n      }\n    }\n  }\n}\nfunction _add(gui, object, property, params) {\n  var customObject;\n  if (object.arguments) {\n    customObject = object;\n    object = customObject.arguments.object;\n    property = customObject.arguments.property;\n    params = {\n      factoryArgs: customObject.arguments.opts\n    };\n  }\n  if (customObject === undefined && object[property] === undefined) {\n    throw new Error('Object \"' + object + '\" has no property \"' + property + '\"');\n  }\n  var controller = void 0;\n  if (params.color) {\n    controller = new ColorController(object, property);\n  } else if (customObject !== undefined && typeof customObject.property === \"string\") {\n    controller = customObject;\n  } else {\n    var factoryArgs = [object, property].concat(params.factoryArgs);\n    controller = ControllerFactory.apply(gui, factoryArgs);\n  }\n  if (controller === null) controller = customObject;else if (customObject !== undefined) customObject.controller = controller;\n  if (params.before instanceof Controller) {\n    params.before = params.before.__li;\n  }\n  recallSavedValue(gui, controller);\n  dom.addClass(controller.domElement, 'c');\n  var name = document.createElement('span');\n  dom.addClass(name, 'property-name');\n  if (customObject !== undefined && _typeof(customObject.property) === \"object\") {\n    for (var propertyName in customObject.property) {\n      name.appendChild(customObject.property[propertyName]);\n    }\n  } else name.innerHTML = controller.property;\n  var container = document.createElement('div');\n  container.appendChild(name);\n  container.appendChild(controller.domElement);\n  var li = addRow(gui, container, params.before);\n  dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n  if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n  } else {\n    dom.addClass(li, _typeof(controller.getValue()));\n  }\n  augmentController(gui, li, controller);\n  gui.__controllers.push(controller);\n  return controller;\n}\nfunction getLocalStorageHash(gui, key) {\n  return document.location.href + '.' + key;\n}\nfunction addPresetOption(gui, name, setSelected) {\n  var opt = document.createElement('option');\n  opt.innerHTML = name;\n  opt.value = name;\n  gui.__preset_select.appendChild(opt);\n  if (setSelected) {\n    gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n  }\n}\nfunction showHideExplain(gui, explain) {\n  explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n}\nfunction addSaveMenu(gui) {\n  var div = gui.__save_row = document.createElement('li');\n  dom.addClass(gui.domElement, 'has-save');\n  gui.__ul.insertBefore(div, gui.__ul.firstChild);\n  dom.addClass(div, 'save-row');\n  var gears = document.createElement('span');\n  gears.innerHTML = '&nbsp;';\n  dom.addClass(gears, 'button gears');\n  var button = document.createElement('span');\n  button.innerHTML = 'Save';\n  dom.addClass(button, 'button');\n  dom.addClass(button, 'save');\n  var button2 = document.createElement('span');\n  button2.innerHTML = 'New';\n  dom.addClass(button2, 'button');\n  dom.addClass(button2, 'save-as');\n  var button3 = document.createElement('span');\n  button3.innerHTML = 'Revert';\n  dom.addClass(button3, 'button');\n  dom.addClass(button3, 'revert');\n  var select = gui.__preset_select = document.createElement('select');\n  if (gui.load && gui.load.remembered) {\n    Common.each(gui.load.remembered, function (value, key) {\n      addPresetOption(gui, key, key === gui.preset);\n    });\n  } else {\n    addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n  }\n  dom.bind(select, 'change', function () {\n    for (var index = 0; index < gui.__preset_select.length; index++) {\n      gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n    }\n    gui.preset = this.value;\n  });\n  div.appendChild(select);\n  div.appendChild(gears);\n  div.appendChild(button);\n  div.appendChild(button2);\n  div.appendChild(button3);\n  if (SUPPORTS_LOCAL_STORAGE) {\n    var explain = document.getElementById('dg-local-explain');\n    var localStorageCheckBox = document.getElementById('dg-local-storage');\n    var saveLocally = document.getElementById('dg-save-locally');\n    saveLocally.style.display = 'block';\n    if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n      localStorageCheckBox.setAttribute('checked', 'checked');\n    }\n    showHideExplain(gui, explain);\n    dom.bind(localStorageCheckBox, 'change', function () {\n      gui.useLocalStorage = !gui.useLocalStorage;\n      showHideExplain(gui, explain);\n    });\n  }\n  var newConstructorTextArea = document.getElementById('dg-new-constructor');\n  dom.bind(newConstructorTextArea, 'keydown', function (e) {\n    if (e.metaKey && (e.which === 67 || e.keyCode === 67)) {\n      SAVE_DIALOGUE.hide();\n    }\n  });\n  dom.bind(gears, 'click', function () {\n    newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\n    SAVE_DIALOGUE.show();\n    newConstructorTextArea.focus();\n    newConstructorTextArea.select();\n  });\n  dom.bind(button, 'click', function () {\n    gui.save();\n  });\n  dom.bind(button2, 'click', function () {\n    var presetName = prompt('Enter a new preset name.');\n    if (presetName) {\n      gui.saveAs(presetName);\n    }\n  });\n  dom.bind(button3, 'click', function () {\n    gui.revert();\n  });\n}\nfunction addResizeHandle(gui) {\n  var pmouseX = void 0;\n  gui.__resize_handle = document.createElement('div');\n  Common.extend(gui.__resize_handle.style, {\n    width: '6px',\n    marginLeft: '-3px',\n    height: '200px',\n    cursor: 'ew-resize',\n    position: 'absolute'\n  });\n  function drag(e) {\n    e.preventDefault();\n    gui.width += pmouseX - e.clientX;\n    gui.onResize();\n    pmouseX = e.clientX;\n    return false;\n  }\n  function dragStop() {\n    dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.unbind(window, 'mousemove', drag);\n    dom.unbind(window, 'mouseup', dragStop);\n  }\n  function dragStart(e) {\n    e.preventDefault();\n    pmouseX = e.clientX;\n    dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.bind(window, 'mousemove', drag);\n    dom.bind(window, 'mouseup', dragStop);\n    return false;\n  }\n  dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n  dom.bind(gui.__closeButton, 'mousedown', dragStart);\n  gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n}\nfunction setWidth(gui, w) {\n  gui.domElement.style.width = w + 'px';\n  if (gui.__save_row && gui.autoPlace) {\n    gui.__save_row.style.width = w + 'px';\n  }\n  if (gui.__closeButton) {\n    gui.__closeButton.style.width = w + 'px';\n  }\n}\nfunction getCurrentPreset(gui, useInitialValues) {\n  var toReturn = {};\n  Common.each(gui.__rememberedObjects, function (val, index) {\n    var savedValues = {};\n    var controllerMap = gui.__rememberedObjectIndecesToControllers[index];\n    Common.each(controllerMap, function (controller, property) {\n      savedValues[property] = useInitialValues ? controller.initialValue : controller.getValue();\n    });\n    toReturn[index] = savedValues;\n  });\n  return toReturn;\n}\nfunction setPresetSelectIndex(gui) {\n  for (var index = 0; index < gui.__preset_select.length; index++) {\n    if (gui.__preset_select[index].value === gui.preset) {\n      gui.__preset_select.selectedIndex = index;\n    }\n  }\n}\nfunction updateDisplays(controllerArray) {\n  if (controllerArray.length !== 0) {\n    requestAnimationFrame$1.call(window, function () {\n      updateDisplays(controllerArray);\n    });\n  }\n  Common.each(controllerArray, function (c) {\n    c.updateDisplay();\n  });\n}\n\nvar color = {\n  Color: Color,\n  math: ColorMath,\n  interpret: interpret\n};\nvar controllers = {\n  Controller: Controller,\n  BooleanController: BooleanController,\n  OptionController: OptionController,\n  StringController: StringController,\n  NumberController: NumberController,\n  NumberControllerBox: NumberControllerBox,\n  NumberControllerSlider: NumberControllerSlider,\n  FunctionController: FunctionController,\n  ColorController: ColorController,\n  CustomController: CustomController\n};\nvar dom$1 = { dom: dom };\nvar gui = { GUI: GUI };\nvar GUI$1 = GUI;\nvar index = {\n  color: color,\n  controllers: controllers,\n  dom: dom$1,\n  gui: gui,\n  GUI: GUI$1\n};\n\nexport { color, controllers, dom$1 as dom, gui, GUI$1 as GUI };\nexport default index;\n//# sourceMappingURL=dat.gui.module.js.map\n","/**\r\n * @module Localization.\r\n *\r\n * @author [Andrej Hristoliubov]{@link https://anhr.github.io/AboutMe/}\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\n/**\r\n * returns the \"primary language\" subtag of the version of the browser.\r\n * See the \"Syntax\" paragraph of RFC 4646 https://tools.ietf.org/html/rfc4646#section-2.1 for details.\r\n */\r\nexport function getLanguageCode() {\r\n\r\n\t//returns the language version of the browser.\r\n\tfunction _getLocale() {\r\n\r\n\t\tif ( !navigator ) {\r\n\r\n\t\t\tconsole.error( \"getLocale() failed! !navigator\" );\r\n\t\t\treturn \"\";\r\n\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\t( navigator.languages !== undefined )\r\n\t\t\t&& ( typeof navigator.languages !== 'unknown' )//for IE6\r\n\t\t\t&& ( navigator.languages.length > 0 )\r\n\t\t)\r\n\t\t\treturn navigator.languages[0];//Chrome\r\n\r\n\t\t//IE\r\n\t\tif ( navigator.language ) {\r\n\r\n\t\t\treturn navigator.language;\r\n\r\n\t\t} else if ( navigator.browserLanguage ) {\r\n\r\n\t\t\treturn navigator.browserLanguage;\r\n\r\n\t\t} else if ( navigator.systemLanguage ) {\r\n\r\n\t\t\treturn navigator.systemLanguage;\r\n\r\n\t\t} else if ( navigator.userLanguage ) {\r\n\r\n\t\t\treturn navigator.userLanguage;\r\n\r\n\t\t}\r\n\r\n\t\tconsole.error( \"getLocale() failed!\" );\r\n\t\treturn \"\";\r\n\r\n\t}\r\n\r\n\treturn _getLocale().toLowerCase().match( /([a-z]+)(?:-([a-z]+))?/ )[1];\r\n\r\n};\r\n\r\n","/**\r\n * @module PlayController\r\n * @description PlayController class for using in my version of dat.gui(https://github.com/anhr/dat.gui) for playing of 3D objects in my projects.\r\n *\r\n * @author [Andrej Hristoliubov]{@link https://anhr.github.io/AboutMe/}\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\n//import { GUI, controllers } from 'D:/My documents/MyProjects/webgl/three.js/GitHub/dat.gui';\r\n//Please download https://github.com/anhr/dat.gui/tree/CustomController to '../../dat.gui' folder\r\n//import { GUI, controllers } from '../../dat.gui';\r\nimport { GUI, controllers } from '../dat.gui/CustomController/build/dat.gui.module.js';\r\n\r\n//import { getLanguageCode } from '../../commonNodeJS/master/build/common.module.js';\r\nimport { getLanguageCode } from '../lang.js';\r\n//import { getLanguageCode } from 'http://localhost/anhr/commonNodeJS/master/lang.js';\r\n\r\n//Localization\r\n\r\nexport var lang = {\r\n\r\n\tprevSymbol: '←',\r\n\tprevSymbolTitle: 'Go to previous animation scene',\r\n\tnextSymbol: '→',\r\n\tnextSymbolTitle: 'Go to next animation scene',\r\n\tplaySymbol: '►',\r\n\tplayTitle: 'Play',\r\n\tpause: '❚❚',\r\n\tpauseTitle: 'Pause',\r\n\trepeat: '⥀',\r\n\trepeatOn: 'Turn repeat on',\r\n\trepeatOff: 'Turn repeat off',\r\n\tcontrollerTitle: 'Rate of changing of animation scenes per second.',\r\n\tfullScreen: 'Full Screen',\r\n\tnonFullScreen: 'Non Full Screen',\r\n\tstereoEffects: 'Stereo effects',\r\n\tmono: 'Mono',\r\n\tsideBySide: 'Side by side',\r\n\ttopAndBottom: 'Top and bottom',\r\n\r\n};\r\n\r\n//try {\r\n\t//switch ( ( ( typeof THREE === 'undefined' ) || ( typeof THREE.getLanguageCode === 'undefined' ) ) ? 'en' : THREE.getLanguageCode() )\r\n\tswitch ( getLanguageCode() ) {\r\n\r\n\t\tcase 'ru'://Russian language\r\n\t\t\tlang.prevSymbolTitle = 'Кадр назад';//'Go to previous animation scene',\r\n\t\t\tlang.playTitle = 'Проиграть';//'Play'\r\n\t\t\tlang.nextSymbolTitle = 'Кадр вперед';//'Go to next animation scene';\r\n\t\t\tlang.pauseTitle = 'Пауза';//'Pause',\r\n\t\t\tlang.repeatOn = 'Повторять проигрывание';\r\n\t\t\tlang.repeatOff = 'Остановить повтор проигрывания';\r\n\t\t\tlang.controllerTitle = 'Скорость смены кадров в секунду.';\r\n\t\t\tlang.fullScreen = 'На весь экран';\r\n\t\t\tlang.nonFullScreen = 'Восстановить размеры экрана';\r\n\t\t\tlang.stereoEffects = 'Стерео эффекты';\r\n\t\t\tlang.mono = 'Моно';\r\n\t\t\tlang.sideBySide = 'Слева направо';\r\n\t\t\tlang.topAndBottom = 'Сверху вниз';\r\n\r\n\t\t\tbreak;\r\n\r\n\t}\r\n//} catch ( e ) {}\r\n\r\nfunction addButton( innerHTML, title, onclick ) {\r\n\r\n\tvar button = document.createElement( 'span' );\r\n\tbutton.innerHTML = innerHTML;\r\n\tbutton.title = title;\r\n\tbutton.style.cursor = 'pointer';\r\n\tbutton.style.margin = '0px 2px';\r\n\tbutton.onclick = onclick;\r\n\treturn button;\r\n\r\n}\r\n\r\n/**\r\n * PlayController class for using in my version of dat.gui(https://github.com/anhr/dat.gui) for playing of 3D objects in my projects.\r\n * \r\n * @class PlayController\r\n *\r\n * @extends dat.controllers.CustomController\r\n *\r\n */\r\nexport class PlayController extends controllers.CustomController {\r\n\r\n\t/**\r\n\t * PlayController class for using in my version of dat.gui(https://github.com/anhr/dat.gui) for animate of 3D objects in my projects.\r\n\t * @param {object} player 3D objects animation. See nodejs\\myThreejs\\player.js\r\n\t */\r\n\tconstructor( player ) {\r\n\r\n\t\tvar _getGroup, _selectScene, _renamePlayButtons, _renameRepeatButtons, _repeat;//,_playNext, timerId, _prev, _play, _next;\r\n\t\tvar colorOff = 'rgb(255,255,255)', colorOn = 'rgb(128,128,128)';//'rgb(200,200,200)';\r\n\t\tsuper( {\r\n\r\n\t\t\tplayRate: 1,//Default play rate is 1 changes per second\r\n\t\t\tproperty: function ( customController ) {\r\n\r\n\t\t\t\tvar buttons = {};\r\n\t\t\t\tfunction RenamePlayButtons( innerHTML, title ) {\r\n\r\n\t\t\t\t\tbuttons.buttonPlay.innerHTML = innerHTML;\r\n\t\t\t\t\tbuttons.buttonPlay.title = title;\r\n\r\n\t\t\t\t}\r\n\t\t\t\t_renamePlayButtons = RenamePlayButtons;\r\n\r\n\t\t\t\tbuttons.buttonPrev = addButton( lang.prevSymbol, lang.prevSymbolTitle, player.prev );\r\n\t\t\t\tbuttons.buttonPlay = addButton( lang.playSymbol, lang.playTitle, player.play3DObject );\r\n\r\n\t\t\t\t//Repeat button\r\n\r\n\t\t\t\tfunction RenameRepeatButtons( isRepeat ) {\r\n\r\n\t\t\t\t\tvar title, color;\r\n\t\t\t\t\tif ( isRepeat ) {\r\n\r\n\t\t\t\t\t\ttitle = lang.repeatOff;\r\n\t\t\t\t\t\tcolor = colorOff;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\ttitle = lang.repeatOn;\r\n\t\t\t\t\t\tcolor = colorOn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( buttons.buttonRepeat.title === title )\r\n\t\t\t\t\t\treturn;//stop of infinite recursive call\r\n\r\n\t\t\t\t\tbuttons.buttonRepeat.title = title;\r\n\t\t\t\t\tbuttons.buttonRepeat.style.color = color;\r\n\r\n\t\t\t\t\tplayer.onChangeRepeat( isRepeat );\r\n\r\n\t\t\t\t}\r\n\t\t\t\t_renameRepeatButtons = RenameRepeatButtons;\r\n\t\t\t\tfunction repeat( value ) {\r\n\r\n\t\t\t\t\tRenameRepeatButtons( buttons.buttonRepeat.title === lang.repeatOn );\r\n\r\n\t\t\t\t}\r\n\t\t\t\t_repeat = repeat;\r\n\t\t\t\tvar title, color;\r\n\t\t\t\tif ( player.getOptions().repeat ) {\r\n\r\n\t\t\t\t\ttitle = lang.repeatOff;\r\n\t\t\t\t\tcolor = colorOff;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttitle = lang.repeatOn;\r\n\t\t\t\t\tcolor = colorOn;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tbuttons.buttonRepeat = addButton( lang.repeat, title, repeat );\r\n\t\t\t\tbuttons.buttonRepeat.style.color = color;\r\n\t\t\t\tbuttons.buttonNext = addButton( lang.nextSymbol, lang.nextSymbolTitle, player.next );\r\n\t\t\t\tfunction getGroup() {\r\n\r\n\t\t\t\t\treturn group;\r\n\r\n\t\t\t\t}\r\n\t\t\t\t_getGroup = getGroup;\r\n\r\n\t\t\t\treturn buttons;\r\n\r\n\t\t\t},\r\n\r\n\t\t}, 'playRate', 1, 25, 1 );\r\n\t\tplayer.PlayController = this;\r\n\t\tthis.onRenamePlayButtons = function ( playing ) {\r\n\r\n\t\t\tvar name, title;\r\n\t\t\tif ( playing ) {\r\n\r\n\t\t\t\tname = lang.pause;\r\n\t\t\t\ttitle = lang.pauseTitle;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tname = lang.playSymbol;\r\n\t\t\t\ttitle = lang.playTitle;\r\n\r\n\t\t\t}\r\n\t\t\t_renamePlayButtons( name, title, true );\r\n\r\n\t\t}\r\n\t\tthis.onChangeRepeat = function () {\r\n\r\n\t\t\t_renameRepeatButtons( player.getSettings().repeat );\r\n\r\n\t\t}\r\n\t\tplayer.pushController( this );\r\n\t\tthis.onChange = function ( value ){\r\n\r\n\t\t\tplayer.onChangeTimerId( value );\r\n\r\n\t\t}\r\n\t\tthis.getGroup = function () {\r\n\r\n\t\t\treturn _getGroup();\r\n\r\n\t\t}\r\n\t\tthis.selectScene = function ( index ) {\r\n\r\n\t\t\t_selectScene( parseInt( index ) );\r\n\r\n\t\t}\r\n\t\tthis.setValue = function ( value ) {\r\n\r\n\t\t\tthis._controller.setValue( value );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\tset controller( newController ) {\r\n\r\n\t\tthis._controller = newController;\r\n\t\tvar _this = this;\r\n\t\tthis._controller.onChange( function ( value ) {\r\n\r\n\t\t\t_this.onChange( value );\r\n\r\n\t\t} );\r\n\t\tthis._controller.domElement.title = lang.controllerTitle;\r\n\r\n\t}\r\n\tget controller() {\r\n\r\n\t\treturn this._controller;\r\n\r\n\t}\r\n\r\n}\r\nexport function create( player ) {\r\n\r\n\treturn new PlayController( player );\r\n\r\n}\r\n","/**\r\n * node.js version of the synchronous download of the file.\r\n * @author Andrej Hristoliubov https://anhr.github.io/AboutMe/\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\n//The myRequest is cross-browser XMLHttpRequest wrapper.\r\nfunction myRequest( options ) {\r\n\r\n\tthis.loadXMLDoc = function () {\r\n\t\tvar req;\r\n\r\n\t\tif ( window.XMLHttpRequest ) {\r\n\t\t\treq = new XMLHttpRequest();\r\n\t\t\tif ( !req )\r\n\t\t\t\tthrow \"new XMLHttpRequest() failed!\"\r\n\t\t}\r\n\t\telse if ( window.ActiveXObject ) {\r\n\t\t\treq = this.NewActiveXObject();\r\n\t\t\tif ( !req )\r\n\t\t\t\tthrow \"NewActiveXObject() failed!\"\r\n\t\t}\r\n\t\telse throw \"myRequest.loadXMLDoc(...) failed!\";\r\n\t\treturn req;\r\n\t}\r\n\r\n\tthis.NewActiveXObject = function () {\r\n\t\ttry { return new ActiveXObject( \"Msxml2.XMLHTTP.6.0\" ); }\r\n\t\tcatch ( e ) { }\r\n\t\ttry { return new ActiveXObject( \"Msxml2.XMLHTTP.3.0\" ); }\r\n\t\tcatch ( e ) { }\r\n\t\ttry { return new ActiveXObject( \"Msxml2.XMLHTTP\" ); }\r\n\t\tcatch ( e ) { }\r\n\t\ttry { return new ActiveXObject( \"Microsoft.XMLHTTP\" ); }\r\n\t\tcatch ( e ) { }\r\n\t\tErrorMessage( 'This browser does not support XMLHttpRequest. Probably, your security settings do not allow Web sites to use ActiveX controls installed on your computer. Refresh your Web page to find out the current status of your Web page or enable the \"Initialize and script ActiveX controls not marked as safe\" and \"Run Active X controls and plug-ins\" of the Security settings of the Internet zone of your browser.' );\r\n\t\treturn null;\r\n\t}\r\n\r\n\tthis.XMLHttpRequestStart = function ( onreadystatechange, async ) {\r\n\r\n\t\tthis.XMLHttpRequestStop();//For compatibility with IE Windows Phone\r\n\r\n\t\tthis.req.onreadystatechange = onreadystatechange;\r\n\r\n\t\t//ATTENTION!!! do not works in IE\r\n\t\tif ( \"onerror\" in this.req ) {\r\n\t\t\tthis.req.onerror = function ( event ) {\r\n\t\t\t\tErrorMessage( \"XMLHttpRequest error. url: \" + this.url, false, false );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.XMLHttpRequestReStart( async );\r\n\t}\r\n\r\n\tthis.getUrl = function () {\r\n\t\tif ( ( typeof this.url == 'undefined' ) || ( this.url == null ) ) {\r\n\t\t\tthis.url = \"XMLHttpRequest.xml\";\r\n\t\t}\r\n\t\treturn this.url + ( this.params ? this.params : \"\" );\r\n\t}\r\n\r\n\tthis.XMLHttpRequestReStart = function ( async ) {\r\n\t\ttry {\r\n\t\t\tif ( typeof async == 'undefined' )\r\n\t\t\t\tasync = true;\r\n\t\t\tthis.req.open( \"GET\", this.getUrl(), async );\r\n\t\t\tif ( async ) {\r\n\t\t\t\tvar timeout = ( 60 + 30 ) * 1000;//��������!!! �������� ������ ���� ������ CSocketWaitEvent::WaitResponse\r\n\t\t\t\tif ( \"timeout\" in this.req )//for IE6\r\n\t\t\t\t\tthis.req.timeout = timeout;\r\n\t\t\t\tif ( \"ontimeout\" in this.req )\r\n\t\t\t\t\tthis.req.ontimeout = function () {\r\n\t\t\t\t\t\tErrorMessage( 'XMLHttpRequest timeout', false, false );\r\n\t\t\t\t\t}\r\n\t\t\t\telse {//for Safari, IE6\r\n\t\t\t\t\tclearTimeout( this.timeout_id_SendReq );\r\n\t\t\t\t\tthis.timeout_id_SendReq = setTimeout( function () {\r\n\t\t\t\t\t\tErrorMessage( 'XMLHttpRequest timeout 2', false, false );\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t, timeout );\r\n\t\t\t\t\t//console.log(\"setTimeout this.req.timeout_id_SendReq = \" + this.req.timeout_id_SendReq);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.req.send( null );\r\n\t\t} catch ( e ) {\r\n\t\t\tErrorMessage( e.message + \" url: \" + this.url, false, false );\r\n\t\t}\r\n\t}\r\n\r\n\tthis.XMLHttpRequestStop = function () {\r\n\t\t//console.log(\"XMLHttpRequestStop(...)\");\r\n\t\tif ( this.req == null )\r\n\t\t\treturn;\r\n\t\tthis.req.abort();\r\n\t}\r\n\r\n\tthis.ProcessReqChange = function ( processStatus200 ) {\r\n\t\tvar req = this.req;\r\n\t\tif ( ( typeof isIE === 'undefined' ) || !isIE ) {\r\n\t\t\t//\tconsole.log(\"processReqChange(); req.statusText: \" + req.statusText + \". req.status = \" + req.status + \". req.readyState = \" + req.readyState + \". req.responseText: \" + req.responseText);\r\n\t\t}\r\n\t\t// only if req shows \"complete\"\r\n\t\t//http://www.w3schools.com/ajax/ajax_xmlhttprequest_onreadystatechange.asp\r\n\t\t//http://xmlhttprequest.ru/w3c\r\n\t\tswitch ( req.readyState ) {\r\n\t\t\tcase 4://request finished and response is ready\r\n\t\t\t\t{\r\n\t\t\t\t\tif ( typeof req.status == \"unknown\" ) {//IE5 timeout\r\n\t\t\t\t\t\tconsoleError( 'typeof XMLHttpRequest status == \"unknown\"' );\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//� �� ���� ��������� switch ���� � ������\r\n\t\t\t\t\tif ( req.status == 200 )//OK)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tclearTimeout( this.timeout_id_SendReq );\r\n\t\t\t\t\t\treturn processStatus200( this );\r\n\t\t\t\t\t}//200://OK\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tErrorMessage( \"Invalid XMLHttpRequest status : \" + req.status + \" url: \" + this.url );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1://server connection established\r\n\t\t\tcase 2://request received\r\n\t\t\tcase 3://processing request\r\n\t\t\t\tbreak;\r\n\t\t\t//\t\tcase 404:\r\n\t\t\tcase 0://request not initialized\r\n\t\t\tdefault:\r\n\t\t\t\tthrow \"processReqChange(); req.readyState = \" + req.readyState;\r\n\t\t\t\tbreak;\r\n\t\t}//switch(req.readyState)\r\n\t\treturn true;\r\n\t}\r\n\r\n\tthis.processStatus200Error = function () {\r\n\t\tvar error = this.GetElementText( 'error', true );\r\n\t\tif ( error ) {\r\n\t\t\tErrorMessage( error );\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tthis.GetElementText = function ( tagName, noDisplayErrorMessage ) {\r\n\t\tvar xmlhttp = this.req;\r\n\t\tif ( !xmlhttp.responseXML ) {\r\n\t\t\tif ( noDisplayErrorMessage != true )\r\n\t\t\t\tErrorMessage( 'GetXMLElementText(xmlhttp, ' + tagName + '); xmlhttp.responseXML is null.\\nxmlhttp.responseText:\\n' + xmlhttp.responseText );\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tvar element = xmlhttp.responseXML.getElementsByTagName( tagName );\r\n\r\n\t\t//ATTENTION!!! For IE set the content-type m_HttpResponse.SetContentType(\"text/xml\");\r\n\r\n\t\tif ( element.length == 0 ) {\r\n\t\t\tif ( noDisplayErrorMessage != true )\r\n\t\t\t\tErrorMessage( 'GetXMLElementText(xmlhttp, \"' + tagName + '\"); element.length == ' + element.length );\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\t\tvar text = \"\";\r\n\t\tfor ( var i = 0; i < element.length; i++ ) {\r\n\t\t\tif ( typeof ( element[i].textContent ) == 'undefined' ) {\r\n\t\t\t\tif ( typeof ( element[i].text ) == 'undefined' ) {\r\n\t\t\t\t\tErrorMessage( 'GetXMLElementText(xmlhttp, ' + tagName + '); element[' + i + '].text) == undefined' );\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t}\r\n\t\t\t\tif ( text != \"\" )\r\n\t\t\t\t\ttext += \" \";\r\n\t\t\t\ttext += element[i].text;//IE\r\n\t\t\t}\r\n\t\t\telse text += element[i].textContent;//Chrome\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\tif ( options.data ) {\r\n\t\tthis.req = options.data.req;\r\n\t\tthis.url = options.data.url;\r\n\t\tthis.params = options.data.params;\r\n\t} else {\r\n\t\ttry {\r\n\t\t\tthis.req = this.loadXMLDoc();\r\n\t\t} catch ( e ) {\r\n\t\t\tvar message;\r\n\t\t\tif ( typeof e.message == 'undefined' )\r\n\t\t\t\tmessage = e;\r\n\t\t\telse message = e.message;\r\n\t\t\tErrorMessage( \"Your browser is too old and is not compatible with our site.\\n\\n\"\r\n\t\t\t\t+ window.navigator.appName + \" \" + window.navigator.appVersion + \"\\n\\n\" + message );\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\tif ( !this.req ) {\r\n\t\tconsoleError( \"Invalid myRequest.req: \" + this.req );\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction ErrorMessage( error ) {\r\n\r\n\t\tconsole.error( error );\r\n\t\toptions.onerror( error );\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * @callback onerror\r\n * @param {string} str - error details\r\n */\r\n\r\n/**\r\n * Synchronous load file\r\n * @param {string} url URL of an external file.\r\n * @param {Object} [options] followed options is available. Optional.\r\n * @param {Function} [options.onload] function () The onload event occurs when a script has been loaded. Optional.\r\n * @param {onerror} [options.onerror] function ( str ) The onerror event occurs when an error has been occured. Optional.\r\n * @returns {string} file content\r\n * @example\r\n * \r\n\t//Simplest example.\r\n\tdocument.getElementById( \"elID\" ).innerHTML = loadFile.sync('element.html');\r\n *\r\n * @example\r\n *\r\n\t//onload, onerror events.\r\n\tdocument.getElementById( \"elID\").innerHTML = loadFile.sync( 'element.html',\r\n\t{\r\n\t\tonload: function ( response ) {\r\n\r\n\t\t\tvar str = 'file has been loaded successfully';\r\n\t\t\tconsole.log( str );\r\n\r\n\t\t},\r\n\t\tonerror: function ( str, e ) {\r\n\r\n\t\t\tconsole.error( str );\r\n\r\n\t\t},\r\n\t}, );\r\n */\r\nfunction sync( url, options ) {\r\n\r\n\toptions = options || {};\r\n\toptions.onload = options.onload || function () { };\r\n\toptions.onerror = options.onerror || function () { };\r\n\r\n\tvar response,\r\n\t\trequest = new myRequest( options );\r\n\trequest.url = url;\r\n\trequest.XMLHttpRequestStart(\r\n\r\n\t\tfunction () {//onreadystatechange\r\n\r\n\t\t\trequest.ProcessReqChange( function ( myRequest ) {//processStatus200\r\n\r\n\t\t\t\tif ( myRequest.processStatus200Error() )\r\n\t\t\t\t\treturn;\r\n\t\t\t\tresponse = myRequest.req.responseText;\r\n\t\t\t\t//console.log( 'loadFile.sync.onload() ' + url );\r\n\t\t\t\toptions.onload( response, url );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\t\t, false//Synchronous mode\r\n\r\n\t);\r\n\t//console.log( 'sync(' + url + ')' );\r\n\treturn response;\r\n\r\n}\r\n\r\n/**\r\n * display a text to HTML\r\n * @param {string} str source text\r\n * @returns {string} escaped text\r\n */\r\nfunction escapeHtml( str ) {\r\n\r\n\treturn str.replace( /[&<>\"'\\/]/g, function ( s ) {\r\n\r\n\t\tvar entityMap = {\r\n\r\n\t\t\t\"&\": \"&amp;\",\r\n\t\t\t\"<\": \"&lt;\",\r\n\t\t\t\">\": \"&gt;\",\r\n\t\t\t'\"': '&quot;',\r\n\t\t\t\"'\": '&#39;',\r\n\t\t\t\"/\": '&#x2F;'\r\n\r\n\t\t};\r\n\r\n\t\treturn entityMap[s];\r\n\r\n\t} );\r\n}\r\n\r\nexport { sync, escapeHtml };\r\n","/**\r\n * node.js version of the load JavaScript file\r\n * @author Andrej Hristoliubov https://anhr.github.io/AboutMe/\r\n *\r\n * Thanks to:\r\n *http://javascript.ru/forum/events/21439-dinamicheskaya-zagruzka-skriptov.html\r\n *https://learn.javascript.ru/onload-onerror\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\n//Please download https://github.com/anhr/loadFileNodeJS into ../loadFileNodeJS folder\r\nimport { sync as loadFileSync, escapeHtml } from '../loadFileNodeJS/index.js';\r\n\r\n/**\r\n * @callback onerror\r\n * @param {string} str - error details\r\n */\r\n\r\n/**\r\n * Synchronous load JavaScript file\r\n * @param {string} src URL of an external script file.\r\n * @param {Object} [options] followed options is available. Optional.\r\n * @param {Function} [options.onload] function () The onload event occurs when a script has been loaded. Optional.\r\n * @param {onerror} [options.onerror] function ( str ) The onerror event occurs when an error has been occured. Optional.\r\n * @param {string}[options.appendTo] The node to which the new script will be append. Optional. Default is head node\r\n * @param {Object|string}[options.tag] The script's tag attributes (Object) or tag type (string). Optional.\r\n * Available tag types:\r\n *\t'style' - load a style file (.css extension)\r\n * @param {string} [options.tag.name] tag name. Default is 'script'\r\n * @param {Object} [options.tag.attribute] tag attribute. Optional.\r\n * @param {string} options.tag.attribute.name attribute name. Default is 'type'\r\n * @param {string} options.tag.attribute.value attribute value. Default is 'text/javascript'\r\n *\r\n * @example\r\n * \r\n\t//Simplest example. Append script into head node.\r\n\tloadScript.sync( 'sync.js' );\r\n\r\n * @example\r\n * \r\n\t//onload, onerror events. Append script into \"appendto\" element\r\n\tloadScript.sync( 'sync.js',\r\n\t\t{\r\n\t\t\tonload: function ( response ) {\r\n\r\n\t\t\t\tvar str = 'file has been loaded successfully';\r\n\t\t\t\tconsole.log( str );\r\n\r\n\t\t\t},\r\n\t\t\tonerror: function ( str, e ) {\r\n\r\n\t\t\t\telSync2Res.style.color = 'red';\r\n\r\n\t\t\t},\r\n\t\t\tappendTo: document.getElementById( \"appendto\" ),\r\n\t\t},\r\n\t);\r\n *\r\n * @example\r\n *\r\n\t//Append style into head node.\r\n\tloadScript.sync( \"controls.css\",\r\n\t{\r\n\t\t//style rel=\"stylesheet\"\r\n\t\ttag: {\r\n\r\n\t\t\tname: 'style',\r\n\t\t\tattribute: {\r\n\r\n\t\t\t\tname: 'rel',\r\n\t\t\t\tvalue: 'stylesheet',\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n */\r\nfunction sync( src, options ) {\r\n\r\n\toptions = options || {};\r\n\toptions.onload = options.onload || function () { };\r\n\toptions.onerror = options.onerror || function () { };\r\n\toptions.appendTo = options.appendTo || document.getElementsByTagName( 'head' )[0];\r\n\r\n\tif ( isScriptExists( options.appendTo, src ) ) {\r\n\r\n\t\t//options.onerror( 'duplicate downloading of the ' + src + ' file' );\r\n\t\toptions.onload();\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tif ( src instanceof Array ) {\r\n\r\n\t\tvar error,\r\n\t\t\toptionsItem = {\r\n\r\n\t\t\t\tappendTo: options.appendTo,\r\n\t\t\t\ttag: options.tag,\r\n\t\t\t\tonload: function ( response, url ) {\r\n\t\t\t\t\r\n\t\t\t\t\tconsole.log( 'loadScript.sync.onload: ' + url );\r\n\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tonerror: function ( str ) {\r\n\r\n\t\t\t\t\toptions.onerror( str );\r\n\t\t\t\t\terror = str;\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t};\r\n\t\tfor ( var i = 0; i < src.length; i++ ) {\r\n\r\n\t\t\tvar item = src[ i ];\r\n\t\t\tloadScriptBase( function ( script ) {\r\n\r\n\t\t\t\tscript.setAttribute( \"id\", item );\r\n\t\t\t\tscript.innerHTML = loadFileSync( item, optionsItem );\r\n\r\n\t\t\t}, optionsItem );\r\n\t\t\tif ( error !== undefined )\r\n\t\t\t\tbreak;\r\n\r\n\t\t};\r\n\t\tif ( error === undefined )\r\n\t\t\toptions.onload();\r\n\r\n\t} else loadScriptBase( function ( script ) {\r\n\r\n\t\tscript.setAttribute( \"id\", src );\r\n\t\tscript.innerHTML = loadFileSync( src, options );\r\n\r\n\t}, options );\r\n\r\n}\r\n\r\n/**\r\n * @callback onerrorasync\r\n * @param {string} str - error details\r\n * @param {Object} e - event\r\n */\r\n\r\n/**\r\n * Asynchronous load JavaScript file\r\n * @param {string|string[]} src URL of an external script file or array of the script file names.\r\n * @param {Object} [options] followed options is available. Optional.\r\n * @param {Function} [options.onload] function () The onload event occurs when a script has been loaded. Optional.\r\n * @param {onerrorasync} [options.onerror] function ( str, e ) The onerror event occurs when an error has been occured. Optional.\r\n * @param {string}[options.appendTo] The node to which the new script will be append. Optional. Default is head node\r\n * @param {Object}[options.tag] The script's tag attributes. Optional.\r\n * @param {string} options.tag.name tag name. Default is 'script'\r\n * @param {Object} [options.tag.attribute] tag attribute. Optional.\r\n * @param {string} options.tag.attribute.name attribute name. Default is 'type'\r\n * @param {string} options.tag.attribute.value attribute value. Default is 'text/javascript'\r\n*\r\n * @example\r\n * \r\n\t//Simplest example. Append script into head node.\r\n\tloadScript.async( \"JavaScript.js);\r\n * \r\n * @example\r\n *\r\n\t//onload, onerror events. Append script into \"appendto\" element\r\n\tloadScript.async( \"JavaScript.js\",\r\n\t{\r\n \t\tonload: function () {\r\n \r\n \t\t\tvar str = 'file has been loaded successfully';\r\n \t\t\tconsole.log( str );\r\n \r\n \t\t},\r\n \t\tonerror: function ( str, e ) {\r\n \r\n \t\t\tconsole.error( str );\r\n \r\n \t\t},\r\n \t\tappendTo: document.getElementById( \"appendto\" ),\r\n \r\n \t}\r\n \r\n  );\r\n *\r\n * @example\r\n *\r\n\t//loading of array of JavaScript files. Append script into head node.\r\n\tloadScript.async( [\r\n \t\t\"JavaScript1.js\",\r\n \t\t\"JavaScript2.js\",\r\n \t],\r\n \t{\r\n \t\tonload: function () {\r\n \r\n \t\t\tvar str = 'file has been loaded successfully';\r\n \t\t\tconsole.log( str );\r\n \r\n \t\t},\r\n \t\tonerror: function ( str, e ) {\r\n \r\n \t\t\tconsole.error( str );\r\n \r\n \t\t},\r\n \r\n \t}\r\n \r\n  );\r\n */\r\nfunction async( src, options ) {\r\n\r\n\toptions = options || {};\r\n\toptions.appendTo = options.appendTo || document.getElementsByTagName( 'head' )[ 0 ];\r\n\toptions.onload = options.onload || function () {};\r\n\r\n\tvar isrc;\r\n\r\n\tfunction async( srcAsync ) {\r\n\r\n\t\tfunction next() {\r\n\r\n\t\t\tif ( src instanceof Array && ( isrc < ( src.length - 1 ) ) ) {\r\n\r\n\t\t\t\tisrc++;\r\n\t\t\t\tasync( src[isrc] );\r\n\r\n\t\t\t} else options.onload();\r\n\r\n\t\t}\r\n\r\n\t\tif ( isScriptExists( options.appendTo, srcAsync, options.onload ) ) {\r\n\r\n\t\t\tnext();\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tloadScriptBase( function ( script ) {\r\n\r\n\t\t\tscript.setAttribute( \"id\", srcAsync );\r\n\r\n\t\t\tfunction _onload() {\r\n\r\n\t\t\t\tconsole.log( 'loadScript.async.onload() ' + srcAsync );\r\n\t\t\t\tif ( options.onload !== undefined ) {\r\n\r\n\t\t\t\t\tnext();\r\n/*\r\n\t\t\t\t\tif ( src instanceof Array && ( isrc < ( src.length - 1 ) ) ) {\r\n\r\n\t\t\t\t\t\tisrc++;\r\n\t\t\t\t\t\tasync( src[isrc] );\r\n\r\n\t\t\t\t\t} else options.onload();\r\n*/\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( script.readyState && ! script.onload ) {\r\n\r\n\t\t\t\t// IE, Opera\r\n\t\t\t\tscript.onreadystatechange = function () {\r\n\r\n\t\t\t\t\tif ( script.readyState == \"complete\" ) {\r\n\r\n\t\t\t\t\t\t// �� ������ �������� loaded\r\n\t\t\t\t\t\tif ( options.onload !== undefined ) options.onload(); // (2)\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( script.readyState == \"loaded\" ) {\r\n\r\n\t\t\t\t\t\tsetTimeout( options.onload, 0 ); // (1)\r\n\r\n\t\t\t\t\t\t// ������� ����������, ����� �� �������� �� complete\r\n\t\t\t\t\t\tthis.onreadystatechange = null;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Rest\r\n\t\t\t\tscript.onload = _onload;\r\n\r\n\t\t\t\tscript.onerror = function ( e ) {\r\n\r\n\t\t\t\t\tvar str = 'loadScript: \"' + this.src + '\" failed';\r\n\t\t\t\t\tif ( options.onerror !== undefined )\r\n\t\t\t\t\t\toptions.onerror( str, e );\r\n\t\t\t\t\tconsole.error( str );\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tscript.src = srcAsync;\r\n\r\n\t\t}, options );\r\n\r\n\t}\r\n\r\n\tif ( src instanceof Array ) {\r\n\r\n\t\tisrc = 0;\r\n\t\tasync( src[ isrc ] );\r\n\r\n\t} else async( src );\r\n\r\n}\r\n\r\nfunction loadScriptBase( callback, options ) {\r\n\r\n\toptions.tag = options.tag || {};\r\n\tif ( typeof options.tag === \"string\" ) {\r\n\r\n\t\tswitch ( options.tag ) {\r\n\r\n\t\t\tcase 'style':\r\n\t\t\t\toptions.tag = {\r\n\r\n\t\t\t\t\tname: 'style',\r\n\t\t\t\t\tattribute: {\r\n\r\n\t\t\t\t\t\tname: 'rel',\r\n\t\t\t\t\t\tvalue: 'stylesheet',\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: console.error( 'Invalid options.tag: ' + options.tag );\r\n\t\t\t\treturn;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\toptions.tag.name = options.tag.name || 'script';\r\n\tvar script = document.createElement( options.tag.name );\r\n\r\n\toptions.tag.attribute = options.tag.attribute || {};\r\n\toptions.tag.attribute.name = options.tag.attribute.name || \"type\";\r\n\toptions.tag.attribute.value = options.tag.attribute.value || 'text/javascript';\r\n\tscript.setAttribute( options.tag.attribute.name, options.tag.attribute.value );\r\n\r\n\tcallback( script );\r\n\toptions.appendTo.appendChild( script );\r\n\r\n}\r\n\r\nfunction isScriptExists( elParent, srcAsync, onload ) {\r\n\r\n\tvar scripts = elParent.querySelectorAll( 'script' );\r\n\tfor ( var i = 0; i < scripts.length; i++ ) {\r\n\r\n\t\tvar child = scripts[i];\r\n\t\tif ( child.id === srcAsync ) {\r\n\r\n/*\r\n\t\t\tif ( onload !== undefined )\r\n\t\t\t\tonload();\r\n*/\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\treturn false;\r\n\r\n}\r\n\r\nexport { async, sync, escapeHtml };\r\n","﻿/**\r\n * node.js version of download of the scripts.\r\n * \r\n * @author Andrej Hristoliubov https://anhr.github.io/AboutMe/\r\n *\r\n * Copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\nimport { sync, async } from './index.js';\r\n\r\nvar loadScript = {\r\n\r\n\tsync: sync,\r\n\tasync: async,\r\n\r\n}\r\nexport default loadScript;\r\n","﻿/**\r\n * @module DropdownMenu\r\n * @description node.js version of DropdownMenu\r\n * \r\n * @author [Andrej Hristoliubov]{@link https://anhr.github.io/AboutMe/}\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\nimport loadScript from '../loadScriptNodeJS/loadScript.js';\r\n\r\nvar optionsStyle = {\r\n\r\n\t//style rel=\"stylesheet\"\r\n\ttag: 'style'\r\n\r\n}\r\n//Attention! Load menu.css file before other css files for correctly priority of the styles\r\nloadScript.sync( './styles/menu.css', optionsStyle );\r\nloadScript.sync( './styles/Decorations/transparent.css', optionsStyle );\r\nloadScript.sync( './styles/Decorations/gradient.css', optionsStyle );\r\n/*\r\nloadScript.sync( 'https://raw.githack.com/anhr/DropdownMenu/master/styles/menu.css', optionsStyle );\r\nloadScript.sync( 'https://raw.githack.com/anhr/DropdownMenu/master/styles/Decorations/transparent.css', optionsStyle );\r\nloadScript.sync( 'https://raw.githack.com/anhr/DropdownMenu/master/styles/Decorations/gradient.css', optionsStyle );\r\n*/\r\n\r\n/**\r\n * Creates new menu\r\n * @param {Object[]} arrayMenu array of menu and submenu items. If string then menu item name. If object then options of the new menu item:\r\n * @param {String|HTMLElement} [arrayMenu.name] if string then menu item name. If HTMLElement then item element. Optional.\r\n * @param {String} [arrayMenu.title] menu item title. Optional.\r\n * @param {String} [arrayMenu.id] menu item identifier. Optional.\r\n * @param {String} [arrayMenu.style] menu item style. Example: \"float: right;\" Optional.\r\n * @param {Array} [arrayMenu.items] array of submenu items. Same as menu item. Optional.\r\n * @param {Function} [arrayMenu.onclick] function(event) called when user has clicked a menu item. event - event details. Optional.\r\n * @param {Object} [arrayMenu.drop] direction of drop of the submenu. Following directions is available: If string then \"up\" - drop submenu to up. \"left\" - shift submenu to left. If object then following members is available: \"up: true\" and \"left: true\".\r\n * @param {boolean} [arrayMenu.drop.up] true - drop submenu to up.\r\n * @param {boolean} [arrayMenu.drop.left] true - shift submenu to left.\r\n * @param {boolean} [arrayMenu.radio] true - defines a radio menu item.\r\n * @param {boolean} [arrayMenu.checkbox] true - defines a checkbox menu item.\r\n * @param {boolean} [arrayMenu.checked] true - checked state of a checkbox or radio menu item.\r\n *\r\n * @param {Object} [options] followed options is available. Optional.\r\n * @param {HTMLElement} [options.elParent] Parent element of new menu. Optional. Default is \"body\" element.\r\n * @param {HTMLElement} [options.canvas] canvas element. Use if you want put a menu inside a canvas. See \"button inside canvas\" example below for details. Optional.\r\n * @param {String} [options.decorations] Optional. You can decorate your menu by a built-in style or use your custom style. Currently two built-in styles is available:\r\n * 'Gradient' - use gradient.css file for decoration.\r\n * 'Transparent' - use transparent.css file for decoration.\r\n * Custom decoration:\r\n * 'Custom' please edit the custom.css file from my example if you want a custom decoration of your menu.\r\n *\r\n * @example\r\n *\r\n\t//Drop menu to the left or/and up.\r\n\t<script>\r\n\t\tdropdownMenu.create( [\r\n\r\n\t\t\t{\r\n\r\n\t\t\t\tname: 'Drop up',\r\n\t\t\t\tdrop: 'up',\r\n\t\t\t\titems: [\r\n\r\n\t\t\t\t\t'up item 1',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'up item 2',\r\n\t\t\t\t\t\tonclick: function ( event ) {\r\n\r\n\t\t\t\t\t\t\tvar message = 'up item 2 onclick';\r\n\t\t\t\t\t\t\t//console.log( message );\r\n\t\t\t\t\t\t\talert( message )\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t],\r\n\r\n\t\t\t},\r\n\t\t\t{\r\n\r\n\t\t\t\tname: 'Left',\r\n\t\t\t\tdrop: 'left',\r\n\t\t\t\titems: [\r\n\r\n\t\t\t\t\t'left item 1',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'left item 2',\r\n\t\t\t\t\t\tonclick: function ( event ) {\r\n\r\n\t\t\t\t\t\t\tvar message = 'left item 2 onclick';\r\n\t\t\t\t\t\t\t//console.log( message );\r\n\t\t\t\t\t\t\talert( message )\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t],\r\n\r\n\t\t\t},\r\n\t\t\t{\r\n\r\n\t\t\t\tname: 'Up left',\r\n\t\t\t\tdrop:\r\n\t\t\t\t{\r\n\r\n\t\t\t\t\tleft: true,\r\n\t\t\t\t\tup: true,\r\n\r\n\t\t\t\t},\r\n\t\t\t\titems: [\r\n\r\n\t\t\t\t\t'up left item 1',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: 'up left item 2',\r\n\t\t\t\t\t\tonclick: function ( event ) {\r\n\r\n\t\t\t\t\t\t\tvar message = 'up left item 2 onclick';\r\n\t\t\t\t\t\t\t//console.log( message );\r\n\t\t\t\t\t\t\talert( message )\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t],\r\n\r\n\t\t\t},\r\n\r\n\t\t], {\r\n\r\n\t\t\t\tdecorations: 'Gradient',\r\n\r\n\t\t\t} );\r\n\t</script>\r\n *\r\n * @example\r\n * \r\n\t//button inside canvas\r\n\t<div class=\"container\" id=\"containerDSE\">\r\n\t\t<canvas id=\"canvas\"></canvas>\r\n\t</div>\r\n\t<script>\r\n\tvar elContainer = document.getElementById( \"containerDSE\" ),\r\n\telCanvas = elContainer.querySelector( 'canvas' );\r\n\r\n\tdropdownMenu.create( [\r\n\r\n\t\t{\r\n\r\n\t\t\tname: 'Button',\r\n\t\t\tonclick: function ( event ) {\r\n\r\n\t\t\t\tvar message = 'Button onclick';\r\n\t\t\t\t//console.log( message );\r\n\t\t\t\talert( message )\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t], {\r\n\r\n\t\telParent: elContainer,\r\n\t\tcanvas: elCanvas,\r\n\t\tdecorations: 'Transparent',\r\n\r\n\t} );\r\n\t</script>\r\n *\r\n */\r\nexport function create( arrayMenu, options ) {\r\n\r\n\toptions = options || {};\r\n\toptions.elParent = options.elParent || document.querySelector( 'body' );\r\n\r\n\t//create menu element\r\n\tvar elMenu = document.createElement( 'menu' );\r\n\tif ( options.elParent.classList.contains( \"container\" ) )\r\n\t\telMenu.className = 'controls';\r\n\r\n\tvar timeoutControls;\r\n\tfunction displayControls() {\r\n\r\n\t\telMenu.style.opacity = 1;\r\n\t\tclearTimeout( timeoutControls );\r\n\t\ttimeoutControls = setTimeout( function () {\r\n\r\n\t\t\telMenu.style.opacity = 0;\r\n\r\n\t\t}, 5000 );\r\n\r\n\t}\r\n\tif ( options.canvas ) {\r\n\r\n\t\telMenu.style.opacity = 0;\r\n\t\toptions.canvas.onmouseout = function ( event ) {\r\n\r\n\t\t\telMenu.style.opacity = 0;\r\n\r\n\t\t}\r\n\t\toptions.canvas.onmousemove = function ( event ) {\r\n\r\n\t\t\tdisplayControls();\r\n\r\n\t\t}\r\n\t\telMenu.onmousemove = function ( event ) {\r\n\r\n\t\t\tdisplayControls();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\toptions.elParent.appendChild( elMenu );\r\n\r\n\tarrayMenu.forEach( function ( menuItem ) {\r\n\r\n\t\tvar dropdownChild = 'dropdown-child';\r\n\t\tfunction moveUpLeft( drop ) {\r\n\r\n\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\tvar display = elDropdownChild.style.display;\r\n\t\t\t\telDropdownChild.style.display = 'block';\r\n\t\t\t\tif ( drop.up )\r\n\t\t\t\t\telDropdownChild.style.top = '-' + ( elDropdownChild.offsetHeight/* + borderWidth*/ ) + 'px';\r\n\t\t\t\telse elDropdownChild.style.top = ( elMenuButton.offsetHeight/* - borderWidth + top*/ -1 ) + 'px';\r\n\t\t\t\tif ( drop.left )\r\n\t\t\t\t\telDropdownChild.style.left = ( elMenuButton.offsetWidth - elDropdownChild.offsetWidth/* - borderWidth*/ ) + 'px';\r\n\t\t\t\telDropdownChild.style.display = display;//'none';\r\n\r\n\t\t\t}, 0 );\r\n\r\n\t\t}\r\n\r\n\r\n\t\t//Create menuButton class element\r\n\t\tvar elMenuButton = document.createElement( 'span' );\r\n\t\telMenuButton.className =\r\n\t\t\t'menuButton' + ( options.decorations === undefined ? '' : ' menuButton' + options.decorations );\r\n\r\n\t\tif ( menuItem.style !== undefined )\r\n\t\t\telMenuButton.style.cssText = menuItem.style;\r\n\r\n\t\tif ( menuItem.radio !== undefined )\r\n\t\t\telMenuButton.style.cssText = menuItem.style;\r\n\r\n\t\tif ( menuItem.onclick !== undefined )\r\n\t\t\telMenuButton.onclick = menuItem.onclick;\r\n\t\tif ( menuItem.id !== undefined )\r\n\t\t\telMenuButton.id = menuItem.id;\r\n\r\n\t\tvar name;\r\n\t\tif ( typeof menuItem === 'string' )\r\n\t\t\tname = menuItem;\r\n\t\telse {\r\n\r\n\t\t\tname = menuItem.name;\r\n\r\n\t\t\tif ( menuItem.id )\r\n\t\t\t\telMenuButton.id = menuItem.id;\r\n\t\t\tif ( menuItem.title )\r\n\t\t\t\telMenuButton.title = menuItem.title;\r\n\r\n\t\t}\r\n\r\n\t\t//Create name span\r\n\t\tswitch ( typeof name ) {\r\n\t\t\tcase \"object\":\r\n\t\t\t\telMenuButton.appendChild( name );\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"string\":\r\n\t\t\tcase \"undefined\":\r\n\t\t\t\telMenuButton.innerHTML = name;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault: console.error( 'Invalid typeof name: ' + typeof name );\r\n\t\t}\r\n\r\n\t\t//Create dropdown-child items\r\n\t\tif ( menuItem.items ) {\r\n\r\n\t\t\tvar elDropdownChild = document.createElement( 'span' );\r\n\t\t\telDropdownChild.className = dropdownChild + ' ' + dropdownChild + ( options.decorations === undefined ? 'Default' : options.decorations );\r\n\t\t\telDropdownChild.title = '';\r\n\t\t\telMenuButton.appendChild( elDropdownChild );\r\n\r\n\t\t\t//for compatibility with firefox\r\n//\t\t\tgetMenuButtonBorderWidth();\r\n\r\n\t\t\tmenuItem.items.forEach( function ( itemItem ) {\r\n\r\n\t\t\t\t//Create name span\r\n\t\t\t\tvar elName = document.createElement( 'nobr' ),\r\n\t\t\t\t\tclassChecked = 'checked';\r\n\t\t\t\tfunction getItemName(item) {\r\n\r\n\t\t\t\t\tvar str = typeof item === 'string' ?\r\n\t\t\t\t\t\titem :\r\n\t\t\t\t\t\t\titem.radio === true ?\r\n\t\t\t\t\t\t\t( item.checked ? '◉' : '◎' ) + ' ' + item.name\r\n\t\t\t\t\t\t\t: item.checkbox === true ? ( item.checked ? '☑' : '☐' ) + ' ' + item.name : item.name;//✓🗹\r\n\t\t\t\t\t//console.log(str);\r\n\t\t\t\t\treturn str;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tfunction getElementFromEvent( event ) {\r\n\t\t\t\t\tif ( !event ) event = window.event;//for IE6\r\n\t\t\t\t\treturn event.target || event.srcElement;\r\n\t\t\t\t}\r\n\t\t\t\tvar name;\r\n\t\t\t\tif ( typeof itemItem === 'string' )\r\n\t\t\t\t\tname = itemItem;\r\n\t\t\t\telse {\r\n\r\n\t\t\t\t\tname = itemItem.name;\r\n\t\t\t\t\telName.onclick = function ( event ) {\r\n\r\n\t\t\t\t\t\tif ( itemItem.radio === true ) {\r\n\r\n//\t\t\t\t\t\t\tconsole.log( 'radio onclick ' + elName.innerHTML );\r\n\t\t\t\t\t\t\tmenuItem.items.forEach( function ( item ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( item.radio === true ) {\r\n\r\n\t\t\t\t\t\t\t\t\tif ( getElementFromEvent( event ) === item.elName ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\titem.checked = true;\r\n\t\t\t\t\t\t\t\t\t\titem.elName.classList.add( classChecked );\r\n\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\t\titem.checked = false;\r\n\t\t\t\t\t\t\t\t\t\titem.elName.classList.remove( classChecked );\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\titem.elName.innerHTML = getItemName( item );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\t} else if ( itemItem.checkbox === true ) {\r\n\r\n//\t\t\t\t\t\t\tconsole.log( 'checkbox onclick ' + elName.innerHTML );\r\n\t\t\t\t\t\t\tif ( itemItem.checked === true ) {\r\n\r\n\t\t\t\t\t\t\t\titemItem.elName.classList.add( classChecked );\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\titemItem.elName.classList.remove( classChecked );\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\titemItem.checked = !itemItem.checked;\r\n\t\t\t\t\t\t\titemItem.elName.innerHTML = getItemName( itemItem );\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( itemItem.onclick )\r\n\t\t\t\t\t\t\titemItem.onclick( event );\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( itemItem.radio === true )\r\n\t\t\t\t\telName.classList.add( 'radio' );\r\n\t\t\t\tif ( itemItem.checkbox === true )\r\n\t\t\t\t\telName.classList.add( 'checkbox' );\r\n\t\t\t\telName.innerHTML = getItemName( itemItem );\r\n\r\n\t\t\t\tif ( itemItem.checked === true )\r\n\t\t\t\t\telName.classList.add( classChecked );\r\n\r\n\t\t\t\telDropdownChild.appendChild( elName );\r\n\t\t\t\tif ( typeof itemItem !== \"string\")\r\n\t\t\t\t\titemItem.elName = elName;\r\n\r\n\t\t\t} );\r\n\r\n\t\t\tif ( typeof menuItem.drop === 'object' ) {\r\n\r\n\t\t\t\tmoveUpLeft( menuItem.drop );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tswitch ( menuItem.drop ) {\r\n\r\n\t\t\t\t\tcase 'up':\r\n\t\t\t\t\t\tmoveUpLeft( {\r\n\r\n\t\t\t\t\t\t\tup: true,\r\n\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'left':\r\n\t\t\t\t\t\tmoveUpLeft( {\r\n\r\n\t\t\t\t\t\t\tleft: true,\r\n\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase undefined:\r\n\t\t\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\t\t\telDropdownChild.style.left = '-' + elMenuButton.clientWidth + 'px';\r\n\t\t\t\t\t\t\telDropdownChild.style.top = ( elMenuButton.offsetHeight/* - getMenuButtonBorderWidth()*/ - 1 ) + 'px';\r\n\r\n\t\t\t\t\t\t}, 0 );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault: console.error( 'Invalid menuItem.drop: ' + menuItem.drop );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\telMenu.appendChild( elMenuButton );\r\n\r\n\t} );\r\n\treturn elMenu;\r\n\r\n}\r\n","/**\r\n * @module menuPlay\r\n * @description My dropdown menu for canvas in my version of [dat.gui](https://github.com/anhr/dat.gui) for playing of 3D objects in my projects.\r\n * \r\n * @author [Andrej Hristoliubov]{@link https://anhr.github.io/AboutMe/}\r\n *\r\n * @copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * @license under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\n//import { lang } from '../index.js';\r\nimport { lang } from '../controllerPlay/index.js';\r\n\r\nimport { create as dropdownMenuCreate } from '../DropdownMenu/index.js';\r\n\r\n//Please download https://github.com/anhr/three.js to '../../DropdownMenu/master/' folder\r\n\r\n/**\r\n * @callback onFullScreen\r\n * @param {boolean} fullScreen true - full screen mode of the canvas.\r\n * @param {HTMLElement} elContainer container of the canvas.\r\n */\r\n\r\n/**\r\n * @callback onFullScreenToggle\r\n */\r\n\r\n/**\r\n * dropdown menu for canvas for playing of 3D objects\r\n * @param {HTMLElement|String} elContainer if the HTMLElement, is a container element for canvas. If the String, is id of a container element for canvas.\r\n * @param {Object} [options] optional options.\r\n * @param {Object} [options.stereoEffect] new THREE.StereoEffect(...) https://github.com/anhr/three.js/blob/dev/examples/js/effects/StereoEffect.js\r\n * @param {Object} [options.player] new Player(...) playing of 3D ojbects in my projects. Defauilt is undefined\r\n * See myThreejs\\player.js for details.\r\n * @param {onFullScreen} [options.onFullScreen] fullscreen mode of the canvas. Defauilt is undefined\r\n * @param {onFullScreenToggle} [options.onFullScreenToggle] user toggled fullscreen mode of the canvas. Defauilt is undefined\r\n * @param {THREE} [options.THREE] THREE {@link https://github.com/anhr/three.js|THREE}. Defauilt is undefined\r\n */\r\nexport function create( elContainer, options ) {\r\n\r\n\tvar elCanvas = elContainer.querySelector( 'canvas' );\r\n\r\n\toptions = options || {};\r\n\r\n\tif ( options.THREE == undefined )\r\n\t\toptions.THREE = THREE;\r\n\tif ( typeof options.THREE === \"undefined\" ) {\r\n\r\n\t\tconsole.error( 'menuPlay.create: THREE = ' + THREE );\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tvar stereoEffect, spatialMultiplexsIndexs;\r\n\tif ( options.stereoEffect !== undefined ) {\r\n\r\n\t\tspatialMultiplexsIndexs = options.stereoEffect.spatialMultiplexsIndexs;\r\n\t\tstereoEffect = options.stereoEffect.stereoEffect;\r\n\r\n\t}\r\n\r\n\tvar menu = [], menuItemStereoEffect;\r\n\r\n\t//stereoEffect\r\n\tif ( options.stereoEffect ) {\r\n\r\n\t\tmenuItemStereoEffect = {\r\n\r\n\t\t\tname: '⚭',\r\n\t\t\ttitle: lang.stereoEffects,//'Stereo effects',\r\n\t\t\tid: 'menuButtonStereoEffects',\r\n\t\t\tdrop: 'up',\r\n\t\t\titems: [\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tname: lang.mono,//'Mono',\r\n\t\t\t\t\tradio: true,\r\n\t\t\t\t\tchecked: true,\r\n\t\t\t\t\tspatialMultiplex: spatialMultiplexsIndexs.Mono,\r\n\t\t\t\t\tonclick: function ( event ) {\r\n\r\n\t\t\t\t\t\tif ( stereoEffect.setSpatialMultiplex !== undefined )\r\n\t\t\t\t\t\t\tstereoEffect.setSpatialMultiplex( spatialMultiplexsIndexs.Mono );\r\n\t\t\t\t\t\telse stereoEffect.options.spatialMultiplex = spatialMultiplexsIndexs.Mono;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tname: lang.sideBySide,//'Side by side',\r\n\t\t\t\t\tradio: true,\r\n\t\t\t\t\tspatialMultiplex: spatialMultiplexsIndexs.SbS,\r\n\t\t\t\t\tonclick: function ( event ) {\r\n\r\n\t\t\t\t\t\tif ( stereoEffect.setSpatialMultiplex !== undefined )\r\n\t\t\t\t\t\t\tstereoEffect.setSpatialMultiplex( spatialMultiplexsIndexs.SbS );\r\n\t\t\t\t\t\telse stereoEffect.options.spatialMultiplex = spatialMultiplexsIndexs.SbS;\r\n\t\t\t\t\t\t//\t\t\t\t\t\tsetFullScreenButton( true );\r\n\t\t\t\t\t\tif ( options.onFullScreen )\r\n\t\t\t\t\t\t\toptions.onFullScreen( true );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tname: lang.topAndBottom,//'Top and bottom',\r\n\t\t\t\t\tradio: true,\r\n\t\t\t\t\tspatialMultiplex: spatialMultiplexsIndexs.TaB,\r\n\t\t\t\t\tonclick: function ( event ) {\r\n\r\n\t\t\t\t\t\tif ( stereoEffect.setSpatialMultiplex !== undefined )\r\n\t\t\t\t\t\t\tstereoEffect.setSpatialMultiplex( spatialMultiplexsIndexs.TaB );\r\n\t\t\t\t\t\telse stereoEffect.options.spatialMultiplex = spatialMultiplexsIndexs.TaB;\r\n\t\t\t\t\t\t//\t\t\t\t\t\tsetFullScreenButton( true );\r\n\t\t\t\t\t\tif ( options.onFullScreen )\r\n\t\t\t\t\t\t\toptions.onFullScreen( true );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t],\r\n\r\n\t\t}\r\n\t\tmenu.push( menuItemStereoEffect );\r\n\r\n\t}\r\n\r\n\tif ( options.player !== undefined ) {\r\n\r\n\t\t//Previous button\r\n\t\tmenu.push( {\r\n\r\n\t\t\tname: lang.prevSymbol,\r\n\t\t\ttitle: lang.prevSymbolTitle,\r\n\t\t\tonclick: function ( event ) {\r\n\r\n\t\t\t\toptions.player.prev();\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\t//Play button\r\n\t\tmenu.push( {\r\n\r\n\t\t\tname: lang.playSymbol,\r\n\t\t\ttitle: lang.playTitle,\r\n\t\t\tid: \"menuButtonPlay\",\r\n\t\t\tonclick: function ( event ) {\r\n\r\n\t\t\t\toptions.player.play3DObject();\r\n//\t\t\t\tplayController.play();\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\t//Repeat button\r\n\t\tmenu.push( {\r\n\r\n\t\t\tname: lang.repeat,\r\n\t\t\ttitle: options.player.getOptions().repeat ? lang.repeatOff : lang.repeatOn,\r\n\t\t\tid: \"menuButtonRepeat\",\r\n\t\t\tonclick: function ( event ) {\r\n\r\n//\t\t\t\tplayController.repeat();\r\n\t\t\t\toptions.player.repeat();\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\t//Next button\r\n\t\tmenu.push( {\r\n\r\n\t\t\tname: lang.nextSymbol,\r\n\t\t\ttitle: lang.nextSymbolTitle,\r\n\t\t\tonclick: function ( event ) {\r\n\r\n\t\t\t\toptions.player.next();\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\t//Full Screen button\r\n\tfunction fullScreenSettings( canvasMenu ) {\r\n\r\n\t\tvar fullScreen = false, style;\r\n\t\tthis.isFullScreen = function () { return fullScreen; }\r\n\t\tthis.setFullScreen = function ( res, fs ) {\r\n\r\n\t\t\tvar size = new options.THREE.Vector2();\r\n\t\t\tres.renderer.getSize( size );\r\n\t\t\tfullScreen = fs;\r\n\t\t\tif ( fullScreen ) {\r\n\r\n\t\t\t\tif ( style !== undefined ) {\r\n\r\n\t\t\t\t\t//restore size of the canvas\r\n\t\t\t\t\tres.renderer.setSize( style.sizeOriginal.x, style.sizeOriginal.y );\r\n\t\t\t\t\tres.renderer.domElement.style.position = style.position;\r\n\t\t\t\t\tres.renderer.domElement.style.left = style.left;\r\n\t\t\t\t\tres.renderer.domElement.style.top = style.top;\r\n\t\t\t\t\tres.renderer.domElement.style.width = style.width;\r\n\t\t\t\t\tres.renderer.domElement.style.height = style.height;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( style === undefined ) {\r\n\r\n\t\t\t\t\tstyle = {\r\n\r\n\t\t\t\t\t\tsizeOriginal: new options.THREE.Vector2(),\r\n\t\t\t\t\t\tposition: res.renderer.domElement.style.position,\r\n\t\t\t\t\t\tleft: res.renderer.domElement.style.left,\r\n\t\t\t\t\t\ttop: res.renderer.domElement.style.top,\r\n\t\t\t\t\t\twidth: res.renderer.domElement.style.width,\r\n\t\t\t\t\t\theight: res.renderer.domElement.style.height,\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tres.renderer.getSize( style.sizeOriginal );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Full screen of the canvas\r\n\t\t\t\tres.renderer.setSize( window.innerWidth, window.innerHeight );\r\n\t\t\t\tres.renderer.domElement.style.position = 'fixed';\r\n\t\t\t\tres.renderer.domElement.style.left = 0;\r\n\t\t\t\tres.renderer.domElement.style.top = 0;\r\n\t\t\t\tres.renderer.domElement.style.width = '100%';\r\n\t\t\t\tres.renderer.domElement.style.height = '100%';\r\n\r\n\t\t\t}\r\n\t\t\tres.camera.aspect = size.x / size.y;\r\n\t\t\tres.camera.updateProjectionMatrix();\r\n\t\t\tfullScreen = !fullScreen;\r\n\t\t\tcanvasMenu.setFullScreenButton( fullScreen );\r\n\r\n\t\t}\r\n\t\tthis.onclick = function () {\r\n\r\n\t\t\tif (\r\n\t\t\t\t( options.stereoEffect !== undefined )\r\n\t\t\t\t&& ( parseInt( stereoEffect.options.spatialMultiplex ) !== spatialMultiplexsIndexs.Mono )\r\n\t\t\t) {\r\n\r\n\t\t\t\talert( 'You can not change the fullscreen mode of the canvas if stereo effect mode is stereo.' );\r\n\t\t\t\treturn false;//do not change the fullscreen mode of the canvas if stereo effect is stereo\r\n\r\n\t\t\t}\r\n\t\t\tif ( options.onFullScreenToggle !== undefined ) {\r\n\r\n\t\t\t\tvar res = options.onFullScreenToggle( fullScreen );\r\n\t\t\t\tif ( res === undefined ) {\r\n\r\n\t\t\t\t\tconsole.error( 'onFullScreenToggle: please return an object' );\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( res.renderer === undefined ) {\r\n\r\n\t\t\t\t\tconsole.error( 'onFullScreenToggle: please return an object.renderer' );\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.setFullScreen( res, fullScreen );\r\n\t\t\treturn fullScreen;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\tvar fullScreenSettings = new fullScreenSettings( this );\r\n\tthis.isFullScreen = function() { return fullScreenSettings.isFullScreen(); }\r\n\tthis.setFullScreen = function( fullScreen ) { return fullScreenSettings.setFullScreen( fullScreen ); }\r\n\tmenu.push( {\r\n\r\n\t\tstyle: 'float: right;',\r\n\t\tid: \"menuButtonFullScreen\",\r\n\t\tonclick: function ( event ) {\r\n\r\n\t\t\tfullScreenSettings.onclick();\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n\t//Play slider\r\n\tif ( options.player !== undefined ) {\r\n\r\n\t\tmenu.push( {\r\n\r\n\t\t\tname: '<input type=\"range\" min=\"0\" max=\"' + ( options.player.getSettings().marks - 1 ) + '\" value=\"0\" class=\"slider\" id=\"sliderPosition\">',\r\n\t\t\tstyle: 'float: right;',\r\n//\t\t\ttitle: sliderTitle + 0,\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\telMenu = dropdownMenuCreate( menu, {\r\n\r\n\t\telParent: typeof elContainer === \"string\" ? document.getElementById( elContainer) : elContainer,\r\n\t\tcanvas: typeof elCanvas === \"string\" ? document.getElementById( elCanvas ) : elCanvas,\r\n\t\tdecorations: 'Transparent',\r\n\r\n\t} );\r\n\tif ( options.onOver !== undefined ) {\r\n\r\n\t\telMenu.addEventListener( 'mouseenter', function(event) { options.onOver( true ); });\r\n\t\telMenu.addEventListener( 'mouseleave', function ( event ) { options.onOver( false ); } );\r\n\t\t\t\t\t\r\n\t}\r\n\telSlider = elMenu.querySelector( '#sliderPosition' );\r\n\tif ( elSlider !== null ) {\r\n\r\n\t\telSlider.onchange = function ( event ) {\r\n\r\n\t\t\toptions.player.selectScene( parseInt( elSlider.value ) );\r\n\r\n\t\t};\r\n\t\telSlider.oninput = function ( event ) {\r\n\r\n\t\t\toptions.player.selectScene( parseInt( elSlider.value ) );\r\n\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tthis.setFullScreenButton = function( fullScreen ) {\r\n\r\n\t\tvar elMenuButtonFullScreen = elContainer.querySelector( '#menuButtonFullScreen' );//document.getElementById( 'menuButtonFullScreen' );\r\n\t\tif ( elMenuButtonFullScreen === null )\r\n\t\t\treturn true;\r\n\t\tif ( fullScreen ) {\r\n\r\n\t\t\telMenuButtonFullScreen.innerHTML = '⤦';\r\n\t\t\telMenuButtonFullScreen.title = lang.nonFullScreen;\r\n\r\n\t\t} else {\r\n\r\n\t\t\telMenuButtonFullScreen.innerHTML = '⤢';\r\n\t\t\telMenuButtonFullScreen.title = lang.fullScreen;\r\n\r\n\t\t}\r\n\t\treturn true;\r\n\r\n\t}\r\n//\tthis.setFullScreenButton = setFullScreenButton;\r\n\tthis.setFullScreenButton();\r\n\r\n\t/**\r\n\t * sets size of the slider element of the menu\r\n\t * @param {Number} width width of the canvas\r\n\t * @param {Number} height height of the canvas\r\n\t */\r\n\tthis.setSize = function ( width, height ) {\r\n\t\tif ( elMenu === undefined )\r\n\t\t\treturn;\r\n\t\tvar itemWidth = 0;\r\n\t\t//elMenu.childNodes.forEach( function ( menuItem )not compatible with IE 11\r\n\t\tfor ( var i = 0; i < elMenu.childNodes.length; i++ ) {\r\n\r\n\t\t\tvar menuItem = elMenu.childNodes[i];\r\n\t\t\tvar computedStyle = window.getComputedStyle( menuItem ),\r\n\t\t\t\tstyleWidth =\r\n\t\t\t\t\tparseInt( computedStyle[\"margin-left\"] ) +\r\n\t\t\t\t\tparseInt( computedStyle[\"margin-right\"] ) +\r\n\t\t\t\t\tparseInt( computedStyle[\"padding-left\"] ) +\r\n\t\t\t\t\tparseInt( computedStyle[\"padding-right\"] )\r\n\t\t\t\t;\r\n\t\t\tvar elSliderCur = menuItem.querySelector( '.slider' );\r\n\t\t\tif ( elSliderCur === null )\r\n\t\t\t\titemWidth += menuItem.offsetWidth + styleWidth;\r\n\t\t\telse {\r\n\r\n\t\t\t\telSlider = elSliderCur;//menuItem;\r\n\t\t\t\titemWidth += styleWidth;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( elSlider === null )\r\n\t\t\treturn;//no controllerPlay\r\n\t\tvar sliderWidth = width - itemWidth;\r\n\t\tif ( sliderWidth > 0 ) {\r\n\r\n\t\t\telSlider.parentElement.style.width = sliderWidth + 'px';\r\n\r\n\t\t}\r\n\r\n\t}\r\n\tthis.setIndex = function ( index, title ) {\r\n\r\n\t\telSlider.value = index;\r\n//\t\telSlider.title = sliderTitle + t;\r\n\t\telSlider.title = title;\r\n\r\n\t}\r\n\tthis.onRenamePlayButtons = function ( playing ) {\r\n\r\n\t\tvar name, title;\r\n\t\tif ( playing ) {\r\n\r\n\t\t\tname = lang.pause;\r\n\t\t\ttitle = lang.pauseTitle;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tname = lang.playSymbol;\r\n\t\t\ttitle = lang.playTitle;\r\n\r\n\t\t}\r\n\t\tvar elMenuButtonPlay = elMenu.querySelector( '#menuButtonPlay' );\r\n\t\telMenuButtonPlay.innerHTML = name;\r\n\t\telMenuButtonPlay.title = title;\r\n//\t\t_renamePlayButtons( name, title, true );\r\n\r\n\t}\r\n\tthis.onChangeRepeat = function () {\r\n\r\n\t\tvar elMenuButtonRepeat = elMenu.querySelector( '#menuButtonRepeat' );\r\n\t\telMenuButtonRepeat.title = options.player.getOptions().repeat ? lang.repeatOff : lang.repeatOn;\r\n\r\n\t}\r\n\tthis.onChangeScale = function ( scale ) {\r\n\r\n\t\tif ( options.player === undefined )\r\n\t\t\treturn;\r\n/*\t\t\t\r\n\t\tvar optionsPlayer = options.player.getOptions();\r\n\t\toptionsPlayer.marks = scale.marks;\r\n\t\toptionsPlayer.min = scale.min;\r\n\t\toptionsPlayer.max = scale.max;\r\n\t\telSlider.max = optionsPlayer.marks - 1;\r\n*/\t\t\r\n\t\telSlider.max = scale.marks - 1;\r\n\t\toptions.player.selectScene( 0 );\r\n//\t\tthis.setIndex( 0, scale.name + ': ' + scale.min );\r\n\r\n\t}\r\n\tthis.setSpatialMultiplexs = function ( mode, res ) {\r\n\r\n\t\tmenuItemStereoEffect.items.forEach( function ( item ) {\r\n\r\n\t\t\tif ( item.spatialMultiplex === mode ) {\r\n\r\n\t\t\t\tif ( !item.checked ) {\r\n\r\n\t\t\t\t\titem.elName.onclick( { target: item.elName });\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\t\tif( mode !== spatialMultiplexsIndexs.Mono )\r\n\t\t\tfullScreenSettings.setFullScreen( res, false );\r\n\r\n\t}\r\n\tthis.setPlayer = function ( player ) {\r\n\r\n\t\toptions.player = player;\r\n\t\tplayer.controllers.push( this );\r\n\t\telSlider.value = 0;\r\n\r\n\t}\r\n\tif ( options.player !== undefined )\r\n\t\toptions.player.pushController( this );\r\n\tvar elMenu, elSlider;//, sliderTitle = lang.animateSceneId;//'Animate scene id ';\r\n\r\n}"],"names":["___$insertStyle","css","window","style","document","createElement","setAttribute","innerHTML","head","appendChild","colorToString","color","forceCSSHex","colorFormat","__state","conversionName","toString","r","Math","round","g","b","a","h","s","toFixed","v","str","hex","length","ARR_EACH","Array","prototype","forEach","ARR_SLICE","slice","Common","extend","target","each","call","arguments","obj","keys","isObject","Object","key","isUndefined","bind","defaults","compose","toCall","args","i","apply","itr","scope","l","BREAK","_key","defer","fnc","debounce","func","threshold","callImmediately","timeout","delayed","callNow","setTimeout","toArray","undefined","isNull","_isNaN","isNaN","_x","isArray","constructor","isNumber","isString","isBoolean","isFunction","INTERPRETATIONS","read","original","test","match","parseInt","parseFloat","write","result","toReturn","interpret","family","litmus","conversions","conversion","tmpComponent","ColorMath","hsv_to_rgb","hi","floor","f","p","q","t","c","rgb_to_hsv","min","max","delta","NaN","rgb_to_hex","hex_with_component","component_from_hex","componentIndex","value","_typeof","Symbol","babelHelpers.typeof","iterator","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","inherits","subClass","superClass","create","setPrototypeOf","__proto__","possibleConstructorReturn","self","ReferenceError","Color","Error","toHexString","toOriginal","defineRGBComponent","component","componentHexIndex","get$$1","space","recalculateRGB","set$$1","defineHSVComponent","recalculateHSV","COMPONENTS","Controller","initialValue","domElement","__onChange","__onFinishChange","onChange","onFinishChange","setValue","newValue","updateDisplay","getValue","isModified","EVENT_MAP","EVENT_MAP_INV","k","e","CSS_VALUE_PIXELS","cssValueToPixels","val","dom","makeSelectable","elem","selectable","onselectstart","MozUserSelect","KhtmlUserSelect","unselectable","makeFullscreen","hor","vert","vertical","horizontal","position","left","right","top","bottom","fakeEvent","eventType","pars","aux","params","className","evt","createEvent","clientX","x","clientY","y","initMouseEvent","bubbles","cancelable","clickCount","init","initKeyboardEvent","initKeyEvent","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode","initEvent","dispatchEvent","event","newBool","bool","addEventListener","attachEvent","unbind","removeEventListener","detachEvent","addClass","classes","split","indexOf","push","join","replace","removeClass","removeAttribute","index","splice","hasClass","RegExp","getWidth","getComputedStyle","width","getHeight","height","getOffset","el","offset","offsetParent","offsetLeft","offsetTop","isActive","activeElement","type","href","BooleanController","_Controller","_this2","_this","__prev","__checkbox","checked","OptionController","opts","options","__select","map","element","opt","desiredValue","selectedIndex","StringController","__input","onBlur","blur","numDecimals","NumberController","_params","__min","__max","__step","step","__impliedStep","pow","log","abs","LN10","__precision","_v","minValue","maxValue","stepValue","roundToDecimal","decimals","tenTo","NumberControllerBox","_NumberController","__truncationSuspended","prevY","attempted","onFinish","onMouseDrag","diff","onMouseUp","onMouseDown","i1","i2","o1","o2","NumberControllerSlider","__background","__foreground","onTouchStart","preventDefault","bgRect","getBoundingClientRect","touches","onTouchMove","onTouchEnd","pct","FunctionController","text","__button","fire","ColorController","__color","__temp","__selector","__saturation_field","__field_knob","__field_knob_border","__hue_knob","__hue_field","__input_textShadow","valueField","fieldDown","fieldDownH","setSV","fieldUpSV","setH","fieldUpH","fieldRect","_ref","_ref2","mismatch","flip","_flip","marginTop","vendors","linearGradient","background","vendor","cssText","hueGradient","ControllerFactory","CustomController","newController","_controller","load","url","indoc","doc","link","rel","getElementsByTagName","inject","cssContent","injected","saveDialogContents","requestAnimationFrame","callback","requestAnimationFrame$1","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","CenteredDiv","backgroundElement","body","hide","show","display","opacity","webkitTransform","layout","innerWidth","innerHeight","styleSheet","CSS_NAMESPACE","HIDE_KEY_CODE","CLOSE_BUTTON_HEIGHT","DEFAULT_DEFAULT_PRESET_NAME","SUPPORTS_LOCAL_STORAGE","localStorage","SAVE_DIALOGUE","autoPlaceVirgin","autoPlaceContainer","hideableGuis","GUI","__ul","__folders","__controllers","__rememberedObjects","__rememberedObjectIndecesToControllers","__listening","DEFAULT_WIDTH","autoPlace","preset","hideable","resizable","scrollable","useLocalStorage","getItem","getLocalStorageHash","saveToLocalStorage","titleRow","closeOnTop","getRoot","revert","name","closed","CLASS_CLOSED","onResize","__closeButton","TEXT_OPEN","TEXT_CLOSED","setItem","CLASS_MAIN","savedGui","JSON","parse","CLASS_CLOSE_BUTTON","CLASS_CLOSE_TOP","insertBefore","childNodes","CLASS_CLOSE_BOTTOM","titleRowName","createTextNode","addRow","onClickTitle","CLASS_AUTO_PLACE_CONTAINER","CLASS_AUTO_PLACE","__resizeHandler","onResizeDebounced","stringify","getSaveObject","saveToLocalStorageIfPossible","resetWidth","root","toggleHide","gui","CLASS_CONTROLLER_ROW","CLASS_TOO_TALL","CLASS_DRAG","_keydownHandler","which","add","_add","addColor","remove","controller","removeChild","__li","destroy","subfolder","removeFolder","addFolder","newGuiParams","folders","li","folder","parentElement","open","close","node","__save_row","__resize_handle","offsetHeight","remember","remembered","getCurrentPreset","save","saveAs","presetName","listen","newDom","liBefore","removeListeners","markPresetModified","modified","__preset_select","augmentController","__gui","_options","nextSibling","nextElementSibling","_nextSibling","_name","firstElementChild","box","method","pc","pb","returned","oldName","wasListening","stopPropagation","borderLeftColor","recallSavedValue","matchedIndex","controllerMap","presetMap","customObject","factoryArgs","concat","before","propertyName","container","location","addPresetOption","setSelected","showHideExplain","explain","addSaveMenu","div","firstChild","gears","button","button2","button3","select","getElementById","localStorageCheckBox","saveLocally","newConstructorTextArea","focus","prompt","addResizeHandle","pmouseX","drag","dragStop","dragStart","setWidth","w","useInitialValues","savedValues","setPresetSelectIndex","updateDisplays","controllerArray","controllers","getLanguageCode","_getLocale","navigator","error","languages","language","browserLanguage","systemLanguage","userLanguage","toLowerCase","lang","prevSymbolTitle","playTitle","nextSymbolTitle","pauseTitle","repeatOn","repeatOff","controllerTitle","fullScreen","nonFullScreen","stereoEffects","mono","sideBySide","topAndBottom","addButton","title","onclick","cursor","margin","PlayController","player","_getGroup","_selectScene","_renamePlayButtons","_renameRepeatButtons","colorOff","colorOn","customController","buttons","RenamePlayButtons","buttonPlay","buttonPrev","prevSymbol","prev","playSymbol","play3DObject","RenameRepeatButtons","isRepeat","buttonRepeat","onChangeRepeat","repeat","getOptions","buttonNext","nextSymbol","next","getGroup","group","onRenamePlayButtons","playing","pause","getSettings","pushController","onChangeTimerId","selectScene","myRequest","loadXMLDoc","req","XMLHttpRequest","ActiveXObject","NewActiveXObject","XMLHttpRequestStart","onreadystatechange","async","XMLHttpRequestStop","onerror","XMLHttpRequestReStart","getUrl","ontimeout","timeout_id_SendReq","send","message","abort","ProcessReqChange","processStatus200","readyState","status","processStatus200Error","GetElementText","tagName","noDisplayErrorMessage","xmlhttp","responseXML","ErrorMessage","responseText","textContent","data","appName","appVersion","sync","onload","response","request","src","appendTo","isScriptExists","optionsItem","tag","item","script","loadFileSync","loadScriptBase","isrc","srcAsync","_onload","attribute","elParent","scripts","querySelectorAll","child","id","loadScript","optionsStyle","arrayMenu","querySelector","elMenu","classList","contains","timeoutControls","displayControls","canvas","onmouseout","onmousemove","menuItem","dropdownChild","moveUpLeft","drop","elDropdownChild","up","elMenuButton","offsetWidth","decorations","radio","items","itemItem","elName","classChecked","getItemName","checkbox","getElementFromEvent","srcElement","clientWidth","elContainer","elCanvas","THREE","stereoEffect","spatialMultiplexsIndexs","menu","menuItemStereoEffect","Mono","setSpatialMultiplex","spatialMultiplex","SbS","onFullScreen","TaB","fullScreenSettings","canvasMenu","isFullScreen","setFullScreen","res","fs","size","Vector2","renderer","getSize","setSize","sizeOriginal","camera","aspect","updateProjectionMatrix","setFullScreenButton","onFullScreenToggle","marks","dropdownMenuCreate","onOver","elSlider","onchange","oninput","elMenuButtonFullScreen","itemWidth","computedStyle","styleWidth","elSliderCur","sliderWidth","setIndex","elMenuButtonPlay","elMenuButtonRepeat","onChangeScale","scale","setSpatialMultiplexs","mode","setPlayer"],"mappings":"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"}