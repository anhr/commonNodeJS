<!DOCTYPE html>

<html>
<head>
	<title>FrustumPoints</title>
	<!--<link type="text/css" rel="stylesheet" href="https://threejs.org/examples/main.css">-->
	<link type="text/css" rel="stylesheet" href="../../../../three.js/dev/examples/main.css">

	<!-- Three.js Full Screen Issue https://stackoverflow.com/questions/10425310/three-js-full-screen-issue/15633516 -->
	<!--<link type="text/css" rel="stylesheet" href="https://raw.githack.com/anhr/commonNodeJS/master/css/main.css">-->
	<link type="text/css" rel="stylesheet" href="../../css/main.css">

</head>
<body>
	<div id="info">
		<a href="https://threejs.org/" target="_blank" rel="noopener">three.js</a> - FrustumPoints - Array of points, statically fixed in front of the camera.
		By <a href="https://github.com/anhr" target="_blank" rel="noopener">anhr</a>
	</div>
	<div>
		<canvas id="canvas"></canvas>
	</div>

	<script type="module">

		//import * as THREE from 'https://threejs.org/build/three.module.js';
		//import * as THREE from 'https://raw.githack.com/anhr/three.js/dev/build/three.module.js';
		//import * as THREE from 'https://raw.githack.com/anhr/three.js/dev/build/three.module.min.js';
		import * as THREE from '../../../../three.js/dev/build/three.module.js';

		import three from '../../three.js'
		three.THREE = THREE;

		//import { OrbitControls } from 'https://threejs.org/examples/jsm/controls/OrbitControls.js';
		//import { OrbitControls } from 'https://raw.githack.com/anhr/three.js/dev/examples/jsm/controls/OrbitControls.js';
		import { OrbitControls } from '../../../../three.js/dev/examples/jsm/controls/OrbitControls.js';//https://github.com/anhr/three.js

		//import FrustumPoints from 'https://raw.githack.com/anhr/commonNodeJS/master/frustumPoints/frustumPoints.js';
		import FrustumPoints from '../frustumPoints.js';

		import MyPoints from '../../myPoints/myPoints.js';
		//import MyPoints from 'https://raw.githack.com/anhr/commonNodeJS/master/myPoints/myPoints.js';

		var camera, scene, renderer, controls;

		init();
		animate();

		function init() {

			camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 0.01, 10 );
			camera.position.copy( new THREE.Vector3( 0.4, 0.4, 2 ) );

			scene = new THREE.Scene();

			const options = {}, frustumPoints = new FrustumPoints( camera, scene, options );

			MyPoints( [
				//[],
				//new THREE.Vector4( 0, 0, 0, 0 ),//Blue color
				//new THREE.Vector2(),
				{ vector: new THREE.Vector4( 0, 0, 0, 0 )},//Blue color
				[
					0.5,//x
					0.5,//y
					0.5,//z
					0.5//w. Palette index. Default range from 0 to 1. See https://github.com/anhr/commonNodeJS/tree/master/colorpicker
				]
				], scene, {

					options: options,
					pointsOptions: {

						frustumPoints: frustumPoints,
						//shaderMaterial: false,

					}

			} );

			const cube = new THREE.Mesh( new THREE.BoxGeometry(), new THREE.MeshBasicMaterial( {

				color: 0x00ff00,
				opacity: 0.8,
				transparent: true,

			} ) );
			cube.position.x = 1.5;
			scene.add( cube );

			renderer = new THREE.WebGLRenderer( {

				antialias: true,
				canvas: document.getElementById( 'canvas' ),

			} );
			renderer.setSize( window.innerWidth, window.innerHeight );

			frustumPoints.create( renderer );

			if ( typeof OrbitControls !== 'undefined' ) {

				controls = new OrbitControls( camera, renderer.domElement );
				controls.target.set( 0, 0, 0 );
				controls.saveState();//For reset of the orbitControls settings in the CameraGui and OrbitControlsGui
				controls.update();

			}

			if ( typeof FrustumPoints !== 'undefined' )
				new FrustumPoints( THREE, camera, scene, renderer );

			window.addEventListener( 'resize', onWindowResize, false );

		}
		function onWindowResize() {

			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();

			renderer.setSize( window.innerWidth, window.innerHeight );

		}

		function animate() {

			requestAnimationFrame( animate );

			renderer.render( scene, camera );

		}

	</script>
</body>
</html>
